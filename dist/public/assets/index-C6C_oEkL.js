import{r as i,R as oc,j as e,c as Oe,a as aa,u as le,B as ic,P as G,b as Dt,d as Ae,e as K,f as ke,V as oa,g as lc,h as cc,i as ia,k as Jt,l as dc,m as Ps,D as la,C as ca,n as uc,o as mc,A as Tr,p as da,S as hc,q as Es,s as Mr,O as ss,t as Ir,v as rs,w as ua,T as Rs,x as Ts,y as Ar,z as ma,E as ha,I as fc,F as fa,G as pa,H as pc,J as xa,K as xc,L as ga,M as va,N as gc,Q as vc,U as ba,W as bc,X as yc,Y as Ms,Z as ya,_ as wa,$ as Xe,a0 as Dr,a1 as Or,a2 as Zt,a3 as wc,a4 as jc,a5 as Nc,a6 as Cc,a7 as Sc,a8 as kc}from"./ui-BViAPeNg.js";import{a as Pc,r as Ec}from"./vendor-D3F3s8fL.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(a){if(a.ep)return;a.ep=!0;const o=r(a);fetch(a.href,o)}})();var ds={},yn;function Rc(){if(yn)return ds;yn=1;var t=Pc();return ds.createRoot=t.createRoot,ds.hydrateRoot=t.hydrateRoot,ds}var Tc=Rc();function Mc(t,s){if(t instanceof RegExp)return{keys:!1,pattern:t};var r,n,a,o,l=[],c="",d=t.split("/");for(d[0]||d.shift();a=d.shift();)r=a[0],r==="*"?(l.push(r),c+=a[1]==="?"?"(?:/(.*))?":"/(.*)"):r===":"?(n=a.indexOf("?",1),o=a.indexOf(".",1),l.push(a.substring(1,~n?n:~o?o:a.length)),c+=~n&&!~o?"(?:/([^/]+?))?":"/([^/]+?)",~o&&(c+=(~n?"?":"")+"\\"+a.substring(o))):c+="/"+a;return{keys:l,pattern:new RegExp("^"+c+(s?"(?=$|/)":"/?$"),"i")}}var Ks={exports:{}},Gs={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wn;function Ic(){if(wn)return Gs;wn=1;var t=Ec();function s(f,h){return f===h&&(f!==0||1/f===1/h)||f!==f&&h!==h}var r=typeof Object.is=="function"?Object.is:s,n=t.useState,a=t.useEffect,o=t.useLayoutEffect,l=t.useDebugValue;function c(f,h){var v=h(),p=n({inst:{value:v,getSnapshot:h}}),g=p[0].inst,x=p[1];return o(function(){g.value=v,g.getSnapshot=h,d(g)&&x({inst:g})},[f,v,h]),a(function(){return d(g)&&x({inst:g}),f(function(){d(g)&&x({inst:g})})},[f]),l(v),v}function d(f){var h=f.getSnapshot;f=f.value;try{var v=h();return!r(f,v)}catch{return!0}}function u(f,h){return h()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:c;return Gs.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:m,Gs}var jn;function Ac(){return jn||(jn=1,Ks.exports=Ic()),Ks.exports}var ja=Ac();const Dc=oc.useInsertionEffect,Oc=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Na=Oc?i.useLayoutEffect:i.useEffect,Fc=Dc||Na,Fr=t=>{const s=i.useRef([t,(...r)=>s[0](...r)]).current;return Fc(()=>{s[0]=t}),s[1]},Lc="popstate",Lr="pushState",_r="replaceState",_c="hashchange",Nn=[Lc,Lr,_r,_c],qc=t=>{for(const s of Nn)addEventListener(s,t);return()=>{for(const s of Nn)removeEventListener(s,t)}},Ca=(t,s)=>ja.useSyncExternalStore(qc,t,s),$c=()=>location.search,zc=({ssrSearch:t=""}={})=>Ca($c,()=>t),Cn=()=>location.pathname,Uc=({ssrPath:t}={})=>Ca(Cn,t?()=>t:Cn),Vc=(t,{replace:s=!1,state:r=null}={})=>history[s?_r:Lr](r,"",t),Wc=(t={})=>[Uc(t),Vc],Sn=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[Sn]>"u"){for(const t of[Lr,_r]){const s=history[t];history[t]=function(){const r=s.apply(this,arguments),n=new Event(t);return n.arguments=arguments,dispatchEvent(n),r}}Object.defineProperty(window,Sn,{value:!0})}const Bc=(t,s)=>s.toLowerCase().indexOf(t.toLowerCase())?"~"+s:s.slice(t.length)||"/",Sa=(t="")=>t==="/"?"":t,Hc=(t,s)=>t[0]==="~"?t.slice(1):Sa(s)+t,Kc=(t="",s)=>Bc(kn(Sa(t)),kn(s)),kn=t=>{try{return decodeURI(t)}catch{return t}},ka={hook:Wc,searchHook:zc,parser:Mc,base:"",ssrPath:void 0,ssrSearch:void 0,ssrContext:void 0,hrefs:t=>t},Pa=i.createContext(ka),Ot=()=>i.useContext(Pa),Ea={},Ra=i.createContext(Ea),qr=()=>i.useContext(Ra),ns=t=>{const[s,r]=t.hook(t);return[Kc(t.base,s),Fr((n,a)=>r(Hc(n,t.base),a))]},xe=()=>ns(Ot()),Ta=(t,s,r,n)=>{const{pattern:a,keys:o}=s instanceof RegExp?{keys:!1,pattern:s}:t(s||"*",n),l=a.exec(r)||[],[c,...d]=l;return c!==void 0?[!0,(()=>{const u=o!==!1?Object.fromEntries(o.map((f,h)=>[f,d[h]])):l.groups;let m={...d};return u&&Object.assign(m,u),m})(),...n?[c]:[]]:[!1,null]},Gc=({children:t,...s})=>{const r=Ot(),n=s.hook?ka:r;let a=n;const[o,l]=s.ssrPath?.split("?")??[];l&&(s.ssrSearch=l,s.ssrPath=o),s.hrefs=s.hrefs??s.hook?.hrefs;let c=i.useRef({}),d=c.current,u=d;for(let m in n){const f=m==="base"?n[m]+(s[m]||""):s[m]||n[m];d===u&&f!==u[m]&&(c.current=u={...u}),u[m]=f,(f!==n[m]||f!==a[m])&&(a=u)}return i.createElement(Pa.Provider,{value:a,children:t})},Pn=({children:t,component:s},r)=>s?i.createElement(s,{params:r}):typeof t=="function"?t(r):t,Qc=t=>{let s=i.useRef(Ea);const r=s.current;return s.current=Object.keys(t).length!==Object.keys(r).length||Object.entries(t).some(([n,a])=>a!==r[n])?t:r},Ge=({path:t,nest:s,match:r,...n})=>{const a=Ot(),[o]=ns(a),[l,c,d]=r??Ta(a.parser,t,o,s),u=Qc({...qr(),...c});if(!l)return null;const m=d?i.createElement(Gc,{base:d},Pn(n,u)):Pn(n,u);return i.createElement(Ra.Provider,{value:u,children:m})},Ma=i.forwardRef((t,s)=>{const r=Ot(),[n,a]=ns(r),{to:o="",href:l=o,onClick:c,asChild:d,children:u,className:m,replace:f,state:h,...v}=t,p=Fr(x=>{x.ctrlKey||x.metaKey||x.altKey||x.shiftKey||x.button!==0||(c?.(x),x.defaultPrevented||(x.preventDefault(),a(l,t)))}),g=r.hrefs(l[0]==="~"?l.slice(1):r.base+l,r);return d&&i.isValidElement(u)?i.cloneElement(u,{onClick:p,href:g}):i.createElement("a",{...v,onClick:p,href:g,className:m?.call?m(n===l):m,children:u,ref:s})}),Ia=t=>Array.isArray(t)?t.flatMap(s=>Ia(s&&s.type===i.Fragment?s.props.children:s)):[t],Yc=({children:t,location:s})=>{const r=Ot(),[n]=ns(r);for(const a of Ia(t)){let o=0;if(i.isValidElement(a)&&(o=Ta(r.parser,a.props.path,s||n,a.props.nest))[0])return i.cloneElement(a,{match:o})}return null},Xc=t=>{const{to:s,href:r=s}=t,n=Ot(),[,a]=ns(n),o=Fr(()=>a(s||r,t)),{ssrContext:l}=n;return Na(()=>{o()},[]),l&&(l.redirectTo=s),null};var Ft=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Jc={setTimeout:(t,s)=>setTimeout(t,s),clearTimeout:t=>clearTimeout(t),setInterval:(t,s)=>setInterval(t,s),clearInterval:t=>clearInterval(t)},Zc=class{#e=Jc;#t=!1;setTimeoutProvider(t){this.#e=t}setTimeout(t,s){return this.#e.setTimeout(t,s)}clearTimeout(t){this.#e.clearTimeout(t)}setInterval(t,s){return this.#e.setInterval(t,s)}clearInterval(t){this.#e.clearInterval(t)}},mt=new Zc;function ed(t){setTimeout(t,0)}var pt=typeof window>"u"||"Deno"in globalThis;function ve(){}function td(t,s){return typeof t=="function"?t(s):t}function lr(t){return typeof t=="number"&&t>=0&&t!==1/0}function Aa(t,s){return Math.max(t+(s||0)-Date.now(),0)}function Je(t,s){return typeof t=="function"?t(s):t}function Se(t,s){return typeof t=="function"?t(s):t}function En(t,s){const{type:r="all",exact:n,fetchStatus:a,predicate:o,queryKey:l,stale:c}=t;if(l){if(n){if(s.queryHash!==$r(l,s.options))return!1}else if(!es(s.queryKey,l))return!1}if(r!=="all"){const d=s.isActive();if(r==="active"&&!d||r==="inactive"&&d)return!1}return!(typeof c=="boolean"&&s.isStale()!==c||a&&a!==s.state.fetchStatus||o&&!o(s))}function Rn(t,s){const{exact:r,status:n,predicate:a,mutationKey:o}=t;if(o){if(!s.options.mutationKey)return!1;if(r){if(xt(s.options.mutationKey)!==xt(o))return!1}else if(!es(s.options.mutationKey,o))return!1}return!(n&&s.state.status!==n||a&&!a(s))}function $r(t,s){return(s?.queryKeyHashFn||xt)(t)}function xt(t){return JSON.stringify(t,(s,r)=>cr(r)?Object.keys(r).sort().reduce((n,a)=>(n[a]=r[a],n),{}):r)}function es(t,s){return t===s?!0:typeof t!=typeof s?!1:t&&s&&typeof t=="object"&&typeof s=="object"?Object.keys(s).every(r=>es(t[r],s[r])):!1}var sd=Object.prototype.hasOwnProperty;function Da(t,s){if(t===s)return t;const r=Tn(t)&&Tn(s);if(!r&&!(cr(t)&&cr(s)))return s;const a=(r?t:Object.keys(t)).length,o=r?s:Object.keys(s),l=o.length,c=r?new Array(l):{};let d=0;for(let u=0;u<l;u++){const m=r?u:o[u],f=t[m],h=s[m];if(f===h){c[m]=f,(r?u<a:sd.call(t,m))&&d++;continue}if(f===null||h===null||typeof f!="object"||typeof h!="object"){c[m]=h;continue}const v=Da(f,h);c[m]=v,v===f&&d++}return a===l&&d===a?t:c}function bs(t,s){if(!s||Object.keys(t).length!==Object.keys(s).length)return!1;for(const r in t)if(t[r]!==s[r])return!1;return!0}function Tn(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function cr(t){if(!Mn(t))return!1;const s=t.constructor;if(s===void 0)return!0;const r=s.prototype;return!(!Mn(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function Mn(t){return Object.prototype.toString.call(t)==="[object Object]"}function rd(t){return new Promise(s=>{mt.setTimeout(s,t)})}function dr(t,s,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,s):r.structuralSharing!==!1?Da(t,s):s}function nd(t,s,r=0){const n=[...t,s];return r&&n.length>r?n.slice(1):n}function ad(t,s,r=0){const n=[s,...t];return r&&n.length>r?n.slice(0,-1):n}var zr=Symbol();function Oa(t,s){return!t.queryFn&&s?.initialPromise?()=>s.initialPromise:!t.queryFn||t.queryFn===zr?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function Fa(t,s){return typeof t=="function"?t(...s):!!t}var od=class extends Ft{#e;#t;#s;constructor(){super(),this.#s=t=>{if(!pt&&window.addEventListener){const s=()=>t();return window.addEventListener("visibilitychange",s,!1),()=>{window.removeEventListener("visibilitychange",s)}}}}onSubscribe(){this.#t||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#s=t,this.#t?.(),this.#t=t(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()})}setFocused(t){this.#e!==t&&(this.#e=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(s=>{s(t)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},Ur=new od;function ur(){let t,s;const r=new Promise((a,o)=>{t=a,s=o});r.status="pending",r.catch(()=>{});function n(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{n({status:"fulfilled",value:a}),t(a)},r.reject=a=>{n({status:"rejected",reason:a}),s(a)},r}var id=ed;function ld(){let t=[],s=0,r=c=>{c()},n=c=>{c()},a=id;const o=c=>{s?t.push(c):a(()=>{r(c)})},l=()=>{const c=t;t=[],c.length&&a(()=>{n(()=>{c.forEach(d=>{r(d)})})})};return{batch:c=>{let d;s++;try{d=c()}finally{s--,s||l()}return d},batchCalls:c=>(...d)=>{o(()=>{c(...d)})},schedule:o,setNotifyFunction:c=>{r=c},setBatchNotifyFunction:c=>{n=c},setScheduler:c=>{a=c}}}var de=ld(),cd=class extends Ft{#e=!0;#t;#s;constructor(){super(),this.#s=t=>{if(!pt&&window.addEventListener){const s=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",s,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",r)}}}}onSubscribe(){this.#t||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#s=t,this.#t?.(),this.#t=t(this.setOnline.bind(this))}setOnline(t){this.#e!==t&&(this.#e=t,this.listeners.forEach(r=>{r(t)}))}isOnline(){return this.#e}},ys=new cd;function dd(t){return Math.min(1e3*2**t,3e4)}function La(t){return(t??"online")==="online"?ys.isOnline():!0}var mr=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function _a(t){let s=!1,r=0,n;const a=ur(),o=()=>a.status!=="pending",l=g=>{if(!o()){const x=new mr(g);h(x),t.onCancel?.(x)}},c=()=>{s=!0},d=()=>{s=!1},u=()=>Ur.isFocused()&&(t.networkMode==="always"||ys.isOnline())&&t.canRun(),m=()=>La(t.networkMode)&&t.canRun(),f=g=>{o()||(n?.(),a.resolve(g))},h=g=>{o()||(n?.(),a.reject(g))},v=()=>new Promise(g=>{n=x=>{(o()||u())&&g(x)},t.onPause?.()}).then(()=>{n=void 0,o()||t.onContinue?.()}),p=()=>{if(o())return;let g;const x=r===0?t.initialPromise:void 0;try{g=x??t.fn()}catch(b){g=Promise.reject(b)}Promise.resolve(g).then(f).catch(b=>{if(o())return;const w=t.retry??(pt?0:3),k=t.retryDelay??dd,y=typeof k=="function"?k(r,b):k,P=w===!0||typeof w=="number"&&r<w||typeof w=="function"&&w(r,b);if(s||!P){h(b);return}r++,t.onFail?.(r,b),rd(y).then(()=>u()?void 0:v()).then(()=>{s?h(b):p()})})};return{promise:a,status:()=>a.status,cancel:l,continue:()=>(n?.(),a),cancelRetry:c,continueRetry:d,canStart:m,start:()=>(m()?p():v().then(p),a)}}var qa=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),lr(this.gcTime)&&(this.#e=mt.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(pt?1/0:300*1e3))}clearGcTimeout(){this.#e&&(mt.clearTimeout(this.#e),this.#e=void 0)}},ud=class extends qa{#e;#t;#s;#n;#r;#o;#i;constructor(t){super(),this.#i=!1,this.#o=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#n=t.client,this.#s=this.#n.getQueryCache(),this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#e=In(this.options),this.state=t.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#r?.promise}setOptions(t){if(this.options={...this.#o,...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const s=In(this.options);s.data!==void 0&&(this.setData(s.data,{updatedAt:s.dataUpdatedAt,manual:!0}),this.#e=s)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#s.remove(this)}setData(t,s){const r=dr(this.state.data,t,this.options);return this.#a({data:r,type:"success",dataUpdatedAt:s?.updatedAt,manual:s?.manual}),r}setState(t,s){this.#a({type:"setState",state:t,setStateOptions:s})}cancel(t){const s=this.#r?.promise;return this.#r?.cancel(t),s?s.then(ve).catch(ve):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(t=>Se(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===zr||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Je(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!Aa(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(s=>s.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#r?.continue()}onOnline(){this.observers.find(s=>s.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#r?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#s.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(s=>s!==t),this.observers.length||(this.#r&&(this.#i?this.#r.cancel({revert:!0}):this.#r.cancelRetry()),this.scheduleGc()),this.#s.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#a({type:"invalidate"})}async fetch(t,s){if(this.state.fetchStatus!=="idle"&&this.#r?.status()!=="rejected"){if(this.state.data!==void 0&&s?.cancelRefetch)this.cancel({silent:!0});else if(this.#r)return this.#r.continueRetry(),this.#r.promise}if(t&&this.setOptions(t),!this.options.queryFn){const c=this.observers.find(d=>d.options.queryFn);c&&this.setOptions(c.options)}const r=new AbortController,n=c=>{Object.defineProperty(c,"signal",{enumerable:!0,get:()=>(this.#i=!0,r.signal)})},a=()=>{const c=Oa(this.options,s),u=(()=>{const m={client:this.#n,queryKey:this.queryKey,meta:this.meta};return n(m),m})();return this.#i=!1,this.options.persister?this.options.persister(c,u,this):c(u)},l=(()=>{const c={fetchOptions:s,options:this.options,queryKey:this.queryKey,client:this.#n,state:this.state,fetchFn:a};return n(c),c})();this.options.behavior?.onFetch(l,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==l.fetchOptions?.meta)&&this.#a({type:"fetch",meta:l.fetchOptions?.meta}),this.#r=_a({initialPromise:s?.initialPromise,fn:l.fetchFn,onCancel:c=>{c instanceof mr&&c.revert&&this.setState({...this.#t,fetchStatus:"idle"}),r.abort()},onFail:(c,d)=>{this.#a({type:"failed",failureCount:c,error:d})},onPause:()=>{this.#a({type:"pause"})},onContinue:()=>{this.#a({type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0});try{const c=await this.#r.start();if(c===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(c),this.#s.config.onSuccess?.(c,this),this.#s.config.onSettled?.(c,this.state.error,this),c}catch(c){if(c instanceof mr){if(c.silent)return this.#r.promise;if(c.revert){if(this.state.data===void 0)throw c;return this.state.data}}throw this.#a({type:"error",error:c}),this.#s.config.onError?.(c,this),this.#s.config.onSettled?.(this.state.data,c,this),c}finally{this.scheduleGc()}}#a(t){const s=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...$a(r.data,this.options),fetchMeta:t.meta??null};case"success":const n={...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=t.manual?n:void 0,n;case"error":const a=t.error;return{...r,error:a,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=s(this.state),de.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),this.#s.notify({query:this,type:"updated",action:t})})}};function $a(t,s){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:La(s.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function In(t){const s=typeof t.initialData=="function"?t.initialData():t.initialData,r=s!==void 0,n=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:s,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var md=class extends Ft{constructor(t,s){super(),this.options=s,this.#e=t,this.#a=null,this.#i=ur(),this.bindMethods(),this.setOptions(s)}#e;#t=void 0;#s=void 0;#n=void 0;#r;#o;#i;#a;#p;#m;#h;#c;#d;#l;#f=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),An(this.#t,this.options)?this.#u():this.updateResult(),this.#b())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return hr(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return hr(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#y(),this.#w(),this.#t.removeObserver(this)}setOptions(t){const s=this.options,r=this.#t;if(this.options=this.#e.defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Se(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#j(),this.#t.setOptions(this.options),s._defaulted&&!bs(this.options,s)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const n=this.hasListeners();n&&Dn(this.#t,r,this.options,s)&&this.#u(),this.updateResult(),n&&(this.#t!==r||Se(this.options.enabled,this.#t)!==Se(s.enabled,this.#t)||Je(this.options.staleTime,this.#t)!==Je(s.staleTime,this.#t))&&this.#x();const a=this.#g();n&&(this.#t!==r||Se(this.options.enabled,this.#t)!==Se(s.enabled,this.#t)||a!==this.#l)&&this.#v(a)}getOptimisticResult(t){const s=this.#e.getQueryCache().build(this.#e,t),r=this.createResult(s,t);return fd(this,r)&&(this.#n=r,this.#o=this.options,this.#r=this.#t.state),r}getCurrentResult(){return this.#n}trackResult(t,s){return new Proxy(t,{get:(r,n)=>(this.trackProp(n),s?.(n),n==="promise"&&!this.options.experimental_prefetchInRender&&this.#i.status==="pending"&&this.#i.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(r,n))})}trackProp(t){this.#f.add(t)}getCurrentQuery(){return this.#t}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const s=this.#e.defaultQueryOptions(t),r=this.#e.getQueryCache().build(this.#e,s);return r.fetch().then(()=>this.createResult(r,s))}fetch(t){return this.#u({...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#n))}#u(t){this.#j();let s=this.#t.fetch(this.options,t);return t?.throwOnError||(s=s.catch(ve)),s}#x(){this.#y();const t=Je(this.options.staleTime,this.#t);if(pt||this.#n.isStale||!lr(t))return;const r=Aa(this.#n.dataUpdatedAt,t)+1;this.#c=mt.setTimeout(()=>{this.#n.isStale||this.updateResult()},r)}#g(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#v(t){this.#w(),this.#l=t,!(pt||Se(this.options.enabled,this.#t)===!1||!lr(this.#l)||this.#l===0)&&(this.#d=mt.setInterval(()=>{(this.options.refetchIntervalInBackground||Ur.isFocused())&&this.#u()},this.#l))}#b(){this.#x(),this.#v(this.#g())}#y(){this.#c&&(mt.clearTimeout(this.#c),this.#c=void 0)}#w(){this.#d&&(mt.clearInterval(this.#d),this.#d=void 0)}createResult(t,s){const r=this.#t,n=this.options,a=this.#n,o=this.#r,l=this.#o,d=t!==r?t.state:this.#s,{state:u}=t;let m={...u},f=!1,h;if(s._optimisticResults){const $=this.hasListeners(),N=!$&&An(t,s),F=$&&Dn(t,r,s,n);(N||F)&&(m={...m,...$a(u.data,t.options)}),s._optimisticResults==="isRestoring"&&(m.fetchStatus="idle")}let{error:v,errorUpdatedAt:p,status:g}=m;h=m.data;let x=!1;if(s.placeholderData!==void 0&&h===void 0&&g==="pending"){let $;a?.isPlaceholderData&&s.placeholderData===l?.placeholderData?($=a.data,x=!0):$=typeof s.placeholderData=="function"?s.placeholderData(this.#h?.state.data,this.#h):s.placeholderData,$!==void 0&&(g="success",h=dr(a?.data,$,s),f=!0)}if(s.select&&h!==void 0&&!x)if(a&&h===o?.data&&s.select===this.#p)h=this.#m;else try{this.#p=s.select,h=s.select(h),h=dr(a?.data,h,s),this.#m=h,this.#a=null}catch($){this.#a=$}this.#a&&(v=this.#a,h=this.#m,p=Date.now(),g="error");const b=m.fetchStatus==="fetching",w=g==="pending",k=g==="error",y=w&&b,P=h!==void 0,T={status:g,fetchStatus:m.fetchStatus,isPending:w,isSuccess:g==="success",isError:k,isInitialLoading:y,isLoading:y,data:h,dataUpdatedAt:m.dataUpdatedAt,error:v,errorUpdatedAt:p,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>d.dataUpdateCount||m.errorUpdateCount>d.errorUpdateCount,isFetching:b,isRefetching:b&&!w,isLoadingError:k&&!P,isPaused:m.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:k&&P,isStale:Vr(t,s),refetch:this.refetch,promise:this.#i,isEnabled:Se(s.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const $=O=>{T.status==="error"?O.reject(T.error):T.data!==void 0&&O.resolve(T.data)},N=()=>{const O=this.#i=T.promise=ur();$(O)},F=this.#i;switch(F.status){case"pending":t.queryHash===r.queryHash&&$(F);break;case"fulfilled":(T.status==="error"||T.data!==F.value)&&N();break;case"rejected":(T.status!=="error"||T.error!==F.reason)&&N();break}}return T}updateResult(){const t=this.#n,s=this.createResult(this.#t,this.options);if(this.#r=this.#t.state,this.#o=this.options,this.#r.data!==void 0&&(this.#h=this.#t),bs(s,t))return;this.#n=s;const r=()=>{if(!t)return!0;const{notifyOnChangeProps:n}=this.options,a=typeof n=="function"?n():n;if(a==="all"||!a&&!this.#f.size)return!0;const o=new Set(a??this.#f);return this.options.throwOnError&&o.add("error"),Object.keys(this.#n).some(l=>{const c=l;return this.#n[c]!==t[c]&&o.has(c)})};this.#N({listeners:r()})}#j(){const t=this.#e.getQueryCache().build(this.#e,this.options);if(t===this.#t)return;const s=this.#t;this.#t=t,this.#s=t.state,this.hasListeners()&&(s?.removeObserver(this),t.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#b()}#N(t){de.batch(()=>{t.listeners&&this.listeners.forEach(s=>{s(this.#n)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function hd(t,s){return Se(s.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&s.retryOnMount===!1)}function An(t,s){return hd(t,s)||t.state.data!==void 0&&hr(t,s,s.refetchOnMount)}function hr(t,s,r){if(Se(s.enabled,t)!==!1&&Je(s.staleTime,t)!=="static"){const n=typeof r=="function"?r(t):r;return n==="always"||n!==!1&&Vr(t,s)}return!1}function Dn(t,s,r,n){return(t!==s||Se(n.enabled,t)===!1)&&(!r.suspense||t.state.status!=="error")&&Vr(t,r)}function Vr(t,s){return Se(s.enabled,t)!==!1&&t.isStaleByTime(Je(s.staleTime,t))}function fd(t,s){return!bs(t.getCurrentResult(),s)}function On(t){return{onFetch:(s,r)=>{const n=s.options,a=s.fetchOptions?.meta?.fetchMore?.direction,o=s.state.data?.pages||[],l=s.state.data?.pageParams||[];let c={pages:[],pageParams:[]},d=0;const u=async()=>{let m=!1;const f=p=>{Object.defineProperty(p,"signal",{enumerable:!0,get:()=>(s.signal.aborted?m=!0:s.signal.addEventListener("abort",()=>{m=!0}),s.signal)})},h=Oa(s.options,s.fetchOptions),v=async(p,g,x)=>{if(m)return Promise.reject();if(g==null&&p.pages.length)return Promise.resolve(p);const w=(()=>{const j={client:s.client,queryKey:s.queryKey,pageParam:g,direction:x?"backward":"forward",meta:s.options.meta};return f(j),j})(),k=await h(w),{maxPages:y}=s.options,P=x?ad:nd;return{pages:P(p.pages,k,y),pageParams:P(p.pageParams,g,y)}};if(a&&o.length){const p=a==="backward",g=p?pd:Fn,x={pages:o,pageParams:l},b=g(n,x);c=await v(x,b,p)}else{const p=t??o.length;do{const g=d===0?l[0]??n.initialPageParam:Fn(n,c);if(d>0&&g==null)break;c=await v(c,g),d++}while(d<p)}return c};s.options.persister?s.fetchFn=()=>s.options.persister?.(u,{client:s.client,queryKey:s.queryKey,meta:s.options.meta,signal:s.signal},r):s.fetchFn=u}}}function Fn(t,{pages:s,pageParams:r}){const n=s.length-1;return s.length>0?t.getNextPageParam(s[n],s,r[n],r):void 0}function pd(t,{pages:s,pageParams:r}){return s.length>0?t.getPreviousPageParam?.(s[0],s,r[0],r):void 0}var xd=class extends qa{#e;#t;#s;#n;constructor(t){super(),this.#e=t.client,this.mutationId=t.mutationId,this.#s=t.mutationCache,this.#t=[],this.state=t.state||za(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#t.includes(t)||(this.#t.push(t),this.clearGcTimeout(),this.#s.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#t=this.#t.filter(s=>s!==t),this.scheduleGc(),this.#s.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#s.remove(this))}continue(){return this.#n?.continue()??this.execute(this.state.variables)}async execute(t){const s=()=>{this.#r({type:"continue"})},r={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#n=_a({fn:()=>this.options.mutationFn?this.options.mutationFn(t,r):Promise.reject(new Error("No mutationFn found")),onFail:(o,l)=>{this.#r({type:"failed",failureCount:o,error:l})},onPause:()=>{this.#r({type:"pause"})},onContinue:s,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#s.canRun(this)});const n=this.state.status==="pending",a=!this.#n.canStart();try{if(n)s();else{this.#r({type:"pending",variables:t,isPaused:a}),await this.#s.config.onMutate?.(t,this,r);const l=await this.options.onMutate?.(t,r);l!==this.state.context&&this.#r({type:"pending",context:l,variables:t,isPaused:a})}const o=await this.#n.start();return await this.#s.config.onSuccess?.(o,t,this.state.context,this,r),await this.options.onSuccess?.(o,t,this.state.context,r),await this.#s.config.onSettled?.(o,null,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(o,null,t,this.state.context,r),this.#r({type:"success",data:o}),o}catch(o){try{throw await this.#s.config.onError?.(o,t,this.state.context,this,r),await this.options.onError?.(o,t,this.state.context,r),await this.#s.config.onSettled?.(void 0,o,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(void 0,o,t,this.state.context,r),o}finally{this.#r({type:"error",error:o})}}finally{this.#s.runNext(this)}}#r(t){const s=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=s(this.state),de.batch(()=>{this.#t.forEach(r=>{r.onMutationUpdate(t)}),this.#s.notify({mutation:this,type:"updated",action:t})})}};function za(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var gd=class extends Ft{constructor(t={}){super(),this.config=t,this.#e=new Set,this.#t=new Map,this.#s=0}#e;#t;#s;build(t,s,r){const n=new xd({client:t,mutationCache:this,mutationId:++this.#s,options:t.defaultMutationOptions(s),state:r});return this.add(n),n}add(t){this.#e.add(t);const s=us(t);if(typeof s=="string"){const r=this.#t.get(s);r?r.push(t):this.#t.set(s,[t])}this.notify({type:"added",mutation:t})}remove(t){if(this.#e.delete(t)){const s=us(t);if(typeof s=="string"){const r=this.#t.get(s);if(r)if(r.length>1){const n=r.indexOf(t);n!==-1&&r.splice(n,1)}else r[0]===t&&this.#t.delete(s)}}this.notify({type:"removed",mutation:t})}canRun(t){const s=us(t);if(typeof s=="string"){const n=this.#t.get(s)?.find(a=>a.state.status==="pending");return!n||n===t}else return!0}runNext(t){const s=us(t);return typeof s=="string"?this.#t.get(s)?.find(n=>n!==t&&n.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){de.batch(()=>{this.#e.forEach(t=>{this.notify({type:"removed",mutation:t})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(t){const s={exact:!0,...t};return this.getAll().find(r=>Rn(s,r))}findAll(t={}){return this.getAll().filter(s=>Rn(t,s))}notify(t){de.batch(()=>{this.listeners.forEach(s=>{s(t)})})}resumePausedMutations(){const t=this.getAll().filter(s=>s.state.isPaused);return de.batch(()=>Promise.all(t.map(s=>s.continue().catch(ve))))}};function us(t){return t.options.scope?.id}var vd=class extends Ft{#e;#t=void 0;#s;#n;constructor(s,r){super(),this.#e=s,this.setOptions(r),this.bindMethods(),this.#r()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(s){const r=this.options;this.options=this.#e.defaultMutationOptions(s),bs(this.options,r)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#s,observer:this}),r?.mutationKey&&this.options.mutationKey&&xt(r.mutationKey)!==xt(this.options.mutationKey)?this.reset():this.#s?.state.status==="pending"&&this.#s.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#s?.removeObserver(this)}onMutationUpdate(s){this.#r(),this.#o(s)}getCurrentResult(){return this.#t}reset(){this.#s?.removeObserver(this),this.#s=void 0,this.#r(),this.#o()}mutate(s,r){return this.#n=r,this.#s?.removeObserver(this),this.#s=this.#e.getMutationCache().build(this.#e,this.options),this.#s.addObserver(this),this.#s.execute(s)}#r(){const s=this.#s?.state??za();this.#t={...s,isPending:s.status==="pending",isSuccess:s.status==="success",isError:s.status==="error",isIdle:s.status==="idle",mutate:this.mutate,reset:this.reset}}#o(s){de.batch(()=>{if(this.#n&&this.hasListeners()){const r=this.#t.variables,n=this.#t.context,a={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};s?.type==="success"?(this.#n.onSuccess?.(s.data,r,n,a),this.#n.onSettled?.(s.data,null,r,n,a)):s?.type==="error"&&(this.#n.onError?.(s.error,r,n,a),this.#n.onSettled?.(void 0,s.error,r,n,a))}this.listeners.forEach(r=>{r(this.#t)})})}},bd=class extends Ft{constructor(t={}){super(),this.config=t,this.#e=new Map}#e;build(t,s,r){const n=s.queryKey,a=s.queryHash??$r(n,s);let o=this.get(a);return o||(o=new ud({client:t,queryKey:n,queryHash:a,options:t.defaultQueryOptions(s),state:r,defaultOptions:t.getQueryDefaults(n)}),this.add(o)),o}add(t){this.#e.has(t.queryHash)||(this.#e.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const s=this.#e.get(t.queryHash);s&&(t.destroy(),s===t&&this.#e.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){de.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#e.get(t)}getAll(){return[...this.#e.values()]}find(t){const s={exact:!0,...t};return this.getAll().find(r=>En(s,r))}findAll(t={}){const s=this.getAll();return Object.keys(t).length>0?s.filter(r=>En(t,r)):s}notify(t){de.batch(()=>{this.listeners.forEach(s=>{s(t)})})}onFocus(){de.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){de.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},yd=class{#e;#t;#s;#n;#r;#o;#i;#a;constructor(t={}){this.#e=t.queryCache||new bd,this.#t=t.mutationCache||new gd,this.#s=t.defaultOptions||{},this.#n=new Map,this.#r=new Map,this.#o=0}mount(){this.#o++,this.#o===1&&(this.#i=Ur.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#a=ys.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#o--,this.#o===0&&(this.#i?.(),this.#i=void 0,this.#a?.(),this.#a=void 0)}isFetching(t){return this.#e.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#t.findAll({...t,status:"pending"}).length}getQueryData(t){const s=this.defaultQueryOptions({queryKey:t});return this.#e.get(s.queryHash)?.state.data}ensureQueryData(t){const s=this.defaultQueryOptions(t),r=this.#e.build(this,s),n=r.state.data;return n===void 0?this.fetchQuery(t):(t.revalidateIfStale&&r.isStaleByTime(Je(s.staleTime,r))&&this.prefetchQuery(s),Promise.resolve(n))}getQueriesData(t){return this.#e.findAll(t).map(({queryKey:s,state:r})=>{const n=r.data;return[s,n]})}setQueryData(t,s,r){const n=this.defaultQueryOptions({queryKey:t}),o=this.#e.get(n.queryHash)?.state.data,l=td(s,o);if(l!==void 0)return this.#e.build(this,n).setData(l,{...r,manual:!0})}setQueriesData(t,s,r){return de.batch(()=>this.#e.findAll(t).map(({queryKey:n})=>[n,this.setQueryData(n,s,r)]))}getQueryState(t){const s=this.defaultQueryOptions({queryKey:t});return this.#e.get(s.queryHash)?.state}removeQueries(t){const s=this.#e;de.batch(()=>{s.findAll(t).forEach(r=>{s.remove(r)})})}resetQueries(t,s){const r=this.#e;return de.batch(()=>(r.findAll(t).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...t},s)))}cancelQueries(t,s={}){const r={revert:!0,...s},n=de.batch(()=>this.#e.findAll(t).map(a=>a.cancel(r)));return Promise.all(n).then(ve).catch(ve)}invalidateQueries(t,s={}){return de.batch(()=>(this.#e.findAll(t).forEach(r=>{r.invalidate()}),t?.refetchType==="none"?Promise.resolve():this.refetchQueries({...t,type:t?.refetchType??t?.type??"active"},s)))}refetchQueries(t,s={}){const r={...s,cancelRefetch:s.cancelRefetch??!0},n=de.batch(()=>this.#e.findAll(t).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let o=a.fetch(void 0,r);return r.throwOnError||(o=o.catch(ve)),a.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(n).then(ve)}fetchQuery(t){const s=this.defaultQueryOptions(t);s.retry===void 0&&(s.retry=!1);const r=this.#e.build(this,s);return r.isStaleByTime(Je(s.staleTime,r))?r.fetch(s):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(ve).catch(ve)}fetchInfiniteQuery(t){return t.behavior=On(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(ve).catch(ve)}ensureInfiniteQueryData(t){return t.behavior=On(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return ys.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#s}setDefaultOptions(t){this.#s=t}setQueryDefaults(t,s){this.#n.set(xt(t),{queryKey:t,defaultOptions:s})}getQueryDefaults(t){const s=[...this.#n.values()],r={};return s.forEach(n=>{es(t,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(t,s){this.#r.set(xt(t),{mutationKey:t,defaultOptions:s})}getMutationDefaults(t){const s=[...this.#r.values()],r={};return s.forEach(n=>{es(t,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(t){if(t._defaulted)return t;const s={...this.#s.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return s.queryHash||(s.queryHash=$r(s.queryKey,s)),s.refetchOnReconnect===void 0&&(s.refetchOnReconnect=s.networkMode!=="always"),s.throwOnError===void 0&&(s.throwOnError=!!s.suspense),!s.networkMode&&s.persister&&(s.networkMode="offlineFirst"),s.queryFn===zr&&(s.enabled=!1),s}defaultMutationOptions(t){return t?._defaulted?t:{...this.#s.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},Ua=i.createContext(void 0),Fe=t=>{const s=i.useContext(Ua);if(!s)throw new Error("No QueryClient set, use QueryClientProvider to set one");return s},wd=({client:t,children:s})=>(i.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),e.jsx(Ua.Provider,{value:t,children:s})),Va=i.createContext(!1),jd=()=>i.useContext(Va);Va.Provider;function Nd(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var Cd=i.createContext(Nd()),Sd=()=>i.useContext(Cd),kd=(t,s)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(s.isReset()||(t.retryOnMount=!1))},Pd=t=>{i.useEffect(()=>{t.clearReset()},[t])},Ed=({result:t,errorResetBoundary:s,throwOnError:r,query:n,suspense:a})=>t.isError&&!s.isReset()&&!t.isFetching&&n&&(a&&t.data===void 0||Fa(r,[t.error,n])),Rd=t=>{if(t.suspense){const r=a=>a==="static"?a:Math.max(a??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...a)=>r(n(...a)):r(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},Td=(t,s)=>t.isLoading&&t.isFetching&&!s,Md=(t,s)=>t?.suspense&&s.isPending,Ln=(t,s,r)=>s.fetchOptimistic(t).catch(()=>{r.clearReset()});function Id(t,s,r){const n=jd(),a=Sd(),o=Fe(),l=o.defaultQueryOptions(t);o.getDefaultOptions().queries?._experimental_beforeQuery?.(l),l._optimisticResults=n?"isRestoring":"optimistic",Rd(l),kd(l,a),Pd(a);const c=!o.getQueryCache().get(l.queryHash),[d]=i.useState(()=>new s(o,l)),u=d.getOptimisticResult(l),m=!n&&t.subscribed!==!1;if(i.useSyncExternalStore(i.useCallback(f=>{const h=m?d.subscribe(de.batchCalls(f)):ve;return d.updateResult(),h},[d,m]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),i.useEffect(()=>{d.setOptions(l)},[l,d]),Md(l,u))throw Ln(l,d,a);if(Ed({result:u,errorResetBoundary:a,throwOnError:l.throwOnError,query:o.getQueryCache().get(l.queryHash),suspense:l.suspense}))throw u.error;return o.getDefaultOptions().queries?._experimental_afterQuery?.(l,u),l.experimental_prefetchInRender&&!pt&&Td(u,n)&&(c?Ln(l,d,a):o.getQueryCache().get(l.queryHash)?.promise)?.catch(ve).finally(()=>{d.updateResult()}),l.notifyOnChangeProps?u:d.trackResult(u)}function et(t,s){return Id(t,md)}function ue(t,s){const r=Fe(),[n]=i.useState(()=>new vd(r,t));i.useEffect(()=>{n.setOptions(t)},[n,t]);const a=i.useSyncExternalStore(i.useCallback(l=>n.subscribe(de.batchCalls(l)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),o=i.useCallback((l,c)=>{n.mutate(l,c).catch(ve)},[n]);if(a.error&&Fa(n.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:o,mutateAsync:a.mutate}}async function Wa(t){if(!t.ok){const s=await t.text()||t.statusText;throw new Error(`${t.status}: ${s}`)}}async function Ba(t,s,r){const n=await fetch(s,{method:t,headers:r?{"Content-Type":"application/json"}:{},body:r?JSON.stringify(r):void 0,credentials:"include"});return await Wa(n),n}const ws=({on401:t})=>async({queryKey:s})=>{const r=await fetch(s.join("/"),{credentials:"include"});return t==="returnNull"&&r.status===401?null:(await Wa(r),await r.json())},Ct=new yd({defaultOptions:{queries:{queryFn:ws({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),Ad=1,Dd=1e6;let Qs=0;function Od(){return Qs=(Qs+1)%Number.MAX_SAFE_INTEGER,Qs.toString()}const Ys=new Map,_n=t=>{if(Ys.has(t))return;const s=setTimeout(()=>{Ys.delete(t),Qt({type:"REMOVE_TOAST",toastId:t})},Dd);Ys.set(t,s)},Fd=(t,s)=>{switch(s.type){case"ADD_TOAST":return{...t,toasts:[s.toast,...t.toasts].slice(0,Ad)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(r=>r.id===s.toast.id?{...r,...s.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=s;return r?_n(r):t.toasts.forEach(n=>{_n(n.id)}),{...t,toasts:t.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return s.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(r=>r.id!==s.toastId)}}},fs=[];let ps={toasts:[]};function Qt(t){ps=Fd(ps,t),fs.forEach(s=>{s(ps)})}function ae({...t}){const s=Od(),r=a=>Qt({type:"UPDATE_TOAST",toast:{...a,id:s}}),n=()=>Qt({type:"DISMISS_TOAST",toastId:s});return Qt({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:a=>{a||n()}}}),{id:s,dismiss:n,update:r}}function nt(){const[t,s]=i.useState(ps);return i.useEffect(()=>(fs.push(s),()=>{const r=fs.indexOf(s);r>-1&&fs.splice(r,1)}),[t]),{...t,toast:ae,dismiss:r=>Qt({type:"DISMISS_TOAST",toastId:r})}}var Wr="ToastProvider",[Br,Ld,_d]=aa("Toast"),[Ha]=Oe("Toast",[_d]),[qd,Is]=Ha(Wr),Ka=t=>{const{__scopeToast:s,label:r="Notification",duration:n=5e3,swipeDirection:a="right",swipeThreshold:o=50,children:l}=t,[c,d]=i.useState(null),[u,m]=i.useState(0),f=i.useRef(!1),h=i.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${Wr}\`. Expected non-empty \`string\`.`),e.jsx(Br.Provider,{scope:s,children:e.jsx(qd,{scope:s,label:r,duration:n,swipeDirection:a,swipeThreshold:o,toastCount:u,viewport:c,onViewportChange:d,onToastAdd:i.useCallback(()=>m(v=>v+1),[]),onToastRemove:i.useCallback(()=>m(v=>v-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:h,children:l})})};Ka.displayName=Wr;var Ga="ToastViewport",$d=["F8"],fr="toast.viewportPause",pr="toast.viewportResume",Qa=i.forwardRef((t,s)=>{const{__scopeToast:r,hotkey:n=$d,label:a="Notifications ({hotkey})",...o}=t,l=Is(Ga,r),c=Ld(r),d=i.useRef(null),u=i.useRef(null),m=i.useRef(null),f=i.useRef(null),h=le(s,f,l.onViewportChange),v=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),p=l.toastCount>0;i.useEffect(()=>{const x=b=>{n.length!==0&&n.every(k=>b[k]||b.code===k)&&f.current?.focus()};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[n]),i.useEffect(()=>{const x=d.current,b=f.current;if(p&&x&&b){const w=()=>{if(!l.isClosePausedRef.current){const j=new CustomEvent(fr);b.dispatchEvent(j),l.isClosePausedRef.current=!0}},k=()=>{if(l.isClosePausedRef.current){const j=new CustomEvent(pr);b.dispatchEvent(j),l.isClosePausedRef.current=!1}},y=j=>{!x.contains(j.relatedTarget)&&k()},P=()=>{x.contains(document.activeElement)||k()};return x.addEventListener("focusin",w),x.addEventListener("focusout",y),x.addEventListener("pointermove",w),x.addEventListener("pointerleave",P),window.addEventListener("blur",w),window.addEventListener("focus",k),()=>{x.removeEventListener("focusin",w),x.removeEventListener("focusout",y),x.removeEventListener("pointermove",w),x.removeEventListener("pointerleave",P),window.removeEventListener("blur",w),window.removeEventListener("focus",k)}}},[p,l.isClosePausedRef]);const g=i.useCallback(({tabbingDirection:x})=>{const w=c().map(k=>{const y=k.ref.current,P=[y,...Zd(y)];return x==="forwards"?P:P.reverse()});return(x==="forwards"?w.reverse():w).flat()},[c]);return i.useEffect(()=>{const x=f.current;if(x){const b=w=>{const k=w.altKey||w.ctrlKey||w.metaKey;if(w.key==="Tab"&&!k){const P=document.activeElement,j=w.shiftKey;if(w.target===x&&j){u.current?.focus();return}const N=g({tabbingDirection:j?"backwards":"forwards"}),F=N.findIndex(O=>O===P);Xs(N.slice(F+1))?w.preventDefault():j?u.current?.focus():m.current?.focus()}};return x.addEventListener("keydown",b),()=>x.removeEventListener("keydown",b)}},[c,g]),e.jsxs(ic,{ref:d,role:"region","aria-label":a.replace("{hotkey}",v),tabIndex:-1,style:{pointerEvents:p?void 0:"none"},children:[p&&e.jsx(xr,{ref:u,onFocusFromOutsideViewport:()=>{const x=g({tabbingDirection:"forwards"});Xs(x)}}),e.jsx(Br.Slot,{scope:r,children:e.jsx(G.ol,{tabIndex:-1,...o,ref:h})}),p&&e.jsx(xr,{ref:m,onFocusFromOutsideViewport:()=>{const x=g({tabbingDirection:"backwards"});Xs(x)}})]})});Qa.displayName=Ga;var Ya="ToastFocusProxy",xr=i.forwardRef((t,s)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...a}=t,o=Is(Ya,r);return e.jsx(oa,{tabIndex:0,...a,ref:s,style:{position:"fixed"},onFocus:l=>{const c=l.relatedTarget;!o.viewport?.contains(c)&&n()}})});xr.displayName=Ya;var as="Toast",zd="toast.swipeStart",Ud="toast.swipeMove",Vd="toast.swipeCancel",Wd="toast.swipeEnd",Xa=i.forwardRef((t,s)=>{const{forceMount:r,open:n,defaultOpen:a,onOpenChange:o,...l}=t,[c,d]=Dt({prop:n,defaultProp:a??!0,onChange:o,caller:as});return e.jsx(Ae,{present:r||c,children:e.jsx(Kd,{open:c,...l,ref:s,onClose:()=>d(!1),onPause:ke(t.onPause),onResume:ke(t.onResume),onSwipeStart:K(t.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:K(t.onSwipeMove,u=>{const{x:m,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${m}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:K(t.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:K(t.onSwipeEnd,u=>{const{x:m,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${m}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),d(!1)})})})});Xa.displayName=as;var[Bd,Hd]=Ha(as,{onClose(){}}),Kd=i.forwardRef((t,s)=>{const{__scopeToast:r,type:n="foreground",duration:a,open:o,onClose:l,onEscapeKeyDown:c,onPause:d,onResume:u,onSwipeStart:m,onSwipeMove:f,onSwipeCancel:h,onSwipeEnd:v,...p}=t,g=Is(as,r),[x,b]=i.useState(null),w=le(s,q=>b(q)),k=i.useRef(null),y=i.useRef(null),P=a||g.duration,j=i.useRef(0),T=i.useRef(P),$=i.useRef(0),{onToastAdd:N,onToastRemove:F}=g,O=ke(()=>{x?.contains(document.activeElement)&&g.viewport?.focus(),l()}),L=i.useCallback(q=>{!q||q===1/0||(window.clearTimeout($.current),j.current=new Date().getTime(),$.current=window.setTimeout(O,q))},[O]);i.useEffect(()=>{const q=g.viewport;if(q){const M=()=>{L(T.current),u?.()},_=()=>{const z=new Date().getTime()-j.current;T.current=T.current-z,window.clearTimeout($.current),d?.()};return q.addEventListener(fr,_),q.addEventListener(pr,M),()=>{q.removeEventListener(fr,_),q.removeEventListener(pr,M)}}},[g.viewport,P,d,u,L]),i.useEffect(()=>{o&&!g.isClosePausedRef.current&&L(P)},[o,P,g.isClosePausedRef,L]),i.useEffect(()=>(N(),()=>F()),[N,F]);const J=i.useMemo(()=>x?no(x):null,[x]);return g.viewport?e.jsxs(e.Fragment,{children:[J&&e.jsx(Gd,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite",children:J}),e.jsx(Bd,{scope:r,onClose:O,children:lc.createPortal(e.jsx(Br.ItemSlot,{scope:r,children:e.jsx(cc,{asChild:!0,onEscapeKeyDown:K(c,()=>{g.isFocusedToastEscapeKeyDownRef.current||O(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:e.jsx(G.li,{tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":g.swipeDirection,...p,ref:w,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:K(t.onKeyDown,q=>{q.key==="Escape"&&(c?.(q.nativeEvent),q.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,O()))}),onPointerDown:K(t.onPointerDown,q=>{q.button===0&&(k.current={x:q.clientX,y:q.clientY})}),onPointerMove:K(t.onPointerMove,q=>{if(!k.current)return;const M=q.clientX-k.current.x,_=q.clientY-k.current.y,z=!!y.current,W=["left","right"].includes(g.swipeDirection),Y=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,te=W?Y(0,M):0,se=W?0:Y(0,_),C=q.pointerType==="touch"?10:2,S={x:te,y:se},I={originalEvent:q,delta:S};z?(y.current=S,ms(Ud,f,I,{discrete:!1})):qn(S,g.swipeDirection,C)?(y.current=S,ms(zd,m,I,{discrete:!1}),q.target.setPointerCapture(q.pointerId)):(Math.abs(M)>C||Math.abs(_)>C)&&(k.current=null)}),onPointerUp:K(t.onPointerUp,q=>{const M=y.current,_=q.target;if(_.hasPointerCapture(q.pointerId)&&_.releasePointerCapture(q.pointerId),y.current=null,k.current=null,M){const z=q.currentTarget,W={originalEvent:q,delta:M};qn(M,g.swipeDirection,g.swipeThreshold)?ms(Wd,v,W,{discrete:!0}):ms(Vd,h,W,{discrete:!0}),z.addEventListener("click",Y=>Y.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),Gd=t=>{const{__scopeToast:s,children:r,...n}=t,a=Is(as,s),[o,l]=i.useState(!1),[c,d]=i.useState(!1);return Xd(()=>l(!0)),i.useEffect(()=>{const u=window.setTimeout(()=>d(!0),1e3);return()=>window.clearTimeout(u)},[]),c?null:e.jsx(ia,{asChild:!0,children:e.jsx(oa,{...n,children:o&&e.jsxs(e.Fragment,{children:[a.label," ",r]})})})},Qd="ToastTitle",Ja=i.forwardRef((t,s)=>{const{__scopeToast:r,...n}=t;return e.jsx(G.div,{...n,ref:s})});Ja.displayName=Qd;var Yd="ToastDescription",Za=i.forwardRef((t,s)=>{const{__scopeToast:r,...n}=t;return e.jsx(G.div,{...n,ref:s})});Za.displayName=Yd;var eo="ToastAction",to=i.forwardRef((t,s)=>{const{altText:r,...n}=t;return r.trim()?e.jsx(ro,{altText:r,asChild:!0,children:e.jsx(Hr,{...n,ref:s})}):(console.error(`Invalid prop \`altText\` supplied to \`${eo}\`. Expected non-empty \`string\`.`),null)});to.displayName=eo;var so="ToastClose",Hr=i.forwardRef((t,s)=>{const{__scopeToast:r,...n}=t,a=Hd(so,r);return e.jsx(ro,{asChild:!0,children:e.jsx(G.button,{type:"button",...n,ref:s,onClick:K(t.onClick,a.onClose)})})});Hr.displayName=so;var ro=i.forwardRef((t,s)=>{const{__scopeToast:r,altText:n,...a}=t;return e.jsx(G.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...a,ref:s})});function no(t){const s=[];return Array.from(t.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&s.push(n.textContent),Jd(n)){const a=n.ariaHidden||n.hidden||n.style.display==="none",o=n.dataset.radixToastAnnounceExclude==="";if(!a)if(o){const l=n.dataset.radixToastAnnounceAlt;l&&s.push(l)}else s.push(...no(n))}}),s}function ms(t,s,r,{discrete:n}){const a=r.originalEvent.currentTarget,o=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:r});s&&a.addEventListener(t,s,{once:!0}),n?dc(a,o):a.dispatchEvent(o)}var qn=(t,s,r=0)=>{const n=Math.abs(t.x),a=Math.abs(t.y),o=n>a;return s==="left"||s==="right"?o&&n>r:!o&&a>r};function Xd(t=()=>{}){const s=ke(t);Jt(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(s)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[s])}function Jd(t){return t.nodeType===t.ELEMENT_NODE}function Zd(t){const s=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)s.push(r.currentNode);return s}function Xs(t){const s=document.activeElement;return t.some(r=>r===s?!0:(r.focus(),document.activeElement!==s))}var ao=Ka,Kr=Qa,Gr=Xa,oo=Ja,io=Za,Qr=to,Yr=Hr;function lo(t){var s,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(s=0;s<a;s++)t[s]&&(r=lo(t[s]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function co(){for(var t,s,r=0,n="",a=arguments.length;r<a;r++)(t=arguments[r])&&(s=lo(t))&&(n&&(n+=" "),n+=s);return n}const $n=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,zn=co,Lt=(t,s)=>r=>{var n;if(s?.variants==null)return zn(t,r?.class,r?.className);const{variants:a,defaultVariants:o}=s,l=Object.keys(a).map(u=>{const m=r?.[u],f=o?.[u];if(m===null)return null;const h=$n(m)||$n(f);return a[u][h]}),c=r&&Object.entries(r).reduce((u,m)=>{let[f,h]=m;return h===void 0||(u[f]=h),u},{}),d=s==null||(n=s.compoundVariants)===null||n===void 0?void 0:n.reduce((u,m)=>{let{class:f,className:h,...v}=m;return Object.entries(v).every(p=>{let[g,x]=p;return Array.isArray(x)?x.includes({...o,...c}[g]):{...o,...c}[g]===x})?[...u,f,h]:u},[]);return zn(t,l,d,r?.class,r?.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eu=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),uo=(...t)=>t.filter((s,r,n)=>!!s&&n.indexOf(s)===r).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var tu={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const su=i.forwardRef(({color:t="currentColor",size:s=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:o,iconNode:l,...c},d)=>i.createElement("svg",{ref:d,...tu,width:s,height:s,stroke:t,strokeWidth:n?Number(r)*24/Number(s):r,className:uo("lucide",a),...c},[...l.map(([u,m])=>i.createElement(u,m)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=(t,s)=>{const r=i.forwardRef(({className:n,...a},o)=>i.createElement(su,{ref:o,iconNode:s,className:uo(`lucide-${eu(t)}`,n),...a}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=U("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ru=U("AtSign",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8",key:"7n84p3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=U("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=U("Cake",[["path",{d:"M20 21v-8a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v8",key:"1w3rig"}],["path",{d:"M4 16s.5-1 2-1 2.5 2 4 2 2.5-2 4-2 2.5 2 4 2 2-1 2-1",key:"n2jgmb"}],["path",{d:"M2 21h20",key:"1nyx9w"}],["path",{d:"M7 8v3",key:"1qtyvj"}],["path",{d:"M12 8v3",key:"hwp4zt"}],["path",{d:"M17 8v3",key:"1i6e5u"}],["path",{d:"M7 4h.01",key:"1bh4kh"}],["path",{d:"M12 4h.01",key:"1ujb9j"}],["path",{d:"M17 4h.01",key:"1upcoc"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rt=U("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=U("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mo=U("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tt=U("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ho=U("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nu=U("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const au=U("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ou=U("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iu=U("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lu=U("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Un=U("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cu=U("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gr=U("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const du=U("Compass",[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uu=U("Dot",[["circle",{cx:"12.1",cy:"12.1",r:"1",key:"18d7e5"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mu=U("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hu=U("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fu=U("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pu=U("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xu=U("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=U("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gu=U("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vu=U("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bu=U("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vn=U("KeyRound",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=U("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yt=U("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fo=U("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=U("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=U("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yu=U("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=U("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xr=U("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const po=U("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wu=U("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ju=U("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nu=U("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jr=U("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ft=U("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xo=U("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=U("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const go=U("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Js=U("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ht=U("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vr=U("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cu=U("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vo=U("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wn=U("UserRound",[["circle",{cx:"12",cy:"8",r:"5",key:"1hypcn"}],["path",{d:"M20 21a8 8 0 0 0-16 0",key:"rfgkzh"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gt=U("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ns=U("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Su=U("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=U("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bn=U("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ku=U("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pu=U("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),Zr="-",Eu=t=>{const s=Tu(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=t;return{getClassGroupId:l=>{const c=l.split(Zr);return c[0]===""&&c.length!==1&&c.shift(),bo(c,s)||Ru(l)},getConflictingClassGroupIds:(l,c)=>{const d=r[l]||[];return c&&n[l]?[...d,...n[l]]:d}}},bo=(t,s)=>{if(t.length===0)return s.classGroupId;const r=t[0],n=s.nextPart.get(r),a=n?bo(t.slice(1),n):void 0;if(a)return a;if(s.validators.length===0)return;const o=t.join(Zr);return s.validators.find(({validator:l})=>l(o))?.classGroupId},Hn=/^\[(.+)\]$/,Ru=t=>{if(Hn.test(t)){const s=Hn.exec(t)[1],r=s?.substring(0,s.indexOf(":"));if(r)return"arbitrary.."+r}},Tu=t=>{const{theme:s,prefix:r}=t,n={nextPart:new Map,validators:[]};return Iu(Object.entries(t.classGroups),r).forEach(([o,l])=>{br(l,n,o,s)}),n},br=(t,s,r,n)=>{t.forEach(a=>{if(typeof a=="string"){const o=a===""?s:Kn(s,a);o.classGroupId=r;return}if(typeof a=="function"){if(Mu(a)){br(a(n),s,r,n);return}s.validators.push({validator:a,classGroupId:r});return}Object.entries(a).forEach(([o,l])=>{br(l,Kn(s,o),r,n)})})},Kn=(t,s)=>{let r=t;return s.split(Zr).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},Mu=t=>t.isThemeGetter,Iu=(t,s)=>s?t.map(([r,n])=>{const a=n.map(o=>typeof o=="string"?s+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([l,c])=>[s+l,c])):o);return[r,a]}):t,Au=t=>{if(t<1)return{get:()=>{},set:()=>{}};let s=0,r=new Map,n=new Map;const a=(o,l)=>{r.set(o,l),s++,s>t&&(s=0,n=r,r=new Map)};return{get(o){let l=r.get(o);if(l!==void 0)return l;if((l=n.get(o))!==void 0)return a(o,l),l},set(o,l){r.has(o)?r.set(o,l):a(o,l)}}},yo="!",Du=t=>{const{separator:s,experimentalParseClassName:r}=t,n=s.length===1,a=s[0],o=s.length,l=c=>{const d=[];let u=0,m=0,f;for(let x=0;x<c.length;x++){let b=c[x];if(u===0){if(b===a&&(n||c.slice(x,x+o)===s)){d.push(c.slice(m,x)),m=x+o;continue}if(b==="/"){f=x;continue}}b==="["?u++:b==="]"&&u--}const h=d.length===0?c:c.substring(m),v=h.startsWith(yo),p=v?h.substring(1):h,g=f&&f>m?f-m:void 0;return{modifiers:d,hasImportantModifier:v,baseClassName:p,maybePostfixModifierPosition:g}};return r?c=>r({className:c,parseClassName:l}):l},Ou=t=>{if(t.length<=1)return t;const s=[];let r=[];return t.forEach(n=>{n[0]==="["?(s.push(...r.sort(),n),r=[]):r.push(n)}),s.push(...r.sort()),s},Fu=t=>({cache:Au(t.cacheSize),parseClassName:Du(t),...Eu(t)}),Lu=/\s+/,_u=(t,s)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:a}=s,o=[],l=t.trim().split(Lu);let c="";for(let d=l.length-1;d>=0;d-=1){const u=l[d],{modifiers:m,hasImportantModifier:f,baseClassName:h,maybePostfixModifierPosition:v}=r(u);let p=!!v,g=n(p?h.substring(0,v):h);if(!g){if(!p){c=u+(c.length>0?" "+c:c);continue}if(g=n(h),!g){c=u+(c.length>0?" "+c:c);continue}p=!1}const x=Ou(m).join(":"),b=f?x+yo:x,w=b+g;if(o.includes(w))continue;o.push(w);const k=a(g,p);for(let y=0;y<k.length;++y){const P=k[y];o.push(b+P)}c=u+(c.length>0?" "+c:c)}return c};function qu(){let t=0,s,r,n="";for(;t<arguments.length;)(s=arguments[t++])&&(r=wo(s))&&(n&&(n+=" "),n+=r);return n}const wo=t=>{if(typeof t=="string")return t;let s,r="";for(let n=0;n<t.length;n++)t[n]&&(s=wo(t[n]))&&(r&&(r+=" "),r+=s);return r};function $u(t,...s){let r,n,a,o=l;function l(d){const u=s.reduce((m,f)=>f(m),t());return r=Fu(u),n=r.cache.get,a=r.cache.set,o=c,c(d)}function c(d){const u=n(d);if(u)return u;const m=_u(d,r);return a(d,m),m}return function(){return o(qu.apply(null,arguments))}}const ne=t=>{const s=r=>r[t]||[];return s.isThemeGetter=!0,s},jo=/^\[(?:([a-z-]+):)?(.+)\]$/i,zu=/^\d+\/\d+$/,Uu=new Set(["px","full","screen"]),Vu=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Wu=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Bu=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Hu=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Ku=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,qe=t=>St(t)||Uu.has(t)||zu.test(t),We=t=>_t(t,"length",tm),St=t=>!!t&&!Number.isNaN(Number(t)),Zs=t=>_t(t,"number",St),Vt=t=>!!t&&Number.isInteger(Number(t)),Gu=t=>t.endsWith("%")&&St(t.slice(0,-1)),Q=t=>jo.test(t),Be=t=>Vu.test(t),Qu=new Set(["length","size","percentage"]),Yu=t=>_t(t,Qu,No),Xu=t=>_t(t,"position",No),Ju=new Set(["image","url"]),Zu=t=>_t(t,Ju,rm),em=t=>_t(t,"",sm),Wt=()=>!0,_t=(t,s,r)=>{const n=jo.exec(t);return n?n[1]?typeof s=="string"?n[1]===s:s.has(n[1]):r(n[2]):!1},tm=t=>Wu.test(t)&&!Bu.test(t),No=()=>!1,sm=t=>Hu.test(t),rm=t=>Ku.test(t),nm=()=>{const t=ne("colors"),s=ne("spacing"),r=ne("blur"),n=ne("brightness"),a=ne("borderColor"),o=ne("borderRadius"),l=ne("borderSpacing"),c=ne("borderWidth"),d=ne("contrast"),u=ne("grayscale"),m=ne("hueRotate"),f=ne("invert"),h=ne("gap"),v=ne("gradientColorStops"),p=ne("gradientColorStopPositions"),g=ne("inset"),x=ne("margin"),b=ne("opacity"),w=ne("padding"),k=ne("saturate"),y=ne("scale"),P=ne("sepia"),j=ne("skew"),T=ne("space"),$=ne("translate"),N=()=>["auto","contain","none"],F=()=>["auto","hidden","clip","visible","scroll"],O=()=>["auto",Q,s],L=()=>[Q,s],J=()=>["",qe,We],q=()=>["auto",St,Q],M=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],_=()=>["solid","dashed","dotted","double","none"],z=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],W=()=>["start","end","center","between","around","evenly","stretch"],Y=()=>["","0",Q],te=()=>["auto","avoid","all","avoid-page","page","left","right","column"],se=()=>[St,Q];return{cacheSize:500,separator:":",theme:{colors:[Wt],spacing:[qe,We],blur:["none","",Be,Q],brightness:se(),borderColor:[t],borderRadius:["none","","full",Be,Q],borderSpacing:L(),borderWidth:J(),contrast:se(),grayscale:Y(),hueRotate:se(),invert:Y(),gap:L(),gradientColorStops:[t],gradientColorStopPositions:[Gu,We],inset:O(),margin:O(),opacity:se(),padding:L(),saturate:se(),scale:se(),sepia:Y(),skew:se(),space:L(),translate:L()},classGroups:{aspect:[{aspect:["auto","square","video",Q]}],container:["container"],columns:[{columns:[Be]}],"break-after":[{"break-after":te()}],"break-before":[{"break-before":te()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...M(),Q]}],overflow:[{overflow:F()}],"overflow-x":[{"overflow-x":F()}],"overflow-y":[{"overflow-y":F()}],overscroll:[{overscroll:N()}],"overscroll-x":[{"overscroll-x":N()}],"overscroll-y":[{"overscroll-y":N()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Vt,Q]}],basis:[{basis:O()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Q]}],grow:[{grow:Y()}],shrink:[{shrink:Y()}],order:[{order:["first","last","none",Vt,Q]}],"grid-cols":[{"grid-cols":[Wt]}],"col-start-end":[{col:["auto",{span:["full",Vt,Q]},Q]}],"col-start":[{"col-start":q()}],"col-end":[{"col-end":q()}],"grid-rows":[{"grid-rows":[Wt]}],"row-start-end":[{row:["auto",{span:[Vt,Q]},Q]}],"row-start":[{"row-start":q()}],"row-end":[{"row-end":q()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Q]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Q]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...W()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...W(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...W(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[T]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[T]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Q,s]}],"min-w":[{"min-w":[Q,s,"min","max","fit"]}],"max-w":[{"max-w":[Q,s,"none","full","min","max","fit","prose",{screen:[Be]},Be]}],h:[{h:[Q,s,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Q,s,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Q,s,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Q,s,"auto","min","max","fit"]}],"font-size":[{text:["base",Be,We]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Zs]}],"font-family":[{font:[Wt]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Q]}],"line-clamp":[{"line-clamp":["none",St,Zs]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",qe,Q]}],"list-image":[{"list-image":["none",Q]}],"list-style-type":[{list:["none","disc","decimal",Q]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[b]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[b]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[..._(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",qe,We]}],"underline-offset":[{"underline-offset":["auto",qe,Q]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:L()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Q]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Q]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[b]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...M(),Xu]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Yu]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Zu]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[p]}],"gradient-via-pos":[{via:[p]}],"gradient-to-pos":[{to:[p]}],"gradient-from":[{from:[v]}],"gradient-via":[{via:[v]}],"gradient-to":[{to:[v]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[c]}],"border-w-x":[{"border-x":[c]}],"border-w-y":[{"border-y":[c]}],"border-w-s":[{"border-s":[c]}],"border-w-e":[{"border-e":[c]}],"border-w-t":[{"border-t":[c]}],"border-w-r":[{"border-r":[c]}],"border-w-b":[{"border-b":[c]}],"border-w-l":[{"border-l":[c]}],"border-opacity":[{"border-opacity":[b]}],"border-style":[{border:[..._(),"hidden"]}],"divide-x":[{"divide-x":[c]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[c]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[b]}],"divide-style":[{divide:_()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",..._()]}],"outline-offset":[{"outline-offset":[qe,Q]}],"outline-w":[{outline:[qe,We]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:J()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[b]}],"ring-offset-w":[{"ring-offset":[qe,We]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Be,em]}],"shadow-color":[{shadow:[Wt]}],opacity:[{opacity:[b]}],"mix-blend":[{"mix-blend":[...z(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":z()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[d]}],"drop-shadow":[{"drop-shadow":["","none",Be,Q]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[m]}],invert:[{invert:[f]}],saturate:[{saturate:[k]}],sepia:[{sepia:[P]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[d]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[m]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[b]}],"backdrop-saturate":[{"backdrop-saturate":[k]}],"backdrop-sepia":[{"backdrop-sepia":[P]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[l]}],"border-spacing-x":[{"border-spacing-x":[l]}],"border-spacing-y":[{"border-spacing-y":[l]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Q]}],duration:[{duration:se()}],ease:[{ease:["linear","in","out","in-out",Q]}],delay:[{delay:se()}],animate:[{animate:["none","spin","ping","pulse","bounce",Q]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[y]}],"scale-x":[{"scale-x":[y]}],"scale-y":[{"scale-y":[y]}],rotate:[{rotate:[Vt,Q]}],"translate-x":[{"translate-x":[$]}],"translate-y":[{"translate-y":[$]}],"skew-x":[{"skew-x":[j]}],"skew-y":[{"skew-y":[j]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Q]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Q]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":L()}],"scroll-mx":[{"scroll-mx":L()}],"scroll-my":[{"scroll-my":L()}],"scroll-ms":[{"scroll-ms":L()}],"scroll-me":[{"scroll-me":L()}],"scroll-mt":[{"scroll-mt":L()}],"scroll-mr":[{"scroll-mr":L()}],"scroll-mb":[{"scroll-mb":L()}],"scroll-ml":[{"scroll-ml":L()}],"scroll-p":[{"scroll-p":L()}],"scroll-px":[{"scroll-px":L()}],"scroll-py":[{"scroll-py":L()}],"scroll-ps":[{"scroll-ps":L()}],"scroll-pe":[{"scroll-pe":L()}],"scroll-pt":[{"scroll-pt":L()}],"scroll-pr":[{"scroll-pr":L()}],"scroll-pb":[{"scroll-pb":L()}],"scroll-pl":[{"scroll-pl":L()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Q]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[qe,We,Zs]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},am=$u(nm);function E(...t){return am(co(t))}const om=ao,Co=i.forwardRef(({className:t,...s},r)=>e.jsx(Kr,{ref:r,className:E("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...s}));Co.displayName=Kr.displayName;const im=Lt("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),So=i.forwardRef(({className:t,variant:s,...r},n)=>e.jsx(Gr,{ref:n,className:E(im({variant:s}),t),...r}));So.displayName=Gr.displayName;const lm=i.forwardRef(({className:t,...s},r)=>e.jsx(Qr,{ref:r,className:E("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...s}));lm.displayName=Qr.displayName;const ko=i.forwardRef(({className:t,...s},r)=>e.jsx(Yr,{ref:r,className:E("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...s,children:e.jsx(De,{className:"h-4 w-4"})}));ko.displayName=Yr.displayName;const Po=i.forwardRef(({className:t,...s},r)=>e.jsx(oo,{ref:r,className:E("text-sm font-semibold",t),...s}));Po.displayName=oo.displayName;const Eo=i.forwardRef(({className:t,...s},r)=>e.jsx(io,{ref:r,className:E("text-sm opacity-90",t),...s}));Eo.displayName=io.displayName;function cm(){const{toasts:t}=nt();return e.jsxs(om,{children:[t.map(function({id:s,title:r,description:n,action:a,...o}){return e.jsxs(So,{...o,children:[e.jsxs("div",{className:"grid gap-1",children:[r&&e.jsx(Po,{children:r}),n&&e.jsx(Eo,{children:n})]}),a,e.jsx(ko,{})]},s)}),e.jsx(Co,{})]})}const dm=5,um=1e3,mm=5e3;let er=0;function hm(){return er=(er+1)%Number.MAX_SAFE_INTEGER,er.toString()}const tr=new Map,Nt=new Map,Gn=t=>{if(tr.has(t))return;const s=setTimeout(()=>{tr.delete(t),kt({type:"REMOVE_NOTIFICATION",notificationId:t})},um);tr.set(t,s)},fm=t=>{const s=setTimeout(()=>{Nt.delete(t),kt({type:"DISMISS_NOTIFICATION",notificationId:t})},mm);Nt.set(t,s)},pm=(t,s)=>{switch(s.type){case"ADD_NOTIFICATION":return{...t,notifications:[s.notification,...t.notifications].slice(0,dm)};case"UPDATE_NOTIFICATION":return{...t,notifications:t.notifications.map(r=>r.id===s.notification.id?{...r,...s.notification}:r)};case"DISMISS_NOTIFICATION":{const{notificationId:r}=s;if(r){Gn(r);const n=Nt.get(r);n&&(clearTimeout(n),Nt.delete(r))}else t.notifications.forEach(n=>{Gn(n.id);const a=Nt.get(n.id);a&&(clearTimeout(a),Nt.delete(n.id))});return{...t,notifications:t.notifications.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_NOTIFICATION":return s.notificationId===void 0?{...t,notifications:[]}:{...t,notifications:t.notifications.filter(r=>r.id!==s.notificationId)}}},xs=[];let gs={notifications:[]};function kt(t){gs=pm(gs,t),xs.forEach(s=>{s(gs)})}function As({...t}){const s=hm(),r=a=>kt({type:"UPDATE_NOTIFICATION",notification:{...a,id:s}}),n=()=>kt({type:"DISMISS_NOTIFICATION",notificationId:s});return kt({type:"ADD_NOTIFICATION",notification:{...t,id:s,open:!0,onOpenChange:a=>{a||n()}}}),fm(s),{id:s,dismiss:n,update:r}}function Ro(){const[t,s]=i.useState(gs);return i.useEffect(()=>(xs.push(s),()=>{const r=xs.indexOf(s);r>-1&&xs.splice(r,1)}),[t]),{...t,showNotification:As,dismiss:r=>kt({type:"DISMISS_NOTIFICATION",notificationId:r})}}function xm(t,s,r,n){return As({type:"profile_view",fromUserName:t,fromUserPhoto:s,fromUserId:r,notificationId:n,title:"Profile view",description:`${t} viewed your profile.`})}function gm(t,s,r,n){return As({type:"message_received",fromUserName:t,fromUserPhoto:s,fromUserId:r,notificationId:n,title:"New message",description:`${t} sent you a message.`})}function vm(t,s,r,n){return As({type:"profile_like",fromUserName:t,fromUserPhoto:s,fromUserId:r,notificationId:n,title:"Profile like",description:`${t} liked your profile.`})}function bm(){return ja.useSyncExternalStore(ym,()=>!0,()=>!1)}function ym(){return()=>{}}var en="Avatar",[wm]=Oe(en),[jm,To]=wm(en),Mo=i.forwardRef((t,s)=>{const{__scopeAvatar:r,...n}=t,[a,o]=i.useState("idle");return e.jsx(jm,{scope:r,imageLoadingStatus:a,onImageLoadingStatusChange:o,children:e.jsx(G.span,{...n,ref:s})})});Mo.displayName=en;var Io="AvatarImage",Ao=i.forwardRef((t,s)=>{const{__scopeAvatar:r,src:n,onLoadingStatusChange:a=()=>{},...o}=t,l=To(Io,r),c=Nm(n,o),d=ke(u=>{a(u),l.onImageLoadingStatusChange(u)});return Jt(()=>{c!=="idle"&&d(c)},[c,d]),c==="loaded"?e.jsx(G.img,{...o,ref:s,src:n}):null});Ao.displayName=Io;var Do="AvatarFallback",Oo=i.forwardRef((t,s)=>{const{__scopeAvatar:r,delayMs:n,...a}=t,o=To(Do,r),[l,c]=i.useState(n===void 0);return i.useEffect(()=>{if(n!==void 0){const d=window.setTimeout(()=>c(!0),n);return()=>window.clearTimeout(d)}},[n]),l&&o.imageLoadingStatus!=="loaded"?e.jsx(G.span,{...a,ref:s}):null});Oo.displayName=Do;function Qn(t,s){return t?s?(t.src!==s&&(t.src=s),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function Nm(t,{referrerPolicy:s,crossOrigin:r}){const n=bm(),a=i.useRef(null),o=n?(a.current||(a.current=new window.Image),a.current):null,[l,c]=i.useState(()=>Qn(o,t));return Jt(()=>{c(Qn(o,t))},[o,t]),Jt(()=>{const d=f=>()=>{c(f)};if(!o)return;const u=d("loaded"),m=d("error");return o.addEventListener("load",u),o.addEventListener("error",m),s&&(o.referrerPolicy=s),typeof r=="string"&&(o.crossOrigin=r),()=>{o.removeEventListener("load",u),o.removeEventListener("error",m)}},[o,r,s]),l}var Fo=Mo,Lo=Ao,_o=Oo;const me=i.forwardRef(({className:t,...s},r)=>e.jsx(Fo,{ref:r,className:E("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...s}));me.displayName=Fo.displayName;const he=i.forwardRef(({className:t,...s},r)=>e.jsx(Lo,{ref:r,className:E("aspect-square h-full w-full object-cover",t),...s}));he.displayName=Lo.displayName;const fe=i.forwardRef(({className:t,...s},r)=>e.jsx(_o,{ref:r,className:E("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...s}));fe.displayName=_o.displayName;const Cm=ao,qo=i.forwardRef(({className:t,...s},r)=>e.jsx(Kr,{ref:r,className:E("fixed top-4 left-1/2 -translate-x-1/2 z-[200] flex max-h-screen w-full max-w-sm flex-col gap-2 p-4",t),...s}));qo.displayName="NotificationViewport";const Sm=Lt("group pointer-events-auto relative flex w-full items-center space-x-4 overflow-hidden rounded-2xl border-2 p-5 shadow-2xl backdrop-blur-xl transition-all duration-300 cursor-pointer hover:scale-[1.03] hover:shadow-3xl active:scale-[0.97] data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-top-full data-[state=open]:slide-in-from-top-full data-[state=open]:zoom-in-95 data-[state=closed]:zoom-out-95",{variants:{variant:{default:"border-border bg-background/95 text-foreground",profile_view:"border-blue-400/50 bg-gradient-to-r from-blue-950/90 to-blue-900/80 backdrop-blur-xl shadow-blue-500/20",message_received:"border-green-400/50 bg-gradient-to-r from-green-950/90 to-green-900/80 backdrop-blur-xl shadow-green-500/20",profile_like:"border-red-400/50 bg-gradient-to-r from-red-950/90 to-red-900/80 backdrop-blur-xl shadow-red-500/20"}},defaultVariants:{variant:"default"}}),$o=i.forwardRef(({className:t,variant:s,...r},n)=>e.jsx(Gr,{ref:n,className:E(Sm({variant:s}),t),...r}));$o.displayName="NotificationToast";const km=i.forwardRef(({className:t,...s},r)=>e.jsx(Qr,{ref:r,className:E("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-xs font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",t),...s}));km.displayName="NotificationAction";const zo=i.forwardRef(({className:t,...s},r)=>e.jsx(Yr,{ref:r,className:E("absolute right-2 top-2 rounded-full p-1.5 text-foreground/50 opacity-0 transition-all hover:text-foreground hover:bg-background/20 focus:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring group-hover:opacity-100",t),...s,children:e.jsx(De,{className:"h-3 w-3"})}));zo.displayName="NotificationClose";const Uo=i.forwardRef(({className:t,type:s,fromUserPhoto:r,fromUserName:n,...a},o)=>{const l=s==="profile_view"?gt:s==="message_received"?ze:Ie,c=n.split(" ").map(m=>m[0]).join("").toUpperCase();console.log("NotificationIcon render:",{type:s,fromUserName:n,fromUserPhoto:r,initials:c});const d=()=>s==="profile_view"?"bg-gradient-to-br from-blue-500 to-blue-600":s==="message_received"?"bg-gradient-to-br from-green-500 to-green-600":"bg-gradient-to-br from-red-500 to-red-600",u=()=>s==="profile_view"?"border-blue-300 shadow-lg shadow-blue-500/30":s==="message_received"?"border-green-300 shadow-lg shadow-green-500/30":"border-red-300 shadow-lg shadow-red-500/30";return e.jsx("div",{ref:o,className:E("flex h-10 w-10 shrink-0",t),...a,children:r?e.jsxs(me,{className:"h-10 w-10",children:[e.jsx(he,{src:r,alt:n}),e.jsx(fe,{className:E("text-white font-semibold",d()),children:c})]}):e.jsx("div",{className:E("flex h-10 w-10 items-center justify-center rounded-full",d(),`border-2 ${u()}`),children:e.jsx(l,{className:"h-5 w-5 text-white"})})})});Uo.displayName="NotificationIcon";const Vo=i.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:E("flex-1 space-y-1",t),...s}));Vo.displayName="NotificationContent";const Wo=i.forwardRef(({className:t,...s},r)=>e.jsx("p",{ref:r,className:E("text-base font-bold leading-none text-white tracking-wide",t),...s}));Wo.displayName="NotificationTitle";const Bo=i.forwardRef(({className:t,...s},r)=>e.jsx("p",{ref:r,className:E("text-sm text-gray-200/90 mt-1.5",t),...s}));Bo.displayName="NotificationDescription";function Pm(){const{notifications:t,dismiss:s}=Ro(),[,r]=xe(),n=async o=>{try{await fetch(`/api/notifications/mark-read/${o}`,{method:"POST"}),window.dispatchEvent(new CustomEvent("notificationRead"))}catch(l){console.error("Failed to mark notification as read:",l)}},a=async o=>{o.notificationId&&await n(o.notificationId),s(o.id),o.type==="profile_view"&&o.fromUserId?r(`/profile/${o.fromUserId}`):o.type==="message_received"&&o.fromUserId?r(`/chat/${o.fromUserId}`):o.type==="profile_like"&&o.fromUserId&&r(`/profile/${o.fromUserId}`)};return e.jsxs(Cm,{children:[t.map(o=>e.jsxs($o,{variant:o.type,open:o.open,onOpenChange:o.onOpenChange,className:"cursor-pointer hover:shadow-xl transition-shadow duration-200",onClick:()=>a(o),children:[e.jsx(Uo,{type:o.type,fromUserPhoto:o.fromUserPhoto,fromUserName:o.fromUserName}),e.jsxs(Vo,{children:[e.jsx(Wo,{children:o.title}),o.description&&e.jsx(Bo,{children:o.description})]}),e.jsx(zo,{})]},o.id)),e.jsx(qo,{})]})}var[Ds]=Oe("Tooltip",[Ps]),tn=Ps(),Ho="TooltipProvider",Em=700,Yn="tooltip.open",[Rm,Ko]=Ds(Ho),Go=t=>{const{__scopeTooltip:s,delayDuration:r=Em,skipDelayDuration:n=300,disableHoverableContent:a=!1,children:o}=t,l=i.useRef(!0),c=i.useRef(!1),d=i.useRef(0);return i.useEffect(()=>{const u=d.current;return()=>window.clearTimeout(u)},[]),e.jsx(Rm,{scope:s,isOpenDelayedRef:l,delayDuration:r,onOpen:i.useCallback(()=>{window.clearTimeout(d.current),l.current=!1},[]),onClose:i.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>l.current=!0,n)},[n]),isPointerInTransitRef:c,onPointerInTransitChange:i.useCallback(u=>{c.current=u},[]),disableHoverableContent:a,children:o})};Go.displayName=Ho;var Qo="Tooltip",[Ox,Os]=Ds(Qo),yr="TooltipTrigger",Tm=i.forwardRef((t,s)=>{const{__scopeTooltip:r,...n}=t,a=Os(yr,r),o=Ko(yr,r),l=tn(r),c=i.useRef(null),d=le(s,c,a.onTriggerChange),u=i.useRef(!1),m=i.useRef(!1),f=i.useCallback(()=>u.current=!1,[]);return i.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),e.jsx(Tr,{asChild:!0,...l,children:e.jsx(G.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...n,ref:d,onPointerMove:K(t.onPointerMove,h=>{h.pointerType!=="touch"&&!m.current&&!o.isPointerInTransitRef.current&&(a.onTriggerEnter(),m.current=!0)}),onPointerLeave:K(t.onPointerLeave,()=>{a.onTriggerLeave(),m.current=!1}),onPointerDown:K(t.onPointerDown,()=>{a.open&&a.onClose(),u.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:K(t.onFocus,()=>{u.current||a.onOpen()}),onBlur:K(t.onBlur,a.onClose),onClick:K(t.onClick,a.onClose)})})});Tm.displayName=yr;var Mm="TooltipPortal",[Fx,Im]=Ds(Mm,{forceMount:void 0}),Mt="TooltipContent",Yo=i.forwardRef((t,s)=>{const r=Im(Mt,t.__scopeTooltip),{forceMount:n=r.forceMount,side:a="top",...o}=t,l=Os(Mt,t.__scopeTooltip);return e.jsx(Ae,{present:n||l.open,children:l.disableHoverableContent?e.jsx(Xo,{side:a,...o,ref:s}):e.jsx(Am,{side:a,...o,ref:s})})}),Am=i.forwardRef((t,s)=>{const r=Os(Mt,t.__scopeTooltip),n=Ko(Mt,t.__scopeTooltip),a=i.useRef(null),o=le(s,a),[l,c]=i.useState(null),{trigger:d,onClose:u}=r,m=a.current,{onPointerInTransitChange:f}=n,h=i.useCallback(()=>{c(null),f(!1)},[f]),v=i.useCallback((p,g)=>{const x=p.currentTarget,b={x:p.clientX,y:p.clientY},w=_m(b,x.getBoundingClientRect()),k=qm(b,w),y=$m(g.getBoundingClientRect()),P=Um([...k,...y]);c(P),f(!0)},[f]);return i.useEffect(()=>()=>h(),[h]),i.useEffect(()=>{if(d&&m){const p=x=>v(x,m),g=x=>v(x,d);return d.addEventListener("pointerleave",p),m.addEventListener("pointerleave",g),()=>{d.removeEventListener("pointerleave",p),m.removeEventListener("pointerleave",g)}}},[d,m,v,h]),i.useEffect(()=>{if(l){const p=g=>{const x=g.target,b={x:g.clientX,y:g.clientY},w=d?.contains(x)||m?.contains(x),k=!zm(b,l);w?h():k&&(h(),u())};return document.addEventListener("pointermove",p),()=>document.removeEventListener("pointermove",p)}},[d,m,l,u,h]),e.jsx(Xo,{...t,ref:o})}),[Dm,Om]=Ds(Qo,{isInside:!1}),Fm=uc("TooltipContent"),Xo=i.forwardRef((t,s)=>{const{__scopeTooltip:r,children:n,"aria-label":a,onEscapeKeyDown:o,onPointerDownOutside:l,...c}=t,d=Os(Mt,r),u=tn(r),{onClose:m}=d;return i.useEffect(()=>(document.addEventListener(Yn,m),()=>document.removeEventListener(Yn,m)),[m]),i.useEffect(()=>{if(d.trigger){const f=h=>{h.target?.contains(d.trigger)&&m()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[d.trigger,m]),e.jsx(la,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:f=>f.preventDefault(),onDismiss:m,children:e.jsxs(ca,{"data-state":d.stateAttribute,...u,...c,ref:s,style:{...c.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[e.jsx(Fm,{children:n}),e.jsx(Dm,{scope:r,isInside:!0,children:e.jsx(mc,{id:d.contentId,role:"tooltip",children:a||n})})]})})});Yo.displayName=Mt;var Jo="TooltipArrow",Lm=i.forwardRef((t,s)=>{const{__scopeTooltip:r,...n}=t,a=tn(r);return Om(Jo,r).isInside?null:e.jsx(da,{...a,...n,ref:s})});Lm.displayName=Jo;function _m(t,s){const r=Math.abs(s.top-t.y),n=Math.abs(s.bottom-t.y),a=Math.abs(s.right-t.x),o=Math.abs(s.left-t.x);switch(Math.min(r,n,a,o)){case o:return"left";case a:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function qm(t,s,r=5){const n=[];switch(s){case"top":n.push({x:t.x-r,y:t.y+r},{x:t.x+r,y:t.y+r});break;case"bottom":n.push({x:t.x-r,y:t.y-r},{x:t.x+r,y:t.y-r});break;case"left":n.push({x:t.x+r,y:t.y-r},{x:t.x+r,y:t.y+r});break;case"right":n.push({x:t.x-r,y:t.y-r},{x:t.x-r,y:t.y+r});break}return n}function $m(t){const{top:s,right:r,bottom:n,left:a}=t;return[{x:a,y:s},{x:r,y:s},{x:r,y:n},{x:a,y:n}]}function zm(t,s){const{x:r,y:n}=t;let a=!1;for(let o=0,l=s.length-1;o<s.length;l=o++){const c=s[o],d=s[l],u=c.x,m=c.y,f=d.x,h=d.y;m>n!=h>n&&r<(f-u)*(n-m)/(h-m)+u&&(a=!a)}return a}function Um(t){const s=t.slice();return s.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),Vm(s)}function Vm(t){if(t.length<=1)return t.slice();const s=[];for(let n=0;n<t.length;n++){const a=t[n];for(;s.length>=2;){const o=s[s.length-1],l=s[s.length-2];if((o.x-l.x)*(a.y-l.y)>=(o.y-l.y)*(a.x-l.x))s.pop();else break}s.push(a)}s.pop();const r=[];for(let n=t.length-1;n>=0;n--){const a=t[n];for(;r.length>=2;){const o=r[r.length-1],l=r[r.length-2];if((o.x-l.x)*(a.y-l.y)>=(o.y-l.y)*(a.x-l.x))r.pop();else break}r.push(a)}return r.pop(),s.length===1&&r.length===1&&s[0].x===r[0].x&&s[0].y===r[0].y?s:s.concat(r)}var Wm=Go,Zo=Yo;const Bm=Wm,Hm=i.forwardRef(({className:t,sideOffset:s=4,...r},n)=>e.jsx(Zo,{ref:n,sideOffset:s,className:E("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",t),...r}));Hm.displayName=Zo.displayName;const Km=[{label:"Discover",icon:Jr,path:"/discover"},{label:"Messages",icon:ze,path:"/messages",hasCounter:!0,counterType:"messages"},{label:"Notifications",icon:Ke,path:"/notifications",hasCounter:!0,counterType:"notifications"},{label:"Profile",icon:gt,path:"/profile"}];function Gm({isActive:t,unreadCount:s}){return e.jsxs("div",{className:"relative",children:[e.jsx(Ke,{className:E("h-5 w-5 transition-all duration-200",t?"scale-110":"scale-100")}),s>0&&e.jsx("div",{className:"absolute -top-2 -right-2 h-5 w-5 bg-primary rounded-full flex items-center justify-center min-w-[20px] shadow-lg",children:e.jsx("span",{className:"text-xs font-bold text-primary-foreground leading-none",children:s>99?"99+":s})})]})}function Qm({isActive:t,unreadCount:s}){return e.jsxs("div",{className:"relative",children:[e.jsx(ze,{className:E("h-5 w-5 transition-all duration-200",t?"scale-110":"scale-100")}),s>0&&e.jsx("div",{className:"absolute -top-2 -right-2 h-5 w-5 bg-primary rounded-full flex items-center justify-center min-w-[20px] shadow-lg",children:e.jsx("span",{className:"text-xs font-bold text-primary-foreground leading-none",children:s>99?"99+":s})})]})}function Ym(){const[t]=xe(),s=Fe(),{data:r}=et({queryKey:["/api/notifications/unread-count"],queryFn:ws({on401:"returnNull"}),refetchInterval:3e4}),{data:n}=et({queryKey:["/api/messages/unread-count"],queryFn:ws({on401:"returnNull"}),refetchInterval:3e4}),a=r?.count||0,o=n?.count||0;return i.useEffect(()=>{const l=()=>{s.invalidateQueries({queryKey:["/api/notifications/unread-count"]})},c=()=>{s.invalidateQueries({queryKey:["/api/messages/unread-count"]})};return window.addEventListener("notificationReceived",l),window.addEventListener("notificationRead",l),window.addEventListener("messageReceived",c),window.addEventListener("messageRead",c),()=>{window.removeEventListener("notificationReceived",l),window.removeEventListener("notificationRead",l),window.removeEventListener("messageReceived",c),window.removeEventListener("messageRead",c)}},[s]),e.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-background/95 backdrop-blur-md border-t border-border/50 z-50 supports-[backdrop-filter]:bg-background/80",style:{paddingBottom:"env(safe-area-inset-bottom)",marginBottom:"0",WebkitBackdropFilter:"blur(12px)"},children:e.jsx("div",{className:"flex items-center justify-around max-w-screen-xl mx-auto px-2 sm:px-4",children:Km.map(l=>{const c=t===l.path||l.path==="/"&&t==="/"||l.path!=="/"&&t.startsWith(l.path);return e.jsxs(Ma,{href:l.path,className:E("flex flex-col items-center justify-center gap-1 min-w-0 flex-1 py-3 px-2 rounded-lg transition-all duration-200",c?"text-primary bg-primary/10":"text-muted-foreground hover:text-foreground hover:bg-accent/50"),children:[l.hasCounter?l.counterType==="messages"?e.jsx(Qm,{isActive:c,unreadCount:o}):e.jsx(Gm,{isActive:c,unreadCount:a}):e.jsx(l.icon,{className:E("h-5 w-5 sm:h-6 sm:w-6 transition-all duration-200",c?"scale-110":"scale-100")}),e.jsx("span",{className:E("text-[10px] sm:text-xs font-medium leading-tight",c?"text-primary font-semibold":"text-muted-foreground"),children:l.label})]},l.path)})})})}const Xm=Lt("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),D=i.forwardRef(({className:t,variant:s,size:r,asChild:n=!1,...a},o)=>{const l=n?hc:"button";return e.jsx(l,{className:E(Xm({variant:s,size:r,className:t})),ref:o,...a})});D.displayName="Button";function Jm(){const[,t]=xe();return e.jsxs("div",{className:"min-h-screen w-full flex items-center justify-center bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 dark:from-gray-900 dark:via-gray-800 dark:to-slate-900 px-4 py-8",children:[e.jsxs("div",{className:"max-w-2xl w-full text-center",children:[e.jsx("div",{className:"mb-8 flex justify-center",children:e.jsxs("div",{className:"relative",children:[e.jsxs("svg",{className:"w-full max-w-md h-auto animate-float",viewBox:"0 0 400 200",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"gradient1",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#3b82f6"}),e.jsx("stop",{offset:"100%",stopColor:"#8b5cf6"})]}),e.jsxs("linearGradient",{id:"gradient2",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"#8b5cf6"}),e.jsx("stop",{offset:"100%",stopColor:"#ec4899"})]})]}),e.jsx("circle",{cx:"100",cy:"100",r:"60",fill:"url(#gradient1)",opacity:"0.1",className:"animate-pulse"}),e.jsx("circle",{cx:"300",cy:"100",r:"60",fill:"url(#gradient2)",opacity:"0.1",className:"animate-pulse",style:{animationDelay:"0.5s"}}),e.jsx("text",{x:"200",y:"130",fontSize:"120",fontWeight:"800",textAnchor:"middle",fill:"url(#gradient1)",className:"font-bold",children:"404"}),e.jsx("circle",{cx:"80",cy:"60",r:"8",fill:"#3b82f6",className:"animate-bounce"}),e.jsx("circle",{cx:"320",cy:"140",r:"6",fill:"#8b5cf6",className:"animate-bounce",style:{animationDelay:"0.3s"}}),e.jsx("circle",{cx:"200",cy:"40",r:"5",fill:"#ec4899",className:"animate-bounce",style:{animationDelay:"0.6s"}})]}),e.jsx("div",{className:"absolute -top-6 -right-6 animate-bounce-slow",children:e.jsx("img",{src:"/android-chrome-192x192.png",alt:"SpreadLov",className:"w-12 h-12 rounded-lg shadow-lg",width:"192",height:"192"})})]})}),e.jsx("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent mb-4 animate-fade-in",children:"Page Not Found"}),e.jsx("p",{className:"text-lg md:text-xl text-gray-700 dark:text-gray-300 mb-2 max-w-lg mx-auto animate-fade-in-delay",children:"Oops! The page you're looking for doesn't exist."}),e.jsx("p",{className:"text-base md:text-lg text-gray-600 dark:text-gray-400 mb-10 animate-fade-in-delay-2",children:"It might have been moved or deleted."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center animate-fade-in-delay-3",children:[e.jsxs(D,{onClick:()=>t("/"),size:"lg",className:"group w-full sm:w-auto bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-semibold px-8 py-6 text-lg shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",children:[e.jsx(gu,{className:"h-5 w-5 mr-2 group-hover:rotate-12 transition-transform duration-300"}),"Go Home"]}),e.jsxs(D,{onClick:()=>window.history.back(),size:"lg",className:"group w-full sm:w-auto bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-semibold px-8 py-6 text-lg shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",children:[e.jsx(tt,{className:"h-5 w-5 mr-2 group-hover:-translate-x-1 transition-transform duration-300"}),"Go Back"]})]}),e.jsx("div",{className:"mt-16 animate-fade-in-delay-4",children:e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500",children:"Lost? Let's get you back on track 💙"})})]}),e.jsx("style",{children:`
        @keyframes float {
          0%, 100% {
            transform: translateY(0px);
          }
          50% {
            transform: translateY(-20px);
          }
        }

        @keyframes bounce-slow {
          0%, 100% {
            transform: translateY(0px);
          }
          50% {
            transform: translateY(-15px);
          }
        }

        @keyframes fade-in {
          from {
            opacity: 0;
            transform: translateY(20px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }

        .animate-float {
          animation: float 3s ease-in-out infinite;
        }

        .animate-bounce-slow {
          animation: bounce-slow 2s ease-in-out infinite;
        }

        .animate-fade-in {
          animation: fade-in 0.6s ease-out forwards;
        }

        .animate-fade-in-delay {
          animation: fade-in 0.6s ease-out 0.2s forwards;
          opacity: 0;
        }

        .animate-fade-in-delay-2 {
          animation: fade-in 0.6s ease-out 0.4s forwards;
          opacity: 0;
        }

        .animate-fade-in-delay-3 {
          animation: fade-in 0.6s ease-out 0.6s forwards;
          opacity: 0;
        }

        .animate-fade-in-delay-4 {
          animation: fade-in 0.6s ease-out 0.8s forwards;
          opacity: 0;
        }
      `})]})}const ei=i.createContext(null);function Zm({children:t}){const{toast:s}=nt(),{data:r,error:n,isLoading:a}=et({queryKey:["/api/user"],queryFn:ws({on401:"returnNull"})}),o=ue({mutationFn:async d=>{const u=await fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d),credentials:"include"});if(!u.ok){const m=await u.json().catch(()=>({}));if(u.status===403&&m.requiresVerification){const f=new Error("Email not verified. Please complete registration.");throw f.requiresVerification=!0,f}throw new Error(m.message||"Invalid username or password")}return await u.json()},onSuccess:d=>{Ct.setQueryData(["/api/user"],d)},onError:d=>{s({title:"Login failed",description:d.message,variant:"destructive"})}}),l=ue({mutationFn:async d=>{const u=await fetch("/api/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d),credentials:"include"});if(!u.ok){const f=await u.json().catch(()=>({}));throw new Error(f.message||"Registration failed")}return await u.json()},onSuccess:d=>{Ct.setQueryData(["/api/user"],d),s({title:"Account created successfully",description:"Please verify your email to unlock all features."})},onError:d=>{s({title:"Registration failed",description:d.message,variant:"destructive"})}}),c=ue({mutationFn:async()=>{await Ba("POST","/api/logout")},onSuccess:()=>{Ct.setQueryData(["/api/user"],null)},onError:d=>{s({title:"Logout failed",description:d.message,variant:"destructive"})}});return e.jsx(ei.Provider,{value:{user:r??null,isLoading:a,error:n,loginMutation:o,logoutMutation:c,registerMutation:l},children:t})}function be(){const t=i.useContext(ei);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t}const oe=i.forwardRef(({className:t,type:s,...r},n)=>e.jsx("input",{type:s,className:E("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...r}));oe.displayName="Input";function eh(t,s){return i.useReducer((r,n)=>s[r][n]??r,t)}var sn="ScrollArea",[ti]=Oe(sn),[th,Ee]=ti(sn),si=i.forwardRef((t,s)=>{const{__scopeScrollArea:r,type:n="hover",dir:a,scrollHideDelay:o=600,...l}=t,[c,d]=i.useState(null),[u,m]=i.useState(null),[f,h]=i.useState(null),[v,p]=i.useState(null),[g,x]=i.useState(null),[b,w]=i.useState(0),[k,y]=i.useState(0),[P,j]=i.useState(!1),[T,$]=i.useState(!1),N=le(s,O=>d(O)),F=Es(a);return e.jsx(th,{scope:r,type:n,dir:F,scrollHideDelay:o,scrollArea:c,viewport:u,onViewportChange:m,content:f,onContentChange:h,scrollbarX:v,onScrollbarXChange:p,scrollbarXEnabled:P,onScrollbarXEnabledChange:j,scrollbarY:g,onScrollbarYChange:x,scrollbarYEnabled:T,onScrollbarYEnabledChange:$,onCornerWidthChange:w,onCornerHeightChange:y,children:e.jsx(G.div,{dir:F,...l,ref:N,style:{position:"relative","--radix-scroll-area-corner-width":b+"px","--radix-scroll-area-corner-height":k+"px",...t.style}})})});si.displayName=sn;var ri="ScrollAreaViewport",ni=i.forwardRef((t,s)=>{const{__scopeScrollArea:r,children:n,nonce:a,...o}=t,l=Ee(ri,r),c=i.useRef(null),d=le(s,c,l.onViewportChange);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),e.jsx(G.div,{"data-radix-scroll-area-viewport":"",...o,ref:d,style:{overflowX:l.scrollbarXEnabled?"scroll":"hidden",overflowY:l.scrollbarYEnabled?"scroll":"hidden",...t.style},children:e.jsx("div",{ref:l.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});ni.displayName=ri;var Le="ScrollAreaScrollbar",rn=i.forwardRef((t,s)=>{const{forceMount:r,...n}=t,a=Ee(Le,t.__scopeScrollArea),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:l}=a,c=t.orientation==="horizontal";return i.useEffect(()=>(c?o(!0):l(!0),()=>{c?o(!1):l(!1)}),[c,o,l]),a.type==="hover"?e.jsx(sh,{...n,ref:s,forceMount:r}):a.type==="scroll"?e.jsx(rh,{...n,ref:s,forceMount:r}):a.type==="auto"?e.jsx(ai,{...n,ref:s,forceMount:r}):a.type==="always"?e.jsx(nn,{...n,ref:s}):null});rn.displayName=Le;var sh=i.forwardRef((t,s)=>{const{forceMount:r,...n}=t,a=Ee(Le,t.__scopeScrollArea),[o,l]=i.useState(!1);return i.useEffect(()=>{const c=a.scrollArea;let d=0;if(c){const u=()=>{window.clearTimeout(d),l(!0)},m=()=>{d=window.setTimeout(()=>l(!1),a.scrollHideDelay)};return c.addEventListener("pointerenter",u),c.addEventListener("pointerleave",m),()=>{window.clearTimeout(d),c.removeEventListener("pointerenter",u),c.removeEventListener("pointerleave",m)}}},[a.scrollArea,a.scrollHideDelay]),e.jsx(Ae,{present:r||o,children:e.jsx(ai,{"data-state":o?"visible":"hidden",...n,ref:s})})}),rh=i.forwardRef((t,s)=>{const{forceMount:r,...n}=t,a=Ee(Le,t.__scopeScrollArea),o=t.orientation==="horizontal",l=Ls(()=>d("SCROLL_END"),100),[c,d]=eh("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return i.useEffect(()=>{if(c==="idle"){const u=window.setTimeout(()=>d("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(u)}},[c,a.scrollHideDelay,d]),i.useEffect(()=>{const u=a.viewport,m=o?"scrollLeft":"scrollTop";if(u){let f=u[m];const h=()=>{const v=u[m];f!==v&&(d("SCROLL"),l()),f=v};return u.addEventListener("scroll",h),()=>u.removeEventListener("scroll",h)}},[a.viewport,o,d,l]),e.jsx(Ae,{present:r||c!=="hidden",children:e.jsx(nn,{"data-state":c==="hidden"?"hidden":"visible",...n,ref:s,onPointerEnter:K(t.onPointerEnter,()=>d("POINTER_ENTER")),onPointerLeave:K(t.onPointerLeave,()=>d("POINTER_LEAVE"))})})}),ai=i.forwardRef((t,s)=>{const r=Ee(Le,t.__scopeScrollArea),{forceMount:n,...a}=t,[o,l]=i.useState(!1),c=t.orientation==="horizontal",d=Ls(()=>{if(r.viewport){const u=r.viewport.offsetWidth<r.viewport.scrollWidth,m=r.viewport.offsetHeight<r.viewport.scrollHeight;l(c?u:m)}},10);return It(r.viewport,d),It(r.content,d),e.jsx(Ae,{present:n||o,children:e.jsx(nn,{"data-state":o?"visible":"hidden",...a,ref:s})})}),nn=i.forwardRef((t,s)=>{const{orientation:r="vertical",...n}=t,a=Ee(Le,t.__scopeScrollArea),o=i.useRef(null),l=i.useRef(0),[c,d]=i.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=di(c.viewport,c.content),m={...n,sizes:c,onSizesChange:d,hasThumb:u>0&&u<1,onThumbChange:h=>o.current=h,onThumbPointerUp:()=>l.current=0,onThumbPointerDown:h=>l.current=h};function f(h,v){return ch(h,l.current,c,v)}return r==="horizontal"?e.jsx(nh,{...m,ref:s,onThumbPositionChange:()=>{if(a.viewport&&o.current){const h=a.viewport.scrollLeft,v=Xn(h,c,a.dir);o.current.style.transform=`translate3d(${v}px, 0, 0)`}},onWheelScroll:h=>{a.viewport&&(a.viewport.scrollLeft=h)},onDragScroll:h=>{a.viewport&&(a.viewport.scrollLeft=f(h,a.dir))}}):r==="vertical"?e.jsx(ah,{...m,ref:s,onThumbPositionChange:()=>{if(a.viewport&&o.current){const h=a.viewport.scrollTop,v=Xn(h,c);o.current.style.transform=`translate3d(0, ${v}px, 0)`}},onWheelScroll:h=>{a.viewport&&(a.viewport.scrollTop=h)},onDragScroll:h=>{a.viewport&&(a.viewport.scrollTop=f(h))}}):null}),nh=i.forwardRef((t,s)=>{const{sizes:r,onSizesChange:n,...a}=t,o=Ee(Le,t.__scopeScrollArea),[l,c]=i.useState(),d=i.useRef(null),u=le(s,d,o.onScrollbarXChange);return i.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),e.jsx(ii,{"data-orientation":"horizontal",...a,ref:u,sizes:r,style:{bottom:0,left:o.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:o.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Fs(r)+"px",...t.style},onThumbPointerDown:m=>t.onThumbPointerDown(m.x),onDragScroll:m=>t.onDragScroll(m.x),onWheelScroll:(m,f)=>{if(o.viewport){const h=o.viewport.scrollLeft+m.deltaX;t.onWheelScroll(h),mi(h,f)&&m.preventDefault()}},onResize:()=>{d.current&&o.viewport&&l&&n({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:Ss(l.paddingLeft),paddingEnd:Ss(l.paddingRight)}})}})}),ah=i.forwardRef((t,s)=>{const{sizes:r,onSizesChange:n,...a}=t,o=Ee(Le,t.__scopeScrollArea),[l,c]=i.useState(),d=i.useRef(null),u=le(s,d,o.onScrollbarYChange);return i.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),e.jsx(ii,{"data-orientation":"vertical",...a,ref:u,sizes:r,style:{top:0,right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Fs(r)+"px",...t.style},onThumbPointerDown:m=>t.onThumbPointerDown(m.y),onDragScroll:m=>t.onDragScroll(m.y),onWheelScroll:(m,f)=>{if(o.viewport){const h=o.viewport.scrollTop+m.deltaY;t.onWheelScroll(h),mi(h,f)&&m.preventDefault()}},onResize:()=>{d.current&&o.viewport&&l&&n({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:Ss(l.paddingTop),paddingEnd:Ss(l.paddingBottom)}})}})}),[oh,oi]=ti(Le),ii=i.forwardRef((t,s)=>{const{__scopeScrollArea:r,sizes:n,hasThumb:a,onThumbChange:o,onThumbPointerUp:l,onThumbPointerDown:c,onThumbPositionChange:d,onDragScroll:u,onWheelScroll:m,onResize:f,...h}=t,v=Ee(Le,r),[p,g]=i.useState(null),x=le(s,N=>g(N)),b=i.useRef(null),w=i.useRef(""),k=v.viewport,y=n.content-n.viewport,P=ke(m),j=ke(d),T=Ls(f,10);function $(N){if(b.current){const F=N.clientX-b.current.left,O=N.clientY-b.current.top;u({x:F,y:O})}}return i.useEffect(()=>{const N=F=>{const O=F.target;p?.contains(O)&&P(F,y)};return document.addEventListener("wheel",N,{passive:!1}),()=>document.removeEventListener("wheel",N,{passive:!1})},[k,p,y,P]),i.useEffect(j,[n,j]),It(p,T),It(v.content,T),e.jsx(oh,{scope:r,scrollbar:p,hasThumb:a,onThumbChange:ke(o),onThumbPointerUp:ke(l),onThumbPositionChange:j,onThumbPointerDown:ke(c),children:e.jsx(G.div,{...h,ref:x,style:{position:"absolute",...h.style},onPointerDown:K(t.onPointerDown,N=>{N.button===0&&(N.target.setPointerCapture(N.pointerId),b.current=p.getBoundingClientRect(),w.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",v.viewport&&(v.viewport.style.scrollBehavior="auto"),$(N))}),onPointerMove:K(t.onPointerMove,$),onPointerUp:K(t.onPointerUp,N=>{const F=N.target;F.hasPointerCapture(N.pointerId)&&F.releasePointerCapture(N.pointerId),document.body.style.webkitUserSelect=w.current,v.viewport&&(v.viewport.style.scrollBehavior=""),b.current=null})})})}),Cs="ScrollAreaThumb",li=i.forwardRef((t,s)=>{const{forceMount:r,...n}=t,a=oi(Cs,t.__scopeScrollArea);return e.jsx(Ae,{present:r||a.hasThumb,children:e.jsx(ih,{ref:s,...n})})}),ih=i.forwardRef((t,s)=>{const{__scopeScrollArea:r,style:n,...a}=t,o=Ee(Cs,r),l=oi(Cs,r),{onThumbPositionChange:c}=l,d=le(s,f=>l.onThumbChange(f)),u=i.useRef(void 0),m=Ls(()=>{u.current&&(u.current(),u.current=void 0)},100);return i.useEffect(()=>{const f=o.viewport;if(f){const h=()=>{if(m(),!u.current){const v=dh(f,c);u.current=v,c()}};return c(),f.addEventListener("scroll",h),()=>f.removeEventListener("scroll",h)}},[o.viewport,m,c]),e.jsx(G.div,{"data-state":l.hasThumb?"visible":"hidden",...a,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:K(t.onPointerDownCapture,f=>{const v=f.target.getBoundingClientRect(),p=f.clientX-v.left,g=f.clientY-v.top;l.onThumbPointerDown({x:p,y:g})}),onPointerUp:K(t.onPointerUp,l.onThumbPointerUp)})});li.displayName=Cs;var an="ScrollAreaCorner",ci=i.forwardRef((t,s)=>{const r=Ee(an,t.__scopeScrollArea),n=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&n?e.jsx(lh,{...t,ref:s}):null});ci.displayName=an;var lh=i.forwardRef((t,s)=>{const{__scopeScrollArea:r,...n}=t,a=Ee(an,r),[o,l]=i.useState(0),[c,d]=i.useState(0),u=!!(o&&c);return It(a.scrollbarX,()=>{const m=a.scrollbarX?.offsetHeight||0;a.onCornerHeightChange(m),d(m)}),It(a.scrollbarY,()=>{const m=a.scrollbarY?.offsetWidth||0;a.onCornerWidthChange(m),l(m)}),u?e.jsx(G.div,{...n,ref:s,style:{width:o,height:c,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function Ss(t){return t?parseInt(t,10):0}function di(t,s){const r=t/s;return isNaN(r)?0:r}function Fs(t){const s=di(t.viewport,t.content),r=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,n=(t.scrollbar.size-r)*s;return Math.max(n,18)}function ch(t,s,r,n="ltr"){const a=Fs(r),o=a/2,l=s||o,c=a-l,d=r.scrollbar.paddingStart+l,u=r.scrollbar.size-r.scrollbar.paddingEnd-c,m=r.content-r.viewport,f=n==="ltr"?[0,m]:[m*-1,0];return ui([d,u],f)(t)}function Xn(t,s,r="ltr"){const n=Fs(s),a=s.scrollbar.paddingStart+s.scrollbar.paddingEnd,o=s.scrollbar.size-a,l=s.content-s.viewport,c=o-n,d=r==="ltr"?[0,l]:[l*-1,0],u=Mr(t,d);return ui([0,l],[0,c])(u)}function ui(t,s){return r=>{if(t[0]===t[1]||s[0]===s[1])return s[0];const n=(s[1]-s[0])/(t[1]-t[0]);return s[0]+n*(r-t[0])}}function mi(t,s){return t>0&&t<s}var dh=(t,s=()=>{})=>{let r={left:t.scrollLeft,top:t.scrollTop},n=0;return(function a(){const o={left:t.scrollLeft,top:t.scrollTop},l=r.left!==o.left,c=r.top!==o.top;(l||c)&&s(),r=o,n=window.requestAnimationFrame(a)})(),()=>window.cancelAnimationFrame(n)};function Ls(t,s){const r=ke(t),n=i.useRef(0);return i.useEffect(()=>()=>window.clearTimeout(n.current),[]),i.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,s)},[r,s])}function It(t,s){const r=ke(s);Jt(()=>{let n=0;if(t){const a=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return a.observe(t),()=>{window.cancelAnimationFrame(n),a.unobserve(t)}}},[t,r])}var hi=si,uh=ni,mh=ci;const Pe=i.forwardRef(({className:t,children:s,...r},n)=>e.jsxs(hi,{ref:n,className:E("relative overflow-hidden",t),...r,children:[e.jsx(uh,{className:"h-full w-full rounded-[inherit]",children:s}),e.jsx(fi,{}),e.jsx(mh,{})]}));Pe.displayName=hi.displayName;const fi=i.forwardRef(({className:t,orientation:s="vertical",...r},n)=>e.jsx(rn,{ref:n,orientation:s,className:E("flex touch-none select-none transition-colors",s==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",s==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...r,children:e.jsx(li,{className:"relative flex-1 rounded-full bg-border"})}));fi.displayName=rn.displayName;function hh({currentUser:t,selectedUser:s,onSelectUser:r,onOpenProfile:n}){const{logoutMutation:a}=be(),o=Fe(),[l,c]=i.useState(""),{data:d=[]}=et({queryKey:["/api/conversations"]}),{data:u=[]}=et({queryKey:["/api/users/online"],refetchInterval:3e4});i.useEffect(()=>{const h=()=>{o.invalidateQueries({queryKey:["/api/users/online"]}),o.invalidateQueries({queryKey:["/api/conversations"]})};return window.addEventListener("onlineStatusChanged",h),()=>window.removeEventListener("onlineStatusChanged",h)},[o]);const m=d.filter(h=>h.otherUser.firstName.toLowerCase().includes(l.toLowerCase())||h.otherUser.lastName.toLowerCase().includes(l.toLowerCase())||h.otherUser.username.toLowerCase().includes(l.toLowerCase())),f=h=>{const v=new Date,p=new Date(h),g=(v.getTime()-p.getTime())/(1e3*60*60);return g<24?p.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"}):g<168?p.toLocaleDateString("en-US",{weekday:"short"}):p.toLocaleDateString("en-US",{month:"short",day:"numeric"})};return e.jsxs("div",{className:"w-80 bg-card border-r border-border flex flex-col","data-testid":"sidebar",children:[e.jsx("div",{className:"p-4 border-b border-border",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(me,{className:"relative",children:[e.jsx(he,{src:t.profilePhoto||void 0}),e.jsxs(fe,{children:[t.firstName[0],t.lastName[0]]}),e.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-accent border-2 border-card rounded-full"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-sm","data-testid":"text-current-user-name",children:t.firstName}),e.jsx("p",{className:"text-xs text-accent",children:"Online"})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(D,{variant:"ghost",size:"sm",onClick:n,"data-testid":"button-profile-settings",children:e.jsx(xo,{className:"h-4 w-4"})}),e.jsx(D,{variant:"ghost",size:"sm",onClick:()=>a.mutate(),className:"text-destructive hover:text-destructive","data-testid":"button-logout",children:e.jsx(fo,{className:"h-4 w-4"})})]})]})}),e.jsx("div",{className:"p-4 border-b border-border",children:e.jsxs("div",{className:"relative",children:[e.jsx(Jr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(oe,{placeholder:"Search conversations...",className:"pl-10",value:l,onChange:h=>c(h.target.value),"data-testid":"input-search-conversations"})]})}),e.jsx(Pe,{className:"flex-1",children:e.jsx("div",{className:"space-y-1 p-2",children:m.map(h=>e.jsx("div",{className:E("p-3 hover:bg-secondary cursor-pointer rounded-md transition-colors",s?.id===h.otherUser.id&&"bg-secondary border-l-2 border-primary"),onClick:()=>r(h.otherUser),"data-testid":`conversation-${h.otherUser.id}`,children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(me,{className:"relative",children:[e.jsx(he,{src:h.otherUser.profilePhoto||void 0}),e.jsxs(fe,{children:[h.otherUser.firstName[0],h.otherUser.lastName[0]]}),h.otherUser.isOnline&&e.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-accent border-2 border-card rounded-full"})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h4",{className:"font-medium text-sm truncate","data-testid":`text-user-name-${h.otherUser.id}`,children:[h.otherUser.firstName," ",h.otherUser.lastName]}),h.lastMessage&&e.jsx("span",{className:"text-xs text-muted-foreground","data-testid":`text-last-message-time-${h.otherUser.id}`,children:f(h.lastMessage.timestamp)})]}),h.lastMessage&&e.jsx("p",{className:"text-xs text-muted-foreground truncate","data-testid":`text-last-message-preview-${h.otherUser.id}`,children:h.lastMessage.imageUrl?"📷 Photo":h.lastMessage.content})]})]})},h.id))})}),e.jsxs("div",{className:"border-t border-border p-4",children:[e.jsx("h5",{className:"text-sm font-medium text-muted-foreground mb-3",children:"Online Now"}),e.jsx("div",{className:"flex space-x-2 overflow-x-auto",children:u.map(h=>e.jsxs(me,{className:"relative cursor-pointer hover:ring-2 hover:ring-primary transition-all flex-shrink-0",onClick:()=>r(h),"data-testid":`avatar-online-user-${h.id}`,children:[e.jsx(he,{src:h.profilePhoto||void 0}),e.jsxs(fe,{children:[h.firstName[0],h.lastName[0]]}),e.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-accent border-2 border-card rounded-full"})]},h.id))})]})]})}const on=i.forwardRef(({className:t,...s},r)=>e.jsx("textarea",{className:E("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...s}));on.displayName="Textarea";const pi=i.createContext(null);function fh({children:t}){const{user:s}=be(),[r,n]=i.useState(null),[a,o]=i.useState(!1),[l,c]=i.useState([]),[d,u]=i.useState({}),m=i.useRef();Ro();const f=()=>{if(!s||r?.readyState===WebSocket.CONNECTING)return;const b=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/ws`,w=new WebSocket(b);w.onopen=()=>{o(!0),n(w)},w.onmessage=k=>{try{const y=JSON.parse(k.data);switch(y.type){case"newMessage":console.log("Received newMessage:",y),window.dispatchEvent(new CustomEvent("newMessage",{detail:y}));break;case"messageConfirmed":console.log("Received messageConfirmed:",y),window.dispatchEvent(new CustomEvent("messageConfirmed",{detail:y}));break;case"userTyping":u(j=>({...j,[y.userId]:y.isTyping})),y.isTyping&&setTimeout(()=>{u(j=>({...j,[y.userId]:!1}))},3e3);break;case"userOnline":case"userOffline":console.log(`[WebSocket] User ${y.userId} is now ${y.type==="userOnline"?"ONLINE":"OFFLINE"}`),window.dispatchEvent(new CustomEvent("onlineStatusChanged",{detail:{userId:y.userId,isOnline:y.type==="userOnline"}}));break;case"newNotification":const{notification:P}=y;console.log("Received notification:",P),P.type==="profile_view"?xm(P.fromUserName,P.fromUserPhoto,P.fromUserId,P.id):P.type==="message_received"?gm(P.fromUserName,P.fromUserPhoto,P.fromUserId,P.id):P.type==="profile_like"&&vm(P.fromUserName,P.fromUserPhoto,P.fromUserId,P.id),window.dispatchEvent(new CustomEvent("notificationReceived"));break;case"consentRequest":console.log("Received consent request:",y),window.dispatchEvent(new CustomEvent("consentRequest",{detail:y}));break;case"consentPending":console.log("Received consent pending:",y),window.dispatchEvent(new CustomEvent("consentPending",{detail:y}));break;case"consentAccepted":console.log("Received consent accepted:",y),window.dispatchEvent(new CustomEvent("consentAccepted",{detail:y}));break;case"consentRejected":console.log("Received consent rejected:",y),window.dispatchEvent(new CustomEvent("consentRejected",{detail:y}));break;case"messageNotificationsRead":console.log("Message notifications marked as read from user:",y.fromUserId),window.dispatchEvent(new CustomEvent("messageRead"));break;case"messageCountUpdate":console.log("Message count update:",y.action),y.action==="increment"&&window.dispatchEvent(new CustomEvent("messageReceived"));break;case"notificationCountUpdate":console.log("Notification count update:",y.action),y.action==="increment"&&window.dispatchEvent(new CustomEvent("notificationReceived"));break}}catch(y){console.error("Error parsing WebSocket message:",y)}},w.onclose=()=>{o(!1),n(null),s&&(m.current=setTimeout(f,3e3))},w.onerror=k=>{console.error("WebSocket error:",k)}};i.useEffect(()=>(s&&!r?f():!s&&r&&(r.close(),n(null),o(!1)),()=>{m.current&&clearTimeout(m.current),r&&r.close()}),[s]);const h=(x,b,w)=>{r&&r.readyState===WebSocket.OPEN&&r.send(JSON.stringify({type:"sendMessage",receiverId:x,content:b,imageUrl:w}))},v=(x,b)=>{r&&r.readyState===WebSocket.OPEN&&r.send(JSON.stringify({type:"typing",receiverId:x,isTyping:b}))},p=x=>{r&&r.readyState===WebSocket.OPEN&&r.send(JSON.stringify({type:"openChatWindow",otherUserId:x}))},g=x=>{r&&r.readyState===WebSocket.OPEN&&r.send(JSON.stringify({type:"closeChatWindow",otherUserId:x}))};return e.jsx(pi.Provider,{value:{socket:r,isConnected:a,sendMessage:h,sendTyping:v,openChatWindow:p,closeChatWindow:g,onlineUsers:l,typingUsers:d},children:t})}function ln(){const t=i.useContext(pi);if(!t)throw new Error("useSocket must be used within a SocketProvider");return t}const ce=i.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:E("rounded-lg border bg-card text-card-foreground shadow-sm",t),...s}));ce.displayName="Card";const ph=i.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:E("flex flex-col space-y-1.5 p-6",t),...s}));ph.displayName="CardHeader";const xh=i.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:E("text-2xl font-semibold leading-none tracking-tight",t),...s}));xh.displayName="CardTitle";const gh=i.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:E("text-sm text-muted-foreground",t),...s}));gh.displayName="CardDescription";const ye=i.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:E("p-6 pt-0",t),...s}));ye.displayName="CardContent";const vh=i.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:E("flex items-center p-6 pt-0",t),...s}));vh.displayName="CardFooter";const sr={recent:{name:"Recent",icon:"🕒",emojis:["😊","❤️","👍","😂","🔥","🎉"]},smileys:{name:"Smileys",icon:"😀",emojis:["😀","😃","😄","😁","😆","😅","🤣","😂","🙂","🙃","😉","😊","😇","🥰","😍","🤩","😘","😗","😚","😙","🥲","😋","😛","😜","🤪","😝","🤑","🤗","🤭","🤫","🤔","🤐","🤨","😐","😑","😶","😏","😒","🙄","😬","😔","😪","🤤","😴","😷","🤒","🤕","🤢","🥵","🥶","🥴","😵","🤯","🤠","🥳","🥸","😎","🤓","🧐","😕","😟","🙁","😮","😯"]},hearts:{name:"Hearts",icon:"❤️",emojis:["❤️","🧡","💛","💚","💙","💜","🖤","🤍","🤎","💕","💞","💓","💗","💖","💘","💝"]},gestures:{name:"Gestures",icon:"👋",emojis:["👍","👎","👌","🤌","🤏","✌️","🤞","🤟","🤘","🤙","👈","👉","👆","👇","☝️","👋","🤚","🖐","✋","🖖","👏","🙌","🤲","🤝","🙏","✍️","💅","🤳","💪","🦾","🦿"]},celebration:{name:"Celebration",icon:"🎉",emojis:["🎉","🎊","🎈","🎁","🎀","🎂","🍰","🧁","🔥","💯","💫","⭐","🌟","✨","⚡","💥"]}};function xi({onEmojiSelect:t,onClose:s}){const r=i.useRef(null),[n,a]=i.useState("smileys");i.useEffect(()=>{const l=c=>{r.current&&!r.current.contains(c.target)&&s()};return document.addEventListener("mousedown",l),()=>document.removeEventListener("mousedown",l)},[s]);const o=l=>{t(l)};return e.jsx(ce,{ref:r,className:"absolute bottom-14 sm:bottom-16 right-0 left-0 sm:left-auto w-full sm:w-[380px] md:w-[420px] max-w-[calc(100vw-1rem)] shadow-2xl border-border/50 z-50 overflow-hidden mx-2 sm:mx-0","data-testid":"emoji-picker",children:e.jsxs("div",{className:"flex flex-col h-[280px] sm:h-[320px]",children:[e.jsx("div",{className:"flex items-center gap-1 px-2 py-2 border-b bg-muted/30",children:Object.entries(sr).map(([l,c])=>e.jsx("button",{onClick:()=>a(l),className:E("flex-1 py-2 px-2 sm:px-3 rounded-lg text-xl sm:text-2xl transition-all hover:bg-background/80",n===l?"bg-background shadow-sm scale-110":"opacity-50 hover:opacity-100"),title:c.name,children:c.icon},l))}),e.jsx(Pe,{className:"flex-1 px-3 py-3",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-xs font-semibold text-muted-foreground px-1",children:sr[n].name}),e.jsx("div",{className:"grid grid-cols-7 sm:grid-cols-8 gap-1",children:sr[n].emojis.map((l,c)=>e.jsx("button",{className:"aspect-square flex items-center justify-center text-xl sm:text-2xl hover:bg-muted/50 rounded-lg transition-all hover:scale-125 active:scale-95",onClick:()=>o(l),"data-testid":`emoji-${c}`,children:l},c))})]})})]})})}function bh({currentUser:t,selectedUser:s,onToggleUserInfo:r}){console.log("[ChatWindow] 🔄 Component RENDER - selectedUser:",s?.id,s?.firstName);const{sendMessage:n,sendTyping:a,typingUsers:o}=ln(),{toast:l}=nt(),c=Fe(),[d,u]=i.useState(""),[m,f]=i.useState(!1),[h,v]=i.useState(s),[p,g]=i.useState(null),[x,b]=i.useState(null),w=i.useRef(null),k=i.useRef(),y=i.useRef(null),{data:P=[]}=et({queryKey:["/api/conversations",s?.id,"messages"],enabled:!!s}),j=ue({mutationFn:async M=>{const _=new FormData;_.append("messageImage",M);const z=await fetch("/api/upload/message",{method:"POST",body:_,credentials:"include"});if(!z.ok)throw new Error("Upload failed");return z.json()},onSuccess:M=>{s&&n(s.id,void 0,M.imageUrl)},onError:()=>{l({title:"Upload failed",description:"Failed to upload image",variant:"destructive"})}});i.useEffect(()=>{j.isPending||w.current?.scrollIntoView({behavior:"smooth"})},[P,j.isPending]),i.useEffect(()=>{v(s)},[s]),i.useEffect(()=>{s?.id&&c.invalidateQueries({queryKey:["/api/conversations",s.id,"messages"]})},[s?.id,c]),i.useEffect(()=>{const M=async _=>{const{userId:z,isOnline:W}=_.detail||{};if(console.log(`[ChatWindow] Received onlineStatusChanged event: userId=${z}, isOnline=${W}, selectedUser.id=${s?.id}`),s?.id&&z===s.id){console.log(`[ChatWindow] Updating status for ${z} to ${W?"online":"offline"}`);try{const Y=await fetch(`/api/users/${s.id}`);if(Y.ok){const te=await Y.json();console.log("[ChatWindow] Fetched updated user data:",te),v(te)}}catch(Y){console.error("Failed to fetch updated user data:",Y)}}};return console.log(`[ChatWindow] Setting up onlineStatusChanged listener for selectedUser.id=${s?.id}`),window.addEventListener("onlineStatusChanged",M),()=>{console.log("[ChatWindow] Removing onlineStatusChanged listener"),window.removeEventListener("onlineStatusChanged",M)}},[s?.id]),i.useEffect(()=>{const M=async()=>{if(!s){console.log("[ChatWindow] Consent fetch skipped: selectedUser is null/undefined");return}console.log(`[ChatWindow] ===== FETCHING CONSENT STATUS for user ${s.id} (${s.firstName}) =====`);try{const _=await fetch(`/api/consent/${s.id}`,{credentials:"include"});if(console.log(`[ChatWindow] Consent API response status: ${_.status}`),_.ok){const z=await _.json();console.log("[ChatWindow] Fetched consent status:",JSON.stringify(z,null,2)),z.status==="pending"&&z.consent&&z.requester?(console.log("[ChatWindow] ✅ Setting consent request from API data (we are responder)"),console.log("[ChatWindow] Consent ID:",z.consent.id),console.log("[ChatWindow] Requester:",z.requester.firstName,z.requester.id),g("pending"),b({consent:z.consent,requester:z.requester})):z.status==="waiting"?(console.log("[ChatWindow] ⏳ We are waiting for consent"),g("waiting"),b(null)):(console.log("[ChatWindow] Other status:",z.status||"null"),g(z.status||null),b(null))}else console.error("[ChatWindow] ❌ Consent API failed with status:",_.status)}catch(_){console.error("[ChatWindow] ❌ Failed to fetch consent status:",_)}};console.log("[ChatWindow] useEffect triggered for consent fetch, selectedUser:",s?.id),M()},[s?.id]),i.useEffect(()=>{const M=Y=>{const{consent:te,requester:se,firstMessage:C}=Y.detail;console.log("[ChatWindow] 📨 Received consent request event"),console.log("[ChatWindow] Requester:",se?.firstName,se?.id),console.log("[ChatWindow] Consent ID:",te?.id),console.log("[ChatWindow] Selected User:",s?.firstName,s?.id),console.log("[ChatWindow] First Message:",C?.content),s&&se&&se.id===s.id?(console.log("[ChatWindow] ✅ Setting consent request for selected user - MATCH!"),b({consent:te,requester:se}),g("pending")):(console.log("[ChatWindow] ❌ Consent request NOT for current selected user"),console.log("[ChatWindow] Condition failed: selectedUser?",!!s,"requester.id === selectedUser.id?",se?.id===s?.id))},_=Y=>{const{receiverId:te}=Y.detail;console.log("[ChatWindow] Received consent pending event:",{receiverId:te,selectedUserId:s?.id}),s&&te===s.id?(console.log("[ChatWindow] Setting consent status to waiting (we sent request)"),g("waiting"),b(null)):console.log("[ChatWindow] Consent pending not for current selected user")},z=Y=>{const{responderId:te}=Y.detail;s&&te===s.id&&(g("accepted"),b(null),l({title:"Request accepted!",description:`${s.firstName} accepted your chat request.`}))},W=Y=>{const{responderId:te}=Y.detail;s&&te===s.id&&(g("rejected"),b(null))};return window.addEventListener("consentRequest",M),window.addEventListener("consentPending",_),window.addEventListener("consentAccepted",z),window.addEventListener("consentRejected",W),()=>{window.removeEventListener("consentRequest",M),window.removeEventListener("consentPending",_),window.removeEventListener("consentAccepted",z),window.removeEventListener("consentRejected",W)}},[s?.id,s?.firstName,l]),i.useEffect(()=>{const M=z=>{const{message:W}=z.detail;s&&(W.senderId===s.id&&W.receiverId===t?.id||W.senderId===t?.id&&W.receiverId===s.id)&&c.setQueryData(["/api/conversations",s.id,"messages"],(te=[])=>te.some(C=>C.id===W.id)?te:[...te,W]),c.invalidateQueries({queryKey:["/api/conversations"]})},_=z=>{const{message:W}=z.detail;s&&(W.senderId===s.id&&W.receiverId===t?.id||W.senderId===t?.id&&W.receiverId===s.id)&&c.setQueryData(["/api/conversations",s.id,"messages"],(te=[])=>te.some(C=>C.id===W.id)?te:[...te,W]),c.invalidateQueries({queryKey:["/api/conversations"]})};return window.addEventListener("newMessage",M),window.addEventListener("messageConfirmed",_),()=>{window.removeEventListener("newMessage",M),window.removeEventListener("messageConfirmed",_)}},[c,s?.id,t?.id]);const T=()=>{!s||!d.trim()||(n(s.id,d.trim()),u(""),m&&f(!1))},$=M=>{M.key==="Enter"&&!M.shiftKey&&(M.preventDefault(),T())},N=M=>{u(M.target.value),s&&(a(s.id,!0),k.current&&clearTimeout(k.current),k.current=setTimeout(()=>{a(s.id,!1)},1e3))},F=()=>{y.current?.click()},O=M=>{const _=M.target.files?.[0];if(_){if(!_.type.startsWith("image/")){l({title:"Invalid file type",description:"Only image files are allowed",variant:"destructive"});return}if(_.size>5*1024*1024){l({title:"File too large",description:"Image must be smaller than 5MB",variant:"destructive"});return}j.mutate(_)}M.target&&(M.target.value="")},L=async()=>{if(x)try{(await fetch("/api/consent/accept",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({consentId:x.consent.id,requesterId:x.requester.id})})).ok&&(g("accepted"),b(null),l({title:"Request accepted",description:`You can now chat with ${s?.firstName}.`}))}catch(M){console.error("Failed to accept consent:",M),l({title:"Error",description:"Failed to accept request",variant:"destructive"})}},J=async()=>{if(x)try{(await fetch("/api/consent/reject",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({consentId:x.consent.id,requesterId:x.requester.id})})).ok&&(g("rejected"),b(null),l({title:"Request declined",description:`You declined ${s?.firstName}'s chat request.`}))}catch(M){console.error("Failed to reject consent:",M),l({title:"Error",description:"Failed to decline request",variant:"destructive"})}},q=M=>new Date(M).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"});return s?e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsxs("div",{className:"bg-card border-b border-border p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(me,{className:"relative",children:[e.jsx(he,{src:h?.profilePhoto||void 0}),e.jsxs(fe,{children:[h?.firstName[0],h?.lastName[0]]}),h?.isOnline&&e.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-accent border-2 border-card rounded-full"})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold","data-testid":"text-selected-user-name",children:[h?.firstName," ",h?.lastName]}),e.jsx("p",{className:E("text-sm",h?.isOnline?"text-accent":"text-muted-foreground"),children:h?.isOnline?"Online":"Offline"})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(D,{variant:"ghost",size:"sm",onClick:r,"data-testid":"button-toggle-user-info",children:e.jsx(bu,{className:"h-4 w-4"})}),e.jsx(D,{variant:"ghost",size:"sm",className:"md:hidden","data-testid":"button-toggle-sidebar",children:e.jsx(yu,{className:"h-4 w-4"})})]})]}),e.jsx(Pe,{className:"flex-1 p-4",children:e.jsxs("div",{className:"space-y-4",children:[P.map(M=>{const _=M.senderId===t.id;return e.jsxs("div",{className:E("flex items-start space-x-3",_&&"justify-end"),"data-testid":`message-${M.id}`,children:[!_&&e.jsxs(me,{className:"w-8 h-8 mt-1",children:[e.jsx(he,{src:s.profilePhoto||void 0}),e.jsx(fe,{children:s.firstName[0]})]}),e.jsxs("div",{className:"message-bubble max-w-[70%]",children:[e.jsxs("div",{className:E("rounded-lg p-3",_?"bg-primary text-primary-foreground rounded-tr-none":"bg-secondary rounded-tl-none"),children:[M.imageUrl&&e.jsx("img",{src:M.imageUrl,alt:"Shared image",className:"rounded-md max-w-xs w-full h-auto cursor-pointer hover:opacity-90 transition-opacity mb-2",onClick:()=>window.open(M.imageUrl,"_blank"),"data-testid":`image-message-${M.id}`}),M.content&&e.jsx("p",{className:"text-sm","data-testid":`text-message-content-${M.id}`,children:M.content})]}),e.jsxs("span",{className:E("text-xs text-muted-foreground mt-1 block",_&&"text-right"),"data-testid":`text-message-time-${M.id}`,children:[q(M.timestamp)," ",_&&"✓✓"]})]})]},M.id)}),x&&e.jsx("div",{className:"flex justify-center py-4",children:e.jsx("div",{className:"max-w-md w-full bg-gradient-to-br from-blue-500/10 to-purple-500/10 border border-blue-500/20 rounded-2xl p-6 shadow-lg",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"mx-auto w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-500 rounded-full flex items-center justify-center",children:e.jsx(ft,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg mb-1",children:"Chat Request"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[x.requester.firstName," wants to chat with you. Do you want to accept this request?"]})]}),e.jsxs("div",{className:"flex gap-3 justify-center",children:[e.jsx(D,{onClick:L,className:"bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600",children:"Accept"}),e.jsx(D,{onClick:J,variant:"outline",children:"Decline"})]})]})})}),p==="waiting"&&e.jsx("div",{className:"flex justify-center py-4",children:e.jsx("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-xl px-6 py-3",children:e.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[e.jsx(Me,{className:"h-4 w-4 animate-spin text-blue-500"}),"Waiting for ",s.firstName," to accept your chat request..."]})})}),p==="rejected"&&e.jsx("div",{className:"flex justify-center py-4",children:e.jsx("div",{className:"bg-red-500/10 border border-red-500/20 rounded-xl px-6 py-3",children:e.jsxs("p",{className:"text-sm text-red-600 dark:text-red-400",children:[s.firstName," has declined your chat request."]})})}),o[s.id]&&e.jsxs("div",{className:"flex items-start space-x-3","data-testid":"typing-indicator",children:[e.jsxs(me,{className:"w-8 h-8 mt-1",children:[e.jsx(he,{src:s.profilePhoto||void 0}),e.jsx(fe,{children:s.firstName[0]})]}),e.jsx("div",{className:"message-bubble max-w-[70%]",children:e.jsx("div",{className:"bg-secondary rounded-lg rounded-tl-none p-3",children:e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("div",{className:"w-2 h-2 bg-muted-foreground rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-muted-foreground rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-muted-foreground rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})})]}),e.jsx("div",{ref:w})]})}),e.jsxs("div",{className:"bg-card border-t border-border p-4",children:[e.jsxs("div",{className:"flex items-end space-x-3",children:[e.jsx(D,{variant:"ghost",size:"sm",onClick:F,disabled:j.isPending||p==="pending"||p==="waiting"||p==="rejected","data-testid":"button-upload-file",children:j.isPending?e.jsx(Me,{className:"h-4 w-4 animate-spin"}):e.jsx(po,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(on,{placeholder:p==="pending"?"Waiting for your response...":p==="waiting"?"Waiting for chat permission...":p==="rejected"?"Chat request declined":"Type a message...",value:d,onChange:N,onKeyDown:$,disabled:p==="pending"||p==="waiting"||p==="rejected",className:"resize-none min-h-[48px] max-h-32 pr-10","data-testid":"textarea-message-input"}),e.jsx(D,{variant:"ghost",size:"sm",className:"absolute right-2 top-1/2 transform -translate-y-1/2",onClick:()=>f(!m),disabled:p==="pending"||p==="waiting"||p==="rejected","data-testid":"button-emoji-picker",children:e.jsx(go,{className:"h-4 w-4"})}),m&&e.jsx(xi,{onEmojiSelect:M=>{u(_=>_+M),f(!1)},onClose:()=>f(!1)})]}),e.jsx(D,{onClick:T,disabled:!d.trim()||p==="pending"||p==="waiting"||p==="rejected","data-testid":"button-send-message",children:e.jsx(ft,{className:"h-4 w-4"})})]}),e.jsx("input",{type:"file",ref:y,onChange:O,accept:"image/*",className:"hidden","data-testid":"input-file-upload"})]})]}):e.jsx("div",{className:"flex-1 flex items-center justify-center bg-background",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-medium text-muted-foreground mb-2",children:"Select a conversation to start chatting"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose someone from your contacts to send a message"})]})})}function yh({user:t,isVisible:s,className:r}){const n=a=>new Date(a).toLocaleDateString("en-US",{month:"long",year:"numeric"});return e.jsx("div",{className:E("w-80 bg-card border-l border-border p-6 transition-all duration-300",!s&&"hidden",r),"data-testid":"user-info-panel",children:e.jsxs("div",{className:"text-center",children:[e.jsxs(me,{className:"w-24 h-24 mx-auto mb-4 relative",children:[e.jsx(he,{src:t.profilePhoto||void 0}),e.jsxs(fe,{className:"text-lg",children:[t.firstName[0],t.lastName[0]]}),t.isOnline&&e.jsx("div",{className:"absolute bottom-1 right-1 w-4 h-4 bg-accent border-2 border-card rounded-full"})]}),e.jsxs("h3",{className:"text-xl font-semibold mb-2","data-testid":"text-user-full-name",children:[t.firstName," ",t.lastName]}),e.jsx("p",{className:E("text-sm mb-6",t.isOnline?"text-accent":"text-muted-foreground"),"data-testid":"text-user-status",children:t.isOnline?"Online":"Offline"}),e.jsxs("div",{className:"space-y-4 text-left",children:[e.jsx(ce,{children:e.jsxs(ye,{className:"p-3",children:[e.jsx("h4",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Email"}),e.jsx("p",{className:"text-sm","data-testid":"text-user-email",children:t.email})]})}),e.jsx(ce,{children:e.jsxs(ye,{className:"p-3",children:[e.jsx("h4",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Username"}),e.jsxs("p",{className:"text-sm","data-testid":"text-user-username",children:["@",t.username]})]})}),e.jsx(ce,{children:e.jsxs(ye,{className:"p-3",children:[e.jsx("h4",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Joined"}),e.jsx("p",{className:"text-sm","data-testid":"text-user-join-date",children:n(t.createdAt)})]})})]})]})})}const os=Ar,wh=ma,jh=Ir,gi=i.forwardRef(({className:t,...s},r)=>e.jsx(ss,{ref:r,className:E("fixed inset-0 z-50 bg-black/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 transition-all duration-300",t),...s}));gi.displayName=ss.displayName;const qt=i.forwardRef(({className:t,children:s,...r},n)=>e.jsxs(jh,{children:[e.jsx(gi,{}),e.jsxs(rs,{ref:n,className:E("fixed left-[50%] top-[50%] z-50 grid w-[95vw] max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-2xl duration-300 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] rounded-2xl md:rounded-3xl sm:w-full",t),...r,children:[s,e.jsxs(ua,{className:"absolute right-3 top-3 md:right-4 md:top-4 rounded-full p-2 opacity-70 ring-offset-background transition-all hover:opacity-100 hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(De,{className:"h-4 w-4 md:h-5 md:w-5"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));qt.displayName=rs.displayName;const $t=({className:t,...s})=>e.jsx("div",{className:E("flex flex-col space-y-1.5 text-center sm:text-left",t),...s});$t.displayName="DialogHeader";const zt=i.forwardRef(({className:t,...s},r)=>e.jsx(Rs,{ref:r,className:E("text-lg md:text-xl font-semibold leading-none tracking-tight",t),...s}));zt.displayName=Rs.displayName;const _s=i.forwardRef(({className:t,...s},r)=>e.jsx(Ts,{ref:r,className:E("text-sm text-muted-foreground",t),...s}));_s.displayName=Ts.displayName;var Nh="Label",vi=i.forwardRef((t,s)=>e.jsx(G.label,{...t,ref:s,onMouseDown:r=>{r.target.closest("button, input, select, textarea")||(t.onMouseDown?.(r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));vi.displayName=Nh;var bi=vi;const Ch=Lt("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Z=i.forwardRef(({className:t,...s},r)=>e.jsx(bi,{ref:r,className:E(Ch(),t),...s}));Z.displayName=bi.displayName;const bt=bc,yt=yc,dt=i.forwardRef(({className:t,children:s,...r},n)=>e.jsxs(ha,{ref:n,className:E("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...r,children:[s,e.jsx(fc,{asChild:!0,children:e.jsx(ho,{className:"h-4 w-4 opacity-50"})})]}));dt.displayName=ha.displayName;const yi=i.forwardRef(({className:t,...s},r)=>e.jsx(fa,{ref:r,className:E("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(ou,{className:"h-4 w-4"})}));yi.displayName=fa.displayName;const wi=i.forwardRef(({className:t,...s},r)=>e.jsx(pa,{ref:r,className:E("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(ho,{className:"h-4 w-4"})}));wi.displayName=pa.displayName;const ut=i.forwardRef(({className:t,children:s,position:r="popper",...n},a)=>e.jsx(pc,{children:e.jsxs(xa,{ref:a,className:E("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...n,children:[e.jsx(yi,{}),e.jsx(xc,{className:E("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),e.jsx(wi,{})]})}));ut.displayName=xa.displayName;const Sh=i.forwardRef(({className:t,...s},r)=>e.jsx(ga,{ref:r,className:E("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...s}));Sh.displayName=ga.displayName;const A=i.forwardRef(({className:t,children:s,...r},n)=>e.jsxs(va,{ref:n,className:E("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(gc,{children:e.jsx(Tt,{className:"h-4 w-4"})})}),e.jsx(vc,{children:s})]}));A.displayName=va.displayName;const kh=i.forwardRef(({className:t,...s},r)=>e.jsx(ba,{ref:r,className:E("-mx-1 my-1 h-px bg-muted",t),...s}));kh.displayName=ba.displayName;function ji({isOpen:t,onClose:s,user:r}){const{toast:n}=nt(),a=Fe(),o=i.useRef(null),[l,c]=i.useState({firstName:r.firstName,lastName:r.lastName,username:r.username,email:r.email,gender:r.gender,bio:r.bio||"",location:r.location||""}),d=ue({mutationFn:async v=>{const{username:p,email:g,gender:x,...b}=v;return(await Ba("PATCH","/api/profile",b)).json()},onSuccess:v=>{a.setQueryData(["/api/user"],v),n({title:"Profile updated",description:"Your profile has been updated successfully"}),s()},onError:v=>{n({title:"Update failed",description:v.message,variant:"destructive"})}}),u=ue({mutationFn:async v=>{const p=new FormData;p.append("profilePicture",v);const g=await fetch("/api/upload/profile",{method:"POST",body:p,credentials:"include"});if(!g.ok)throw new Error("Upload failed");return g.json()},onSuccess:v=>{a.setQueryData(["/api/user"],v.user),n({title:"Profile picture updated",description:"Your profile picture has been updated successfully"})},onError:()=>{n({title:"Upload failed",description:"Failed to upload profile picture",variant:"destructive"})}}),m=v=>{v.preventDefault(),d.mutate(l)},f=()=>{o.current?.click()},h=v=>{const p=v.target.files?.[0];p&&u.mutate(p)};return e.jsx(os,{open:t,onOpenChange:s,children:e.jsxs(qt,{className:"sm:max-w-2xl max-h-[85vh] md:max-h-[90vh] flex flex-col p-0 gap-0","data-testid":"profile-modal",children:[e.jsx($t,{className:"px-4 py-4 md:px-6 md:py-5 border-b sticky top-0 bg-background z-10 rounded-t-2xl md:rounded-t-3xl",children:e.jsx(zt,{className:"text-center sm:text-left",children:"Profile Settings"})}),e.jsxs("div",{className:"overflow-y-auto px-4 py-5 md:px-6 md:py-6 space-y-6",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs("div",{className:"relative group",children:[e.jsxs(me,{className:"w-24 h-24 md:w-32 md:h-32 ring-4 ring-background shadow-xl transition-all duration-300 group-hover:ring-primary/20",children:[e.jsx(he,{src:r.profilePhoto||void 0,className:"object-cover"}),e.jsxs(fe,{className:"text-xl md:text-2xl font-semibold bg-gradient-to-br from-primary/20 to-primary/10",children:[r.firstName[0],r.lastName[0]]})]}),e.jsx("div",{className:"absolute inset-0 rounded-full bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center cursor-pointer",onClick:f,children:e.jsx($e,{className:"h-6 w-6 md:h-8 md:w-8 text-white"})})]}),e.jsxs(D,{variant:"outline",onClick:f,disabled:u.isPending,className:"mt-4 rounded-full px-6 transition-all hover:scale-105","data-testid":"button-change-photo",children:[e.jsx($e,{className:"h-4 w-4 mr-2"}),u.isPending?"Uploading...":"Change Photo"]}),e.jsx("input",{type:"file",ref:o,onChange:h,accept:"image/*",className:"hidden","data-testid":"input-profile-picture"})]}),e.jsxs("form",{onSubmit:m,className:"space-y-5",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"firstName",className:"text-sm font-medium",children:"First Name"}),e.jsx(oe,{id:"firstName",value:l.firstName,onChange:v=>c(p=>({...p,firstName:v.target.value})),required:!0,className:"rounded-xl border-2 focus:border-primary transition-all","data-testid":"input-first-name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"lastName",className:"text-sm font-medium",children:"Last Name"}),e.jsx(oe,{id:"lastName",value:l.lastName,onChange:v=>c(p=>({...p,lastName:v.target.value})),required:!0,className:"rounded-xl border-2 focus:border-primary transition-all","data-testid":"input-last-name"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"username",className:"text-sm font-medium",children:"Username"}),e.jsx(oe,{id:"username",value:l.username,disabled:!0,className:"bg-secondary/50 rounded-xl border-2 cursor-not-allowed","data-testid":"input-username"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Username cannot be changed"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"email",className:"text-sm font-medium",children:"Email"}),e.jsx(oe,{id:"email",type:"email",value:l.email||"No email provided",disabled:!0,className:"bg-secondary/50 rounded-xl border-2 cursor-not-allowed","data-testid":"input-email"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Email cannot be changed"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"gender",className:"text-sm font-medium",children:"Gender"}),e.jsxs(bt,{value:l.gender,disabled:!0,children:[e.jsx(dt,{"data-testid":"select-gender",className:"bg-secondary/50 rounded-xl border-2 cursor-not-allowed",children:e.jsx(yt,{placeholder:"Select gender"})}),e.jsxs(ut,{children:[e.jsx(A,{value:"male",children:"Male"}),e.jsx(A,{value:"female",children:"Female"}),e.jsx(A,{value:"other",children:"Other"}),e.jsx(A,{value:"prefer_not_to_say",children:"Prefer not to say"})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Gender cannot be changed"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"location",className:"text-sm font-medium",children:"Location (Optional)"}),e.jsx(oe,{id:"location",type:"text",placeholder:"Australia",value:l.location,onChange:v=>c(p=>({...p,location:v.target.value})),className:"rounded-xl border-2 focus:border-primary transition-all","data-testid":"input-location",maxLength:100})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"bio",className:"text-sm font-medium",children:"Bio (Optional)"}),e.jsx(on,{id:"bio",placeholder:"Hello, Welcome to my profile!",value:l.bio,onChange:v=>c(p=>({...p,bio:v.target.value})),className:"rounded-xl border-2 focus:border-primary transition-all min-h-[80px] resize-none","data-testid":"textarea-bio",maxLength:500,rows:3}),e.jsxs("p",{className:"text-xs text-muted-foreground text-right",children:[l.bio.length,"/500 characters"]})]}),e.jsxs("div",{className:"flex flex-col-reverse sm:flex-row gap-3 pt-4",children:[e.jsx(D,{type:"button",variant:"outline",className:"flex-1 rounded-full transition-all hover:scale-105",onClick:s,"data-testid":"button-cancel-profile",children:"Cancel"}),e.jsx(D,{type:"submit",className:"flex-1 rounded-full bg-primary hover:bg-primary/90 transition-all hover:scale-105 shadow-lg",disabled:d.isPending,"data-testid":"button-save-profile",children:d.isPending?"Saving...":"Save Changes"})]})]})]})]})})}function Ph(){const{user:t}=be(),[,s]=xe(),[r,n]=i.useState(null),[a,o]=i.useState(!1),[l,c]=i.useState(!1);return i.useEffect(()=>{t&&s("/discover")},[t,s]),t?e.jsxs("div",{className:"h-screen flex overflow-hidden","data-testid":"chat-interface",children:[e.jsx(hh,{currentUser:t,selectedUser:r,onSelectUser:n,onOpenProfile:()=>c(!0)}),e.jsx("div",{className:"flex-1 flex flex-col",children:e.jsx(bh,{currentUser:t,selectedUser:r,onToggleUserInfo:()=>o(!a)})}),r&&e.jsx(yh,{user:r,isVisible:a,className:"hidden lg:block"}),e.jsx(ji,{isOpen:l,onClose:()=>c(!1),user:t})]}):null}var qs="Tabs",[Eh]=Oe(qs,[Ms]),Ni=Ms(),[Rh,cn]=Eh(qs),Ci=i.forwardRef((t,s)=>{const{__scopeTabs:r,value:n,onValueChange:a,defaultValue:o,orientation:l="horizontal",dir:c,activationMode:d="automatic",...u}=t,m=Es(c),[f,h]=Dt({prop:n,onChange:a,defaultProp:o??"",caller:qs});return e.jsx(Rh,{scope:r,baseId:Xe(),value:f,onValueChange:h,orientation:l,dir:m,activationMode:d,children:e.jsx(G.div,{dir:m,"data-orientation":l,...u,ref:s})})});Ci.displayName=qs;var Si="TabsList",ki=i.forwardRef((t,s)=>{const{__scopeTabs:r,loop:n=!0,...a}=t,o=cn(Si,r),l=Ni(r);return e.jsx(ya,{asChild:!0,...l,orientation:o.orientation,dir:o.dir,loop:n,children:e.jsx(G.div,{role:"tablist","aria-orientation":o.orientation,...a,ref:s})})});ki.displayName=Si;var Pi="TabsTrigger",Ei=i.forwardRef((t,s)=>{const{__scopeTabs:r,value:n,disabled:a=!1,...o}=t,l=cn(Pi,r),c=Ni(r),d=Mi(l.baseId,n),u=Ii(l.baseId,n),m=n===l.value;return e.jsx(wa,{asChild:!0,...c,focusable:!a,active:m,children:e.jsx(G.button,{type:"button",role:"tab","aria-selected":m,"aria-controls":u,"data-state":m?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:d,...o,ref:s,onMouseDown:K(t.onMouseDown,f=>{!a&&f.button===0&&f.ctrlKey===!1?l.onValueChange(n):f.preventDefault()}),onKeyDown:K(t.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&l.onValueChange(n)}),onFocus:K(t.onFocus,()=>{const f=l.activationMode!=="manual";!m&&!a&&f&&l.onValueChange(n)})})})});Ei.displayName=Pi;var Ri="TabsContent",Ti=i.forwardRef((t,s)=>{const{__scopeTabs:r,value:n,forceMount:a,children:o,...l}=t,c=cn(Ri,r),d=Mi(c.baseId,n),u=Ii(c.baseId,n),m=n===c.value,f=i.useRef(m);return i.useEffect(()=>{const h=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(h)},[]),e.jsx(Ae,{present:a||m,children:({present:h})=>e.jsx(G.div,{"data-state":m?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":d,hidden:!h,id:u,tabIndex:0,...l,ref:s,style:{...t.style,animationDuration:f.current?"0s":void 0},children:h&&o})})});Ti.displayName=Ri;function Mi(t,s){return`${t}-trigger-${s}`}function Ii(t,s){return`${t}-content-${s}`}var Th=Ci,Ai=ki,Di=Ei,Oi=Ti;const Fi=Th,dn=i.forwardRef(({className:t,...s},r)=>e.jsx(Ai,{ref:r,className:E("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...s}));dn.displayName=Ai.displayName;const Pt=i.forwardRef(({className:t,...s},r)=>e.jsx(Di,{ref:r,className:E("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...s}));Pt.displayName=Di.displayName;const Et=i.forwardRef(({className:t,...s},r)=>e.jsx(Oi,{ref:r,className:E("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...s}));Et.displayName=Oi.displayName;var $s="Checkbox",[Mh]=Oe($s),[Ih,un]=Mh($s);function Ah(t){const{__scopeCheckbox:s,checked:r,children:n,defaultChecked:a,disabled:o,form:l,name:c,onCheckedChange:d,required:u,value:m="on",internal_do_not_use_render:f}=t,[h,v]=Dt({prop:r,defaultProp:a??!1,onChange:d,caller:$s}),[p,g]=i.useState(null),[x,b]=i.useState(null),w=i.useRef(!1),k=p?!!l||!!p.closest("form"):!0,y={checked:h,disabled:o,setChecked:v,control:p,setControl:g,name:c,form:l,value:m,hasConsumerStoppedPropagationRef:w,required:u,defaultChecked:Ze(a)?!1:a,isFormControl:k,bubbleInput:x,setBubbleInput:b};return e.jsx(Ih,{scope:s,...y,children:Dh(f)?f(y):n})}var Li="CheckboxTrigger",_i=i.forwardRef(({__scopeCheckbox:t,onKeyDown:s,onClick:r,...n},a)=>{const{control:o,value:l,disabled:c,checked:d,required:u,setControl:m,setChecked:f,hasConsumerStoppedPropagationRef:h,isFormControl:v,bubbleInput:p}=un(Li,t),g=le(a,m),x=i.useRef(d);return i.useEffect(()=>{const b=o?.form;if(b){const w=()=>f(x.current);return b.addEventListener("reset",w),()=>b.removeEventListener("reset",w)}},[o,f]),e.jsx(G.button,{type:"button",role:"checkbox","aria-checked":Ze(d)?"mixed":d,"aria-required":u,"data-state":Vi(d),"data-disabled":c?"":void 0,disabled:c,value:l,...n,ref:g,onKeyDown:K(s,b=>{b.key==="Enter"&&b.preventDefault()}),onClick:K(r,b=>{f(w=>Ze(w)?!0:!w),p&&v&&(h.current=b.isPropagationStopped(),h.current||b.stopPropagation())})})});_i.displayName=Li;var mn=i.forwardRef((t,s)=>{const{__scopeCheckbox:r,name:n,checked:a,defaultChecked:o,required:l,disabled:c,value:d,onCheckedChange:u,form:m,...f}=t;return e.jsx(Ah,{__scopeCheckbox:r,checked:a,defaultChecked:o,disabled:c,required:l,onCheckedChange:u,name:n,form:m,value:d,internal_do_not_use_render:({isFormControl:h})=>e.jsxs(e.Fragment,{children:[e.jsx(_i,{...f,ref:s,__scopeCheckbox:r}),h&&e.jsx(Ui,{__scopeCheckbox:r})]})})});mn.displayName=$s;var qi="CheckboxIndicator",$i=i.forwardRef((t,s)=>{const{__scopeCheckbox:r,forceMount:n,...a}=t,o=un(qi,r);return e.jsx(Ae,{present:n||Ze(o.checked)||o.checked===!0,children:e.jsx(G.span,{"data-state":Vi(o.checked),"data-disabled":o.disabled?"":void 0,...a,ref:s,style:{pointerEvents:"none",...t.style}})})});$i.displayName=qi;var zi="CheckboxBubbleInput",Ui=i.forwardRef(({__scopeCheckbox:t,...s},r)=>{const{control:n,hasConsumerStoppedPropagationRef:a,checked:o,defaultChecked:l,required:c,disabled:d,name:u,value:m,form:f,bubbleInput:h,setBubbleInput:v}=un(zi,t),p=le(r,v),g=Dr(o),x=Or(n);i.useEffect(()=>{const w=h;if(!w)return;const k=window.HTMLInputElement.prototype,P=Object.getOwnPropertyDescriptor(k,"checked").set,j=!a.current;if(g!==o&&P){const T=new Event("click",{bubbles:j});w.indeterminate=Ze(o),P.call(w,Ze(o)?!1:o),w.dispatchEvent(T)}},[h,g,o,a]);const b=i.useRef(Ze(o)?!1:o);return e.jsx(G.input,{type:"checkbox","aria-hidden":!0,defaultChecked:l??b.current,required:c,disabled:d,name:u,value:m,form:f,...s,tabIndex:-1,ref:p,style:{...s.style,...x,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});Ui.displayName=zi;function Dh(t){return typeof t=="function"}function Ze(t){return t==="indeterminate"}function Vi(t){return Ze(t)?"indeterminate":t?"checked":"unchecked"}const Wi=i.forwardRef(({className:t,...s},r)=>e.jsx(mn,{ref:r,className:E("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...s,children:e.jsx($i,{className:E("flex items-center justify-center text-current"),children:e.jsx(Tt,{className:"h-4 w-4"})})}));Wi.displayName=mn.displayName;function Oh(){const{user:t,loginMutation:s,registerMutation:r}=be(),[,n]=xe(),o=new URLSearchParams(window.location.search).get("tab")==="signup"?"register":"login",[l,c]=i.useState({username:"",password:""}),[d,u]=i.useState({username:"",password:"",email:"",firstName:"",lastName:"",gender:"",dateOfBirth:"",location:"",country:"",birthMonth:"",birthDay:"",birthYear:""}),[m,f]=i.useState(!1);if(i.useEffect(()=>{t&&!r.isPending&&n("/discover")},[t,n,r.isPending]),t&&!r.isPending)return null;const h=async p=>{p.preventDefault(),s.mutate(l,{onSuccess:()=>{n("/discover")}})},v=async p=>{if(p.preventDefault(),!d.gender||!d.birthMonth||!d.birthDay||!d.birthYear)return;const g=`${d.birthYear}-${d.birthMonth.padStart(2,"0")}-${d.birthDay.padStart(2,"0")}`,x=new Date,b=new Date(g);let w=x.getFullYear()-b.getFullYear();const k=x.getMonth()-b.getMonth();(k<0||k===0&&x.getDate()<b.getDate())&&w--;const y={username:d.username,password:d.password,email:d.email,firstName:d.firstName,lastName:d.lastName,gender:d.gender,age:w,location:d.country||void 0};r.mutate(y,{onSuccess:()=>{n("/discover")}})};return e.jsxs("div",{className:"min-h-screen flex flex-col lg:flex-row bg-background",children:[e.jsx("div",{className:"flex-1 flex items-center justify-center p-4 sm:p-6 md:p-8 lg:p-12",children:e.jsxs("div",{className:"w-full max-w-md space-y-6 sm:space-y-8",children:[e.jsxs("header",{className:"text-center space-y-2 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx("img",{src:"/android-chrome-192x192.png",alt:"SpreadLov Dating - Modern Dating Platform for Meaningful Connections",className:"h-16 w-16 sm:h-20 sm:w-20 rounded-2xl shadow-lg",width:"192",height:"192"})}),e.jsx("h1",{className:"text-3xl sm:text-4xl lg:text-5xl font-bold bg-gradient-to-r from-primary via-primary to-primary/70 bg-clip-text text-transparent",children:"Find Your Perfect Match on SpreadLov"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg text-muted-foreground max-w-md mx-auto leading-relaxed",children:"Join thousands of singles finding meaningful relationships. Start your journey to authentic connections today."})]}),e.jsxs(Fi,{defaultValue:o,className:"w-full",children:[e.jsxs(dn,{className:"grid w-full grid-cols-2 h-12 sm:h-14 rounded-xl bg-secondary/50 p-1",children:[e.jsx(Pt,{value:"login","data-testid":"tab-login",className:"rounded-lg text-sm sm:text-base font-semibold transition-all data-[state=active]:bg-primary data-[state=active]:text-primary-foreground data-[state=active]:shadow-lg data-[state=inactive]:text-foreground/80",children:"Sign In"}),e.jsx(Pt,{value:"register","data-testid":"tab-register",className:"rounded-lg text-sm sm:text-base font-semibold transition-all data-[state=active]:bg-primary data-[state=active]:text-primary-foreground data-[state=active]:shadow-lg data-[state=inactive]:text-foreground/80",children:"Sign Up"})]}),e.jsx(Et,{value:"login",className:"mt-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:e.jsx(ce,{className:"border-0 shadow-2xl rounded-2xl overflow-hidden bg-gradient-to-br from-card to-card/80",children:e.jsxs(ye,{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold tracking-tight",children:"Welcome Back to Your Dating Journey"}),e.jsx("p",{className:"text-sm sm:text-base text-muted-foreground mt-2",children:"Sign in to discover meaningful connections and chat with compatible singles"})]}),e.jsxs("form",{onSubmit:h,className:"space-y-5",children:[e.jsxs(D,{type:"button",variant:"outline",onClick:()=>window.location.href="/api/auth/google",className:"w-full h-12 sm:h-14 text-base font-semibold rounded-xl border-2 hover:bg-secondary/50 transition-all duration-300 hover:scale-[1.02]","data-testid":"button-google-login",children:[e.jsxs("svg",{className:"mr-2 h-5 w-5",viewBox:"0 0 24 24",children:[e.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),e.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),e.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),e.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),"Continue with Google"]}),e.jsxs("div",{className:"relative my-6",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-border"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-card px-2 text-muted-foreground",children:"Or sign in with email"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"login-username",className:"text-sm font-semibold",children:"Username"}),e.jsxs("div",{className:"relative",children:[e.jsx(gt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground"}),e.jsx(oe,{id:"login-username",type:"text",placeholder:"Enter your username",value:l.username,onChange:p=>c(g=>({...g,username:p.target.value})),required:!0,"data-testid":"input-login-username",className:"pl-10 h-12 rounded-xl border-2 transition-all focus:border-primary focus:ring-2 focus:ring-primary/20"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"login-password",className:"text-sm font-semibold",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Yt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground"}),e.jsx(oe,{id:"login-password",type:"password",placeholder:"Enter your password",value:l.password,onChange:p=>c(g=>({...g,password:p.target.value})),required:!0,"data-testid":"input-login-password",className:"pl-10 h-12 rounded-xl border-2 transition-all focus:border-primary focus:ring-2 focus:ring-primary/20"})]})]}),e.jsx("div",{className:"flex items-center justify-end",children:e.jsx("button",{type:"button",onClick:()=>n("/forgot-password"),className:"text-sm text-primary hover:underline font-medium transition-colors",children:"Forgot password?"})}),e.jsx(D,{type:"submit",className:"w-full h-12 sm:h-14 text-base font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-[1.02]",disabled:s.isPending,"data-testid":"button-login",children:s.isPending?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Signing In..."]}):"Sign In"})]})]})})}),e.jsx(Et,{value:"register",className:"mt-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:e.jsx(ce,{className:"border-0 shadow-2xl rounded-2xl overflow-hidden bg-gradient-to-br from-card to-card/80",children:e.jsxs(ye,{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold tracking-tight",children:"Start Your Love Story"}),e.jsx("p",{className:"text-sm sm:text-base text-muted-foreground mt-2",children:"Create your profile and meet amazing singles looking for meaningful relationships"})]}),e.jsxs("form",{onSubmit:v,className:"space-y-5",children:[e.jsxs(D,{type:"button",variant:"outline",onClick:()=>window.location.href="/api/auth/google",className:"w-full h-12 sm:h-14 text-base font-semibold rounded-xl border-2 hover:bg-secondary/50 transition-all duration-300 hover:scale-[1.02]","data-testid":"button-google-register",children:[e.jsxs("svg",{className:"mr-2 h-5 w-5",viewBox:"0 0 24 24",children:[e.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),e.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),e.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),e.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),"Continue with Google"]}),e.jsxs("div",{className:"relative my-6",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-border"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-card px-2 text-muted-foreground",children:"Or sign up with email"})})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"first-name",className:"text-sm font-semibold",children:"First Name"}),e.jsxs("div",{className:"relative",children:[e.jsx(Un,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground"}),e.jsx(oe,{id:"first-name",type:"text",placeholder:"First name",value:d.firstName,onChange:p=>u(g=>({...g,firstName:p.target.value})),required:!0,"data-testid":"input-first-name",className:"pl-10 h-12 rounded-xl border-2 transition-all focus:border-primary focus:ring-2 focus:ring-primary/20"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"last-name",className:"text-sm font-semibold",children:"Last Name"}),e.jsxs("div",{className:"relative",children:[e.jsx(Un,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground"}),e.jsx(oe,{id:"last-name",type:"text",placeholder:"Last name",value:d.lastName,onChange:p=>u(g=>({...g,lastName:p.target.value})),required:!0,"data-testid":"input-last-name",className:"pl-10 h-12 rounded-xl border-2 transition-all focus:border-primary focus:ring-2 focus:ring-primary/20"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"email",className:"text-sm font-semibold",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(st,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground"}),e.jsx(oe,{id:"email",type:"email",placeholder:"Enter your email",value:d.email,onChange:p=>u(g=>({...g,email:p.target.value})),required:!0,"data-testid":"input-email",className:"pl-10 h-12 rounded-xl border-2 transition-all focus:border-primary focus:ring-2 focus:ring-primary/20"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"username",className:"text-sm font-semibold",children:"Username"}),e.jsxs("div",{className:"relative",children:[e.jsx(gt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground"}),e.jsx(oe,{id:"username",type:"text",placeholder:"Choose a username",value:d.username,onChange:p=>u(g=>({...g,username:p.target.value})),required:!0,"data-testid":"input-register-username",className:"pl-10 h-12 rounded-xl border-2 transition-all focus:border-primary focus:ring-2 focus:ring-primary/20"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"password",className:"text-sm font-semibold",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Yt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground"}),e.jsx(oe,{id:"password",type:"password",placeholder:"Choose a password (min. 6 characters)",value:d.password,onChange:p=>u(g=>({...g,password:p.target.value})),required:!0,"data-testid":"input-register-password",className:"pl-10 h-12 rounded-xl border-2 transition-all focus:border-primary focus:ring-2 focus:ring-primary/20"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Z,{htmlFor:"gender",className:"text-sm font-semibold",children:["Gender ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(bt,{onValueChange:p=>u(g=>({...g,gender:p})),required:!0,children:[e.jsx(dt,{"data-testid":"select-gender",className:"h-12 rounded-xl border-2",children:e.jsx(yt,{placeholder:"Select gender"})}),e.jsxs(ut,{children:[e.jsx(A,{value:"male",children:"Male"}),e.jsx(A,{value:"female",children:"Female"}),e.jsx(A,{value:"other",children:"Other"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"country",className:"text-sm font-semibold",children:"Country/Region"}),e.jsxs("div",{className:"relative",children:[e.jsx(Qe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground z-10"}),e.jsxs(bt,{value:d.country,onValueChange:p=>u(g=>({...g,country:p})),children:[e.jsx(dt,{"data-testid":"select-country",className:"h-12 rounded-xl border-2 pl-10",children:e.jsx(yt,{placeholder:"Select country/region"})}),e.jsxs(ut,{className:"max-h-[200px]",children:[e.jsx(A,{value:"Afghanistan",children:"Afghanistan"}),e.jsx(A,{value:"Albania",children:"Albania"}),e.jsx(A,{value:"Algeria",children:"Algeria"}),e.jsx(A,{value:"Argentina",children:"Argentina"}),e.jsx(A,{value:"Australia",children:"Australia"}),e.jsx(A,{value:"Austria",children:"Austria"}),e.jsx(A,{value:"Bangladesh",children:"Bangladesh"}),e.jsx(A,{value:"Belgium",children:"Belgium"}),e.jsx(A,{value:"Brazil",children:"Brazil"}),e.jsx(A,{value:"Canada",children:"Canada"}),e.jsx(A,{value:"Chile",children:"Chile"}),e.jsx(A,{value:"China",children:"China"}),e.jsx(A,{value:"Colombia",children:"Colombia"}),e.jsx(A,{value:"Denmark",children:"Denmark"}),e.jsx(A,{value:"Egypt",children:"Egypt"}),e.jsx(A,{value:"Finland",children:"Finland"}),e.jsx(A,{value:"France",children:"France"}),e.jsx(A,{value:"Germany",children:"Germany"}),e.jsx(A,{value:"Greece",children:"Greece"}),e.jsx(A,{value:"India",children:"India"}),e.jsx(A,{value:"Indonesia",children:"Indonesia"}),e.jsx(A,{value:"Iran",children:"Iran"}),e.jsx(A,{value:"Iraq",children:"Iraq"}),e.jsx(A,{value:"Ireland",children:"Ireland"}),e.jsx(A,{value:"Israel",children:"Israel"}),e.jsx(A,{value:"Italy",children:"Italy"}),e.jsx(A,{value:"Japan",children:"Japan"}),e.jsx(A,{value:"Jordan",children:"Jordan"}),e.jsx(A,{value:"Kenya",children:"Kenya"}),e.jsx(A,{value:"Malaysia",children:"Malaysia"}),e.jsx(A,{value:"Mexico",children:"Mexico"}),e.jsx(A,{value:"Morocco",children:"Morocco"}),e.jsx(A,{value:"Netherlands",children:"Netherlands"}),e.jsx(A,{value:"New Zealand",children:"New Zealand"}),e.jsx(A,{value:"Nigeria",children:"Nigeria"}),e.jsx(A,{value:"Norway",children:"Norway"}),e.jsx(A,{value:"Pakistan",children:"Pakistan"}),e.jsx(A,{value:"Peru",children:"Peru"}),e.jsx(A,{value:"Philippines",children:"Philippines"}),e.jsx(A,{value:"Poland",children:"Poland"}),e.jsx(A,{value:"Portugal",children:"Portugal"}),e.jsx(A,{value:"Russia",children:"Russia"}),e.jsx(A,{value:"Saudi Arabia",children:"Saudi Arabia"}),e.jsx(A,{value:"Singapore",children:"Singapore"}),e.jsx(A,{value:"South Africa",children:"South Africa"}),e.jsx(A,{value:"South Korea",children:"South Korea"}),e.jsx(A,{value:"Spain",children:"Spain"}),e.jsx(A,{value:"Sweden",children:"Sweden"}),e.jsx(A,{value:"Switzerland",children:"Switzerland"}),e.jsx(A,{value:"Thailand",children:"Thailand"}),e.jsx(A,{value:"Turkey",children:"Turkey"}),e.jsx(A,{value:"UAE",children:"United Arab Emirates"}),e.jsx(A,{value:"UK",children:"United Kingdom"}),e.jsx(A,{value:"USA",children:"United States"}),e.jsx(A,{value:"Vietnam",children:"Vietnam"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Z,{className:"text-sm font-semibold",children:["Date of Birth ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Rt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground z-10"}),e.jsxs(bt,{value:d.birthMonth,onValueChange:p=>u(g=>({...g,birthMonth:p})),children:[e.jsx(dt,{"data-testid":"select-birth-month",className:"h-12 rounded-xl border-2 pl-9",children:e.jsx(yt,{placeholder:"Month"})}),e.jsxs(ut,{children:[e.jsx(A,{value:"1",children:"January"}),e.jsx(A,{value:"2",children:"February"}),e.jsx(A,{value:"3",children:"March"}),e.jsx(A,{value:"4",children:"April"}),e.jsx(A,{value:"5",children:"May"}),e.jsx(A,{value:"6",children:"June"}),e.jsx(A,{value:"7",children:"July"}),e.jsx(A,{value:"8",children:"August"}),e.jsx(A,{value:"9",children:"September"}),e.jsx(A,{value:"10",children:"October"}),e.jsx(A,{value:"11",children:"November"}),e.jsx(A,{value:"12",children:"December"})]})]})]}),e.jsxs(bt,{value:d.birthDay,onValueChange:p=>u(g=>({...g,birthDay:p})),children:[e.jsx(dt,{"data-testid":"select-birth-day",className:"h-12 rounded-xl border-2",children:e.jsx(yt,{placeholder:"Day"})}),e.jsx(ut,{className:"max-h-[200px]",children:Array.from({length:31},(p,g)=>g+1).map(p=>e.jsx(A,{value:String(p),children:p},p))})]}),e.jsxs(bt,{value:d.birthYear,onValueChange:p=>u(g=>({...g,birthYear:p})),children:[e.jsx(dt,{"data-testid":"select-birth-year",className:"h-12 rounded-xl border-2",children:e.jsx(yt,{placeholder:"Year"})}),e.jsx(ut,{className:"max-h-[200px]",children:Array.from({length:new Date().getFullYear()-1924},(p,g)=>new Date().getFullYear()-18-g).map(p=>e.jsx(A,{value:String(p),children:p},p))})]})]})]}),e.jsxs("div",{className:"flex items-start space-x-3 p-4 rounded-xl bg-secondary/30 border-2 border-border/50 hover:border-primary/30 transition-colors",children:[e.jsx(Wi,{id:"terms",checked:m,onCheckedChange:p=>f(p),className:"mt-1","data-testid":"checkbox-terms"}),e.jsx("div",{className:"flex-1",children:e.jsxs("label",{htmlFor:"terms",className:"text-sm font-medium leading-relaxed cursor-pointer",children:["I agree to the"," ",e.jsx("button",{type:"button",onClick:p=>{p.preventDefault(),n("/terms")},className:"text-primary hover:underline font-semibold",children:"Terms and Conditions"})]})})]}),e.jsx(D,{type:"submit",className:"w-full h-12 sm:h-14 text-base font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-[1.02]",disabled:r.isPending||!m,"data-testid":"button-register",children:r.isPending?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Creating Account..."]}):"Create Account"})]})]})})})]}),e.jsxs("section",{className:"lg:hidden space-y-4 mt-8 px-2 animate-in fade-in slide-in-from-bottom-8 duration-700",children:[e.jsx("h2",{className:"text-2xl font-bold text-center bg-gradient-to-r from-primary to-primary/70 bg-clip-text text-transparent",children:"Why Choose SpreadLov?"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("article",{className:"group p-5 rounded-2xl bg-gradient-to-br from-yellow-500/10 to-orange-500/10 border border-yellow-500/20 hover:shadow-lg transition-all duration-300",children:[e.jsx("div",{className:"bg-gradient-to-br from-yellow-500 to-orange-500 w-12 h-12 rounded-xl flex items-center justify-center mb-3 group-hover:scale-110 transition-transform duration-300",children:e.jsx(Bn,{className:"h-6 w-6 text-white"})}),e.jsx("h3",{className:"font-bold text-lg mb-2",children:"Real-Time Messaging"}),e.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:"Connect instantly with compatible singles through our advanced real-time chat system. Build meaningful relationships through authentic conversations."})]}),e.jsxs("article",{className:"group p-5 rounded-2xl bg-gradient-to-br from-green-500/10 to-emerald-500/10 border border-green-500/20 hover:shadow-lg transition-all duration-300",children:[e.jsx("div",{className:"bg-gradient-to-br from-green-500 to-emerald-500 w-12 h-12 rounded-xl flex items-center justify-center mb-3 group-hover:scale-110 transition-transform duration-300",children:e.jsx(Ns,{className:"h-6 w-6 text-white"})}),e.jsx("h3",{className:"font-bold text-lg mb-2",children:"Smart Profile Matching"}),e.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:"Our intelligent matching algorithm helps you discover people who share your interests, values, and relationship goals for authentic connections."})]}),e.jsxs("article",{className:"group p-5 rounded-2xl bg-gradient-to-br from-blue-500/10 to-purple-500/10 border border-blue-500/20 hover:shadow-lg transition-all duration-300",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-purple-500 w-12 h-12 rounded-xl flex items-center justify-center mb-3 group-hover:scale-110 transition-transform duration-300",children:e.jsx(Xr,{className:"h-6 w-6 text-white"})}),e.jsx("h3",{className:"font-bold text-lg mb-2",children:"Safe & Secure Platform"}),e.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:"Your privacy and safety are our top priorities. All profiles are verified, and our platform uses industry-leading security measures to protect your data."})]}),e.jsxs("article",{className:"group p-5 rounded-2xl bg-gradient-to-br from-pink-500/10 to-rose-500/10 border border-pink-500/20 hover:shadow-lg transition-all duration-300",children:[e.jsx("div",{className:"bg-gradient-to-br from-pink-500 to-rose-500 w-12 h-12 rounded-xl flex items-center justify-center mb-3 group-hover:scale-110 transition-transform duration-300",children:e.jsx(Ie,{className:"h-6 w-6 text-white"})}),e.jsx("h3",{className:"font-bold text-lg mb-2",children:"Meaningful Relationships"}),e.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:"SpreadLov is designed for people seeking genuine connections and long-term relationships. Join thousands of singles who've found love on our platform."})]})]})]})]})}),e.jsxs("div",{className:"hidden lg:flex flex-1 bg-gradient-to-br from-primary/10 via-primary/5 to-background items-center justify-center p-8 xl:p-12 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-grid-white/10 [mask-image:radial-gradient(white,transparent_85%)]"}),e.jsxs("div",{className:"max-w-lg text-center space-y-8 relative z-10 animate-in fade-in slide-in-from-right-8 duration-1000",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("div",{className:"bg-gradient-to-br from-primary to-primary/70 p-4 rounded-3xl shadow-2xl",children:e.jsx(Ie,{className:"h-16 w-16 xl:h-20 xl:w-20 text-white"})})}),e.jsx("h2",{className:"text-3xl xl:text-4xl font-bold bg-gradient-to-r from-primary to-primary/70 bg-clip-text text-transparent",children:"Where Real Connections Happen"}),e.jsx("p",{className:"text-muted-foreground text-base xl:text-lg leading-relaxed",children:"Join a modern dating platform designed for authentic relationships and meaningful conversations with compatible singles."})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[e.jsxs("div",{className:"group flex items-start gap-5 p-6 rounded-2xl bg-background/50 backdrop-blur-sm border border-border/50 shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105",children:[e.jsx("div",{className:"bg-gradient-to-br from-yellow-500 to-orange-500 p-3 rounded-xl shadow-lg group-hover:scale-110 transition-transform duration-300",children:e.jsx(Bn,{className:"h-7 w-7 text-white"})}),e.jsxs("div",{className:"text-left flex-1",children:[e.jsx("h3",{className:"font-bold text-lg mb-1",children:"Instant Messaging"}),e.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:"Chat in real-time with matches and build connections instantly"})]})]}),e.jsxs("div",{className:"group flex items-start gap-5 p-6 rounded-2xl bg-background/50 backdrop-blur-sm border border-border/50 shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105",children:[e.jsx("div",{className:"bg-gradient-to-br from-green-500 to-emerald-500 p-3 rounded-xl shadow-lg group-hover:scale-110 transition-transform duration-300",children:e.jsx(Ns,{className:"h-7 w-7 text-white"})}),e.jsxs("div",{className:"text-left flex-1",children:[e.jsx("h3",{className:"font-bold text-lg mb-1",children:"Smart Matching"}),e.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:"Discover compatible singles based on your interests and preferences"})]})]})]})]})]})]})}function Fh(){const[,t]=xe(),{toast:s}=nt(),[r,n]=i.useState("email"),[a,o]=i.useState(""),[l,c]=i.useState(""),[d,u]=i.useState(""),[m,f]=i.useState(""),[h,v]=i.useState(!1),p=async x=>{x.preventDefault(),v(!0);try{const b=await fetch("/api/forgot-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a})}),w=await b.json();b.ok?(s({title:"Success",description:w.message}),n("reset")):s({title:"Error",description:w.message||"Failed to send reset code",variant:"destructive"})}catch{s({title:"Error",description:"Failed to send reset code. Please try again.",variant:"destructive"})}finally{v(!1)}},g=async x=>{if(x.preventDefault(),d!==m){s({title:"Error",description:"Passwords do not match",variant:"destructive"});return}if(d.length<6){s({title:"Error",description:"Password must be at least 6 characters",variant:"destructive"});return}v(!0);try{const b=await fetch("/api/reset-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a,code:l,newPassword:d})}),w=await b.json();b.ok?(n("success"),s({title:"Success",description:w.message})):s({title:"Error",description:w.message||"Failed to reset password",variant:"destructive"})}catch{s({title:"Error",description:"Failed to reset password. Please try again.",variant:"destructive"})}finally{v(!1)}};return e.jsxs("div",{className:"min-h-screen flex flex-col lg:flex-row bg-background",children:[e.jsx("div",{className:"flex-1 flex items-center justify-center p-4 sm:p-6 md:p-8 lg:p-12",children:e.jsxs("div",{className:"w-full max-w-md space-y-6 sm:space-y-8",children:[e.jsxs("div",{className:"text-center space-y-2 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx("img",{src:"/android-chrome-192x192.png",alt:"SpreadLov",className:"h-16 w-16 sm:h-20 sm:w-20 rounded-2xl shadow-lg",width:"192",height:"192"})}),e.jsx("h1",{className:"text-3xl sm:text-4xl lg:text-5xl font-bold bg-gradient-to-r from-primary via-primary to-primary/70 bg-clip-text text-transparent",children:"SpreadLov"}),e.jsx("p",{className:"text-sm sm:text-base text-muted-foreground max-w-sm mx-auto",children:"Reset your password"})]}),e.jsx(ce,{className:"border-0 shadow-2xl rounded-2xl overflow-hidden bg-gradient-to-br from-card to-card/80 animate-in fade-in slide-in-from-bottom-4 duration-500",children:e.jsxs(ye,{className:"p-6 sm:p-8",children:[r==="email"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Forgot Password?"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Enter your email to receive a reset code"})]}),e.jsxs("form",{onSubmit:p,className:"space-y-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"email",className:"text-sm font-semibold",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(st,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground"}),e.jsx(oe,{id:"email",type:"email",placeholder:"Enter your email",value:a,onChange:x=>o(x.target.value),required:!0,className:"pl-10 h-12 rounded-xl border-2 transition-all focus:border-primary focus:ring-2 focus:ring-primary/20"})]})]}),e.jsx(D,{type:"submit",className:"w-full h-12 sm:h-14 text-base font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-[1.02]",disabled:h,children:h?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Sending Code..."]}):"Send Reset Code"}),e.jsxs("button",{type:"button",onClick:()=>t("/"),className:"w-full flex items-center justify-center gap-2 text-sm text-primary hover:underline font-medium transition-colors mt-4",children:[e.jsx(tt,{className:"h-4 w-4"}),"Back to Login"]})]})]}),r==="reset"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Reset Password"}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Enter the code sent to ",a," and your new password"]})]}),e.jsxs("form",{onSubmit:g,className:"space-y-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"code",className:"text-sm font-semibold",children:"Verification Code"}),e.jsxs("div",{className:"relative",children:[e.jsx(Vn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground"}),e.jsx(oe,{id:"code",type:"text",placeholder:"Enter 6-digit code",value:l,onChange:x=>c(x.target.value),required:!0,maxLength:6,className:"pl-10 h-12 rounded-xl border-2 transition-all focus:border-primary focus:ring-2 focus:ring-primary/20 text-center text-2xl tracking-widest font-mono"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"new-password",className:"text-sm font-semibold",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Yt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground"}),e.jsx(oe,{id:"new-password",type:"password",placeholder:"Enter new password (min. 6 characters)",value:d,onChange:x=>u(x.target.value),required:!0,className:"pl-10 h-12 rounded-xl border-2 transition-all focus:border-primary focus:ring-2 focus:ring-primary/20"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"confirm-password",className:"text-sm font-semibold",children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Yt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground"}),e.jsx(oe,{id:"confirm-password",type:"password",placeholder:"Confirm new password",value:m,onChange:x=>f(x.target.value),required:!0,className:"pl-10 h-12 rounded-xl border-2 transition-all focus:border-primary focus:ring-2 focus:ring-primary/20"})]})]}),e.jsx(D,{type:"submit",className:"w-full h-12 sm:h-14 text-base font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-[1.02]",disabled:h,children:h?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Resetting Password..."]}):"Reset Password"}),e.jsxs("button",{type:"button",onClick:()=>n("email"),className:"w-full flex items-center justify-center gap-2 text-sm text-primary hover:underline font-medium transition-colors mt-4",children:[e.jsx(tt,{className:"h-4 w-4"}),"Back"]})]})]}),r==="success"&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mb-6",children:e.jsx(Tt,{className:"h-8 w-8 text-green-600 dark:text-green-400"})}),e.jsx("h2",{className:"text-2xl font-bold tracking-tight mb-2",children:"Password Reset Successful!"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-6",children:"Your password has been reset successfully. You can now log in with your new password."}),e.jsx(D,{onClick:()=>t("/"),className:"w-full h-12 sm:h-14 text-base font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-[1.02]",children:"Back to Login"})]})]})})]})}),e.jsx("div",{className:"hidden lg:flex flex-1 items-center justify-center p-12 bg-gradient-to-br from-primary/10 via-primary/5 to-transparent",children:e.jsxs("div",{className:"max-w-md space-y-8 text-center animate-in fade-in slide-in-from-right-4 duration-700 delay-300",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"p-6 bg-primary/10 rounded-3xl",children:e.jsx(Vn,{className:"h-16 w-16 text-primary"})})}),e.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-primary via-purple-500 to-pink-500 bg-clip-text text-transparent",children:"Secure Password Reset"}),e.jsx("p",{className:"text-lg text-muted-foreground leading-relaxed",children:"We'll send a verification code to your email. The code expires in 10 minutes for your security."}),e.jsxs("div",{className:"space-y-4 pt-4",children:[e.jsxs("div",{className:"flex items-start gap-4 text-left p-4 rounded-xl bg-card/50 border border-border/50",children:[e.jsx("div",{className:"p-2 bg-orange-100 dark:bg-orange-900/30 rounded-lg",children:e.jsx(st,{className:"h-5 w-5 text-orange-600 dark:text-orange-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-1",children:"Email Verification"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive a 6-digit code instantly via email"})]})]}),e.jsxs("div",{className:"flex items-start gap-4 text-left p-4 rounded-xl bg-card/50 border border-border/50",children:[e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-lg",children:e.jsx(Yt,{className:"h-5 w-5 text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-1",children:"Secure Process"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Your password is encrypted and never shared"})]})]})]})]})})]})}function Lh(){const{toast:t}=nt(),[s,r]=i.useState("email"),[n,a]=i.useState(""),[o,l]=i.useState(""),[c,d]=i.useState(!1),u=async f=>{f.preventDefault(),d(!0);try{const h=await fetch("/api/account/request-delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n})}),v=await h.json();h.ok?(t({title:"Verification Code Sent",description:v.message}),r("verify")):t({title:"Error",description:v.message||"Failed to send verification code",variant:"destructive"})}catch{t({title:"Error",description:"Failed to process request. Please try again.",variant:"destructive"})}finally{d(!1)}},m=async f=>{f.preventDefault(),d(!0);try{const h=await fetch("/api/account/verify-delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,code:o})}),v=await h.json();h.ok?(r("success"),t({title:"Account Deleted",description:v.message}),setTimeout(()=>{window.location.href="https://spreadlov.com"},3e3)):t({title:"Error",description:v.message||"Failed to verify code",variant:"destructive"})}catch{t({title:"Error",description:"Failed to delete account. Please try again.",variant:"destructive"})}finally{d(!1)}};return e.jsxs("div",{className:"min-h-screen flex flex-col lg:flex-row bg-gradient-to-br from-background via-background to-destructive/5",children:[e.jsx("div",{className:"flex-1 flex items-center justify-center p-4 sm:p-6 md:p-8 lg:p-12",children:e.jsxs("div",{className:"w-full max-w-md space-y-6 sm:space-y-8",children:[e.jsxs("div",{className:"text-center space-y-2 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx("img",{src:"/android-chrome-192x192.png",alt:"SpreadLov",className:"h-16 w-16 sm:h-20 sm:w-20 rounded-2xl shadow-lg",width:"192",height:"192"})}),e.jsx("h1",{className:"text-3xl sm:text-4xl lg:text-5xl font-bold bg-gradient-to-r from-primary via-primary to-primary/70 bg-clip-text text-transparent",children:"SpreadLov"}),e.jsx("p",{className:"text-sm sm:text-base text-muted-foreground max-w-sm mx-auto",children:"Delete your account"})]}),e.jsx(ce,{className:"border-0 shadow-2xl rounded-2xl overflow-hidden bg-gradient-to-br from-card to-card/80 animate-in fade-in slide-in-from-bottom-4 duration-500",children:e.jsxs(ye,{className:"p-6 sm:p-8",children:[s==="email"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight text-destructive",children:"Delete Account"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Enter your email to receive a verification code"})]}),e.jsx("div",{className:"mb-6 p-4 bg-destructive/10 border-l-4 border-destructive rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(vr,{className:"h-5 w-5 text-destructive mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-destructive text-sm",children:"Warning: This action is permanent"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"All your data including profile, messages, photos, and connections will be permanently deleted and cannot be recovered."})]})]})}),e.jsxs("form",{onSubmit:u,className:"space-y-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"email",className:"text-sm font-semibold",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(st,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground"}),e.jsx(oe,{id:"email",type:"email",placeholder:"Enter your email",value:n,onChange:f=>a(f.target.value),required:!0,className:"pl-10 h-12 rounded-xl border-2 transition-all focus:border-destructive focus:ring-2 focus:ring-destructive/20"})]})]}),e.jsx(D,{type:"submit",variant:"destructive",className:"w-full h-12 sm:h-14 text-base font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-[1.02]",disabled:c,children:c?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Sending Code..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ht,{className:"h-5 w-5 mr-2"}),"Request Deletion Code"]})})]})]}),s==="verify"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight text-destructive",children:"Verify Deletion"}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Enter the 6-digit code sent to ",n]})]}),e.jsx("div",{className:"mb-6 p-4 bg-amber-500/10 border-l-4 border-amber-500 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(vr,{className:"h-5 w-5 text-amber-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-amber-600 text-sm",children:"Final Step"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Once you verify this code, your account will be deleted immediately and permanently."})]})]})}),e.jsxs("form",{onSubmit:m,className:"space-y-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"code",className:"text-sm font-semibold",children:"Verification Code"}),e.jsxs("div",{className:"relative",children:[e.jsx(ts,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground"}),e.jsx(oe,{id:"code",type:"text",placeholder:"Enter 6-digit code",value:o,onChange:f=>l(f.target.value),required:!0,maxLength:6,className:"pl-10 h-12 rounded-xl border-2 transition-all focus:border-destructive focus:ring-2 focus:ring-destructive/20 text-center text-2xl tracking-widest font-mono"})]}),e.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Code expires in 10 minutes"})]}),e.jsx(D,{type:"submit",variant:"destructive",className:"w-full h-12 sm:h-14 text-base font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-[1.02]",disabled:c,children:c?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Deleting Account..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ht,{className:"h-5 w-5 mr-2"}),"Confirm & Delete Account"]})}),e.jsx("button",{type:"button",onClick:()=>r("email"),className:"w-full text-sm text-muted-foreground hover:text-primary transition-colors mt-2",children:"Cancel deletion"})]})]}),s==="success"&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mb-6",children:e.jsx(Tt,{className:"h-8 w-8 text-green-600 dark:text-green-400"})}),e.jsx("h2",{className:"text-2xl font-bold tracking-tight mb-2",children:"Account Deleted Successfully"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-6",children:"Your account and all associated data have been permanently deleted."}),e.jsx("p",{className:"text-xs text-muted-foreground mb-4",children:"Redirecting to spreadlov.com in 3 seconds..."}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-primary",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary"}),e.jsx("span",{className:"text-sm",children:"Please wait..."})]})]})]})})]})}),e.jsx("div",{className:"hidden lg:flex flex-1 items-center justify-center p-12 bg-gradient-to-br from-destructive/10 via-destructive/5 to-transparent",children:e.jsxs("div",{className:"max-w-md space-y-8 text-center animate-in fade-in slide-in-from-right-4 duration-700 delay-300",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"p-6 bg-destructive/10 rounded-3xl",children:e.jsx(ht,{className:"h-16 w-16 text-destructive"})})}),e.jsx("h2",{className:"text-3xl font-bold text-foreground",children:"Account Deletion Process"}),e.jsx("p",{className:"text-lg text-muted-foreground leading-relaxed",children:"We take your privacy seriously. Once you confirm deletion, all your data will be permanently removed from our systems."}),e.jsxs("div",{className:"space-y-4 pt-4",children:[e.jsxs("div",{className:"flex items-start gap-4 text-left p-4 rounded-xl bg-card/50 border border-border/50",children:[e.jsx("div",{className:"p-2 bg-orange-100 dark:bg-orange-900/30 rounded-lg",children:e.jsx(st,{className:"h-5 w-5 text-orange-600 dark:text-orange-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-1",children:"Email Verification"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive a 6-digit verification code to confirm your identity"})]})]}),e.jsxs("div",{className:"flex items-start gap-4 text-left p-4 rounded-xl bg-card/50 border border-border/50",children:[e.jsx("div",{className:"p-2 bg-red-100 dark:bg-red-900/30 rounded-lg",children:e.jsx(ht,{className:"h-5 w-5 text-red-600 dark:text-red-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-1",children:"Permanent Deletion"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"All profile data, messages, photos, and connections removed"})]})]}),e.jsxs("div",{className:"flex items-start gap-4 text-left p-4 rounded-xl bg-card/50 border border-border/50",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:e.jsx(ts,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-1",children:"Secure & Private"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Your data is completely erased from our database"})]})]})]})]})})]})}function _h(){const[,t]=xe();return e.jsx("div",{className:"min-h-screen bg-background",children:e.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-5xl",children:[e.jsxs(D,{variant:"ghost",onClick:()=>t("/auth?tab=signup"),className:"mb-6 hover:bg-secondary/50 transition-colors",children:[e.jsx(tt,{className:"mr-2 h-4 w-4"}),"Back to Sign Up"]}),e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("div",{className:"bg-gradient-to-br from-blue-500 via-purple-500 to-pink-500 p-4 rounded-2xl shadow-2xl",children:e.jsx(pu,{className:"h-12 w-12 text-white"})})}),e.jsx("h1",{className:"text-3xl sm:text-4xl lg:text-5xl font-bold bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 bg-clip-text text-transparent",children:"Terms and Conditions"}),e.jsx("p",{className:"text-muted-foreground text-sm sm:text-base max-w-2xl mx-auto",children:"Last updated: October 10, 2025"})]}),e.jsx(ce,{className:"border-0 shadow-2xl rounded-2xl overflow-hidden bg-gradient-to-br from-card to-card/80",children:e.jsx(ye,{className:"p-6 sm:p-8 lg:p-10",children:e.jsx(Pe,{className:"h-[600px] pr-4",children:e.jsxs("div",{className:"space-y-8",children:[e.jsxs("section",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-purple-500 p-2 rounded-lg",children:e.jsx(vo,{className:"h-5 w-5 text-white"})}),e.jsx("h2",{className:"text-2xl font-bold",children:"1. Acceptance of Terms"})]}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:'By accessing and using SpreadLov ("the Service"), you accept and agree to be bound by the terms and provision of this agreement. If you do not agree to abide by the above, please do not use this service.'}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"These Terms and Conditions constitute a legally binding agreement between you and SpreadLov regarding your use of our platform and services."})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-purple-500 to-pink-500 p-2 rounded-lg",children:e.jsx(ts,{className:"h-5 w-5 text-white"})}),e.jsx("h2",{className:"text-2xl font-bold",children:"2. Use of Service"})]}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"You must be at least 18 years old to use this service. By using SpreadLov, you represent and warrant that you are at least 18 years of age."}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"You are responsible for maintaining the confidentiality of your account and password. You agree to accept responsibility for all activities that occur under your account."}),e.jsx("div",{className:"bg-secondary/30 border-l-4 border-primary p-4 rounded-r-lg",children:e.jsx("p",{className:"text-sm font-medium",children:"You agree to use the Service only for lawful purposes and in accordance with these Terms."})})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"3. User Conduct"}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"You agree not to use SpreadLov to:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-muted-foreground ml-4",children:[e.jsx("li",{children:"Harass, abuse, or harm another person"}),e.jsx("li",{children:"Transmit any content that is unlawful, harmful, threatening, abusive, or otherwise objectionable"}),e.jsx("li",{children:"Impersonate any person or entity, or falsely state or misrepresent your affiliation with a person or entity"}),e.jsx("li",{children:"Interfere with or disrupt the Service or servers or networks connected to the Service"}),e.jsx("li",{children:"Violate any applicable local, state, national, or international law"}),e.jsx("li",{children:"Upload or transmit viruses or any other type of malicious code"})]})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"4. Privacy and Data Protection"}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"Your privacy is important to us. Our Privacy Policy explains how we collect, use, and protect your personal information. By using SpreadLov, you consent to our collection and use of personal data as outlined in our Privacy Policy."}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"We implement appropriate security measures to protect your personal information. However, no method of transmission over the Internet is 100% secure, and we cannot guarantee absolute security."})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"5. Intellectual Property"}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"The Service and its original content, features, and functionality are and will remain the exclusive property of SpreadLov and its licensors. The Service is protected by copyright, trademark, and other laws."}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"You retain ownership of any content you submit, post, or display on or through the Service. By posting content, you grant us a worldwide, non-exclusive, royalty-free license to use, copy, reproduce, process, adapt, modify, publish, transmit, display, and distribute such content."})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"6. Content Moderation"}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"We reserve the right to remove any content that violates these Terms or that we deem inappropriate. We also reserve the right to suspend or terminate accounts that violate these Terms."}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"While we strive to maintain a safe and respectful environment, we do not pre-screen content and are not responsible for user-generated content."})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-orange-500 to-red-500 p-2 rounded-lg",children:e.jsx(Nu,{className:"h-5 w-5 text-white"})}),e.jsx("h2",{className:"text-2xl font-bold",children:"7. Limitation of Liability"})]}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"In no event shall SpreadLov, nor its directors, employees, partners, agents, suppliers, or affiliates, be liable for any indirect, incidental, special, consequential, or punitive damages, including without limitation, loss of profits, data, use, goodwill, or other intangible losses, resulting from:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-muted-foreground ml-4",children:[e.jsx("li",{children:"Your access to or use of or inability to access or use the Service"}),e.jsx("li",{children:"Any conduct or content of any third party on the Service"}),e.jsx("li",{children:"Any content obtained from the Service"}),e.jsx("li",{children:"Unauthorized access, use, or alteration of your transmissions or content"})]})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"8. Disclaimer of Warranties"}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:'The Service is provided on an "AS IS" and "AS AVAILABLE" basis. SpreadLov makes no warranties, expressed or implied, and hereby disclaims and negates all other warranties including, without limitation, implied warranties or conditions of merchantability, fitness for a particular purpose, or non-infringement of intellectual property.'})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"9. Termination"}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"We may terminate or suspend your account and bar access to the Service immediately, without prior notice or liability, under our sole discretion, for any reason whatsoever, including without limitation if you breach the Terms."}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"If you wish to terminate your account, you may simply discontinue using the Service or contact us to request account deletion."})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"10. Changes to Terms"}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"We reserve the right to modify or replace these Terms at any time at our sole discretion. If a revision is material, we will provide at least 30 days' notice prior to any new terms taking effect."}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"By continuing to access or use our Service after any revisions become effective, you agree to be bound by the revised terms. If you do not agree to the new terms, you are no longer authorized to use the Service."})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"11. Governing Law"}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"These Terms shall be governed and construed in accordance with the laws of the jurisdiction in which SpreadLov operates, without regard to its conflict of law provisions."}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"Our failure to enforce any right or provision of these Terms will not be considered a waiver of those rights."})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"12. Contact Information"}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"If you have any questions about these Terms, please contact us through our support channels within the application."})]}),e.jsx("div",{className:"mt-8 p-6 bg-gradient-to-br from-primary/10 to-primary/5 rounded-xl border-2 border-primary/20",children:e.jsx("p",{className:"text-sm text-center font-medium",children:"By creating an account on SpreadLov, you acknowledge that you have read, understood, and agree to be bound by these Terms and Conditions."})})]})})})}),e.jsx("div",{className:"flex justify-center pb-8",children:e.jsx(D,{onClick:()=>t("/auth?tab=signup"),className:"h-12 px-8 text-base font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105",children:"Back to Sign Up"})})]})]})})}const qh=Lt("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Xt({className:t,variant:s,...r}){return e.jsx("div",{className:E(qh({variant:s}),t),...r})}var Bi=["PageUp","PageDown"],Hi=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Ki={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Ut="Slider",[wr,$h,zh]=aa(Ut),[Gi]=Oe(Ut,[zh]),[Uh,zs]=Gi(Ut),Qi=i.forwardRef((t,s)=>{const{name:r,min:n=0,max:a=100,step:o=1,orientation:l="horizontal",disabled:c=!1,minStepsBetweenThumbs:d=0,defaultValue:u=[n],value:m,onValueChange:f=()=>{},onValueCommit:h=()=>{},inverted:v=!1,form:p,...g}=t,x=i.useRef(new Set),b=i.useRef(0),k=l==="horizontal"?Vh:Wh,[y=[],P]=Dt({prop:m,defaultProp:u,onChange:O=>{[...x.current][b.current]?.focus(),f(O)}}),j=i.useRef(y);function T(O){const L=Qh(y,O);F(O,L)}function $(O){F(O,b.current)}function N(){const O=j.current[b.current];y[b.current]!==O&&h(y)}function F(O,L,{commit:J}={commit:!1}){const q=Zh(o),M=ef(Math.round((O-n)/o)*o+n,q),_=Mr(M,[n,a]);P((z=[])=>{const W=Kh(z,_,L);if(Jh(W,d*o)){b.current=W.indexOf(_);const Y=String(W)!==String(z);return Y&&J&&h(W),Y?W:z}else return z})}return e.jsx(Uh,{scope:t.__scopeSlider,name:r,disabled:c,min:n,max:a,valueIndexToChangeRef:b,thumbs:x.current,values:y,orientation:l,form:p,children:e.jsx(wr.Provider,{scope:t.__scopeSlider,children:e.jsx(wr.Slot,{scope:t.__scopeSlider,children:e.jsx(k,{"aria-disabled":c,"data-disabled":c?"":void 0,...g,ref:s,onPointerDown:K(g.onPointerDown,()=>{c||(j.current=y)}),min:n,max:a,inverted:v,onSlideStart:c?void 0:T,onSlideMove:c?void 0:$,onSlideEnd:c?void 0:N,onHomeKeyDown:()=>!c&&F(n,0,{commit:!0}),onEndKeyDown:()=>!c&&F(a,y.length-1,{commit:!0}),onStepKeyDown:({event:O,direction:L})=>{if(!c){const M=Bi.includes(O.key)||O.shiftKey&&Hi.includes(O.key)?10:1,_=b.current,z=y[_],W=o*M*L;F(z+W,_,{commit:!0})}}})})})})});Qi.displayName=Ut;var[Yi,Xi]=Gi(Ut,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Vh=i.forwardRef((t,s)=>{const{min:r,max:n,dir:a,inverted:o,onSlideStart:l,onSlideMove:c,onSlideEnd:d,onStepKeyDown:u,...m}=t,[f,h]=i.useState(null),v=le(s,k=>h(k)),p=i.useRef(void 0),g=Es(a),x=g==="ltr",b=x&&!o||!x&&o;function w(k){const y=p.current||f.getBoundingClientRect(),P=[0,y.width],T=hn(P,b?[r,n]:[n,r]);return p.current=y,T(k-y.left)}return e.jsx(Yi,{scope:t.__scopeSlider,startEdge:b?"left":"right",endEdge:b?"right":"left",direction:b?1:-1,size:"width",children:e.jsx(Ji,{dir:g,"data-orientation":"horizontal",...m,ref:v,style:{...m.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:k=>{const y=w(k.clientX);l?.(y)},onSlideMove:k=>{const y=w(k.clientX);c?.(y)},onSlideEnd:()=>{p.current=void 0,d?.()},onStepKeyDown:k=>{const P=Ki[b?"from-left":"from-right"].includes(k.key);u?.({event:k,direction:P?-1:1})}})})}),Wh=i.forwardRef((t,s)=>{const{min:r,max:n,inverted:a,onSlideStart:o,onSlideMove:l,onSlideEnd:c,onStepKeyDown:d,...u}=t,m=i.useRef(null),f=le(s,m),h=i.useRef(void 0),v=!a;function p(g){const x=h.current||m.current.getBoundingClientRect(),b=[0,x.height],k=hn(b,v?[n,r]:[r,n]);return h.current=x,k(g-x.top)}return e.jsx(Yi,{scope:t.__scopeSlider,startEdge:v?"bottom":"top",endEdge:v?"top":"bottom",size:"height",direction:v?1:-1,children:e.jsx(Ji,{"data-orientation":"vertical",...u,ref:f,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:g=>{const x=p(g.clientY);o?.(x)},onSlideMove:g=>{const x=p(g.clientY);l?.(x)},onSlideEnd:()=>{h.current=void 0,c?.()},onStepKeyDown:g=>{const b=Ki[v?"from-bottom":"from-top"].includes(g.key);d?.({event:g,direction:b?-1:1})}})})}),Ji=i.forwardRef((t,s)=>{const{__scopeSlider:r,onSlideStart:n,onSlideMove:a,onSlideEnd:o,onHomeKeyDown:l,onEndKeyDown:c,onStepKeyDown:d,...u}=t,m=zs(Ut,r);return e.jsx(G.span,{...u,ref:s,onKeyDown:K(t.onKeyDown,f=>{f.key==="Home"?(l(f),f.preventDefault()):f.key==="End"?(c(f),f.preventDefault()):Bi.concat(Hi).includes(f.key)&&(d(f),f.preventDefault())}),onPointerDown:K(t.onPointerDown,f=>{const h=f.target;h.setPointerCapture(f.pointerId),f.preventDefault(),m.thumbs.has(h)?h.focus():n(f)}),onPointerMove:K(t.onPointerMove,f=>{f.target.hasPointerCapture(f.pointerId)&&a(f)}),onPointerUp:K(t.onPointerUp,f=>{const h=f.target;h.hasPointerCapture(f.pointerId)&&(h.releasePointerCapture(f.pointerId),o(f))})})}),Zi="SliderTrack",el=i.forwardRef((t,s)=>{const{__scopeSlider:r,...n}=t,a=zs(Zi,r);return e.jsx(G.span,{"data-disabled":a.disabled?"":void 0,"data-orientation":a.orientation,...n,ref:s})});el.displayName=Zi;var jr="SliderRange",tl=i.forwardRef((t,s)=>{const{__scopeSlider:r,...n}=t,a=zs(jr,r),o=Xi(jr,r),l=i.useRef(null),c=le(s,l),d=a.values.length,u=a.values.map(h=>nl(h,a.min,a.max)),m=d>1?Math.min(...u):0,f=100-Math.max(...u);return e.jsx(G.span,{"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,...n,ref:c,style:{...t.style,[o.startEdge]:m+"%",[o.endEdge]:f+"%"}})});tl.displayName=jr;var Nr="SliderThumb",sl=i.forwardRef((t,s)=>{const r=$h(t.__scopeSlider),[n,a]=i.useState(null),o=le(s,c=>a(c)),l=i.useMemo(()=>n?r().findIndex(c=>c.ref.current===n):-1,[r,n]);return e.jsx(Bh,{...t,ref:o,index:l})}),Bh=i.forwardRef((t,s)=>{const{__scopeSlider:r,index:n,name:a,...o}=t,l=zs(Nr,r),c=Xi(Nr,r),[d,u]=i.useState(null),m=le(s,w=>u(w)),f=d?l.form||!!d.closest("form"):!0,h=Or(d),v=l.values[n],p=v===void 0?0:nl(v,l.min,l.max),g=Gh(n,l.values.length),x=h?.[c.size],b=x?Yh(x,p,c.direction):0;return i.useEffect(()=>{if(d)return l.thumbs.add(d),()=>{l.thumbs.delete(d)}},[d,l.thumbs]),e.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[c.startEdge]:`calc(${p}% + ${b}px)`},children:[e.jsx(wr.ItemSlot,{scope:t.__scopeSlider,children:e.jsx(G.span,{role:"slider","aria-label":t["aria-label"]||g,"aria-valuemin":l.min,"aria-valuenow":v,"aria-valuemax":l.max,"aria-orientation":l.orientation,"data-orientation":l.orientation,"data-disabled":l.disabled?"":void 0,tabIndex:l.disabled?void 0:0,...o,ref:m,style:v===void 0?{display:"none"}:t.style,onFocus:K(t.onFocus,()=>{l.valueIndexToChangeRef.current=n})})}),f&&e.jsx(rl,{name:a??(l.name?l.name+(l.values.length>1?"[]":""):void 0),form:l.form,value:v},n)]})});sl.displayName=Nr;var Hh="RadioBubbleInput",rl=i.forwardRef(({__scopeSlider:t,value:s,...r},n)=>{const a=i.useRef(null),o=le(a,n),l=Dr(s);return i.useEffect(()=>{const c=a.current;if(!c)return;const d=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(d,"value").set;if(l!==s&&m){const f=new Event("input",{bubbles:!0});m.call(c,s),c.dispatchEvent(f)}},[l,s]),e.jsx(G.input,{style:{display:"none"},...r,ref:o,defaultValue:s})});rl.displayName=Hh;function Kh(t=[],s,r){const n=[...t];return n[r]=s,n.sort((a,o)=>a-o)}function nl(t,s,r){const o=100/(r-s)*(t-s);return Mr(o,[0,100])}function Gh(t,s){return s>2?`Value ${t+1} of ${s}`:s===2?["Minimum","Maximum"][t]:void 0}function Qh(t,s){if(t.length===1)return 0;const r=t.map(a=>Math.abs(a-s)),n=Math.min(...r);return r.indexOf(n)}function Yh(t,s,r){const n=t/2,o=hn([0,50],[0,n]);return(n-o(s)*r)*r}function Xh(t){return t.slice(0,-1).map((s,r)=>t[r+1]-s)}function Jh(t,s){if(s>0){const r=Xh(t);return Math.min(...r)>=s}return!0}function hn(t,s){return r=>{if(t[0]===t[1]||s[0]===s[1])return s[0];const n=(s[1]-s[0])/(t[1]-t[0]);return s[0]+n*(r-t[0])}}function Zh(t){return(String(t).split(".")[1]||"").length}function ef(t,s){const r=Math.pow(10,s);return Math.round(t*r)/r}var al=Qi,tf=el,sf=tl,rf=sl;const ol=i.forwardRef(({className:t,...s},r)=>e.jsxs(al,{ref:r,className:E("relative flex w-full touch-none select-none items-center",t),...s,children:[e.jsx(tf,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:e.jsx(sf,{className:"absolute h-full bg-primary"})}),(s.value||s.defaultValue||[0]).map((n,a)=>e.jsx(rf,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"},a))]}));ol.displayName=al.displayName;var fn="Radio",[nf,il]=Oe(fn),[af,of]=nf(fn),ll=i.forwardRef((t,s)=>{const{__scopeRadio:r,name:n,checked:a=!1,required:o,disabled:l,value:c="on",onCheck:d,form:u,...m}=t,[f,h]=i.useState(null),v=le(s,x=>h(x)),p=i.useRef(!1),g=f?u||!!f.closest("form"):!0;return e.jsxs(af,{scope:r,checked:a,disabled:l,children:[e.jsx(G.button,{type:"button",role:"radio","aria-checked":a,"data-state":ml(a),"data-disabled":l?"":void 0,disabled:l,value:c,...m,ref:v,onClick:K(t.onClick,x=>{a||d?.(),g&&(p.current=x.isPropagationStopped(),p.current||x.stopPropagation())})}),g&&e.jsx(ul,{control:f,bubbles:!p.current,name:n,value:c,checked:a,required:o,disabled:l,form:u,style:{transform:"translateX(-100%)"}})]})});ll.displayName=fn;var cl="RadioIndicator",dl=i.forwardRef((t,s)=>{const{__scopeRadio:r,forceMount:n,...a}=t,o=of(cl,r);return e.jsx(Ae,{present:n||o.checked,children:e.jsx(G.span,{"data-state":ml(o.checked),"data-disabled":o.disabled?"":void 0,...a,ref:s})})});dl.displayName=cl;var lf="RadioBubbleInput",ul=i.forwardRef(({__scopeRadio:t,control:s,checked:r,bubbles:n=!0,...a},o)=>{const l=i.useRef(null),c=le(l,o),d=Dr(r),u=Or(s);return i.useEffect(()=>{const m=l.current;if(!m)return;const f=window.HTMLInputElement.prototype,v=Object.getOwnPropertyDescriptor(f,"checked").set;if(d!==r&&v){const p=new Event("click",{bubbles:n});v.call(m,r),m.dispatchEvent(p)}},[d,r,n]),e.jsx(G.input,{type:"radio","aria-hidden":!0,defaultChecked:r,...a,tabIndex:-1,ref:c,style:{...a.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});ul.displayName=lf;function ml(t){return t?"checked":"unchecked"}var cf=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Us="RadioGroup",[df]=Oe(Us,[Ms,il]),hl=Ms(),fl=il(),[uf,mf]=df(Us),pl=i.forwardRef((t,s)=>{const{__scopeRadioGroup:r,name:n,defaultValue:a,value:o,required:l=!1,disabled:c=!1,orientation:d,dir:u,loop:m=!0,onValueChange:f,...h}=t,v=hl(r),p=Es(u),[g,x]=Dt({prop:o,defaultProp:a??null,onChange:f,caller:Us});return e.jsx(uf,{scope:r,name:n,required:l,disabled:c,value:g,onValueChange:x,children:e.jsx(ya,{asChild:!0,...v,orientation:d,dir:p,loop:m,children:e.jsx(G.div,{role:"radiogroup","aria-required":l,"aria-orientation":d,"data-disabled":c?"":void 0,dir:p,...h,ref:s})})})});pl.displayName=Us;var xl="RadioGroupItem",gl=i.forwardRef((t,s)=>{const{__scopeRadioGroup:r,disabled:n,...a}=t,o=mf(xl,r),l=o.disabled||n,c=hl(r),d=fl(r),u=i.useRef(null),m=le(s,u),f=o.value===a.value,h=i.useRef(!1);return i.useEffect(()=>{const v=g=>{cf.includes(g.key)&&(h.current=!0)},p=()=>h.current=!1;return document.addEventListener("keydown",v),document.addEventListener("keyup",p),()=>{document.removeEventListener("keydown",v),document.removeEventListener("keyup",p)}},[]),e.jsx(wa,{asChild:!0,...c,focusable:!l,active:f,children:e.jsx(ll,{disabled:l,required:o.required,checked:f,...d,...a,name:o.name,ref:m,onCheck:()=>o.onValueChange(a.value),onKeyDown:K(v=>{v.key==="Enter"&&v.preventDefault()}),onFocus:K(a.onFocus,()=>{h.current&&u.current?.click()})})})});gl.displayName=xl;var hf="RadioGroupIndicator",vl=i.forwardRef((t,s)=>{const{__scopeRadioGroup:r,...n}=t,a=fl(r);return e.jsx(dl,{...a,...n,ref:s})});vl.displayName=hf;var bl=pl,yl=gl,ff=vl;const pn=i.forwardRef(({className:t,...s},r)=>e.jsx(bl,{className:E("grid gap-2",t),...s,ref:r}));pn.displayName=bl.displayName;const Ye=i.forwardRef(({className:t,...s},r)=>e.jsx(yl,{ref:r,className:E("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...s,children:e.jsx(ff,{className:"flex items-center justify-center",children:e.jsx(cu,{className:"h-2.5 w-2.5 fill-current text-current"})})}));Ye.displayName=yl.displayName;var Jn=1,pf=.9,xf=.8,gf=.17,rr=.1,nr=.999,vf=.9999,bf=.99,yf=/[\\\/_+.#"@\[\(\{&]/,wf=/[\\\/_+.#"@\[\(\{&]/g,jf=/[\s-]/,wl=/[\s-]/g;function Cr(t,s,r,n,a,o,l){if(o===s.length)return a===t.length?Jn:bf;var c=`${a},${o}`;if(l[c]!==void 0)return l[c];for(var d=n.charAt(o),u=r.indexOf(d,a),m=0,f,h,v,p;u>=0;)f=Cr(t,s,r,n,u+1,o+1,l),f>m&&(u===a?f*=Jn:yf.test(t.charAt(u-1))?(f*=xf,v=t.slice(a,u-1).match(wf),v&&a>0&&(f*=Math.pow(nr,v.length))):jf.test(t.charAt(u-1))?(f*=pf,p=t.slice(a,u-1).match(wl),p&&a>0&&(f*=Math.pow(nr,p.length))):(f*=gf,a>0&&(f*=Math.pow(nr,u-a))),t.charAt(u)!==s.charAt(o)&&(f*=vf)),(f<rr&&r.charAt(u-1)===n.charAt(o+1)||n.charAt(o+1)===n.charAt(o)&&r.charAt(u-1)!==n.charAt(o))&&(h=Cr(t,s,r,n,u+1,o+2,l),h*rr>f&&(f=h*rr)),f>m&&(m=f),u=r.indexOf(d,u+1);return l[c]=m,m}function Zn(t){return t.toLowerCase().replace(wl," ")}function Nf(t,s,r){return t=r&&r.length>0?`${t+" "+r.join(" ")}`:t,Cr(t,s,Zn(t),Zn(s),0,0,{})}var Bt='[cmdk-group=""]',ar='[cmdk-group-items=""]',Cf='[cmdk-group-heading=""]',jl='[cmdk-item=""]',ea=`${jl}:not([aria-disabled="true"])`,Sr="cmdk-item-select",wt="data-value",Sf=(t,s,r)=>Nf(t,s,r),Nl=i.createContext(void 0),is=()=>i.useContext(Nl),Cl=i.createContext(void 0),xn=()=>i.useContext(Cl),Sl=i.createContext(void 0),kl=i.forwardRef((t,s)=>{let r=jt(()=>{var C,S;return{search:"",value:(S=(C=t.value)!=null?C:t.defaultValue)!=null?S:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),n=jt(()=>new Set),a=jt(()=>new Map),o=jt(()=>new Map),l=jt(()=>new Set),c=Pl(t),{label:d,children:u,value:m,onValueChange:f,filter:h,shouldFilter:v,loop:p,disablePointerSelection:g=!1,vimBindings:x=!0,...b}=t,w=Xe(),k=Xe(),y=Xe(),P=i.useRef(null),j=Ff();vt(()=>{if(m!==void 0){let C=m.trim();r.current.value=C,T.emit()}},[m]),vt(()=>{j(6,J)},[]);let T=i.useMemo(()=>({subscribe:C=>(l.current.add(C),()=>l.current.delete(C)),snapshot:()=>r.current,setState:(C,S,I)=>{var R,V,B,ee;if(!Object.is(r.current[C],S)){if(r.current[C]=S,C==="search")L(),F(),j(1,O);else if(C==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let re=document.getElementById(y);re?re.focus():(R=document.getElementById(w))==null||R.focus()}if(j(7,()=>{var re;r.current.selectedItemId=(re=q())==null?void 0:re.id,T.emit()}),I||j(5,J),((V=c.current)==null?void 0:V.value)!==void 0){let re=S??"";(ee=(B=c.current).onValueChange)==null||ee.call(B,re);return}}T.emit()}},emit:()=>{l.current.forEach(C=>C())}}),[]),$=i.useMemo(()=>({value:(C,S,I)=>{var R;S!==((R=o.current.get(C))==null?void 0:R.value)&&(o.current.set(C,{value:S,keywords:I}),r.current.filtered.items.set(C,N(S,I)),j(2,()=>{F(),T.emit()}))},item:(C,S)=>(n.current.add(C),S&&(a.current.has(S)?a.current.get(S).add(C):a.current.set(S,new Set([C]))),j(3,()=>{L(),F(),r.current.value||O(),T.emit()}),()=>{o.current.delete(C),n.current.delete(C),r.current.filtered.items.delete(C);let I=q();j(4,()=>{L(),I?.getAttribute("id")===C&&O(),T.emit()})}),group:C=>(a.current.has(C)||a.current.set(C,new Set),()=>{o.current.delete(C),a.current.delete(C)}),filter:()=>c.current.shouldFilter,label:d||t["aria-label"],getDisablePointerSelection:()=>c.current.disablePointerSelection,listId:w,inputId:y,labelId:k,listInnerRef:P}),[]);function N(C,S){var I,R;let V=(R=(I=c.current)==null?void 0:I.filter)!=null?R:Sf;return C?V(C,r.current.search,S):0}function F(){if(!r.current.search||c.current.shouldFilter===!1)return;let C=r.current.filtered.items,S=[];r.current.filtered.groups.forEach(R=>{let V=a.current.get(R),B=0;V.forEach(ee=>{let re=C.get(ee);B=Math.max(re,B)}),S.push([R,B])});let I=P.current;M().sort((R,V)=>{var B,ee;let re=R.getAttribute("id"),Re=V.getAttribute("id");return((B=C.get(Re))!=null?B:0)-((ee=C.get(re))!=null?ee:0)}).forEach(R=>{let V=R.closest(ar);V?V.appendChild(R.parentElement===V?R:R.closest(`${ar} > *`)):I.appendChild(R.parentElement===I?R:R.closest(`${ar} > *`))}),S.sort((R,V)=>V[1]-R[1]).forEach(R=>{var V;let B=(V=P.current)==null?void 0:V.querySelector(`${Bt}[${wt}="${encodeURIComponent(R[0])}"]`);B?.parentElement.appendChild(B)})}function O(){let C=M().find(I=>I.getAttribute("aria-disabled")!=="true"),S=C?.getAttribute(wt);T.setState("value",S||void 0)}function L(){var C,S,I,R;if(!r.current.search||c.current.shouldFilter===!1){r.current.filtered.count=n.current.size;return}r.current.filtered.groups=new Set;let V=0;for(let B of n.current){let ee=(S=(C=o.current.get(B))==null?void 0:C.value)!=null?S:"",re=(R=(I=o.current.get(B))==null?void 0:I.keywords)!=null?R:[],Re=N(ee,re);r.current.filtered.items.set(B,Re),Re>0&&V++}for(let[B,ee]of a.current)for(let re of ee)if(r.current.filtered.items.get(re)>0){r.current.filtered.groups.add(B);break}r.current.filtered.count=V}function J(){var C,S,I;let R=q();R&&(((C=R.parentElement)==null?void 0:C.firstChild)===R&&((I=(S=R.closest(Bt))==null?void 0:S.querySelector(Cf))==null||I.scrollIntoView({block:"nearest"})),R.scrollIntoView({block:"nearest"}))}function q(){var C;return(C=P.current)==null?void 0:C.querySelector(`${jl}[aria-selected="true"]`)}function M(){var C;return Array.from(((C=P.current)==null?void 0:C.querySelectorAll(ea))||[])}function _(C){let S=M()[C];S&&T.setState("value",S.getAttribute(wt))}function z(C){var S;let I=q(),R=M(),V=R.findIndex(ee=>ee===I),B=R[V+C];(S=c.current)!=null&&S.loop&&(B=V+C<0?R[R.length-1]:V+C===R.length?R[0]:R[V+C]),B&&T.setState("value",B.getAttribute(wt))}function W(C){let S=q(),I=S?.closest(Bt),R;for(;I&&!R;)I=C>0?Df(I,Bt):Of(I,Bt),R=I?.querySelector(ea);R?T.setState("value",R.getAttribute(wt)):z(C)}let Y=()=>_(M().length-1),te=C=>{C.preventDefault(),C.metaKey?Y():C.altKey?W(1):z(1)},se=C=>{C.preventDefault(),C.metaKey?_(0):C.altKey?W(-1):z(-1)};return i.createElement(G.div,{ref:s,tabIndex:-1,...b,"cmdk-root":"",onKeyDown:C=>{var S;(S=b.onKeyDown)==null||S.call(b,C);let I=C.nativeEvent.isComposing||C.keyCode===229;if(!(C.defaultPrevented||I))switch(C.key){case"n":case"j":{x&&C.ctrlKey&&te(C);break}case"ArrowDown":{te(C);break}case"p":case"k":{x&&C.ctrlKey&&se(C);break}case"ArrowUp":{se(C);break}case"Home":{C.preventDefault(),_(0);break}case"End":{C.preventDefault(),Y();break}case"Enter":{C.preventDefault();let R=q();if(R){let V=new Event(Sr);R.dispatchEvent(V)}}}}},i.createElement("label",{"cmdk-label":"",htmlFor:$.inputId,id:$.labelId,style:_f},d),Vs(t,C=>i.createElement(Cl.Provider,{value:T},i.createElement(Nl.Provider,{value:$},C))))}),kf=i.forwardRef((t,s)=>{var r,n;let a=Xe(),o=i.useRef(null),l=i.useContext(Sl),c=is(),d=Pl(t),u=(n=(r=d.current)==null?void 0:r.forceMount)!=null?n:l?.forceMount;vt(()=>{if(!u)return c.item(a,l?.id)},[u]);let m=El(a,o,[t.value,t.children,o],t.keywords),f=xn(),h=rt(j=>j.value&&j.value===m.current),v=rt(j=>u||c.filter()===!1?!0:j.search?j.filtered.items.get(a)>0:!0);i.useEffect(()=>{let j=o.current;if(!(!j||t.disabled))return j.addEventListener(Sr,p),()=>j.removeEventListener(Sr,p)},[v,t.onSelect,t.disabled]);function p(){var j,T;g(),(T=(j=d.current).onSelect)==null||T.call(j,m.current)}function g(){f.setState("value",m.current,!0)}if(!v)return null;let{disabled:x,value:b,onSelect:w,forceMount:k,keywords:y,...P}=t;return i.createElement(G.div,{ref:Zt(o,s),...P,id:a,"cmdk-item":"",role:"option","aria-disabled":!!x,"aria-selected":!!h,"data-disabled":!!x,"data-selected":!!h,onPointerMove:x||c.getDisablePointerSelection()?void 0:g,onClick:x?void 0:p},t.children)}),Pf=i.forwardRef((t,s)=>{let{heading:r,children:n,forceMount:a,...o}=t,l=Xe(),c=i.useRef(null),d=i.useRef(null),u=Xe(),m=is(),f=rt(v=>a||m.filter()===!1?!0:v.search?v.filtered.groups.has(l):!0);vt(()=>m.group(l),[]),El(l,c,[t.value,t.heading,d]);let h=i.useMemo(()=>({id:l,forceMount:a}),[a]);return i.createElement(G.div,{ref:Zt(c,s),...o,"cmdk-group":"",role:"presentation",hidden:f?void 0:!0},r&&i.createElement("div",{ref:d,"cmdk-group-heading":"","aria-hidden":!0,id:u},r),Vs(t,v=>i.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":r?u:void 0},i.createElement(Sl.Provider,{value:h},v))))}),Ef=i.forwardRef((t,s)=>{let{alwaysRender:r,...n}=t,a=i.useRef(null),o=rt(l=>!l.search);return!r&&!o?null:i.createElement(G.div,{ref:Zt(a,s),...n,"cmdk-separator":"",role:"separator"})}),Rf=i.forwardRef((t,s)=>{let{onValueChange:r,...n}=t,a=t.value!=null,o=xn(),l=rt(u=>u.search),c=rt(u=>u.selectedItemId),d=is();return i.useEffect(()=>{t.value!=null&&o.setState("search",t.value)},[t.value]),i.createElement(G.input,{ref:s,...n,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":d.listId,"aria-labelledby":d.labelId,"aria-activedescendant":c,id:d.inputId,type:"text",value:a?t.value:l,onChange:u=>{a||o.setState("search",u.target.value),r?.(u.target.value)}})}),Tf=i.forwardRef((t,s)=>{let{children:r,label:n="Suggestions",...a}=t,o=i.useRef(null),l=i.useRef(null),c=rt(u=>u.selectedItemId),d=is();return i.useEffect(()=>{if(l.current&&o.current){let u=l.current,m=o.current,f,h=new ResizeObserver(()=>{f=requestAnimationFrame(()=>{let v=u.offsetHeight;m.style.setProperty("--cmdk-list-height",v.toFixed(1)+"px")})});return h.observe(u),()=>{cancelAnimationFrame(f),h.unobserve(u)}}},[]),i.createElement(G.div,{ref:Zt(o,s),...a,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":c,"aria-label":n,id:d.listId},Vs(t,u=>i.createElement("div",{ref:Zt(l,d.listInnerRef),"cmdk-list-sizer":""},u)))}),Mf=i.forwardRef((t,s)=>{let{open:r,onOpenChange:n,overlayClassName:a,contentClassName:o,container:l,...c}=t;return i.createElement(Ar,{open:r,onOpenChange:n},i.createElement(Ir,{container:l},i.createElement(ss,{"cmdk-overlay":"",className:a}),i.createElement(rs,{"aria-label":t.label,"cmdk-dialog":"",className:o},i.createElement(kl,{ref:s,...c}))))}),If=i.forwardRef((t,s)=>rt(r=>r.filtered.count===0)?i.createElement(G.div,{ref:s,...t,"cmdk-empty":"",role:"presentation"}):null),Af=i.forwardRef((t,s)=>{let{progress:r,children:n,label:a="Loading...",...o}=t;return i.createElement(G.div,{ref:s,...o,"cmdk-loading":"",role:"progressbar","aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":100,"aria-label":a},Vs(t,l=>i.createElement("div",{"aria-hidden":!0},l)))}),we=Object.assign(kl,{List:Tf,Item:kf,Input:Rf,Group:Pf,Separator:Ef,Dialog:Mf,Empty:If,Loading:Af});function Df(t,s){let r=t.nextElementSibling;for(;r;){if(r.matches(s))return r;r=r.nextElementSibling}}function Of(t,s){let r=t.previousElementSibling;for(;r;){if(r.matches(s))return r;r=r.previousElementSibling}}function Pl(t){let s=i.useRef(t);return vt(()=>{s.current=t}),s}var vt=typeof window>"u"?i.useEffect:i.useLayoutEffect;function jt(t){let s=i.useRef();return s.current===void 0&&(s.current=t()),s}function rt(t){let s=xn(),r=()=>t(s.snapshot());return i.useSyncExternalStore(s.subscribe,r,r)}function El(t,s,r,n=[]){let a=i.useRef(),o=is();return vt(()=>{var l;let c=(()=>{var u;for(let m of r){if(typeof m=="string")return m.trim();if(typeof m=="object"&&"current"in m)return m.current?(u=m.current.textContent)==null?void 0:u.trim():a.current}})(),d=n.map(u=>u.trim());o.value(t,c,d),(l=s.current)==null||l.setAttribute(wt,c),a.current=c}),a}var Ff=()=>{let[t,s]=i.useState(),r=jt(()=>new Map);return vt(()=>{r.current.forEach(n=>n()),r.current=new Map},[t]),(n,a)=>{r.current.set(n,a),s({})}};function Lf(t){let s=t.type;return typeof s=="function"?s(t.props):"render"in s?s.render(t.props):t}function Vs({asChild:t,children:s},r){return t&&i.isValidElement(s)?i.cloneElement(Lf(s),{ref:s.ref},r(s.props.children)):r(s)}var _f={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const Rl=i.forwardRef(({className:t,...s},r)=>e.jsx(we,{ref:r,className:E("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",t),...s}));Rl.displayName=we.displayName;const Tl=i.forwardRef(({className:t,...s},r)=>e.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[e.jsx(Jr,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),e.jsx(we.Input,{ref:r,className:E("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",t),...s})]}));Tl.displayName=we.Input.displayName;const Ml=i.forwardRef(({className:t,...s},r)=>e.jsx(we.List,{ref:r,className:E("max-h-[300px] overflow-y-auto overflow-x-hidden",t),...s}));Ml.displayName=we.List.displayName;const Il=i.forwardRef((t,s)=>e.jsx(we.Empty,{ref:s,className:"py-6 text-center text-sm",...t}));Il.displayName=we.Empty.displayName;const Al=i.forwardRef(({className:t,...s},r)=>e.jsx(we.Group,{ref:r,className:E("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",t),...s}));Al.displayName=we.Group.displayName;const qf=i.forwardRef(({className:t,...s},r)=>e.jsx(we.Separator,{ref:r,className:E("-mx-1 h-px bg-border",t),...s}));qf.displayName=we.Separator.displayName;const kr=i.forwardRef(({className:t,...s},r)=>e.jsx(we.Item,{ref:r,className:E("relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t),...s}));kr.displayName=we.Item.displayName;var Ws="Popover",[Dl]=Oe(Ws,[Ps]),ls=Ps(),[$f,at]=Dl(Ws),Ol=t=>{const{__scopePopover:s,children:r,open:n,defaultOpen:a,onOpenChange:o,modal:l=!1}=t,c=ls(s),d=i.useRef(null),[u,m]=i.useState(!1),[f,h]=Dt({prop:n,defaultProp:a??!1,onChange:o,caller:Ws});return e.jsx(kc,{...c,children:e.jsx($f,{scope:s,contentId:Xe(),triggerRef:d,open:f,onOpenChange:h,onOpenToggle:i.useCallback(()=>h(v=>!v),[h]),hasCustomAnchor:u,onCustomAnchorAdd:i.useCallback(()=>m(!0),[]),onCustomAnchorRemove:i.useCallback(()=>m(!1),[]),modal:l,children:r})})};Ol.displayName=Ws;var Fl="PopoverAnchor",zf=i.forwardRef((t,s)=>{const{__scopePopover:r,...n}=t,a=at(Fl,r),o=ls(r),{onCustomAnchorAdd:l,onCustomAnchorRemove:c}=a;return i.useEffect(()=>(l(),()=>c()),[l,c]),e.jsx(Tr,{...o,...n,ref:s})});zf.displayName=Fl;var Ll="PopoverTrigger",_l=i.forwardRef((t,s)=>{const{__scopePopover:r,...n}=t,a=at(Ll,r),o=ls(r),l=le(s,a.triggerRef),c=e.jsx(G.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":Vl(a.open),...n,ref:l,onClick:K(t.onClick,a.onOpenToggle)});return a.hasCustomAnchor?c:e.jsx(Tr,{asChild:!0,...o,children:c})});_l.displayName=Ll;var gn="PopoverPortal",[Uf,Vf]=Dl(gn,{forceMount:void 0}),ql=t=>{const{__scopePopover:s,forceMount:r,children:n,container:a}=t,o=at(gn,s);return e.jsx(Uf,{scope:s,forceMount:r,children:e.jsx(Ae,{present:r||o.open,children:e.jsx(ia,{asChild:!0,container:a,children:n})})})};ql.displayName=gn;var At="PopoverContent",$l=i.forwardRef((t,s)=>{const r=Vf(At,t.__scopePopover),{forceMount:n=r.forceMount,...a}=t,o=at(At,t.__scopePopover);return e.jsx(Ae,{present:n||o.open,children:o.modal?e.jsx(Bf,{...a,ref:s}):e.jsx(Hf,{...a,ref:s})})});$l.displayName=At;var Wf=Nc("PopoverContent.RemoveScroll"),Bf=i.forwardRef((t,s)=>{const r=at(At,t.__scopePopover),n=i.useRef(null),a=le(s,n),o=i.useRef(!1);return i.useEffect(()=>{const l=n.current;if(l)return wc(l)},[]),e.jsx(jc,{as:Wf,allowPinchZoom:!0,children:e.jsx(zl,{...t,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:K(t.onCloseAutoFocus,l=>{l.preventDefault(),o.current||r.triggerRef.current?.focus()}),onPointerDownOutside:K(t.onPointerDownOutside,l=>{const c=l.detail.originalEvent,d=c.button===0&&c.ctrlKey===!0,u=c.button===2||d;o.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:K(t.onFocusOutside,l=>l.preventDefault(),{checkForDefaultPrevented:!1})})})}),Hf=i.forwardRef((t,s)=>{const r=at(At,t.__scopePopover),n=i.useRef(!1),a=i.useRef(!1);return e.jsx(zl,{...t,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{t.onCloseAutoFocus?.(o),o.defaultPrevented||(n.current||r.triggerRef.current?.focus(),o.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:o=>{t.onInteractOutside?.(o),o.defaultPrevented||(n.current=!0,o.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const l=o.target;r.triggerRef.current?.contains(l)&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&a.current&&o.preventDefault()}})}),zl=i.forwardRef((t,s)=>{const{__scopePopover:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEscapeKeyDown:c,onPointerDownOutside:d,onFocusOutside:u,onInteractOutside:m,...f}=t,h=at(At,r),v=ls(r);return Cc(),e.jsx(Sc,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:o,children:e.jsx(la,{asChild:!0,disableOutsidePointerEvents:l,onInteractOutside:m,onEscapeKeyDown:c,onPointerDownOutside:d,onFocusOutside:u,onDismiss:()=>h.onOpenChange(!1),children:e.jsx(ca,{"data-state":Vl(h.open),role:"dialog",id:h.contentId,...v,...f,ref:s,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),Ul="PopoverClose",Kf=i.forwardRef((t,s)=>{const{__scopePopover:r,...n}=t,a=at(Ul,r);return e.jsx(G.button,{type:"button",...n,ref:s,onClick:K(t.onClick,()=>a.onOpenChange(!1))})});Kf.displayName=Ul;var Gf="PopoverArrow",Qf=i.forwardRef((t,s)=>{const{__scopePopover:r,...n}=t,a=ls(r);return e.jsx(da,{...a,...n,ref:s})});Qf.displayName=Gf;function Vl(t){return t?"open":"closed"}var Yf=Ol,Xf=_l,Jf=ql,Wl=$l;const Zf=Yf,ep=Xf,Bl=i.forwardRef(({className:t,align:s="center",sideOffset:r=4,...n},a)=>e.jsx(Jf,{children:e.jsx(Wl,{ref:a,align:s,sideOffset:r,className:E("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",t),...n})}));Bl.displayName=Wl.displayName;function tp({photos:t=[],fallbackInitials:s="",className:r="",aspectRatio:n="square",showDots:a=!0,showArrows:o=!0}){const[l,c]=i.useState(0);if(t.length===0)return e.jsx("div",{className:E("relative bg-gradient-to-br from-primary/20 to-primary/5 flex items-center justify-center",n==="square"&&"aspect-square",n==="portrait"&&"aspect-[3/4]",n==="landscape"&&"aspect-[4/3]",r),children:e.jsxs("div",{className:"flex flex-col items-center text-muted-foreground",children:[e.jsx(gt,{className:"h-12 w-12 mb-2"}),e.jsx("span",{className:"text-lg font-medium",children:s})]})});const d=()=>{c(f=>(f+1)%t.length)},u=()=>{c(f=>(f-1+t.length)%t.length)},m=f=>{c(f)};return e.jsxs("div",{className:E("relative overflow-hidden",r),children:[e.jsxs("div",{className:E("relative",n==="square"&&"aspect-square",n==="portrait"&&"aspect-[3/4]",n==="landscape"&&"aspect-[4/3]"),children:[e.jsx("img",{src:t[l],alt:`Photo ${l+1}`,className:"w-full h-full object-cover transition-opacity duration-300",onError:f=>{const h=f.target;h.style.display="none"}}),o&&t.length>1&&e.jsxs(e.Fragment,{children:[e.jsx(D,{variant:"ghost",size:"icon",className:"absolute left-2 top-1/2 -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white",onClick:u,children:e.jsx(nu,{className:"h-4 w-4"})}),e.jsx(D,{variant:"ghost",size:"icon",className:"absolute right-2 top-1/2 -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white",onClick:d,children:e.jsx(au,{className:"h-4 w-4"})})]}),t.length>1&&e.jsxs("div",{className:"absolute top-2 right-2 bg-black/50 text-white text-xs px-2 py-1 rounded",children:[l+1," / ",t.length]})]}),a&&t.length>1&&e.jsx("div",{className:"flex justify-center space-x-2 mt-3",children:t.map((f,h)=>e.jsx("button",{className:E("w-2 h-2 rounded-full transition-colors",h===l?"bg-primary":"bg-muted-foreground/30 hover:bg-muted-foreground/50"),onClick:()=>m(h)},h))})]})}function sp(){const{user:t}=be(),{isConnected:s}=ln(),[,r]=xe(),[n,a]=i.useState([]),[o,l]=i.useState(!0),[c,d]=i.useState(!1),[u,m]=i.useState(!1),f=["India","USA","UK","Canada","Australia","Germany","France","Spain","Italy","Japan","South Korea","Brazil","Mexico","Netherlands","Sweden","China","Russia","Argentina","Chile","Colombia","Peru","Portugal","Belgium","Switzerland","Austria"],[h,v]=i.useState({gender:"",location:"",ageMin:18,ageMax:40}),[p,g]=i.useState({gender:"",location:"",ageMin:18,ageMax:40}),x=i.useCallback(async()=>{try{const j=new URLSearchParams;h.gender&&j.set("gender",h.gender),h.location&&j.set("location",h.location),j.set("ageMin",h.ageMin.toString()),j.set("ageMax",h.ageMax.toString());const T=await fetch(`/api/users/online?${j}`);if(T.ok){const $=await T.json();a($)}}catch(j){console.error("Failed to fetch users:",j)}finally{l(!1)}},[h]),b=async()=>{try{const j=await fetch("/api/user/filters");if(j.ok){const T=await j.json();v(T),g(T)}}catch(j){console.error("Failed to load saved filters:",j)}};i.useEffect(()=>{b()},[]),i.useEffect(()=>{x()},[h]),i.useEffect(()=>{c&&g(h)},[c,h]);const w=async()=>{try{(await fetch("/api/user/filters",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)})).ok&&(v(p),d(!1))}catch(j){console.error("Failed to save filters:",j)}},k=async()=>{try{if((await fetch("/api/user/filters",{method:"DELETE"})).ok){const T={gender:"",location:"",ageMin:18,ageMax:40};g(T),v(T),d(!1)}}catch(j){console.error("Failed to reset filters:",j)}},y=h.gender||h.location||h.ageMin!==18||h.ageMax!==40,P=async j=>{let T={...h};j==="gender"?T.gender="":j==="location"?T.location="":j==="age"&&(T.ageMin=18,T.ageMax=40);try{(await fetch("/api/user/filters",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(T)})).ok&&v(T)}catch($){console.error("Failed to update filters:",$)}};return i.useEffect(()=>{const j=async T=>{const $=T,{userId:N,isOnline:F}=$.detail;if(!(!t||N===t.id))if(F)try{const O=new URLSearchParams;h.gender&&O.set("gender",h.gender),h.location&&O.set("location",h.location),O.set("ageMin",h.ageMin.toString()),O.set("ageMax",h.ageMax.toString());const L=await fetch(`/api/users/online?${O}`);if(L.ok){const q=(await L.json()).find(M=>M.id===N);q&&a(M=>M.some(z=>z.id===N)?M.map(z=>z.id===N?{...z,isOnline:!0}:z):[...M,q])}}catch(O){console.error("Failed to fetch user for real-time update:",O)}else a(O=>O.filter(L=>L.id!==N))};return window.addEventListener("onlineStatusChanged",j),()=>window.removeEventListener("onlineStatusChanged",j)},[t,h]),t?o?e.jsx("div",{className:"flex items-center justify-center min-h-screen pb-16",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Finding amazing people near you..."})]})}):e.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[e.jsx(os,{open:c,onOpenChange:d,children:e.jsxs(qt,{className:"max-w-lg max-h-[90vh] p-0 gap-0 overflow-hidden flex flex-col",children:[e.jsxs($t,{className:"flex-shrink-0 p-6 pb-4 bg-gradient-to-r from-primary/5 to-primary/10 border-b",children:[e.jsx(zt,{className:"text-2xl font-bold",children:"Filter Profiles"}),e.jsx(_s,{className:"text-sm text-muted-foreground",children:"Customize your search to find the perfect match"})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto px-6 py-4 space-y-6 min-h-0",children:[e.jsxs("div",{className:"space-y-4 p-5 rounded-xl bg-gradient-to-br from-primary/5 to-primary/10 border border-primary/20 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("label",{className:"text-sm font-semibold flex items-center gap-2",children:[e.jsx(Rt,{className:"h-5 w-5 text-primary"}),"Age Range"]}),e.jsxs("div",{className:"text-xl font-bold text-primary",children:[p.ageMin," - ",p.ageMax]})]}),e.jsxs("div",{className:"pt-2 px-1",children:[e.jsx(ol,{value:[p.ageMin,p.ageMax],onValueChange:([j,T])=>{g({...p,ageMin:j,ageMax:T})},min:18,max:80,step:1,className:"py-4",minStepsBetweenThumbs:1}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-2",children:[e.jsx("span",{children:"18"}),e.jsx("span",{children:"80"})]})]})]}),e.jsxs("div",{className:"space-y-3 p-5 rounded-xl bg-gradient-to-br from-blue-500/5 to-purple-500/10 border border-blue-500/20 shadow-sm",children:[e.jsxs("label",{className:"text-sm font-semibold flex items-center gap-2",children:[e.jsx(Ie,{className:"h-5 w-5 text-blue-500"}),"Gender Preference"]}),e.jsxs(pn,{value:p.gender,onValueChange:j=>g({...p,gender:j}),className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-3 rounded-lg border bg-background/50 p-4 hover:bg-accent/50 transition-all cursor-pointer hover:border-primary/50",children:[e.jsx(Ye,{value:"",id:"all",className:"h-5 w-5"}),e.jsx(Z,{htmlFor:"all",className:"flex-1 cursor-pointer font-medium",children:"All Genders"})]}),e.jsxs("div",{className:"flex items-center space-x-3 rounded-lg border bg-background/50 p-4 hover:bg-accent/50 transition-all cursor-pointer hover:border-primary/50",children:[e.jsx(Ye,{value:"male",id:"male",className:"h-5 w-5"}),e.jsx(Z,{htmlFor:"male",className:"flex-1 cursor-pointer font-medium",children:"Male"})]}),e.jsxs("div",{className:"flex items-center space-x-3 rounded-lg border bg-background/50 p-4 hover:bg-accent/50 transition-all cursor-pointer hover:border-primary/50",children:[e.jsx(Ye,{value:"female",id:"female",className:"h-5 w-5"}),e.jsx(Z,{htmlFor:"female",className:"flex-1 cursor-pointer font-medium",children:"Female"})]}),e.jsxs("div",{className:"flex items-center space-x-3 rounded-lg border bg-background/50 p-4 hover:bg-accent/50 transition-all cursor-pointer hover:border-primary/50",children:[e.jsx(Ye,{value:"other",id:"other",className:"h-5 w-5"}),e.jsx(Z,{htmlFor:"other",className:"flex-1 cursor-pointer font-medium",children:"Other"})]})]})]}),e.jsxs("div",{className:"space-y-3 p-5 rounded-xl bg-gradient-to-br from-green-500/5 to-emerald-500/10 border border-green-500/20 shadow-sm",children:[e.jsxs("label",{className:"text-sm font-semibold flex items-center gap-2",children:[e.jsx(Qe,{className:"h-5 w-5 text-green-500"}),"Location"]}),e.jsxs(Zf,{open:u,onOpenChange:m,children:[e.jsx(ep,{asChild:!0,children:e.jsxs(D,{variant:"outline",role:"combobox","aria-expanded":u,className:"w-full justify-between rounded-lg h-12 bg-background/50 hover:bg-accent/50 border-green-500/30",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Qe,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:E(!p.location&&"text-muted-foreground"),children:p.location||"Any location"})]}),e.jsx(iu,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),e.jsx(Bl,{className:"w-[--radix-popover-trigger-width] p-0",align:"start",children:e.jsxs(Rl,{children:[e.jsx(Tl,{placeholder:"Search country...",className:"h-12"}),e.jsxs(Ml,{children:[e.jsx(Il,{children:"No country found."}),e.jsxs(Al,{children:[e.jsxs(kr,{value:"",onSelect:()=>{g({...p,location:""}),m(!1)},className:"py-3",children:[e.jsx(Tt,{className:E("mr-2 h-4 w-4",p.location?"opacity-0":"opacity-100")}),"Any location"]}),f.map(j=>e.jsxs(kr,{value:j,onSelect:()=>{g({...p,location:j}),m(!1)},className:"py-3",children:[e.jsx(Tt,{className:E("mr-2 h-4 w-4",p.location===j?"opacity-100":"opacity-0")}),j]},j))]})]})]})})]})]})]}),e.jsxs("div",{className:"flex-shrink-0 p-6 pt-4 border-t bg-background space-y-3",children:[e.jsx(D,{className:"w-full h-12 rounded-xl font-semibold text-base shadow-lg hover:shadow-xl transition-all",onClick:w,children:"Apply Filters"}),e.jsx(D,{variant:"outline",className:"w-full h-12 rounded-xl font-semibold text-base hover:bg-destructive/10 hover:text-destructive hover:border-destructive/50 transition-all",onClick:k,children:"Reset All"})]})]})}),e.jsxs("div",{className:"sticky top-0 z-30 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 border-b",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 sm:p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-xl bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center shadow-lg",children:e.jsx(du,{className:"h-5 w-5 sm:h-6 sm:w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Discover"}),e.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground",children:[n.length," ",n.length===1?"person":"people"," online now"]})]})]}),e.jsxs(D,{variant:"outline",size:"icon",className:"relative h-10 w-10 rounded-xl hover:bg-primary/10 hover:border-primary/50 transition-all",onClick:()=>d(!0),children:[e.jsx(xu,{className:"h-5 w-5"}),y&&e.jsx("div",{className:"absolute -top-1 -right-1 h-4 w-4 bg-primary rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-[10px] text-primary-foreground font-bold",children:[h.gender,h.location,h.ageMin!==18||h.ageMax!==40?"age":""].filter(Boolean).length})})]})]}),y&&e.jsxs("div",{className:"px-3 sm:px-4 pb-3 flex flex-wrap gap-2",children:[h.gender&&e.jsxs(Xt,{variant:"secondary",className:"rounded-full px-3 py-1.5 cursor-pointer hover:bg-secondary/80 transition-all",onClick:()=>P("gender"),children:[e.jsx("span",{className:"capitalize",children:h.gender}),e.jsx(De,{className:"h-3 w-3 ml-1"})]}),h.location&&e.jsxs(Xt,{variant:"secondary",className:"rounded-full px-3 py-1.5 cursor-pointer hover:bg-secondary/80 transition-all",onClick:()=>P("location"),children:[e.jsx(Qe,{className:"h-3 w-3 mr-1"}),h.location,e.jsx(De,{className:"h-3 w-3 ml-1"})]}),(h.ageMin!==20||h.ageMax!==40)&&e.jsxs(Xt,{variant:"secondary",className:"rounded-full px-3 py-1.5 cursor-pointer hover:bg-secondary/80 transition-all",onClick:()=>P("age"),children:[e.jsx(Rt,{className:"h-3 w-3 mr-1"}),"Age ",h.ageMin,"-",h.ageMax,e.jsx(De,{className:"h-3 w-3 ml-1"})]})]})]}),e.jsx("div",{className:"p-2 sm:p-4",children:n.length===0?e.jsxs("div",{className:"text-center py-8 sm:py-12 px-4",children:[e.jsx(Ie,{className:"h-8 w-8 sm:h-12 sm:w-12 text-muted-foreground mx-auto mb-3 sm:mb-4"}),e.jsx("h2",{className:"text-base sm:text-lg font-semibold mb-2",children:"No matches found"}),e.jsx("p",{className:"text-sm sm:text-base text-muted-foreground",children:"Try adjusting your filters to discover more compatible singles"})]}):e.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-7 2xl:grid-cols-8 gap-1.5 sm:gap-2",children:n.map(j=>e.jsx(ce,{className:"overflow-hidden hover:shadow-lg active:scale-95 transition-all duration-300 group cursor-pointer",onClick:()=>r(`/profile/${j.id}`),children:e.jsxs(ye,{className:"p-0",children:[e.jsxs("div",{className:"relative aspect-[4/3] overflow-hidden",children:[e.jsx(tp,{photos:[j.profilePhoto,...j.photos&&Array.isArray(j.photos)?j.photos:[]].filter(Boolean),fallbackInitials:`${j.firstName[0]}${j.lastName[0]}`,aspectRatio:"landscape",showDots:!1,showArrows:!1,className:"w-full h-full group-hover:scale-105 transition-transform duration-300"}),j.isOnline&&e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full border-2 border-white shadow-lg shadow-green-500/50 animate-pulse"})})]}),e.jsxs("div",{className:"p-2 sm:p-1.5 space-y-1.5 sm:space-y-1",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsxs("h3",{className:"font-semibold text-xs sm:text-xs leading-tight line-clamp-1",children:[j.firstName," ",j.lastName]}),e.jsxs("div",{className:"flex items-center gap-1 text-[10px] sm:text-xs text-muted-foreground",children:[e.jsx(js,{className:"h-2.5 w-2.5 sm:h-3 sm:w-3 flex-shrink-0 text-blue-500/70"}),e.jsx("span",{children:j.age}),e.jsx("span",{className:"mx-0.5",children:"•"}),e.jsx(Ns,{className:"h-2.5 w-2.5 sm:h-3 sm:w-3 flex-shrink-0 text-purple-500/70"}),e.jsx("span",{className:"capitalize",children:j.gender})]}),e.jsx("div",{className:"flex items-center gap-1 text-[10px] sm:text-xs text-muted-foreground min-h-[14px] sm:min-h-[16px]",children:j.location?e.jsxs(e.Fragment,{children:[e.jsx(Qe,{className:"h-2.5 w-2.5 sm:h-3 sm:w-3 flex-shrink-0 text-green-500/70"}),e.jsx("span",{className:"line-clamp-1",children:j.location})]}):e.jsx("span",{className:"text-transparent select-none",children:"."})})]}),e.jsxs("div",{className:"flex gap-1 sm:gap-0.5 pt-0.5",children:[e.jsx(D,{size:"sm",className:"flex-1 text-[10px] sm:text-xs px-1.5 sm:px-1 py-1 sm:py-0.5 h-7 sm:h-6 font-medium",onClick:T=>{T.stopPropagation(),r(`/profile/${j.id}`)},children:"Profile"}),e.jsx(D,{size:"sm",variant:"outline",className:"flex-1 text-[10px] sm:text-xs px-1.5 sm:px-1 py-1 sm:py-0.5 h-7 sm:h-6 font-medium",onClick:T=>{T.stopPropagation(),r(`/chat/${j.id}`)},children:"Chat"})]})]})]})},j.id))})})]}):null}function pe(t){const s=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&s==="[object Date]"?new t.constructor(+t):typeof t=="number"||s==="[object Number]"||typeof t=="string"||s==="[object String]"?new Date(t):new Date(NaN)}function rp(t,s){return t instanceof Date?new t.constructor(s):new Date(s)}const hs=43200,ta=1440;let np={};function ap(){return np}function sa(t){const s=pe(t),r=new Date(Date.UTC(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds()));return r.setUTCFullYear(s.getFullYear()),+t-+r}function vs(t,s){const r=pe(t),n=pe(s),a=r.getTime()-n.getTime();return a<0?-1:a>0?1:a}function op(t){return rp(t,Date.now())}function ip(t,s){const r=pe(t),n=pe(s),a=r.getFullYear()-n.getFullYear(),o=r.getMonth()-n.getMonth();return a*12+o}function lp(t){return s=>{const n=(t?Math[t]:Math.trunc)(s);return n===0?0:n}}function cp(t,s){return+pe(t)-+pe(s)}function dp(t){const s=pe(t);return s.setHours(23,59,59,999),s}function up(t){const s=pe(t),r=s.getMonth();return s.setFullYear(s.getFullYear(),r+1,0),s.setHours(23,59,59,999),s}function mp(t){const s=pe(t);return+dp(s)==+up(s)}function hp(t,s){const r=pe(t),n=pe(s),a=vs(r,n),o=Math.abs(ip(r,n));let l;if(o<1)l=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-a*o);let c=vs(r,n)===-a;mp(pe(t))&&o===1&&vs(t,n)===1&&(c=!1),l=a*(o-Number(c))}return l===0?0:l}function fp(t,s,r){const n=cp(t,s)/1e3;return lp(r?.roundingMethod)(n)}const pp={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},xp=(t,s,r)=>{let n;const a=pp[t];return typeof a=="string"?n=a:s===1?n=a.one:n=a.other.replace("{{count}}",s.toString()),r?.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function or(t){return(s={})=>{const r=s.width?String(s.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const gp={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},vp={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},bp={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},yp={date:or({formats:gp,defaultWidth:"full"}),time:or({formats:vp,defaultWidth:"full"}),dateTime:or({formats:bp,defaultWidth:"full"})},wp={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},jp=(t,s,r,n)=>wp[t];function Ht(t){return(s,r)=>{const n=r?.context?String(r.context):"standalone";let a;if(n==="formatting"&&t.formattingValues){const l=t.defaultFormattingWidth||t.defaultWidth,c=r?.width?String(r.width):l;a=t.formattingValues[c]||t.formattingValues[l]}else{const l=t.defaultWidth,c=r?.width?String(r.width):t.defaultWidth;a=t.values[c]||t.values[l]}const o=t.argumentCallback?t.argumentCallback(s):s;return a[o]}}const Np={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Cp={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Sp={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},kp={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Pp={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Ep={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Rp=(t,s)=>{const r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},Tp={ordinalNumber:Rp,era:Ht({values:Np,defaultWidth:"wide"}),quarter:Ht({values:Cp,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Ht({values:Sp,defaultWidth:"wide"}),day:Ht({values:kp,defaultWidth:"wide"}),dayPeriod:Ht({values:Pp,defaultWidth:"wide",formattingValues:Ep,defaultFormattingWidth:"wide"})};function Kt(t){return(s,r={})=>{const n=r.width,a=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],o=s.match(a);if(!o)return null;const l=o[0],c=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],d=Array.isArray(c)?Ip(c,f=>f.test(l)):Mp(c,f=>f.test(l));let u;u=t.valueCallback?t.valueCallback(d):d,u=r.valueCallback?r.valueCallback(u):u;const m=s.slice(l.length);return{value:u,rest:m}}}function Mp(t,s){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&s(t[r]))return r}function Ip(t,s){for(let r=0;r<t.length;r++)if(s(t[r]))return r}function Ap(t){return(s,r={})=>{const n=s.match(t.matchPattern);if(!n)return null;const a=n[0],o=s.match(t.parsePattern);if(!o)return null;let l=t.valueCallback?t.valueCallback(o[0]):o[0];l=r.valueCallback?r.valueCallback(l):l;const c=s.slice(a.length);return{value:l,rest:c}}}const Dp=/^(\d+)(th|st|nd|rd)?/i,Op=/\d+/i,Fp={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Lp={any:[/^b/i,/^(a|c)/i]},_p={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},qp={any:[/1/i,/2/i,/3/i,/4/i]},$p={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},zp={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Up={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Vp={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Wp={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Bp={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Hp={ordinalNumber:Ap({matchPattern:Dp,parsePattern:Op,valueCallback:t=>parseInt(t,10)}),era:Kt({matchPatterns:Fp,defaultMatchWidth:"wide",parsePatterns:Lp,defaultParseWidth:"any"}),quarter:Kt({matchPatterns:_p,defaultMatchWidth:"wide",parsePatterns:qp,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Kt({matchPatterns:$p,defaultMatchWidth:"wide",parsePatterns:zp,defaultParseWidth:"any"}),day:Kt({matchPatterns:Up,defaultMatchWidth:"wide",parsePatterns:Vp,defaultParseWidth:"any"}),dayPeriod:Kt({matchPatterns:Wp,defaultMatchWidth:"any",parsePatterns:Bp,defaultParseWidth:"any"})},Kp={code:"en-US",formatDistance:xp,formatLong:yp,formatRelative:jp,localize:Tp,match:Hp,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Gp(t,s,r){const n=ap(),a=r?.locale??n.locale??Kp,o=2520,l=vs(t,s);if(isNaN(l))throw new RangeError("Invalid time value");const c=Object.assign({},r,{addSuffix:r?.addSuffix,comparison:l});let d,u;l>0?(d=pe(s),u=pe(t)):(d=pe(t),u=pe(s));const m=fp(u,d),f=(sa(u)-sa(d))/1e3,h=Math.round((m-f)/60);let v;if(h<2)return r?.includeSeconds?m<5?a.formatDistance("lessThanXSeconds",5,c):m<10?a.formatDistance("lessThanXSeconds",10,c):m<20?a.formatDistance("lessThanXSeconds",20,c):m<40?a.formatDistance("halfAMinute",0,c):m<60?a.formatDistance("lessThanXMinutes",1,c):a.formatDistance("xMinutes",1,c):h===0?a.formatDistance("lessThanXMinutes",1,c):a.formatDistance("xMinutes",h,c);if(h<45)return a.formatDistance("xMinutes",h,c);if(h<90)return a.formatDistance("aboutXHours",1,c);if(h<ta){const p=Math.round(h/60);return a.formatDistance("aboutXHours",p,c)}else{if(h<o)return a.formatDistance("xDays",1,c);if(h<hs){const p=Math.round(h/ta);return a.formatDistance("xDays",p,c)}else if(h<hs*2)return v=Math.round(h/hs),a.formatDistance("aboutXMonths",v,c)}if(v=hp(u,d),v<12){const p=Math.round(h/hs);return a.formatDistance("xMonths",p,c)}else{const p=v%12,g=Math.trunc(v/12);return p<3?a.formatDistance("aboutXYears",g,c):p<9?a.formatDistance("overXYears",g,c):a.formatDistance("almostXYears",g+1,c)}}function Qp(t,s){return Gp(t,op(t),s)}function Yp(){const{user:t}=be(),[s,r]=i.useState([]),[n,a]=i.useState(!0),o=async()=>{try{const m=await fetch("/api/conversations");if(m.ok){const f=await m.json();r(f)}}catch(m){console.error("Failed to fetch conversations:",m)}finally{a(!1)}};if(i.useEffect(()=>{t&&o()},[t]),i.useEffect(()=>{const m=h=>{o()},f=()=>{o()};return window.addEventListener("newMessage",m),window.addEventListener("onlineStatusChanged",f),()=>{window.removeEventListener("newMessage",m),window.removeEventListener("onlineStatusChanged",f)}},[]),!t)return null;const l=({conversation:m})=>{const f=m.lastMessage&&m.lastMessage.senderId!==t.id&&!m.lastMessage.isRead;return e.jsx(Ma,{href:`/chat/${m.otherUser.id}`,className:"block",children:e.jsxs("div",{className:`group relative rounded-xl border transition-all duration-200 hover:shadow-md cursor-pointer ${f?"bg-primary/5 border-primary/20":"bg-card/50 border-border/50 hover:bg-card/80"}`,children:[f&&e.jsx("div",{className:"absolute top-3 right-3 w-2.5 h-2.5 bg-primary rounded-full shadow-sm"}),e.jsx("div",{className:"p-3 sm:p-4",children:e.jsxs("div",{className:"flex gap-3 items-start",children:[e.jsxs("div",{className:"flex-shrink-0 relative",children:[e.jsxs(me,{className:"h-11 w-11 sm:h-12 sm:w-12 ring-2 ring-background shadow-sm",children:[e.jsx(he,{src:m.otherUser.profilePhoto||void 0}),e.jsxs(fe,{className:"bg-primary/10 text-primary font-semibold text-sm",children:[m.otherUser.firstName[0],m.otherUser.lastName[0]]})]}),m.otherUser.isOnline&&e.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-3.5 h-3.5 bg-green-500 border-2 border-background rounded-full"})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"flex items-start justify-between gap-3 mb-1",children:e.jsxs("h3",{className:"font-semibold text-sm sm:text-base text-foreground line-clamp-1 flex-1",children:[m.otherUser.firstName," ",m.otherUser.lastName]})}),m.lastMessage?e.jsxs("div",{className:"flex items-center gap-2 text-xs sm:text-sm text-muted-foreground",children:[m.lastMessage.senderId===t.id?e.jsx(ft,{className:"h-3 w-3 sm:h-3.5 sm:w-3.5 flex-shrink-0"}):e.jsx(ze,{className:"h-3 w-3 sm:h-3.5 sm:w-3.5 flex-shrink-0"}),e.jsx("p",{className:"line-clamp-1 flex-1",children:m.lastMessage.imageUrl?e.jsx("span",{className:"italic",children:"📷 Photo"}):m.lastMessage.content})]}):e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground italic",children:"No messages yet"})]}),m.lastMessage&&e.jsx("div",{className:"absolute top-9 sm:top-10 right-3",children:e.jsx("span",{className:"text-xs text-muted-foreground/70 font-medium whitespace-nowrap",children:Qp(new Date(m.lastMessage.timestamp),{addSuffix:!0})})})]})})]})})};if(n)return e.jsx("div",{className:"flex items-center justify-center min-h-screen pb-16",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading your messages..."})]})});const c=s,d=s.filter(m=>m.lastMessage&&m.lastMessage.senderId!==t.id&&!m.lastMessage.isRead),u=s.filter(m=>m.lastMessage&&m.lastMessage.senderId===t.id);return e.jsxs("div",{className:"flex flex-col h-screen bg-background",children:[e.jsx("div",{className:"flex-none px-4 sm:px-6 lg:px-8 py-4 sm:py-6 border-b border-border/50 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/80",children:e.jsx("div",{className:"max-w-5xl mx-auto",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-xl bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center shadow-lg",children:e.jsx(ze,{className:"h-5 w-5 sm:h-6 sm:w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Messages"}),e.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground",children:[s.length," conversations"]})]})]})})}),e.jsx("div",{className:"flex-1 overflow-hidden pb-20",children:e.jsx("div",{className:"h-full px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"max-w-5xl mx-auto h-full",children:e.jsxs(Fi,{defaultValue:"all",className:"h-full flex flex-col pt-4 sm:pt-6",children:[e.jsxs(dn,{className:"grid w-full grid-cols-3 mb-4 flex-shrink-0",children:[e.jsxs(Pt,{value:"all",className:"flex items-center gap-1.5 sm:gap-2 text-xs sm:text-sm",children:[e.jsx(ze,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}),e.jsx("span",{className:"hidden xs:inline",children:"All "}),"(",c.length,")"]}),e.jsxs(Pt,{value:"unread",className:"flex items-center gap-1.5 sm:gap-2 text-xs sm:text-sm",children:[e.jsx(gr,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}),e.jsx("span",{className:"hidden xs:inline",children:"Unread "}),"(",d.length,")"]}),e.jsxs(Pt,{value:"sent",className:"flex items-center gap-1.5 sm:gap-2 text-xs sm:text-sm",children:[e.jsx(ft,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}),e.jsx("span",{className:"hidden xs:inline",children:"Sent "}),"(",u.length,")"]})]}),e.jsx(Et,{value:"all",className:"flex-1 overflow-hidden",children:e.jsx(Pe,{className:"h-full",children:e.jsx("div",{className:"space-y-3 pr-4",children:c.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-[60vh] text-center p-4",children:[e.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 rounded-full bg-muted/50 flex items-center justify-center mb-6",children:e.jsx(ze,{className:"h-10 w-10 sm:h-12 sm:w-12 text-muted-foreground/50"})}),e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold mb-2",children:"No conversations yet"}),e.jsx("p",{className:"text-muted-foreground max-w-sm text-sm sm:text-base",children:"Start discovering people and begin chatting!"})]}):c.map(m=>e.jsx(l,{conversation:m},m.id))})})}),e.jsx(Et,{value:"unread",className:"flex-1 overflow-hidden",children:e.jsx(Pe,{className:"h-full",children:e.jsx("div",{className:"space-y-3 pr-4",children:d.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-[60vh] text-center p-4",children:[e.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 rounded-full bg-muted/50 flex items-center justify-center mb-6",children:e.jsx(mo,{className:"h-10 w-10 sm:h-12 sm:w-12 text-muted-foreground/50"})}),e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold mb-2",children:"All caught up!"}),e.jsx("p",{className:"text-muted-foreground max-w-sm text-sm sm:text-base",children:"No unread messages"})]}):d.map(m=>e.jsx(l,{conversation:m},m.id))})})}),e.jsx(Et,{value:"sent",className:"flex-1 overflow-hidden",children:e.jsx(Pe,{className:"h-full",children:e.jsx("div",{className:"space-y-3 pr-4",children:u.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-[60vh] text-center p-4",children:[e.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 rounded-full bg-muted/50 flex items-center justify-center mb-6",children:e.jsx(ft,{className:"h-10 w-10 sm:h-12 sm:w-12 text-muted-foreground/50"})}),e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold mb-2",children:"No sent messages"}),e.jsx("p",{className:"text-muted-foreground max-w-sm text-sm sm:text-base",children:"Start a conversation!"})]}):u.map(m=>e.jsx(l,{conversation:m},m.id))})})})]})})})})]})}async function Xp(){const t=await fetch("/api/notifications",{credentials:"include"});if(!t.ok)throw new Error("Failed to fetch notifications");return t.json()}async function Jp(t){if(!(await fetch(`/api/notifications/mark-read/${t}`,{method:"POST",credentials:"include"})).ok)throw new Error("Failed to mark notification as read")}async function Zp(){if(!(await fetch("/api/notifications/mark-all-read",{method:"POST",credentials:"include"})).ok)throw new Error("Failed to mark all notifications as read")}async function ex(t){if(!(await fetch(`/api/notifications/${t}`,{method:"DELETE",credentials:"include"})).ok)throw new Error("Failed to delete notification")}function tx(t){const r=Math.floor((new Date().getTime()-t.getTime())/(1e3*60));if(r<1)return"Just now";if(r<60)return`${r}m ago`;const n=Math.floor(r/60);return n<24?`${n}h ago`:`${Math.floor(n/24)}d ago`}function sx(){const t=Fe(),[,s]=xe(),{data:r=[],isLoading:n,error:a}=et({queryKey:["notifications"],queryFn:Xp,refetchOnMount:"always",refetchOnWindowFocus:!0});i.useEffect(()=>{const x=()=>{t.refetchQueries({queryKey:["notifications"]}),t.refetchQueries({queryKey:["/api/notifications/unread-count"]})};return window.addEventListener("notificationReceived",x),window.addEventListener("notificationRead",x),()=>{window.removeEventListener("notificationReceived",x),window.removeEventListener("notificationRead",x)}},[t]);const o=ue({mutationFn:Jp,onSuccess:()=>{t.invalidateQueries({queryKey:["notifications"]}),t.invalidateQueries({queryKey:["/api/notifications/unread-count"]})}}),l=ue({mutationFn:Zp,onSuccess:()=>{t.invalidateQueries({queryKey:["notifications"]}),t.invalidateQueries({queryKey:["/api/notifications/unread-count"]})}}),c=ue({mutationFn:ex,onSuccess:()=>{t.invalidateQueries({queryKey:["notifications"]}),t.invalidateQueries({queryKey:["/api/notifications/unread-count"]})}}),d=x=>{o.mutate(x)},u=()=>{l.mutate()},m=x=>{c.mutate(x)},f=()=>{r.forEach(x=>{c.mutate(x.id)})},h=x=>{switch(x.isRead||o.mutate(x.id),x.type){case"profile_view":s(`/profile/${x.fromUserId}`);break;case"message_received":s(`/chat/${x.fromUserId}`);break;case"profile_like":s(`/profile/${x.fromUserId}`);break}},v=r.filter(x=>!x.isRead).length,p=x=>{switch(x.type){case"profile_view":return`${x.fromUser.firstName} viewed your profile.`;case"message_received":return`${x.fromUser.firstName} sent you a message.`;case"profile_like":return`${x.fromUser.firstName} liked your profile.`;default:return"New notification"}},g=x=>{switch(x){case"profile_view":return"Profile View";case"message_received":return"New Message";case"profile_like":return"Profile Like";default:return"Notification"}};return n?e.jsxs("div",{className:"flex flex-col h-screen bg-background",children:[e.jsx("div",{className:"flex-none px-4 sm:px-6 lg:px-8 py-4 sm:py-6 border-b border-border/50 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/80",children:e.jsx("div",{className:"max-w-5xl mx-auto",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-xl bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center shadow-lg",children:e.jsx(Ke,{className:"h-5 w-5 sm:h-6 sm:w-6 text-white"})}),e.jsx("h1",{className:"text-xl sm:text-2xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Notifications"})]})})}),e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"text-center p-4",children:[e.jsx(Ke,{className:"h-16 w-16 text-muted-foreground/50 mb-4 mx-auto animate-pulse"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading notifications..."})]})})]}):a?e.jsxs("div",{className:"flex flex-col h-screen bg-background",children:[e.jsx("div",{className:"flex-none px-4 sm:px-6 lg:px-8 py-4 sm:py-6 border-b border-border/50 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/80",children:e.jsx("div",{className:"max-w-5xl mx-auto",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-xl bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center shadow-lg",children:e.jsx(Ke,{className:"h-5 w-5 sm:h-6 sm:w-6 text-white"})}),e.jsx("h1",{className:"text-xl sm:text-2xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Notifications"})]})})}),e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"text-center p-4",children:[e.jsx(Ke,{className:"h-16 w-16 text-muted-foreground/50 mb-4 mx-auto"}),e.jsx("p",{className:"text-red-500 font-medium",children:"Failed to load notifications"}),e.jsx("p",{className:"text-muted-foreground text-sm mt-1",children:"Please try refreshing the page"})]})})]}):e.jsxs("div",{className:"flex flex-col h-screen bg-background",children:[e.jsx("div",{className:"flex-none px-4 sm:px-6 lg:px-8 py-4 sm:py-6 border-b border-border/50 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/80",children:e.jsx("div",{className:"max-w-5xl mx-auto",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-xl bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center shadow-lg",children:e.jsx(Ke,{className:"h-5 w-5 sm:h-6 sm:w-6 text-white"})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Notifications"}),v>0&&e.jsx("div",{className:"bg-primary text-primary-foreground text-xs font-bold px-2.5 py-1 rounded-full shadow-sm",children:v})]})]}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[v>0&&e.jsxs(D,{variant:"outline",size:"sm",onClick:u,className:"rounded-full hover:bg-primary/10 hover:border-primary transition-all duration-200",children:[e.jsx(mo,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Mark all read"}),e.jsx("span",{className:"sm:hidden",children:"Mark all"})]}),r.length>0&&e.jsxs(D,{variant:"outline",size:"sm",onClick:f,className:"rounded-full hover:bg-destructive/10 hover:border-destructive hover:text-destructive transition-all duration-200",children:[e.jsx(ht,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Clear all"}),e.jsx("span",{className:"sm:hidden",children:"Clear"})]})]})]})})}),e.jsx(Pe,{className:"flex-1 pb-20 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"max-w-5xl mx-auto py-4 sm:py-6",children:r.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-[60vh] text-center p-4",children:[e.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 rounded-full bg-muted/50 flex items-center justify-center mb-6",children:e.jsx(Ke,{className:"h-10 w-10 sm:h-12 sm:w-12 text-muted-foreground/50"})}),e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold mb-2",children:"No notifications"}),e.jsx("p",{className:"text-muted-foreground max-w-sm text-sm sm:text-base",children:"You're all caught up! New notifications will appear here."})]}):e.jsx("div",{className:"space-y-3",children:r.map(x=>e.jsxs("div",{className:`group relative rounded-xl border transition-all duration-200 hover:shadow-md cursor-pointer ${x.isRead?"bg-card/50 border-border/50 hover:bg-card/80":"bg-primary/5 border-primary/20"}`,onClick:()=>h(x),children:[!x.isRead&&e.jsx("div",{className:"absolute top-3 right-3 w-2.5 h-2.5 bg-primary rounded-full shadow-sm"}),e.jsx("div",{className:"p-3 sm:p-4",children:e.jsxs("div",{className:"flex gap-3 items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsxs(me,{className:"h-11 w-11 sm:h-12 sm:w-12 ring-2 ring-background shadow-sm",children:[e.jsx(he,{src:x.fromUser.profilePhoto||""}),e.jsxs(fe,{className:"bg-primary/10 text-primary font-semibold text-sm",children:[x.fromUser.firstName[0],x.fromUser.lastName[0]]})]})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-sm sm:text-base text-foreground line-clamp-1 pr-16 sm:pr-20 mb-1",children:g(x.type)}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground line-clamp-2",children:p(x)})]}),e.jsx("div",{className:"absolute top-9 sm:top-10 right-3",children:e.jsx("span",{className:"text-xs text-muted-foreground/70 font-medium whitespace-nowrap",children:tx(new Date(x.createdAt))})}),e.jsxs("div",{className:"absolute top-3 right-3 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity duration-200",onClick:b=>b.stopPropagation(),children:[!x.isRead&&e.jsx(D,{variant:"ghost",size:"icon",onClick:b=>{b.stopPropagation(),d(x.id)},className:"h-7 w-7 sm:h-8 sm:w-8 rounded-lg hover:bg-primary/10 hover:text-primary transition-all duration-200",title:"Mark as read",children:e.jsx(fu,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})}),e.jsx(D,{variant:"ghost",size:"icon",onClick:b=>{b.stopPropagation(),m(x.id)},className:"h-7 w-7 sm:h-8 sm:w-8 rounded-lg hover:bg-destructive/10 hover:text-destructive transition-all duration-200",title:"Delete notification",children:e.jsx(ht,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})})]})]})})]},x.id))})})})]})}const ra=Ar,rx=ma,nx=Ir,Hl=i.forwardRef(({className:t,...s},r)=>e.jsx(ss,{className:E("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s,ref:r}));Hl.displayName=ss.displayName;const ax=Lt("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),Pr=i.forwardRef(({side:t="right",className:s,children:r,...n},a)=>e.jsxs(nx,{children:[e.jsx(Hl,{}),e.jsxs(rs,{ref:a,className:E(ax({side:t}),s),...n,children:[r,e.jsxs(ua,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[e.jsx(De,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Pr.displayName=rs.displayName;const Er=({className:t,...s})=>e.jsx("div",{className:E("flex flex-col space-y-2 text-center sm:text-left",t),...s});Er.displayName="SheetHeader";const Rr=i.forwardRef(({className:t,...s},r)=>e.jsx(Rs,{ref:r,className:E("text-lg font-semibold text-foreground",t),...s}));Rr.displayName=Rs.displayName;const ox=i.forwardRef(({className:t,...s},r)=>e.jsx(Ts,{ref:r,className:E("text-sm text-muted-foreground",t),...s}));ox.displayName=Ts.displayName;function ir({currentPhotos:t=[],children:s,onPhotosUpdated:r}){const[n,a]=i.useState(!1),[o,l]=i.useState([]),[c,d]=i.useState([]),u=Fe(),m=5-t.length,f=ue({mutationFn:async y=>{const P=new FormData;y.forEach(T=>{P.append("photos",T)});const j=await fetch("/api/upload/photos",{method:"POST",body:P,credentials:"include"});if(!j.ok){const T=await j.json();throw new Error(T.message||"Upload failed")}return j.json()},onSuccess:y=>{u.setQueryData(["/api/user"],y.user),r?.(y.photos),ae({title:"Photos uploaded",description:`Successfully uploaded ${y.newPhotos.length} photo(s)`}),a(!1),v()},onError:y=>{ae({title:"Upload failed",description:y.message,variant:"destructive"})}}),h=ue({mutationFn:async y=>{const P=await fetch("/api/photos",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({photoUrl:y}),credentials:"include"});if(!P.ok){const j=await P.json();throw new Error(j.message||"Delete failed")}return P.json()},onSuccess:y=>{u.setQueryData(["/api/user"],y.user),r?.(y.photos),ae({title:"Photo deleted",description:"Photo has been removed from your gallery"})},onError:y=>{ae({title:"Delete failed",description:y.message,variant:"destructive"})}}),v=()=>{l([]),d([])},p=i.useCallback(y=>{if(!y)return;const P=Array.from(y),j=[],T=["image/jpeg","image/png","image/gif","image/webp"];for(const N of P){if(!T.includes(N.type)){ae({title:"Invalid file type",description:`${N.name} is not a valid image format`,variant:"destructive"});continue}if(N.size>5*1024*1024){ae({title:"File too large",description:`${N.name} is larger than 5MB`,variant:"destructive"});continue}j.push(N)}if(t.length+j.length>5){ae({title:"Too many photos",description:`Maximum 5 photos allowed. You have ${t.length} photos.`,variant:"destructive"});return}l(j);const $=j.map(N=>URL.createObjectURL(N));d($)},[t.length]),g=i.useCallback(y=>{y.preventDefault(),p(y.dataTransfer.files)},[p]),x=i.useCallback(y=>{y.preventDefault()},[]),b=y=>{const P=o.filter((T,$)=>$!==y),j=c.filter((T,$)=>$!==y);URL.revokeObjectURL(c[y]),l(P),d(j)},w=y=>{h.mutate(y)},k=()=>{o.length!==0&&f.mutate(o)};return e.jsxs(os,{open:n,onOpenChange:a,children:[e.jsx(wh,{asChild:!0,children:s}),e.jsxs(qt,{className:"sm:max-w-[600px] max-h-[85vh] md:max-h-[90vh] flex flex-col p-0 gap-0",children:[e.jsx($t,{className:"px-4 py-4 md:px-6 md:py-5 border-b sticky top-0 bg-background z-10 rounded-t-2xl md:rounded-t-3xl",children:e.jsx(zt,{children:"Manage Photos"})}),e.jsxs("div",{className:"overflow-y-auto px-4 py-5 md:px-6 md:py-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-secondary/30 rounded-xl border border-border/50",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold",children:[t.length," of 5 photos"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:m>0?`${m} slot${m>1?"s":""} available`:"Photo limit reached"})]}),t.length>0&&e.jsx("div",{className:"text-xs text-muted-foreground",children:"Hover to delete"})]}),t.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-sm font-semibold flex items-center gap-2",children:e.jsx("span",{children:"Your Gallery"})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:[t.map((y,P)=>e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"aspect-square rounded-xl overflow-hidden bg-secondary/20 shadow-md hover:shadow-xl transition-all duration-300",children:e.jsx("img",{src:y,alt:`Gallery photo ${P+1}`,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"})}),e.jsx(D,{variant:"destructive",size:"icon",className:"absolute top-2 right-2 h-8 w-8 rounded-full opacity-0 group-hover:opacity-100 transition-all duration-300 shadow-lg hover:scale-110",onClick:()=>w(y),disabled:h.isPending,children:e.jsx(ht,{className:"h-4 w-4"})})]},P)),m>0&&e.jsxs("label",{htmlFor:"add-photo-upload",className:"aspect-square rounded-xl border-2 border-dashed border-muted-foreground/30 hover:border-primary/50 bg-secondary/10 hover:bg-primary/5 flex flex-col items-center justify-center gap-2 cursor-pointer transition-all duration-300 hover:scale-105 group",children:[e.jsx("div",{className:"bg-primary/10 p-3 rounded-full group-hover:bg-primary/20 transition-colors",children:e.jsx(ju,{className:"h-6 w-6 text-primary"})}),e.jsx("p",{className:"text-xs font-medium text-center px-2",children:"Add Photo"}),e.jsx("input",{id:"add-photo-upload",type:"file",multiple:!0,accept:"image/*",className:"hidden",onChange:y=>p(y.target.files)})]})]})]}),t.length===0&&e.jsx("div",{className:E("border-2 border-dashed border-muted-foreground/25 rounded-2xl p-8 text-center transition-all duration-300","hover:border-primary/50 hover:bg-primary/5"),onDrop:g,onDragOver:x,children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"bg-primary/10 p-4 rounded-full",children:e.jsx(Cu,{className:"h-10 w-10 text-primary"})}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"photo-upload",className:"cursor-pointer text-primary hover:underline font-medium",children:"Click to upload"}),e.jsx("span",{className:"text-muted-foreground",children:" or drag and drop"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"PNG, JPG, GIF, WebP up to 5MB each (max 5 photos)"}),e.jsx("input",{id:"photo-upload",type:"file",multiple:!0,accept:"image/*",className:"hidden",onChange:y=>p(y.target.files)})]})}),o.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h4",{className:"text-sm font-semibold",children:["Ready to Upload (",o.length,")"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:c.map((y,P)=>e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"aspect-square rounded-xl overflow-hidden bg-secondary/20 shadow-md",children:e.jsx("img",{src:y,alt:`Preview ${P+1}`,className:"w-full h-full object-cover"})}),e.jsx(D,{variant:"destructive",size:"icon",className:"absolute top-2 right-2 h-8 w-8 rounded-full opacity-0 group-hover:opacity-100 transition-opacity shadow-lg",onClick:()=>b(P),children:e.jsx(De,{className:"h-4 w-4"})})]},P))})]}),e.jsxs("div",{className:"flex flex-col-reverse sm:flex-row gap-3 pt-4",children:[e.jsx(D,{variant:"outline",className:"flex-1 rounded-full transition-all hover:scale-105",onClick:()=>{v(),a(!1)},children:o.length>0?"Cancel":"Close"}),o.length>0&&e.jsx(D,{onClick:k,disabled:f.isPending,className:"flex-1 rounded-full bg-primary hover:bg-primary/90 transition-all hover:scale-105 shadow-lg",children:f.isPending?"Uploading...":`Upload ${o.length} Photo${o.length>1?"s":""}`})]})]})]})]})}function ix({open:t,onOpenChange:s}){const{user:r}=be(),[n,a]=i.useState(""),o=ue({mutationFn:async c=>{const d=await fetch("/api/support/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c),credentials:"include"});if(!d.ok){const u=await d.json();throw new Error(u.message||"Failed to send message")}return d.json()},onSuccess:()=>{ae({title:"Message sent successfully",description:"We've received your feedback and will get back to you soon."}),a(""),s(!1)},onError:c=>{ae({title:"Failed to send message",description:c.message,variant:"destructive"})}}),l=c=>{if(c.preventDefault(),!n.trim()){ae({title:"Message required",description:"Please enter your message before sending.",variant:"destructive"});return}if(!r){ae({title:"Authentication required",description:"You must be logged in to send feedback.",variant:"destructive"});return}o.mutate({firstName:r.firstName,lastName:r.lastName,email:r.email,message:n.trim()})};return r?e.jsx(os,{open:t,onOpenChange:s,children:e.jsxs(qt,{className:"sm:max-w-[500px]",children:[e.jsxs($t,{children:[e.jsxs(zt,{className:"flex items-center gap-2",children:[e.jsx("div",{className:"bg-primary/10 p-2 rounded-lg",children:e.jsx(Xr,{className:"h-5 w-5 text-primary"})}),"Support & Feedback"]}),e.jsx(_s,{children:"We'd love to hear from you! Send us your feedback, questions, or report any issues."})]}),e.jsxs("form",{onSubmit:l,className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"firstName",className:"text-sm font-medium",children:"First Name"}),e.jsx(oe,{id:"firstName",value:r.firstName,disabled:!0,className:"bg-secondary/30 cursor-not-allowed"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"lastName",className:"text-sm font-medium",children:"Last Name"}),e.jsx(oe,{id:"lastName",value:r.lastName,disabled:!0,className:"bg-secondary/30 cursor-not-allowed"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"email",className:"text-sm font-medium",children:"Email"}),e.jsx(oe,{id:"email",type:"email",value:r.email,disabled:!0,className:"bg-secondary/30 cursor-not-allowed"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"message",className:"text-sm font-medium",children:"Message *"}),e.jsx("textarea",{id:"message",value:n,onChange:c=>a(c.target.value),placeholder:"Tell us what's on your mind...",className:"flex min-h-[140px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:border-primary disabled:cursor-not-allowed disabled:opacity-50 resize-none",disabled:o.isPending,maxLength:2e3}),e.jsxs("p",{className:"text-xs text-muted-foreground text-right",children:[n.length,"/2000 characters"]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(D,{type:"button",variant:"outline",onClick:()=>s(!1),disabled:o.isPending,children:"Cancel"}),e.jsx(D,{type:"submit",disabled:o.isPending||!n.trim(),className:"gap-2",children:o.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Me,{className:"h-4 w-4 animate-spin"}),"Sending..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ft,{className:"h-4 w-4"}),"Send Message"]})})]})]})]})}):null}function lx(){const{user:t,logoutMutation:s}=be(),[r,n]=i.useState(!1),[a,o]=i.useState(!1),[l,c]=i.useState(!1),[d,u]=i.useState(null),[m,f]=i.useState(0),[h,v]=i.useState([]),[p,g]=i.useState(!1),x=Fe(),b=ue({mutationFn:async N=>{const F=new FormData;F.append("profilePicture",N);const O=await fetch("/api/upload/profile",{method:"POST",body:F,credentials:"include"});if(!O.ok){const L=await O.json();throw new Error(L.message||"Upload failed")}return O.json()},onSuccess:N=>{x.setQueryData(["/api/user"],N.user),ae({title:"Profile photo updated",description:"Your profile picture has been updated successfully"})},onError:N=>{ae({title:"Upload failed",description:N.message,variant:"destructive"})}}),[,w]=xe(),k=async()=>{try{const N=await fetch("/api/likes/count");if(N.ok){const F=await N.json();f(F.count)}}catch(N){console.error("Error fetching likes count:",N)}},y=async()=>{g(!0);try{const N=await fetch("/api/likes/received");if(N.ok){const F=await N.json();v(F)}}catch(N){console.error("Error fetching likes list:",N)}finally{g(!1)}},P=()=>{c(!0),y()};if(!t)return null;const j=()=>{s.mutate()},T=N=>{const F=N.target.files?.[0];if(F){if(!["image/jpeg","image/png","image/gif","image/webp"].includes(F.type)){ae({title:"Invalid file type",description:"Please select a valid image file (JPEG, PNG, GIF, or WebP)",variant:"destructive"});return}if(F.size>5*1024*1024){ae({title:"File too large",description:"Please select an image smaller than 5MB",variant:"destructive"});return}b.mutate(F)}N.target.value=""},$=t.photos&&Array.isArray(t.photos)?t.photos:[];return i.useEffect(()=>{k()},[]),e.jsxs("div",{className:"flex flex-col h-screen bg-background",children:[e.jsx("div",{className:"flex-none z-40 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/80 border-b",children:e.jsxs("div",{className:"container max-w-5xl mx-auto flex items-center justify-between p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-xl bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center shadow-lg",children:e.jsx(gt,{className:"h-5 w-5 sm:h-6 sm:w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Profile"}),e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground",children:"Manage your account"})]})]}),e.jsxs(ra,{children:[e.jsx(rx,{asChild:!0,children:e.jsx(D,{variant:"outline",size:"icon",className:"rounded-full",children:e.jsx(xo,{className:"h-4 w-4"})})}),e.jsxs(Pr,{side:"right",className:"w-80",children:[e.jsx(Er,{children:e.jsx(Rr,{children:"Settings"})}),e.jsxs("div",{className:"space-y-3 mt-6",children:[e.jsxs(D,{variant:"outline",className:"w-full justify-start rounded-lg transition-all hover:bg-primary/10",onClick:()=>n(!0),children:[e.jsx(Js,{className:"h-4 w-4 mr-2"}),"Edit Profile"]}),e.jsxs(D,{variant:"outline",className:"w-full justify-start rounded-lg transition-all hover:bg-blue-500/10",onClick:()=>o(!0),children:[e.jsx(Xr,{className:"h-4 w-4 mr-2"}),"Support & Feedback"]}),e.jsxs(D,{variant:"destructive",className:"w-full justify-start rounded-lg",onClick:j,children:[e.jsx(fo,{className:"h-4 w-4 mr-2"}),"Sign Out"]})]})]})]})]})}),e.jsx(Pe,{className:"flex-1 pb-20 md:pb-6",children:e.jsxs("div",{className:"container max-w-5xl mx-auto p-4 space-y-6",children:[e.jsx(ce,{className:"overflow-hidden rounded-2xl shadow-lg border-0 bg-gradient-to-br from-card to-card/80",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"h-32 md:h-40 bg-gradient-to-br from-primary/30 via-primary/20 to-primary/10"}),e.jsxs("div",{className:"relative px-4 md:px-8 pb-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-end md:justify-between gap-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-end gap-4",children:[e.jsxs("div",{className:"relative -mt-16 md:-mt-20",children:[e.jsxs("div",{className:"relative w-28 h-28 md:w-36 md:h-36 border-4 border-background shadow-2xl rounded-full overflow-hidden group cursor-pointer bg-secondary/20",onClick:()=>document.getElementById("profile-photo-upload")?.click(),children:[e.jsxs(me,{className:"w-full h-full",children:[e.jsx(he,{src:t.profilePhoto||"",alt:"Profile Picture",className:"object-cover"}),e.jsx(fe,{className:"text-2xl md:text-3xl font-semibold",children:`${t.firstName[0]}${t.lastName[0]}`})]}),e.jsx("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all duration-300",children:e.jsxs("div",{className:"text-center",children:[e.jsx($e,{className:"h-6 w-6 md:h-8 md:w-8 text-white mx-auto mb-1"}),e.jsx("p",{className:"text-xs text-white font-medium",children:"Change"})]})})]}),t.isOnline&&e.jsx("div",{className:"absolute bottom-2 right-2 bg-green-500 w-5 h-5 md:w-6 md:h-6 rounded-full border-4 border-background shadow-lg"}),e.jsx(oe,{id:"profile-photo-upload",type:"file",accept:"image/*",onChange:T,className:"hidden"})]}),e.jsxs("div",{className:"space-y-2 mb-2",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl md:text-3xl font-bold tracking-tight",children:[t.firstName," ",t.lastName]}),e.jsxs("p",{className:"text-sm md:text-base text-muted-foreground",children:["@",t.username]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs md:text-sm",children:[e.jsx(Xt,{variant:"secondary",className:"rounded-full px-3 py-1 capitalize",children:t.gender}),e.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[e.jsx(js,{className:"h-3 w-3 md:h-4 md:w-4 text-blue-500"}),e.jsxs("span",{children:[t.age," years old"]})]}),t.location&&e.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[e.jsx(Qe,{className:"h-3 w-3 md:h-4 md:w-4 text-green-500"}),e.jsx("span",{children:t.location})]})]})]})]}),e.jsx("div",{className:"hidden md:block",children:e.jsxs(D,{variant:"outline",className:"rounded-full px-6",onClick:()=>n(!0),children:[e.jsx(Js,{className:"h-4 w-4 mr-2"}),"Edit Profile"]})})]}),t.bio&&e.jsx("div",{className:"mt-4 bg-secondary/30 backdrop-blur-sm rounded-xl p-4 border border-border/50",children:e.jsx("p",{className:"text-sm md:text-base leading-relaxed",children:t.bio})})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 md:hidden",children:[e.jsx(D,{variant:"outline",className:"h-auto py-4 rounded-xl hover:shadow-md transition-all hover:scale-105",onClick:()=>n(!0),children:e.jsxs("div",{className:"text-center",children:[e.jsx(Js,{className:"h-6 w-6 mx-auto mb-2 text-primary"}),e.jsx("p",{className:"font-semibold text-sm",children:"Edit Profile"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Update info"})]})}),e.jsx(ir,{currentPhotos:$,onPhotosUpdated:N=>{console.log("Photos updated:",N)},children:e.jsx(D,{variant:"outline",className:"h-auto py-4 rounded-xl hover:shadow-md transition-all hover:scale-105 w-full",children:e.jsxs("div",{className:"text-center",children:[e.jsx($e,{className:"h-6 w-6 mx-auto mb-2 text-primary"}),e.jsx("p",{className:"font-semibold text-sm",children:"Photos"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Manage (",$.length,"/5)"]})]})})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 md:gap-4",children:[e.jsx(ce,{className:"rounded-xl shadow-md border-0 bg-gradient-to-br from-red-500/10 to-red-500/5 hover:shadow-lg transition-all duration-300 hover:scale-105 cursor-pointer",onClick:P,children:e.jsxs(ye,{className:"p-4 md:p-6 text-center",children:[e.jsx("div",{className:"bg-red-500/10 w-10 h-10 md:w-12 md:h-12 rounded-full flex items-center justify-center mx-auto mb-2 md:mb-3",children:e.jsx(Ie,{className:"h-5 w-5 md:h-6 md:w-6 text-red-500"})}),e.jsx("div",{className:"text-xl md:text-2xl font-bold",children:m}),e.jsx("div",{className:"text-xs md:text-sm text-muted-foreground mt-1",children:"Likes"})]})}),e.jsx(ce,{className:"rounded-xl shadow-md border-0 bg-gradient-to-br from-blue-500/10 to-blue-500/5 hover:shadow-lg transition-all duration-300 hover:scale-105",children:e.jsxs(ye,{className:"p-4 md:p-6 text-center",children:[e.jsx("div",{className:"bg-blue-500/10 w-10 h-10 md:w-12 md:h-12 rounded-full flex items-center justify-center mx-auto mb-2 md:mb-3",children:e.jsx(ze,{className:"h-5 w-5 md:h-6 md:w-6 text-blue-500"})}),e.jsx("div",{className:"text-xl md:text-2xl font-bold",children:"0"}),e.jsx("div",{className:"text-xs md:text-sm text-muted-foreground mt-1",children:"Chats"})]})}),e.jsx(ce,{className:"rounded-xl shadow-md border-0 bg-gradient-to-br from-green-500/10 to-green-500/5 hover:shadow-lg transition-all duration-300 hover:scale-105",children:e.jsxs(ye,{className:"p-4 md:p-6 text-center",children:[e.jsx("div",{className:"bg-green-500/10 w-10 h-10 md:w-12 md:h-12 rounded-full flex items-center justify-center mx-auto mb-2 md:mb-3",children:e.jsx(vo,{className:"h-5 w-5 md:h-6 md:w-6 text-green-500"})}),e.jsx("div",{className:"text-xl md:text-2xl font-bold",children:"0"}),e.jsx("div",{className:"text-xs md:text-sm text-muted-foreground mt-1",children:"Matches"})]})})]}),e.jsx(ce,{className:"rounded-2xl shadow-lg border-0",children:e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"bg-primary/10 p-2 rounded-lg",children:e.jsx($e,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-base md:text-lg",children:"Photo Gallery"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[$.length," of 5 photos"]})]})]}),e.jsx(ir,{currentPhotos:$,onPhotosUpdated:N=>{console.log("Photos updated:",N)},children:e.jsxs(D,{variant:"outline",size:"sm",className:"rounded-full hidden md:flex",children:[e.jsx($e,{className:"h-4 w-4 mr-2"}),"Manage"]})})]}),$.length>0?e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2 md:gap-3",children:$.map((N,F)=>e.jsxs("div",{className:"aspect-square rounded-xl overflow-hidden bg-secondary/20 group relative shadow-md hover:shadow-xl transition-all duration-300",children:[e.jsx("img",{src:N,alt:`Gallery photo ${F+1}`,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500 cursor-pointer",onClick:()=>u(F)}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none"})]},F))}):e.jsx(ir,{currentPhotos:$,onPhotosUpdated:N=>{console.log("Photos updated:",N)},children:e.jsx("div",{className:"border-2 border-dashed border-muted-foreground/30 rounded-2xl p-8 md:p-12 text-center hover:border-primary/50 hover:bg-primary/5 transition-all duration-300 cursor-pointer group",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"bg-primary/10 p-4 rounded-full group-hover:bg-primary/20 transition-colors",children:e.jsx($e,{className:"h-8 w-8 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold mb-1",children:"No photos yet"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Click to add your first photo"})]})]})})})]})}),e.jsx(ce,{className:"rounded-2xl shadow-lg border-0",children:e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx("div",{className:"bg-primary/10 p-2 rounded-lg",children:e.jsx(gt,{className:"h-5 w-5 text-primary"})}),e.jsx("h3",{className:"font-semibold text-base md:text-lg",children:"Account Information"})]}),e.jsxs("div",{className:"grid gap-3 md:gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-xl bg-secondary/30 hover:bg-secondary/50 transition-colors",children:[e.jsx("div",{className:"bg-primary/10 p-3 rounded-lg",children:e.jsx(st,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground font-medium",children:"Email"}),e.jsx("p",{className:"text-sm md:text-base font-semibold truncate",children:t.email})]})]}),e.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-xl bg-secondary/30 hover:bg-secondary/50 transition-colors",children:[e.jsx("div",{className:"bg-blue-500/10 p-3 rounded-lg",children:e.jsx(ru,{className:"h-5 w-5 text-blue-500"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground font-medium",children:"Username"}),e.jsxs("p",{className:"text-sm md:text-base font-semibold",children:["@",t.username]})]})]}),e.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-xl bg-secondary/30 hover:bg-secondary/50 transition-colors",children:[e.jsx("div",{className:"bg-green-500/10 p-3 rounded-lg",children:e.jsx(Rt,{className:"h-5 w-5 text-green-500"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground font-medium",children:"Member since"}),e.jsx("p",{className:"text-sm md:text-base font-semibold",children:t.createdAt?new Date(t.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A"})]})]})]})]})})]})}),e.jsx(ji,{isOpen:r,onClose:()=>n(!1),user:t}),e.jsx(ix,{open:a,onOpenChange:o}),e.jsx(ra,{open:l,onOpenChange:c,children:e.jsxs(Pr,{side:"right",className:"w-full sm:w-96",children:[e.jsx(Er,{children:e.jsxs(Rr,{className:"flex items-center gap-2",children:[e.jsx(Ie,{className:"h-5 w-5 text-red-500"}),"People Who Liked You (",m,")"]})}),e.jsx("div",{className:"mt-6",children:p?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(Me,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):h.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx("div",{className:"bg-red-500/10 p-4 rounded-full mb-4",children:e.jsx(Ie,{className:"h-8 w-8 text-red-500"})}),e.jsx("p",{className:"text-lg font-semibold mb-1",children:"No likes yet"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"When someone likes your profile, they'll appear here"})]}):e.jsx("div",{className:"space-y-3",children:h.map(N=>e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-secondary/30 hover:bg-secondary/50 transition-all duration-200 cursor-pointer",onClick:()=>{c(!1),w(`/user/${N.likerUser.id}`)},children:[e.jsxs(me,{className:"h-12 w-12 border-2 border-background",children:[e.jsx(he,{src:N.likerUser.profilePhoto||"",alt:`${N.likerUser.firstName} ${N.likerUser.lastName}`}),e.jsxs(fe,{className:"text-sm font-semibold",children:[N.likerUser.firstName[0],N.likerUser.lastName[0]]})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("p",{className:"font-semibold truncate",children:[N.likerUser.firstName," ",N.likerUser.lastName]}),e.jsxs("p",{className:"text-sm text-muted-foreground truncate",children:["@",N.likerUser.username," • ",N.likerUser.age," years old"]})]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(N.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]},N.id))})})]})})]})}function cx(){const{userId:t}=qr(),[,s]=xe(),{user:r}=be(),[n,a]=i.useState(null),[o,l]=i.useState(!0),[c,d]=i.useState(null),[u,m]=i.useState(!1),[f,h]=i.useState(!1),v=async()=>{if(t)try{const w=await fetch(`/api/users/${t}`);if(w.ok){const k=await w.json();a(k)}else console.error("Failed to fetch user profile")}catch(w){console.error("Error fetching user profile:",w)}finally{l(!1)}},p=async()=>{if(t)try{const w=await fetch(`/api/likes/check/${t}`);if(w.ok){const k=await w.json();m(k.isLiked)}}catch(w){console.error("Error checking like status:",w)}},g=async()=>{if(!(!t||f)){h(!0);try{u?(await fetch(`/api/likes/${t}`,{method:"DELETE"})).ok&&m(!1):(await fetch(`/api/likes/${t}`,{method:"POST"})).ok&&m(!0)}catch(w){console.error("Error toggling like:",w)}finally{h(!1)}}};if(i.useEffect(()=>{v(),p()},[t]),i.useEffect(()=>{const w=k=>{const{userId:y}=k.detail||{};y===t&&v()};return window.addEventListener("onlineStatusChanged",w),()=>window.removeEventListener("onlineStatusChanged",w)},[t]),!r)return null;if(o)return e.jsx("div",{className:"flex items-center justify-center min-h-screen pb-16",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading profile..."})]})});if(!n)return e.jsx("div",{className:"flex items-center justify-center min-h-screen pb-16",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Profile not found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"This user's profile could not be loaded."}),e.jsxs(D,{onClick:()=>s("/discover"),children:[e.jsx(tt,{className:"h-4 w-4 mr-2"}),"Back to Discover"]})]})});const x=n.photos&&Array.isArray(n.photos)?n.photos:[],b=n.profilePhoto?[n.profilePhoto,...x].filter(Boolean):x;return e.jsxs("div",{className:"flex flex-col h-screen bg-background",children:[e.jsx("div",{className:"flex-none z-40 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/80 border-b",children:e.jsxs("div",{className:"container max-w-5xl mx-auto flex items-center gap-4 p-4",children:[e.jsx(D,{variant:"ghost",size:"icon",className:"rounded-full",onClick:()=>window.history.back(),children:e.jsx(tt,{className:"h-5 w-5"})}),e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-xl bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center shadow-lg",children:e.jsx(Wn,{className:"h-5 w-5 sm:h-6 sm:w-6 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h1",{className:"text-xl md:text-2xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent",children:[n.firstName," ",n.lastName]}),e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground",children:n.isOnline?"Online now":"Last seen recently"})]})]})}),e.jsx(Pe,{className:"flex-1 pb-20 md:pb-6",children:e.jsxs("div",{className:"container max-w-5xl mx-auto p-4 space-y-6",children:[e.jsx(ce,{className:"overflow-hidden rounded-2xl shadow-lg border-0 bg-gradient-to-br from-card to-card/80",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"h-32 md:h-40 bg-gradient-to-br from-primary/30 via-primary/20 to-primary/10"}),e.jsxs("div",{className:"relative px-4 md:px-8 pb-6",children:[e.jsx("div",{className:"flex flex-col md:flex-row md:items-end md:justify-between gap-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-end gap-4",children:[e.jsxs("div",{className:"relative -mt-16 md:-mt-20",children:[e.jsx("div",{className:"relative w-28 h-28 md:w-36 md:h-36 border-4 border-background shadow-2xl rounded-full overflow-hidden bg-secondary/20",children:e.jsxs(me,{className:"w-full h-full",children:[e.jsx(he,{src:n.profilePhoto||"",alt:"Profile Picture",className:"object-cover"}),e.jsx(fe,{className:"text-2xl md:text-3xl font-semibold",children:`${n.firstName[0]}${n.lastName[0]}`})]})}),n.isOnline&&e.jsx("div",{className:"absolute bottom-2 right-2 bg-green-500 w-5 h-5 md:w-6 md:h-6 rounded-full border-4 border-background shadow-lg animate-pulse"})]}),e.jsxs("div",{className:"space-y-2 mb-2",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl md:text-3xl font-bold tracking-tight",children:[n.firstName," ",n.lastName]}),e.jsxs("p",{className:"text-sm md:text-base text-muted-foreground",children:["@",n.username]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs md:text-sm",children:[e.jsx(Xt,{variant:"secondary",className:"rounded-full px-3 py-1 capitalize",children:n.gender}),e.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[e.jsx(js,{className:"h-3 w-3 md:h-4 md:w-4"}),e.jsxs("span",{children:[n.age," years old"]})]}),n.location&&e.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[e.jsx(Qe,{className:"h-3 w-3 md:h-4 md:w-4"}),e.jsx("span",{children:n.location})]})]})]})]})}),n.bio&&e.jsx("div",{className:"mt-4 bg-secondary/30 backdrop-blur-sm rounded-xl p-4 border border-border/50",children:e.jsx("p",{className:"text-sm md:text-base leading-relaxed",children:n.bio})})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 md:gap-4",children:[e.jsxs(D,{className:"h-12 md:h-14 rounded-xl hover:shadow-lg transition-all duration-300 hover:scale-105",onClick:()=>s(`/chat/${n.id}`),children:[e.jsx(ze,{className:"h-4 w-4 md:h-5 md:w-5 mr-2"}),e.jsx("span",{className:"font-semibold",children:"Start Chat"})]}),e.jsxs(D,{variant:u?"default":"outline",className:`h-12 md:h-14 rounded-xl hover:shadow-lg transition-all duration-300 hover:scale-105 ${u?"bg-red-500 hover:bg-red-600 text-white":"hover:bg-red-500/10 hover:text-red-500 hover:border-red-500/50"}`,onClick:g,disabled:f,children:[e.jsx(Ie,{className:`h-4 w-4 md:h-5 md:w-5 mr-2 ${u?"fill-current":""}`}),e.jsx("span",{className:"font-semibold",children:u?"Liked Profile":"Like Profile"})]})]}),b.length>0&&e.jsx(ce,{className:"rounded-2xl shadow-lg border-0",children:e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx("div",{className:"bg-primary/10 p-2 rounded-lg",children:e.jsx($e,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-base md:text-lg",children:"Photos"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[b.length," ",b.length===1?"photo":"photos"]})]})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-2 md:gap-3",children:b.map((w,k)=>e.jsxs("div",{className:"aspect-square rounded-xl overflow-hidden bg-secondary/20 group relative shadow-md hover:shadow-2xl transition-all duration-300 cursor-pointer",onClick:()=>d(k),children:[e.jsx("img",{src:w,alt:`Photo ${k+1}`,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsx("div",{className:"absolute bottom-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:e.jsx("div",{className:"bg-white/20 backdrop-blur-sm rounded-full p-2",children:e.jsx($e,{className:"h-4 w-4 text-white"})})})]},k))})]})}),e.jsx(ce,{className:"rounded-2xl shadow-lg border-0",children:e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx("div",{className:"bg-primary/10 p-2 rounded-lg",children:e.jsx(Wn,{className:"h-5 w-5 text-primary"})}),e.jsxs("h3",{className:"font-semibold text-base md:text-lg",children:["About ",n.firstName]})]}),e.jsxs("div",{className:"grid gap-3 md:gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-xl bg-secondary/30 hover:bg-secondary/50 transition-colors",children:[e.jsx("div",{className:"bg-blue-500/10 p-3 rounded-lg",children:e.jsx(js,{className:"h-5 w-5 text-blue-500"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground font-medium",children:"Age"}),e.jsxs("p",{className:"text-sm md:text-base font-semibold",children:[n.age," years old"]})]})]}),e.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-xl bg-secondary/30 hover:bg-secondary/50 transition-colors",children:[e.jsx("div",{className:"bg-purple-500/10 p-3 rounded-lg",children:e.jsx(Ns,{className:"h-5 w-5 text-purple-500"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground font-medium",children:"Gender"}),e.jsx("p",{className:"text-sm md:text-base font-semibold capitalize",children:n.gender})]})]}),n.location&&e.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-xl bg-secondary/30 hover:bg-secondary/50 transition-colors",children:[e.jsx("div",{className:"bg-green-500/10 p-3 rounded-lg",children:e.jsx(Qe,{className:"h-5 w-5 text-green-500"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground font-medium",children:"Location"}),e.jsx("p",{className:"text-sm md:text-base font-semibold",children:n.location})]})]}),n.createdAt&&e.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-xl bg-secondary/30 hover:bg-secondary/50 transition-colors",children:[e.jsx("div",{className:"bg-orange-500/10 p-3 rounded-lg",children:e.jsx(Rt,{className:"h-5 w-5 text-orange-500"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground font-medium",children:"Member since"}),e.jsx("p",{className:"text-sm md:text-base font-semibold",children:new Date(n.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]})]})]})]})})]})}),c!==null&&e.jsxs("div",{className:"fixed inset-0 z-50 bg-black/90 backdrop-blur-sm flex items-center justify-center p-4 animate-in fade-in duration-300",onClick:()=>d(null),children:[e.jsx("button",{className:"absolute top-4 right-4 text-white hover:text-gray-300 transition-colors",onClick:()=>d(null),children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsxs("div",{className:"relative max-w-4xl w-full max-h-[90vh] flex items-center justify-center",children:[e.jsx("img",{src:b[c],alt:`Photo ${c+1}`,className:"max-w-full max-h-[90vh] object-contain rounded-lg shadow-2xl",onClick:w=>w.stopPropagation()}),b.length>1&&e.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 flex gap-2",children:b.map((w,k)=>e.jsx("button",{className:`w-2 h-2 rounded-full transition-all ${k===c?"bg-white w-8":"bg-white/50"}`,onClick:y=>{y.stopPropagation(),d(k)}},k))})]})]})]})}function dx({imageUrl:t,isOpen:s,onClose:r}){const[n,a]=i.useState(1),[o,l]=i.useState(!1),[c,d]=i.useState({x:0,y:0}),[u,m]=i.useState({x:0,y:0});if(i.useEffect(()=>{s?(document.body.style.overflow="hidden",a(1),d({x:0,y:0})):document.body.style.overflow="unset";const b=w=>{w.key==="Escape"&&s&&r()};return document.addEventListener("keydown",b),()=>{document.removeEventListener("keydown",b),document.body.style.overflow="unset"}},[s,r]),!s)return null;const f=()=>{a(b=>Math.min(b+.5,3))},h=()=>{a(b=>Math.max(b-.5,.5))},v=()=>{const b=document.createElement("a");b.href=t,b.download=`image-${Date.now()}.jpg`,document.body.appendChild(b),b.click(),document.body.removeChild(b)},p=b=>{n>1&&(l(!0),m({x:b.clientX-c.x,y:b.clientY-c.y}))},g=b=>{o&&n>1&&d({x:b.clientX-u.x,y:b.clientY-u.y})},x=()=>{l(!1)};return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/95 backdrop-blur-sm animate-in fade-in-0 duration-300",onClick:r,children:[e.jsxs("div",{className:"absolute top-0 left-0 right-0 z-10 flex items-center justify-between p-4 bg-gradient-to-b from-black/80 to-transparent",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:b=>{b.stopPropagation(),h()},disabled:n<=.5,className:E("p-2 rounded-lg bg-white/10 hover:bg-white/20 text-white transition-all duration-200",n<=.5&&"opacity-50 cursor-not-allowed"),"aria-label":"Zoom out",children:e.jsx(Pu,{className:"h-5 w-5"})}),e.jsxs("span",{className:"text-white text-sm font-medium min-w-[60px] text-center",children:[Math.round(n*100),"%"]}),e.jsx("button",{onClick:b=>{b.stopPropagation(),f()},disabled:n>=3,className:E("p-2 rounded-lg bg-white/10 hover:bg-white/20 text-white transition-all duration-200",n>=3&&"opacity-50 cursor-not-allowed"),"aria-label":"Zoom in",children:e.jsx(ku,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:b=>{b.stopPropagation(),v()},className:"p-2 rounded-lg bg-white/10 hover:bg-white/20 text-white transition-all duration-200","aria-label":"Download image",children:e.jsx(mu,{className:"h-5 w-5"})}),e.jsx("button",{onClick:b=>{b.stopPropagation(),r()},className:"p-2 rounded-lg bg-white/10 hover:bg-white/20 text-white transition-all duration-200","aria-label":"Close viewer",children:e.jsx(De,{className:"h-5 w-5"})})]})]}),e.jsx("div",{className:"relative w-full h-full flex items-center justify-center px-4 pt-20 pb-20 overflow-hidden",onClick:b=>b.stopPropagation(),onMouseDown:p,onMouseMove:g,onMouseUp:x,onMouseLeave:x,style:{cursor:n>1?o?"grabbing":"grab":"default"},children:e.jsx("img",{src:t,alt:"Full size view",className:"max-w-full max-h-full object-contain select-none transition-transform duration-200",style:{transform:`scale(${n}) translate(${c.x/n}px, ${c.y/n}px)`},draggable:!1})}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-black/80 to-transparent",children:e.jsxs("p",{className:"text-white/70 text-sm text-center",children:[n>1?"Drag to pan • ":"","Scroll or use buttons to zoom • ESC or click outside to close"]})})]})}function ux({chatUser:t}){const{user:s}=be(),{sendMessage:r,sendTyping:n,typingUsers:a,isConnected:o,openChatWindow:l,closeChatWindow:c}=ln(),d=Fe(),[u,m]=i.useState(""),[f,h]=i.useState(!1),[v,p]=i.useState(!1),[g,x]=i.useState(null),[b,w]=i.useState(null),[k,y]=i.useState(!1),[P,j]=i.useState(""),T=i.useRef(null),$=i.useRef(),N=i.useRef(null),F=i.useRef(null);console.log("[ChatPage] ChatContent render - consentStatus:",g,"chatUser:",t?.id);const{data:O=[]}=et({queryKey:["/api/conversations",t.id,"messages"],enabled:!!t.id});i.useEffect(()=>{T.current?.scrollIntoView({behavior:"smooth"})},[O,a]),i.useEffect(()=>(t.id&&(d.invalidateQueries({queryKey:["/api/conversations",t.id,"messages"]}),l(t.id)),()=>{t.id&&c(t.id)}),[t.id,d,l,c]),i.useEffect(()=>{const S=async()=>{if(!t?.id){console.log("[ChatPage] Consent fetch skipped: chatUser is null/undefined");return}console.log(`[ChatPage] ===== FETCHING CONSENT STATUS for user ${t.id} (${t.firstName}) =====`);try{const I=await fetch(`/api/consent/${t.id}`,{credentials:"include"});if(console.log(`[ChatPage] Consent API response status: ${I.status}`),I.ok){const R=await I.json();console.log("[ChatPage] Fetched consent status:",JSON.stringify(R,null,2)),R.status==="pending"&&R.consent&&R.requester?(console.log("[ChatPage] ✅ Setting consent request from API (we are responder)"),x("pending"),w({consent:R.consent,requester:R.requester})):R.status==="waiting"?(console.log("[ChatPage] ⏳ We are waiting for consent"),x("waiting"),w(null)):(console.log("[ChatPage] Other status:",R.status||"null"),x(R.status||null),w(null))}else console.error("[ChatPage] ❌ Consent API failed with status:",I.status)}catch(I){console.error("[ChatPage] ❌ Failed to fetch consent status:",I)}};console.log("[ChatPage] useEffect triggered for consent fetch, chatUser:",t?.id),S()},[t?.id]),i.useEffect(()=>{const S=R=>{const{message:V}=R.detail;(V.senderId===t.id&&V.receiverId===s?.id||V.senderId===s?.id&&V.receiverId===t.id)&&d.setQueryData(["/api/conversations",t.id,"messages"],(ee=[])=>ee.some(Re=>Re.id===V.id)?ee:[...ee,V]),d.invalidateQueries({queryKey:["/api/conversations"]})},I=R=>{const{message:V}=R.detail;(V.senderId===t.id&&V.receiverId===s?.id||V.senderId===s?.id&&V.receiverId===t.id)&&d.setQueryData(["/api/conversations",t.id,"messages"],(ee=[])=>ee.some(Re=>Re.id===V.id)?ee:[...ee,V]),d.invalidateQueries({queryKey:["/api/conversations"]})};return window.addEventListener("newMessage",S),window.addEventListener("messageConfirmed",I),()=>{window.removeEventListener("newMessage",S),window.removeEventListener("messageConfirmed",I)}},[t.id,s?.id,d]),i.useEffect(()=>{const S=B=>{const{consent:ee,requester:re}=B.detail;console.log("[ChatPage] 📨 Received consent request event"),console.log("[ChatPage] Requester:",re?.firstName,re?.id),console.log("[ChatPage] Chat User:",t?.firstName,t?.id),t&&re&&re.id===t.id?(console.log("[ChatPage] ✅ Setting consent request for current chat - MATCH!"),w({consent:ee,requester:re}),x("pending")):console.log("[ChatPage] ❌ Consent request NOT for current chat")},I=B=>{const{receiverId:ee}=B.detail;console.log("[ChatPage] Received consent pending event:",{receiverId:ee,chatUserId:t?.id}),t&&ee===t.id&&(console.log("[ChatPage] Setting consent status to waiting (we sent request)"),x("waiting"),w(null))},R=B=>{const{responderId:ee}=B.detail;t&&ee===t.id&&(console.log("[ChatPage] Consent accepted!"),x("accepted"),w(null),ae({title:"Request accepted!",description:`${t.firstName} accepted your chat request.`}))},V=B=>{const{responderId:ee}=B.detail;t&&ee===t.id&&(console.log("[ChatPage] Consent rejected"),x("rejected"),w(null))};return window.addEventListener("consentRequest",S),window.addEventListener("consentPending",I),window.addEventListener("consentAccepted",R),window.addEventListener("consentRejected",V),()=>{window.removeEventListener("consentRequest",S),window.removeEventListener("consentPending",I),window.removeEventListener("consentAccepted",R),window.removeEventListener("consentRejected",V)}},[t?.id,t?.firstName,ae]);const L=()=>{!u.trim()||!o||(r(t.id,u.trim()),m(""),f&&(n(t.id,!1),h(!1)))},J=S=>{m(S),o&&(!f&&S.trim()&&(n(t.id,!0),h(!0)),$.current&&clearTimeout($.current),$.current=setTimeout(()=>{f&&(n(t.id,!1),h(!1))},2e3))},q=ue({mutationFn:async S=>{const I=new FormData;I.append("messageImage",S);const R=await fetch("/api/upload/message",{method:"POST",body:I,credentials:"include"});if(!R.ok)throw new Error("Upload failed");return R.json()},onSuccess:S=>{r(t.id,void 0,S.imageUrl)},onError:()=>{ae({title:"Upload failed",description:"Failed to upload image",variant:"destructive"})}}),M=S=>{const I=S.target.files?.[0];if(I){if(!I.type.startsWith("image/")){ae({title:"Invalid file type",description:"Only image files are allowed",variant:"destructive"});return}if(I.size>5*1024*1024){ae({title:"File too large",description:"Image must be smaller than 5MB",variant:"destructive"});return}q.mutate(I)}S.target&&(S.target.value="")},_=S=>{m(I=>I+S),p(!1)},z=ue({mutationFn:async()=>{const S=await fetch("/api/consent/accept",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({consentId:b?.consent?.id,requesterId:b?.requester?.id}),credentials:"include"});if(!S.ok)throw new Error("Failed to accept consent");return S.json()},onSuccess:()=>{console.log("[ChatPage] Consent accepted successfully"),x("accepted"),w(null),ae({title:"Request accepted!",description:`You can now chat with ${t.firstName}.`})},onError:S=>{console.error("[ChatPage] Failed to accept consent:",S),ae({title:"Failed to accept",description:"Could not accept the chat request. Please try again.",variant:"destructive"})}}),W=ue({mutationFn:async()=>{const S=await fetch("/api/consent/reject",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({consentId:b?.consent?.id,requesterId:b?.requester?.id}),credentials:"include"});if(!S.ok)throw new Error("Failed to reject consent");return S.json()},onSuccess:()=>{console.log("[ChatPage] Consent rejected successfully"),x("rejected"),w(null),ae({title:"Request declined",description:`You declined the chat request from ${t.firstName}.`})},onError:S=>{console.error("[ChatPage] Failed to reject consent:",S),ae({title:"Failed to decline",description:"Could not decline the chat request. Please try again.",variant:"destructive"})}}),Y=S=>{S.key==="Enter"&&!S.shiftKey&&(S.preventDefault(),L())},te=S=>new Date(S).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),se=S=>{const I=new Date(S),R=new Date,V=new Date(R);return V.setDate(V.getDate()-1),I.toDateString()===R.toDateString()?"Today":I.toDateString()===V.toDateString()?"Yesterday":I.toLocaleDateString("en-US",{month:"short",day:"numeric",year:I.getFullYear()!==R.getFullYear()?"numeric":void 0})},C=O.reduce((S,I)=>{const R=se(I.timestamp);return S[R]||(S[R]=[]),S[R].push(I),S},{});return e.jsxs("div",{className:"flex flex-col h-full bg-background",children:[e.jsx(Pe,{className:"flex-1 px-3 py-4 sm:px-4 sm:py-5 lg:px-8",ref:F,children:e.jsxs("div",{className:"w-full max-w-full lg:max-w-6xl mx-auto space-y-2 pb-8",children:[Object.entries(C).map(([S,I])=>e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center justify-center my-8",children:e.jsx("div",{className:"bg-card/90 backdrop-blur-md border border-border/50 shadow-md text-muted-foreground px-5 py-2 rounded-full text-xs font-semibold uppercase tracking-wide",children:S})}),e.jsx("div",{className:"space-y-4",children:I.map((R,V)=>{const B=R.senderId===s?.id,ee=!B&&(V===I.length-1||I[V+1]?.senderId!==R.senderId);return e.jsxs("div",{className:E("flex items-end gap-2 sm:gap-2.5 max-w-[85%] sm:max-w-[80%] md:max-w-[70%] lg:max-w-[60%] animate-in fade-in-0 slide-in-from-bottom-3 duration-300",B?"ml-auto flex-row-reverse":"mr-auto"),children:[!B&&e.jsx("div",{className:"flex-shrink-0 mb-1",children:ee?e.jsxs(me,{className:"h-8 w-8 sm:h-9 sm:w-9 border-2 border-background shadow-md ring-1 ring-primary/10",children:[e.jsx(he,{src:t.profilePhoto||""}),e.jsxs(fe,{className:"text-xs font-semibold bg-gradient-to-br from-primary/20 to-primary/30",children:[t.firstName[0],t.lastName[0]]})]}):e.jsx("div",{className:"h-8 w-8 sm:h-9 sm:w-9"})}),e.jsxs("div",{className:E("flex flex-col gap-1.5 min-w-0",B?"items-end":"items-start"),children:[e.jsx("div",{className:E("group relative rounded-2xl px-4 py-3 break-words shadow-md transition-all duration-200 hover:shadow-lg",B?"bg-gradient-to-br from-primary to-primary/90 text-primary-foreground rounded-br-md":"bg-card text-card-foreground border border-border/60 rounded-bl-md backdrop-blur-sm"),children:R.imageUrl?e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"relative overflow-hidden rounded-xl group/image cursor-pointer",onClick:()=>{j(R.imageUrl),y(!0)},children:e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:R.imageUrl,alt:"Shared image",loading:"lazy",className:"w-full max-w-[240px] sm:max-w-[280px] md:max-w-[320px] h-auto max-h-[200px] sm:max-h-[240px] md:max-h-[280px] object-cover rounded-lg transition-all duration-300 group-hover/image:brightness-90"}),e.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover/image:bg-black/10 transition-all duration-300 rounded-lg flex items-center justify-center",children:e.jsx("div",{className:"opacity-0 group-hover/image:opacity-100 transition-opacity duration-300 bg-white/20 backdrop-blur-sm rounded-full p-3",children:e.jsx(vu,{className:"h-6 w-6 text-white"})})})]})}),R.content&&e.jsx("p",{className:"text-sm leading-relaxed mt-2",children:R.content})]}):e.jsx("p",{className:"text-sm sm:text-[15px] leading-relaxed whitespace-pre-wrap",children:R.content})}),e.jsx("span",{className:E("text-xs text-muted-foreground/70 px-1 font-medium",B?"text-right":"text-left"),children:te(R.timestamp)})]})]},R.id)})})]},S)),a[t.id]&&e.jsxs("div",{className:"flex items-end gap-2 sm:gap-2.5 max-w-[75%] sm:max-w-[70%] md:max-w-[60%] lg:max-w-[50%] animate-in fade-in-0 slide-in-from-bottom-3 duration-300",children:[e.jsxs(me,{className:"h-8 w-8 sm:h-9 sm:w-9 flex-shrink-0 mb-1 border-2 border-background shadow-md ring-1 ring-primary/10",children:[e.jsx(he,{src:t.profilePhoto||""}),e.jsxs(fe,{className:"text-xs font-semibold bg-gradient-to-br from-primary/20 to-primary/30",children:[t.firstName[0],t.lastName[0]]})]}),e.jsx("div",{className:"bg-card border border-border/60 rounded-2xl rounded-bl-md px-6 py-3.5 shadow-md backdrop-blur-sm",children:e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-2 h-2 bg-primary/60 rounded-full animate-bounce [animation-duration:1s]"}),e.jsx("div",{className:"w-2 h-2 bg-primary/60 rounded-full animate-bounce [animation-duration:1s]",style:{animationDelay:"0.2s"}}),e.jsx("div",{className:"w-2 h-2 bg-primary/60 rounded-full animate-bounce [animation-duration:1s]",style:{animationDelay:"0.4s"}})]})})]}),e.jsx("div",{ref:T})]})}),g==="pending"&&b&&e.jsx("div",{className:"border-t border-border/40 bg-card/60 dark:bg-card/40 backdrop-blur-lg p-4 sm:p-5 md:p-6 shadow-lg flex-shrink-0 animate-in slide-in-from-bottom-5 duration-500",children:e.jsx("div",{className:"w-full max-w-full lg:max-w-6xl mx-auto",children:e.jsxs("div",{className:"flex flex-col xs:flex-row items-start xs:items-center gap-3 sm:gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 flex-1 w-full xs:w-auto",children:[e.jsx("div",{className:"flex-shrink-0 w-11 h-11 sm:w-12 sm:h-12 md:w-13 md:h-13 rounded-xl bg-primary/10 dark:bg-primary/20 flex items-center justify-center border border-primary/20 dark:border-primary/30",children:e.jsx("span",{className:"text-xl sm:text-2xl",children:"💬"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h4",{className:"font-semibold text-sm sm:text-base md:text-lg text-foreground leading-snug",children:[b.requester?.firstName," wants to chat"]}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground mt-0.5 sm:mt-1 font-normal",children:"Do you want to accept this request?"})]})]}),e.jsxs("div",{className:"flex gap-2 sm:gap-3 w-full xs:w-auto flex-shrink-0",children:[e.jsxs(D,{onClick:()=>W.mutate(),disabled:W.isPending||z.isPending,variant:"outline",size:"sm",className:"flex-1 xs:flex-none xs:min-w-[100px] sm:min-w-[110px] rounded-lg text-xs sm:text-sm font-medium h-9 sm:h-10 px-4 sm:px-5 hover:bg-destructive/10 hover:text-destructive hover:border-destructive transition-all duration-200",children:[W.isPending&&e.jsx(Me,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4 mr-1.5 sm:mr-2 animate-spin"}),"Decline"]}),e.jsxs(D,{onClick:()=>z.mutate(),disabled:z.isPending||W.isPending,size:"sm",className:"flex-1 xs:flex-none xs:min-w-[100px] sm:min-w-[110px] rounded-lg text-xs sm:text-sm font-medium h-9 sm:h-10 px-4 sm:px-5 bg-primary hover:bg-primary/90 text-primary-foreground shadow-md hover:shadow-lg transition-all duration-200",children:[z.isPending&&e.jsx(Me,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4 mr-1.5 sm:mr-2 animate-spin"}),"Accept"]})]})]})})}),g==="waiting"&&e.jsx("div",{className:"border-t border-border/40 bg-card/60 dark:bg-card/40 backdrop-blur-lg p-4 sm:p-5 md:p-6 shadow-lg flex-shrink-0 animate-in slide-in-from-bottom-5 duration-500",children:e.jsx("div",{className:"w-full max-w-full lg:max-w-6xl mx-auto",children:e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("div",{className:"flex-shrink-0 w-11 h-11 sm:w-12 sm:h-12 md:w-13 md:h-13 rounded-xl bg-amber-500/10 dark:bg-amber-500/20 flex items-center justify-center border border-amber-500/20 dark:border-amber-500/30",children:e.jsx(Me,{className:"h-5 w-5 sm:h-6 sm:w-6 animate-spin text-amber-600 dark:text-amber-500"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("p",{className:"text-sm sm:text-base md:text-lg text-foreground font-semibold leading-snug",children:["Waiting for ",t.firstName," to accept..."]}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground mt-0.5 sm:mt-1 font-normal",children:"You can send messages once they respond"})]})]})})}),e.jsx("div",{className:"border-t border-border/30 bg-background p-3 sm:p-4 md:p-5 flex-shrink-0",children:e.jsxs("div",{className:"w-full max-w-full lg:max-w-6xl mx-auto",children:[e.jsxs("div",{className:"relative group",children:[e.jsxs("div",{className:"relative flex items-center bg-muted/40 dark:bg-muted/20 rounded-xl transition-all duration-200",children:[e.jsx("textarea",{value:u,onChange:S=>J(S.target.value),onKeyDown:Y,placeholder:g==="waiting"?"Waiting for chat permission...":g==="pending"?"Please respond to the chat request above...":g==="rejected"?"Chat request was declined":"Type a message",className:"flex-1 min-h-[40px] max-h-32 resize-none py-2.5 px-4 sm:px-5 bg-transparent border-0 border-b-2 border-gray-300 dark:border-gray-600 focus:border-blue-500 focus:outline-none focus:ring-0 rounded-none text-sm sm:text-base text-foreground placeholder:text-muted-foreground/60",disabled:!o||g==="waiting"||g==="pending"||g==="rejected"}),e.jsxs("div",{className:"flex items-center gap-1 sm:gap-1.5 pr-2 sm:pr-2.5 flex-shrink-0",children:[e.jsx(D,{variant:"ghost",size:"icon",className:"h-8 w-8 sm:h-9 sm:w-9 rounded-lg hover:bg-muted/60 dark:hover:bg-muted/40 transition-colors",onClick:()=>p(!v),disabled:!o||g==="waiting"||g==="pending"||g==="rejected",title:"Add emoji",children:e.jsx(go,{className:"h-[18px] w-[18px] sm:h-5 sm:w-5 text-muted-foreground"})}),e.jsx(D,{variant:"ghost",size:"icon",className:"h-8 w-8 sm:h-9 sm:w-9 rounded-lg hover:bg-muted/60 dark:hover:bg-muted/40 transition-colors",onClick:()=>N.current?.click(),disabled:!o||q.isPending,title:"Attach image",children:q.isPending?e.jsx(Me,{className:"h-[18px] w-[18px] sm:h-5 sm:w-5 animate-spin text-muted-foreground"}):e.jsx(po,{className:"h-[18px] w-[18px] sm:h-5 sm:w-5 text-muted-foreground"})}),e.jsx(D,{onClick:L,disabled:!u.trim()||!o||g==="waiting"||g==="pending"||g==="rejected",variant:"ghost",size:"icon",className:"h-8 w-8 sm:h-9 sm:w-9 rounded-lg hover:bg-primary/10 transition-colors disabled:opacity-40",title:"Send message",children:e.jsx(ft,{className:"h-[18px] w-[18px] sm:h-5 sm:w-5 text-muted-foreground hover:text-primary transition-colors"})})]})]}),e.jsx("div",{className:"absolute -bottom-px left-0 right-0 h-0.5 bg-primary scale-x-0 group-focus-within:scale-x-100 transition-transform duration-300 origin-left"})]}),v&&e.jsx("div",{className:"mt-2",children:e.jsx(xi,{onEmojiSelect:_,onClose:()=>p(!1)})}),e.jsx("input",{ref:N,type:"file",onChange:M,accept:"image/*",className:"hidden"}),!o&&e.jsxs("div",{className:"flex items-center justify-center gap-2 mt-3 text-xs text-muted-foreground/70 font-medium",children:[e.jsx(Me,{className:"h-3.5 w-3.5 animate-spin"}),e.jsx("span",{children:"Connecting to chat..."})]})]})}),e.jsx(dx,{imageUrl:P,isOpen:k,onClose:()=>y(!1)})]})}function mx(){const{userId:t}=qr(),[,s]=xe(),{user:r}=be(),[n,a]=i.useState(null),[o,l]=i.useState(!0);return i.useEffect(()=>{(async()=>{if(t)try{const d=await fetch(`/api/users/${t}`);if(d.ok){const u=await d.json();a(u)}else console.error("Failed to fetch chat user")}catch(d){console.error("Error fetching chat user:",d)}finally{l(!1)}})()},[t]),r?o?e.jsx("div",{className:"flex items-center justify-center h-screen bg-gradient-to-b from-background to-muted/20",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx(Me,{className:"h-10 w-10 animate-spin mx-auto text-primary"}),e.jsx("p",{className:"text-muted-foreground font-medium",children:"Loading chat..."})]})}):n?e.jsxs("div",{className:"fixed inset-0 flex flex-col bg-gradient-to-b from-background via-background to-muted/30 pb-16",children:[e.jsx("div",{className:"border-b bg-card/95 backdrop-blur-md shadow-md flex-shrink-0",children:e.jsxs("div",{className:"w-full max-w-full px-3 py-3 sm:px-4 sm:py-3.5 lg:max-w-6xl lg:mx-auto flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 flex-1 min-w-0",children:[e.jsx(D,{variant:"ghost",size:"icon",onClick:()=>window.history.back(),className:"flex-shrink-0 h-9 w-9 sm:h-10 sm:w-10 rounded-full hover:bg-primary/10 transition-colors",children:e.jsx(tt,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 flex-1 min-w-0 cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>s(`/profile/${n.id}`),children:[e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsxs(me,{className:"h-10 w-10 sm:h-11 sm:w-11 border-2 border-background shadow-md",children:[e.jsx(he,{src:n.profilePhoto||""}),e.jsxs(fe,{className:"text-sm font-semibold bg-gradient-to-br from-primary/20 to-primary/30",children:[n.firstName[0],n.lastName[0]]})]}),n.isOnline&&e.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-3.5 h-3.5 bg-green-500 border-2 border-card rounded-full ring-2 ring-background animate-pulse"})]}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("h3",{className:"font-semibold text-sm sm:text-base truncate leading-tight",children:[n.firstName," ",n.lastName]}),e.jsx("p",{className:"text-xs text-muted-foreground truncate mt-0.5",children:n.isOnline?e.jsx("span",{className:"text-green-600 dark:text-green-500 font-medium",children:"Online"}):e.jsxs("span",{children:[n.age," · ",n.location||"Location not set"]})})]})]})]}),e.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0 ml-2",children:[e.jsx(D,{variant:"ghost",size:"icon",className:"hidden sm:flex h-9 w-9 sm:h-10 sm:w-10 rounded-full hover:bg-primary/10 transition-colors",children:e.jsx(wu,{className:"h-5 w-5 text-muted-foreground"})}),e.jsx(D,{variant:"ghost",size:"icon",className:"hidden sm:flex h-9 w-9 sm:h-10 sm:w-10 rounded-full hover:bg-primary/10 transition-colors",children:e.jsx(Su,{className:"h-5 w-5 text-muted-foreground"})}),e.jsx(D,{variant:"ghost",size:"icon",className:"h-9 w-9 sm:h-10 sm:w-10 rounded-full hover:bg-primary/10 transition-colors",children:e.jsx(hu,{className:"h-5 w-5 text-muted-foreground"})})]})]})}),e.jsx("div",{className:"flex-1 overflow-hidden min-h-0",children:e.jsx(ux,{chatUser:n})})]}):e.jsx("div",{className:"flex items-center justify-center h-screen bg-gradient-to-b from-background to-muted/20",children:e.jsxs("div",{className:"text-center space-y-4 px-4",children:[e.jsx("div",{className:"w-16 h-16 mx-auto bg-destructive/10 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-2xl",children:"😕"})}),e.jsx("h3",{className:"text-lg font-semibold",children:"User not found"}),e.jsx("p",{className:"text-muted-foreground text-sm max-w-xs mx-auto",children:"This user could not be loaded. They may have been removed or the link is incorrect."}),e.jsxs(D,{onClick:()=>s("/discover"),className:"mt-4 rounded-full shadow-md hover:shadow-lg transition-all",children:[e.jsx(tt,{className:"h-4 w-4 mr-2"}),"Back to Discover"]})]})}):null}var hx=Object.defineProperty,fx=Object.defineProperties,px=Object.getOwnPropertyDescriptors,ks=Object.getOwnPropertySymbols,Kl=Object.prototype.hasOwnProperty,Gl=Object.prototype.propertyIsEnumerable,na=(t,s,r)=>s in t?hx(t,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[s]=r,xx=(t,s)=>{for(var r in s||(s={}))Kl.call(s,r)&&na(t,r,s[r]);if(ks)for(var r of ks(s))Gl.call(s,r)&&na(t,r,s[r]);return t},gx=(t,s)=>fx(t,px(s)),vx=(t,s)=>{var r={};for(var n in t)Kl.call(t,n)&&s.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&ks)for(var n of ks(t))s.indexOf(n)<0&&Gl.call(t,n)&&(r[n]=t[n]);return r};function bx(t){let s=setTimeout(t,0),r=setTimeout(t,10),n=setTimeout(t,50);return[s,r,n]}function yx(t){let s=i.useRef();return i.useEffect(()=>{s.current=t}),s.current}var wx=18,Ql=40,jx=`${Ql}px`,Nx=["[data-lastpass-icon-root]","com-1password-button","[data-dashlanecreated]",'[style$="2147483647 !important;"]'].join(",");function Cx({containerRef:t,inputRef:s,pushPasswordManagerStrategy:r,isFocused:n}){let[a,o]=i.useState(!1),[l,c]=i.useState(!1),[d,u]=i.useState(!1),m=i.useMemo(()=>r==="none"?!1:(r==="increase-width"||r==="experimental-no-flickering")&&a&&l,[a,l,r]),f=i.useCallback(()=>{let h=t.current,v=s.current;if(!h||!v||d||r==="none")return;let p=h,g=p.getBoundingClientRect().left+p.offsetWidth,x=p.getBoundingClientRect().top+p.offsetHeight/2,b=g-wx,w=x;document.querySelectorAll(Nx).length===0&&document.elementFromPoint(b,w)===h||(o(!0),u(!0))},[t,s,d,r]);return i.useEffect(()=>{let h=t.current;if(!h||r==="none")return;function v(){let g=window.innerWidth-h.getBoundingClientRect().right;c(g>=Ql)}v();let p=setInterval(v,1e3);return()=>{clearInterval(p)}},[t,r]),i.useEffect(()=>{let h=n||document.activeElement===s.current;if(r==="none"||!h)return;let v=setTimeout(f,0),p=setTimeout(f,2e3),g=setTimeout(f,5e3),x=setTimeout(()=>{u(!0)},6e3);return()=>{clearTimeout(v),clearTimeout(p),clearTimeout(g),clearTimeout(x)}},[s,n,r,f]),{hasPWMBadge:a,willPushPWMBadge:m,PWM_BADGE_SPACE_WIDTH:jx}}var Yl=i.createContext({}),Xl=i.forwardRef((t,s)=>{var r=t,{value:n,onChange:a,maxLength:o,textAlign:l="left",pattern:c,placeholder:d,inputMode:u="numeric",onComplete:m,pushPasswordManagerStrategy:f="increase-width",pasteTransformer:h,containerClassName:v,noScriptCSSFallback:p=Sx,render:g,children:x}=r,b=vx(r,["value","onChange","maxLength","textAlign","pattern","placeholder","inputMode","onComplete","pushPasswordManagerStrategy","pasteTransformer","containerClassName","noScriptCSSFallback","render","children"]),w,k,y,P,j;let[T,$]=i.useState(typeof b.defaultValue=="string"?b.defaultValue:""),N=n??T,F=yx(N),O=i.useCallback(H=>{a?.(H),$(H)},[a]),L=i.useMemo(()=>c?typeof c=="string"?new RegExp(c):c:null,[c]),J=i.useRef(null),q=i.useRef(null),M=i.useRef({value:N,onChange:O,isIOS:typeof window<"u"&&((k=(w=window?.CSS)==null?void 0:w.supports)==null?void 0:k.call(w,"-webkit-touch-callout","none"))}),_=i.useRef({prev:[(y=J.current)==null?void 0:y.selectionStart,(P=J.current)==null?void 0:P.selectionEnd,(j=J.current)==null?void 0:j.selectionDirection]});i.useImperativeHandle(s,()=>J.current,[]),i.useEffect(()=>{let H=J.current,X=q.current;if(!H||!X)return;M.current.value!==H.value&&M.current.onChange(H.value),_.current.prev=[H.selectionStart,H.selectionEnd,H.selectionDirection];function ge(){if(document.activeElement!==H){C(null),I(null);return}let ie=H.selectionStart,je=H.selectionEnd,cs=H.selectionDirection,Te=H.maxLength,ot=H.value,_e=_.current.prev,Ue=-1,Ve=-1,it;if(ot.length!==0&&ie!==null&&je!==null){let rc=ie===je,nc=ie===ot.length&&ot.length<Te;if(rc&&!nc){let lt=ie;if(lt===0)Ue=0,Ve=1,it="forward";else if(lt===Te)Ue=lt-1,Ve=lt,it="backward";else if(Te>1&&ot.length>1){let Hs=0;if(_e[0]!==null&&_e[1]!==null){it=lt<_e[1]?"backward":"forward";let ac=_e[0]===_e[1]&&_e[0]<Te;it==="backward"&&!ac&&(Hs=-1)}Ue=Hs+lt,Ve=Hs+lt+1}}Ue!==-1&&Ve!==-1&&Ue!==Ve&&J.current.setSelectionRange(Ue,Ve,it)}let vn=Ue!==-1?Ue:ie,bn=Ve!==-1?Ve:je,sc=it??cs;C(vn),I(bn),_.current.prev=[vn,bn,sc]}if(document.addEventListener("selectionchange",ge,{capture:!0}),ge(),document.activeElement===H&&te(!0),!document.getElementById("input-otp-style")){let ie=document.createElement("style");if(ie.id="input-otp-style",document.head.appendChild(ie),ie.sheet){let je="background: transparent !important; color: transparent !important; border-color: transparent !important; opacity: 0 !important; box-shadow: none !important; -webkit-box-shadow: none !important; -webkit-text-fill-color: transparent !important;";Gt(ie.sheet,"[data-input-otp]::selection { background: transparent !important; color: transparent !important; }"),Gt(ie.sheet,`[data-input-otp]:autofill { ${je} }`),Gt(ie.sheet,`[data-input-otp]:-webkit-autofill { ${je} }`),Gt(ie.sheet,"@supports (-webkit-touch-callout: none) { [data-input-otp] { letter-spacing: -.6em !important; font-weight: 100 !important; font-stretch: ultra-condensed; font-optical-sizing: none !important; left: -1px !important; right: 1px !important; } }"),Gt(ie.sheet,"[data-input-otp] + * { pointer-events: all !important; }")}}let Ne=()=>{X&&X.style.setProperty("--root-height",`${H.clientHeight}px`)};Ne();let Ce=new ResizeObserver(Ne);return Ce.observe(H),()=>{document.removeEventListener("selectionchange",ge,{capture:!0}),Ce.disconnect()}},[]);let[z,W]=i.useState(!1),[Y,te]=i.useState(!1),[se,C]=i.useState(null),[S,I]=i.useState(null);i.useEffect(()=>{bx(()=>{var H,X,ge,Ne;(H=J.current)==null||H.dispatchEvent(new Event("input"));let Ce=(X=J.current)==null?void 0:X.selectionStart,ie=(ge=J.current)==null?void 0:ge.selectionEnd,je=(Ne=J.current)==null?void 0:Ne.selectionDirection;Ce!==null&&ie!==null&&(C(Ce),I(ie),_.current.prev=[Ce,ie,je])})},[N,Y]),i.useEffect(()=>{F!==void 0&&N!==F&&F.length<o&&N.length===o&&m?.(N)},[o,m,F,N]);let R=Cx({containerRef:q,inputRef:J,pushPasswordManagerStrategy:f,isFocused:Y}),V=i.useCallback(H=>{let X=H.currentTarget.value.slice(0,o);if(X.length>0&&L&&!L.test(X)){H.preventDefault();return}typeof F=="string"&&X.length<F.length&&document.dispatchEvent(new Event("selectionchange")),O(X)},[o,O,F,L]),B=i.useCallback(()=>{var H;if(J.current){let X=Math.min(J.current.value.length,o-1),ge=J.current.value.length;(H=J.current)==null||H.setSelectionRange(X,ge),C(X),I(ge)}te(!0)},[o]),ee=i.useCallback(H=>{var X,ge;let Ne=J.current;if(!h&&(!M.current.isIOS||!H.clipboardData||!Ne))return;let Ce=H.clipboardData.getData("text/plain"),ie=h?h(Ce):Ce;H.preventDefault();let je=(X=J.current)==null?void 0:X.selectionStart,cs=(ge=J.current)==null?void 0:ge.selectionEnd,Te=(je!==cs?N.slice(0,je)+ie+N.slice(cs):N.slice(0,je)+ie+N.slice(je)).slice(0,o);if(Te.length>0&&L&&!L.test(Te))return;Ne.value=Te,O(Te);let ot=Math.min(Te.length,o-1),_e=Te.length;Ne.setSelectionRange(ot,_e),C(ot),I(_e)},[o,O,L,N]),re=i.useMemo(()=>({position:"relative",cursor:b.disabled?"default":"text",userSelect:"none",WebkitUserSelect:"none",pointerEvents:"none"}),[b.disabled]),Re=i.useMemo(()=>({position:"absolute",inset:0,width:R.willPushPWMBadge?`calc(100% + ${R.PWM_BADGE_SPACE_WIDTH})`:"100%",clipPath:R.willPushPWMBadge?`inset(0 ${R.PWM_BADGE_SPACE_WIDTH} 0 0)`:void 0,height:"100%",display:"flex",textAlign:l,opacity:"1",color:"transparent",pointerEvents:"all",background:"transparent",caretColor:"transparent",border:"0 solid transparent",outline:"0 solid transparent",boxShadow:"none",lineHeight:"1",letterSpacing:"-.5em",fontSize:"var(--root-height)",fontFamily:"monospace",fontVariantNumeric:"tabular-nums"}),[R.PWM_BADGE_SPACE_WIDTH,R.willPushPWMBadge,l]),ec=i.useMemo(()=>i.createElement("input",gx(xx({autoComplete:b.autoComplete||"one-time-code"},b),{"data-input-otp":!0,"data-input-otp-placeholder-shown":N.length===0||void 0,"data-input-otp-mss":se,"data-input-otp-mse":S,inputMode:u,pattern:L?.source,"aria-placeholder":d,style:Re,maxLength:o,value:N,ref:J,onPaste:H=>{var X;ee(H),(X=b.onPaste)==null||X.call(b,H)},onChange:V,onMouseOver:H=>{var X;W(!0),(X=b.onMouseOver)==null||X.call(b,H)},onMouseLeave:H=>{var X;W(!1),(X=b.onMouseLeave)==null||X.call(b,H)},onFocus:H=>{var X;B(),(X=b.onFocus)==null||X.call(b,H)},onBlur:H=>{var X;te(!1),(X=b.onBlur)==null||X.call(b,H)}})),[V,B,ee,u,Re,o,S,se,b,L?.source,N]),Bs=i.useMemo(()=>({slots:Array.from({length:o}).map((H,X)=>{var ge;let Ne=Y&&se!==null&&S!==null&&(se===S&&X===se||X>=se&&X<S),Ce=N[X]!==void 0?N[X]:null,ie=N[0]!==void 0?null:(ge=d?.[X])!=null?ge:null;return{char:Ce,placeholderChar:ie,isActive:Ne,hasFakeCaret:Ne&&Ce===null}}),isFocused:Y,isHovering:!b.disabled&&z}),[Y,z,o,S,se,b.disabled,N]),tc=i.useMemo(()=>g?g(Bs):i.createElement(Yl.Provider,{value:Bs},x),[x,Bs,g]);return i.createElement(i.Fragment,null,p!==null&&i.createElement("noscript",null,i.createElement("style",null,p)),i.createElement("div",{ref:q,"data-input-otp-container":!0,style:re,className:v},tc,i.createElement("div",{style:{position:"absolute",inset:0,pointerEvents:"none"}},ec)))});Xl.displayName="Input";function Gt(t,s){try{t.insertRule(s)}catch{console.error("input-otp could not insert CSS rule:",s)}}var Sx=`
[data-input-otp] {
  --nojs-bg: white !important;
  --nojs-fg: black !important;

  background-color: var(--nojs-bg) !important;
  color: var(--nojs-fg) !important;
  caret-color: var(--nojs-fg) !important;
  letter-spacing: .25em !important;
  text-align: center !important;
  border: 1px solid var(--nojs-fg) !important;
  border-radius: 4px !important;
  width: 100% !important;
}
@media (prefers-color-scheme: dark) {
  [data-input-otp] {
    --nojs-bg: black !important;
    --nojs-fg: white !important;
  }
}`;const Jl=i.forwardRef(({className:t,containerClassName:s,...r},n)=>e.jsx(Xl,{ref:n,containerClassName:E("flex items-center gap-2 has-[:disabled]:opacity-50",s),className:E("disabled:cursor-not-allowed",t),...r}));Jl.displayName="InputOTP";const Zl=i.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:E("flex items-center",t),...s}));Zl.displayName="InputOTPGroup";const ct=i.forwardRef(({index:t,className:s,...r},n)=>{const a=i.useContext(Yl),{char:o,hasFakeCaret:l,isActive:c}=a.slots[t];return e.jsxs("div",{ref:n,className:E("relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md",c&&"z-10 ring-2 ring-ring ring-offset-background",s),...r,children:[o,l&&e.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"h-4 w-px animate-caret-blink bg-foreground duration-1000"})})]})});ct.displayName="InputOTPSlot";const kx=i.forwardRef(({...t},s)=>e.jsx("div",{ref:s,role:"separator",...t,children:e.jsx(uu,{})}));kx.displayName="InputOTPSeparator";function Px(){const[t,s]=xe(),{toast:r}=nt(),{user:n}=be(),[a,o]=i.useState(""),[l,c]=i.useState(0),d=n?.email||"";i.useEffect(()=>{n?.emailVerified&&s("/discover")},[n,s]),i.useEffect(()=>{if(l>0){const v=setTimeout(()=>c(l-1),1e3);return()=>clearTimeout(v)}},[l]);const u=ue({mutationFn:async v=>{const p=await fetch("/api/verify-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:v})});if(!p.ok){const g=await p.json();throw new Error(g.message||"Verification failed")}return p.json()},onSuccess:v=>{Ct.setQueryData(["/api/user"],v.user),r({title:"✅ Email Verified Successfully!",description:"Your email has been verified. You can now access all features."})},onError:v=>{r({title:"Verification Failed",description:v.message,variant:"destructive"})}}),m=ue({mutationFn:async()=>{const v=await fetch("/api/resend-verification",{method:"POST",headers:{"Content-Type":"application/json"}});if(!v.ok){const p=await v.json();throw new Error(p.message||"Failed to resend code")}return v.json()},onSuccess:()=>{c(60),r({title:"Code Sent!",description:"A new verification code has been sent to your email."})},onError:v=>{r({title:"Failed to Resend",description:v.message,variant:"destructive"})}}),f=v=>{v.preventDefault(),a.length===6?u.mutate(a):r({title:"Invalid Code",description:"Please enter a 6-digit verification code",variant:"destructive"})},h=()=>{l===0&&m.mutate()};return e.jsxs("div",{className:"min-h-screen flex flex-col lg:flex-row bg-background",children:[e.jsx("div",{className:"flex-1 flex items-center justify-center p-4 sm:p-6 md:p-8 lg:p-12",children:e.jsxs("div",{className:"w-full max-w-md space-y-6 sm:space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500 via-purple-500 to-pink-500 rounded-2xl blur-xl opacity-50 animate-pulse"}),e.jsx("div",{className:"relative w-16 h-16 sm:w-20 sm:h-20 bg-gradient-to-br from-blue-500 via-purple-500 to-pink-500 rounded-2xl flex items-center justify-center shadow-lg",children:e.jsx(st,{className:"h-8 w-8 sm:h-10 sm:w-10 text-white"})})]})}),e.jsx("h1",{className:"text-3xl sm:text-4xl lg:text-5xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Verify Your Email"}),e.jsx("p",{className:"text-sm sm:text-base text-muted-foreground max-w-sm mx-auto",children:"We've sent a 6-digit verification code to"}),e.jsx("p",{className:"text-sm sm:text-base font-semibold text-foreground",children:d})]}),e.jsx(ce,{className:"border-0 shadow-2xl rounded-2xl overflow-hidden bg-gradient-to-br from-card to-card/80 animate-in fade-in slide-in-from-bottom-4 duration-500 delay-150",children:e.jsx(ye,{className:"p-6 sm:p-8",children:e.jsxs("form",{onSubmit:f,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-muted-foreground mb-4",children:[e.jsx(ts,{className:"h-4 w-4"}),e.jsx("span",{children:"Enter your 6-digit code"})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx(Jl,{maxLength:6,value:a,onChange:v=>o(v),disabled:u.isPending,children:e.jsxs(Zl,{children:[e.jsx(ct,{index:0,className:"h-12 w-12 sm:h-14 sm:w-14 text-lg sm:text-xl border-2 rounded-lg"}),e.jsx(ct,{index:1,className:"h-12 w-12 sm:h-14 sm:w-14 text-lg sm:text-xl border-2 rounded-lg"}),e.jsx(ct,{index:2,className:"h-12 w-12 sm:h-14 sm:w-14 text-lg sm:text-xl border-2 rounded-lg"}),e.jsx(ct,{index:3,className:"h-12 w-12 sm:h-14 sm:w-14 text-lg sm:text-xl border-2 rounded-lg"}),e.jsx(ct,{index:4,className:"h-12 w-12 sm:h-14 sm:w-14 text-lg sm:text-xl border-2 rounded-lg"}),e.jsx(ct,{index:5,className:"h-12 w-12 sm:h-14 sm:w-14 text-lg sm:text-xl border-2 rounded-lg"})]})})}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-muted-foreground",children:[e.jsx(gr,{className:"h-3 w-3"}),e.jsx("span",{children:"Code expires in 10 minutes"})]})]}),e.jsx(D,{type:"submit",className:"w-full h-12 sm:h-14 text-base font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-[1.02]",disabled:u.isPending||a.length!==6,children:u.isPending?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Verifying..."]}):"Verify Email"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-border"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-card px-2 text-muted-foreground",children:"Didn't receive the code?"})})]}),e.jsx(D,{type:"button",variant:"outline",onClick:h,disabled:l>0||m.isPending,className:"w-full h-12 rounded-xl border-2 hover:bg-secondary/50 transition-all duration-300 hover:scale-[1.02]",children:m.isPending?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current"}),"Sending..."]}):l>0?`Resend Code (${l}s)`:"Resend Verification Code"})]})]})})}),e.jsx("div",{className:"bg-amber-500/10 border border-amber-500/20 rounded-xl p-4 animate-in fade-in slide-in-from-bottom-4 duration-500 delay-300",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-amber-500 to-orange-500 rounded-lg flex items-center justify-center",children:e.jsx(vr,{className:"h-5 w-5 text-white"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-semibold text-amber-900 dark:text-amber-100 mb-1",children:"Security Notice"}),e.jsx("p",{className:"text-xs text-amber-800 dark:text-amber-200",children:"Never share this code with anyone. We will never ask for your verification code via phone, email, or any other method outside this page."})]})]})})]})}),e.jsxs("div",{className:"hidden lg:flex flex-1 bg-gradient-to-br from-primary/10 via-primary/5 to-background items-center justify-center p-8 xl:p-12 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-grid-white/10 [mask-image:radial-gradient(white,transparent_85%)]"}),e.jsxs("div",{className:"relative max-w-lg space-y-8 z-10",children:[e.jsxs("div",{className:"space-y-4 animate-in fade-in slide-in-from-right-4 duration-700",children:[e.jsx("h2",{className:"text-3xl xl:text-4xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Secure Your Account"}),e.jsx("p",{className:"text-lg text-muted-foreground",children:"Email verification helps us keep your account safe and ensures you can recover access if needed."})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex gap-4 p-4 rounded-xl bg-card/50 backdrop-blur-sm border border-border/50 hover:border-primary/50 transition-all duration-300 animate-in fade-in slide-in-from-right-4 duration-700 delay-150",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx(ts,{className:"h-6 w-6 text-white"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-1",children:"Enhanced Security"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Protect your account from unauthorized access with verified email authentication."})]})]}),e.jsxs("div",{className:"flex gap-4 p-4 rounded-xl bg-card/50 backdrop-blur-sm border border-border/50 hover:border-primary/50 transition-all duration-300 animate-in fade-in slide-in-from-right-4 duration-700 delay-300",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx(st,{className:"h-6 w-6 text-white"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-1",children:"Stay Connected"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive important notifications and updates about your account activity."})]})]}),e.jsxs("div",{className:"flex gap-4 p-4 rounded-xl bg-card/50 backdrop-blur-sm border border-border/50 hover:border-primary/50 transition-all duration-300 animate-in fade-in slide-in-from-right-4 duration-700 delay-500",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-pink-500 to-pink-600 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx(gr,{className:"h-6 w-6 text-white"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-1",children:"Quick Verification"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Simple 6-digit code verification takes only seconds to complete."})]})]})]})]})]})]})}function He({path:t,component:s}){const{user:r,isLoading:n}=be();return n?e.jsx(Ge,{path:t,children:e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(Me,{className:"h-8 w-8 animate-spin text-border"})})}):r?e.jsx(Ge,{path:t,children:e.jsx(s,{})}):e.jsx(Ge,{path:t,children:e.jsx(Xc,{to:"/auth"})})}function Ex(){const{user:t}=be(),[,s]=xe(),[r,n]=i.useState(!1),[a,o]=i.useState(!1),{toast:l}=nt();if(!t||t.emailVerified||window.location.pathname==="/verify-email"||r)return null;const c=async()=>{o(!0);try{const d=await fetch("/api/auto-send-verification",{method:"POST",headers:{"Content-Type":"application/json"}}),u=await d.json();d.ok?u.alreadySent?l({title:"Code already sent",description:"Check your email for the previously sent code."}):l({title:"Verification code sent",description:"Please check your email for the verification code."}):(l({title:"Failed to send code",description:u.message||"Please try again later.",variant:"destructive"}),console.error("Email sending failed:",u))}catch(d){console.error("Failed to send verification code:",d),l({title:"Network error",description:"Please check your connection and try again.",variant:"destructive"})}finally{o(!1),s("/verify-email")}};return e.jsx("div",{className:"bg-gradient-to-r from-red-600 to-red-700 text-white shadow-lg",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-3 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3 cursor-pointer flex-1 group",onClick:c,children:[e.jsx(lu,{className:"h-5 w-5 flex-shrink-0 animate-pulse"}),e.jsx("p",{className:"text-sm sm:text-base font-medium group-hover:underline",children:a?"Sending verification code...":"Please verify your email address to complete your profile and unlock all features."})]}),e.jsx("button",{onClick:d=>{d.stopPropagation(),n(!0)},className:"flex-shrink-0 p-1 rounded-full hover:bg-red-800 transition-colors","aria-label":"Dismiss",children:e.jsx(De,{className:"h-5 w-5"})})]})})})}function Rx({open:t,onComplete:s}){const[,r]=xe(),[n,a]=i.useState(""),[o,l]=i.useState(""),[c,d]=i.useState(""),[u,m]=i.useState(!1),f=async h=>{if(h.preventDefault(),d(""),!n){d("Please enter your birthdate");return}if(!o){d("Please select your gender");return}const v=new Date(n),p=new Date;let g=p.getFullYear()-v.getFullYear();const x=p.getMonth()-v.getMonth();if((x<0||x===0&&p.getDate()<v.getDate())&&g--,g<18){d("You must be at least 18 years old to use SpreadLov");return}m(!0);try{const b=await fetch("/api/user/complete-profile",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({birthdate:n,gender:o})});if(!b.ok){const w=await b.json();throw new Error(w.message||"Failed to complete profile")}s(),r("/discover")}catch(b){d(b instanceof Error?b.message:"Failed to complete profile")}finally{m(!1)}};return e.jsx(os,{open:t,onOpenChange:()=>{},children:e.jsxs(qt,{className:"sm:max-w-[425px] max-w-[95vw] p-0 gap-0 overflow-hidden",children:[e.jsxs($t,{className:"p-6 pb-4 bg-gradient-to-r from-pink-500/10 via-purple-500/10 to-blue-500/10 border-b",children:[e.jsx("div",{className:"flex items-center justify-center mb-3",children:e.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-pink-500 to-purple-600 flex items-center justify-center",children:e.jsx(Ie,{className:"h-8 w-8 text-white"})})}),e.jsx(zt,{className:"text-2xl sm:text-3xl font-bold text-center",children:"Complete Your Profile"}),e.jsx(_s,{className:"text-center text-sm sm:text-base",children:"To get started on SpreadLov, we need a couple more details about you"})]}),e.jsxs("form",{onSubmit:f,className:"p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs(Z,{htmlFor:"birthdate",className:"text-sm sm:text-base font-semibold flex items-center gap-2",children:[e.jsx(Rt,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Birthdate"]}),e.jsx(oe,{id:"birthdate",type:"date",value:n,onChange:h=>a(h.target.value),max:new Date(new Date().setFullYear(new Date().getFullYear()-18)).toISOString().split("T")[0],required:!0,className:"h-11 sm:h-12 text-base"}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"You must be at least 18 years old"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(Z,{className:"text-sm sm:text-base font-semibold flex items-center gap-2",children:[e.jsx(Ie,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Gender"]}),e.jsxs(pn,{value:o,onValueChange:l,required:!0,children:[e.jsxs("div",{className:"flex items-center space-x-3 rounded-lg border bg-background/50 p-3 sm:p-4 hover:bg-accent/50 transition-all cursor-pointer hover:border-primary/50",children:[e.jsx(Ye,{value:"male",id:"male",className:"h-4 w-4 sm:h-5 sm:w-5"}),e.jsx(Z,{htmlFor:"male",className:"flex-1 cursor-pointer font-medium text-sm sm:text-base",children:"Male"})]}),e.jsxs("div",{className:"flex items-center space-x-3 rounded-lg border bg-background/50 p-3 sm:p-4 hover:bg-accent/50 transition-all cursor-pointer hover:border-primary/50",children:[e.jsx(Ye,{value:"female",id:"female",className:"h-4 w-4 sm:h-5 sm:w-5"}),e.jsx(Z,{htmlFor:"female",className:"flex-1 cursor-pointer font-medium text-sm sm:text-base",children:"Female"})]}),e.jsxs("div",{className:"flex items-center space-x-3 rounded-lg border bg-background/50 p-3 sm:p-4 hover:bg-accent/50 transition-all cursor-pointer hover:border-primary/50",children:[e.jsx(Ye,{value:"other",id:"other",className:"h-4 w-4 sm:h-5 sm:w-5"}),e.jsx(Z,{htmlFor:"other",className:"flex-1 cursor-pointer font-medium text-sm sm:text-base",children:"Other"})]})]})]}),c&&e.jsx("div",{className:"p-3 sm:p-4 bg-destructive/10 border border-destructive/20 rounded-lg",children:e.jsx("p",{className:"text-sm sm:text-base text-destructive font-medium",children:c})}),e.jsx(D,{type:"submit",className:"w-full h-11 sm:h-12 text-base sm:text-lg font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all",disabled:u,children:u?"Saving...":"Continue to SpreadLov"})]})]})})}function Tx(){const{user:t}=be(),[s]=xe(),r=()=>{Ct.invalidateQueries({queryKey:["/api/user"]})};return e.jsxs("div",{className:"relative",children:[e.jsx(Ex,{}),t&&t.needsProfileCompletion&&e.jsx(Rx,{open:!0,onComplete:r}),e.jsx("main",{children:e.jsxs(Yc,{children:[e.jsx(He,{path:"/verify-email",component:Px}),e.jsx(He,{path:"/discover",component:sp}),e.jsx(He,{path:"/messages",component:Yp}),e.jsx(He,{path:"/notifications",component:sx}),e.jsx(He,{path:"/profile/:userId",component:cx}),e.jsx(He,{path:"/profile",component:lx}),e.jsx(He,{path:"/chat/:userId",component:mx}),e.jsx(He,{path:"/",component:Ph}),e.jsx(Ge,{path:"/auth",component:Oh}),e.jsx(Ge,{path:"/forgot-password",component:Fh}),e.jsx(Ge,{path:"/delete-account",component:Lh}),e.jsx(Ge,{path:"/terms",component:_h}),e.jsx(Ge,{component:Jm})]})}),t&&s!=="/verify-email"&&e.jsx(Ym,{})]})}function Mx(){return e.jsx(wd,{client:Ct,children:e.jsx(Zm,{children:e.jsx(fh,{children:e.jsxs(Bm,{children:[e.jsx(cm,{}),e.jsx(Pm,{}),e.jsx(Tx,{})]})})})})}Tc.createRoot(document.getElementById("root")).render(e.jsx(Mx,{}));
