import{r as i,R as hc,j as e,c as We,a as un,u as ce,B as fc,P as G,b as Ot,d as _e,e as Y,f as Te,V as mn,g as pc,h as xc,i as hn,k as es,l as gc,m as Ms,D as fn,C as pn,n as vc,o as bc,A as Or,p as xn,S as yc,q as As,s as Fr,O as ns,t as Lr,v as os,w as gn,T as Is,x as Ds,y as _r,z as vn,E as bn,I as jc,F as yn,G as jn,H as wc,J as wn,K as Nc,L as Nn,M as Sn,N as Sc,Q as Cc,U as Cn,W as kc,X as Pc,Y as Os,Z as kn,_ as Pn,$ as at,a0 as qr,a1 as $r,a2 as ts,a3 as Ec,a4 as Rc,a5 as Tc,a6 as Mc,a7 as Ac,a8 as Ic}from"./ui-BViAPeNg.js";import{a as Dc,r as Oc}from"./vendor-D3F3s8fL.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function r(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(n){if(n.ep)return;n.ep=!0;const o=r(n);fetch(n.href,o)}})();var hs={},Sa;function Fc(){if(Sa)return hs;Sa=1;var t=Dc();return hs.createRoot=t.createRoot,hs.hydrateRoot=t.hydrateRoot,hs}var Lc=Fc();function _c(t,s){if(t instanceof RegExp)return{keys:!1,pattern:t};var r,a,n,o,l=[],c="",d=t.split("/");for(d[0]||d.shift();n=d.shift();)r=n[0],r==="*"?(l.push(r),c+=n[1]==="?"?"(?:/(.*))?":"/(.*)"):r===":"?(a=n.indexOf("?",1),o=n.indexOf(".",1),l.push(n.substring(1,~a?a:~o?o:n.length)),c+=~a&&!~o?"(?:/([^/]+?))?":"/([^/]+?)",~o&&(c+=(~a?"?":"")+"\\"+n.substring(o))):c+="/"+n;return{keys:l,pattern:new RegExp("^"+c+(s?"(?=$|/)":"/?$"),"i")}}var Js={exports:{}},Xs={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ca;function qc(){if(Ca)return Xs;Ca=1;var t=Oc();function s(f,h){return f===h&&(f!==0||1/f===1/h)||f!==f&&h!==h}var r=typeof Object.is=="function"?Object.is:s,a=t.useState,n=t.useEffect,o=t.useLayoutEffect,l=t.useDebugValue;function c(f,h){var b=h(),g=a({inst:{value:b,getSnapshot:h}}),v=g[0].inst,p=g[1];return o(function(){v.value=b,v.getSnapshot=h,d(v)&&p({inst:v})},[f,b,h]),n(function(){return d(v)&&p({inst:v}),f(function(){d(v)&&p({inst:v})})},[f]),l(b),b}function d(f){var h=f.getSnapshot;f=f.value;try{var b=h();return!r(f,b)}catch{return!0}}function m(f,h){return h()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?m:c;return Xs.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:u,Xs}var ka;function $c(){return ka||(ka=1,Js.exports=qc()),Js.exports}var En=$c();const zc=hc.useInsertionEffect,Uc=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Rn=Uc?i.useLayoutEffect:i.useEffect,Wc=zc||Rn,zr=t=>{const s=i.useRef([t,(...r)=>s[0](...r)]).current;return Wc(()=>{s[0]=t}),s[1]},Vc="popstate",Ur="pushState",Wr="replaceState",Bc="hashchange",Pa=[Vc,Ur,Wr,Bc],Hc=t=>{for(const s of Pa)addEventListener(s,t);return()=>{for(const s of Pa)removeEventListener(s,t)}},Tn=(t,s)=>En.useSyncExternalStore(Hc,t,s),Kc=()=>location.search,Yc=({ssrSearch:t=""}={})=>Tn(Kc,()=>t),Ea=()=>location.pathname,Gc=({ssrPath:t}={})=>Tn(Ea,t?()=>t:Ea),Qc=(t,{replace:s=!1,state:r=null}={})=>history[s?Wr:Ur](r,"",t),Jc=(t={})=>[Gc(t),Qc],Ra=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[Ra]>"u"){for(const t of[Ur,Wr]){const s=history[t];history[t]=function(){const r=s.apply(this,arguments),a=new Event(t);return a.arguments=arguments,dispatchEvent(a),r}}Object.defineProperty(window,Ra,{value:!0})}const Xc=(t,s)=>s.toLowerCase().indexOf(t.toLowerCase())?"~"+s:s.slice(t.length)||"/",Mn=(t="")=>t==="/"?"":t,Zc=(t,s)=>t[0]==="~"?t.slice(1):Mn(s)+t,ed=(t="",s)=>Xc(Ta(Mn(t)),Ta(s)),Ta=t=>{try{return decodeURI(t)}catch{return t}},An={hook:Jc,searchHook:Yc,parser:_c,base:"",ssrPath:void 0,ssrSearch:void 0,ssrContext:void 0,hrefs:t=>t},In=i.createContext(An),Ft=()=>i.useContext(In),Dn={},On=i.createContext(Dn),Vr=()=>i.useContext(On),is=t=>{const[s,r]=t.hook(t);return[ed(t.base,s),zr((a,n)=>r(Zc(a,t.base),n))]},de=()=>is(Ft()),Fn=(t,s,r,a)=>{const{pattern:n,keys:o}=s instanceof RegExp?{keys:!1,pattern:s}:t(s||"*",a),l=n.exec(r)||[],[c,...d]=l;return c!==void 0?[!0,(()=>{const m=o!==!1?Object.fromEntries(o.map((f,h)=>[f,d[h]])):l.groups;let u={...d};return m&&Object.assign(u,m),u})(),...a?[c]:[]]:[!1,null]},td=({children:t,...s})=>{const r=Ft(),a=s.hook?An:r;let n=a;const[o,l]=s.ssrPath?.split("?")??[];l&&(s.ssrSearch=l,s.ssrPath=o),s.hrefs=s.hrefs??s.hook?.hrefs;let c=i.useRef({}),d=c.current,m=d;for(let u in a){const f=u==="base"?a[u]+(s[u]||""):s[u]||a[u];d===m&&f!==m[u]&&(c.current=m={...m}),m[u]=f,(f!==a[u]||f!==n[u])&&(n=m)}return i.createElement(In.Provider,{value:n,children:t})},Ma=({children:t,component:s},r)=>s?i.createElement(s,{params:r}):typeof t=="function"?t(r):t,sd=t=>{let s=i.useRef(Dn);const r=s.current;return s.current=Object.keys(t).length!==Object.keys(r).length||Object.entries(t).some(([a,n])=>n!==r[a])?t:r},ke=({path:t,nest:s,match:r,...a})=>{const n=Ft(),[o]=is(n),[l,c,d]=r??Fn(n.parser,t,o,s),m=sd({...Vr(),...c});if(!l)return null;const u=d?i.createElement(td,{base:d},Ma(a,m)):Ma(a,m);return i.createElement(On.Provider,{value:m,children:u})},Ln=i.forwardRef((t,s)=>{const r=Ft(),[a,n]=is(r),{to:o="",href:l=o,onClick:c,asChild:d,children:m,className:u,replace:f,state:h,...b}=t,g=zr(p=>{p.ctrlKey||p.metaKey||p.altKey||p.shiftKey||p.button!==0||(c?.(p),p.defaultPrevented||(p.preventDefault(),n(l,t)))}),v=r.hrefs(l[0]==="~"?l.slice(1):r.base+l,r);return d&&i.isValidElement(m)?i.cloneElement(m,{onClick:g,href:v}):i.createElement("a",{...b,onClick:g,href:v,className:u?.call?u(a===l):u,children:m,ref:s})}),_n=t=>Array.isArray(t)?t.flatMap(s=>_n(s&&s.type===i.Fragment?s.props.children:s)):[t],rd=({children:t,location:s})=>{const r=Ft(),[a]=is(r);for(const n of _n(t)){let o=0;if(i.isValidElement(n)&&(o=Fn(r.parser,n.props.path,s||a,n.props.nest))[0])return i.cloneElement(n,{match:o})}return null},ad=t=>{const{to:s,href:r=s}=t,a=Ft(),[,n]=is(a),o=zr(()=>n(s||r,t)),{ssrContext:l}=a;return Rn(()=>{o()},[]),l&&(l.redirectTo=s),null};var Lt=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},nd={setTimeout:(t,s)=>setTimeout(t,s),clearTimeout:t=>clearTimeout(t),setInterval:(t,s)=>setInterval(t,s),clearInterval:t=>clearInterval(t)},od=class{#e=nd;#t=!1;setTimeoutProvider(t){this.#e=t}setTimeout(t,s){return this.#e.setTimeout(t,s)}clearTimeout(t){this.#e.clearTimeout(t)}setInterval(t,s){return this.#e.setInterval(t,s)}clearInterval(t){this.#e.clearInterval(t)}},xt=new od;function id(t){setTimeout(t,0)}var vt=typeof window>"u"||"Deno"in globalThis;function je(){}function ld(t,s){return typeof t=="function"?t(s):t}function mr(t){return typeof t=="number"&&t>=0&&t!==1/0}function qn(t,s){return Math.max(t+(s||0)-Date.now(),0)}function nt(t,s){return typeof t=="function"?t(s):t}function Re(t,s){return typeof t=="function"?t(s):t}function Aa(t,s){const{type:r="all",exact:a,fetchStatus:n,predicate:o,queryKey:l,stale:c}=t;if(l){if(a){if(s.queryHash!==Br(l,s.options))return!1}else if(!ss(s.queryKey,l))return!1}if(r!=="all"){const d=s.isActive();if(r==="active"&&!d||r==="inactive"&&d)return!1}return!(typeof c=="boolean"&&s.isStale()!==c||n&&n!==s.state.fetchStatus||o&&!o(s))}function Ia(t,s){const{exact:r,status:a,predicate:n,mutationKey:o}=t;if(o){if(!s.options.mutationKey)return!1;if(r){if(bt(s.options.mutationKey)!==bt(o))return!1}else if(!ss(s.options.mutationKey,o))return!1}return!(a&&s.state.status!==a||n&&!n(s))}function Br(t,s){return(s?.queryKeyHashFn||bt)(t)}function bt(t){return JSON.stringify(t,(s,r)=>hr(r)?Object.keys(r).sort().reduce((a,n)=>(a[n]=r[n],a),{}):r)}function ss(t,s){return t===s?!0:typeof t!=typeof s?!1:t&&s&&typeof t=="object"&&typeof s=="object"?Object.keys(s).every(r=>ss(t[r],s[r])):!1}var cd=Object.prototype.hasOwnProperty;function $n(t,s){if(t===s)return t;const r=Da(t)&&Da(s);if(!r&&!(hr(t)&&hr(s)))return s;const n=(r?t:Object.keys(t)).length,o=r?s:Object.keys(s),l=o.length,c=r?new Array(l):{};let d=0;for(let m=0;m<l;m++){const u=r?m:o[m],f=t[u],h=s[u];if(f===h){c[u]=f,(r?m<n:cd.call(t,u))&&d++;continue}if(f===null||h===null||typeof f!="object"||typeof h!="object"){c[u]=h;continue}const b=$n(f,h);c[u]=b,b===f&&d++}return n===l&&d===n?t:c}function Ns(t,s){if(!s||Object.keys(t).length!==Object.keys(s).length)return!1;for(const r in t)if(t[r]!==s[r])return!1;return!0}function Da(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function hr(t){if(!Oa(t))return!1;const s=t.constructor;if(s===void 0)return!0;const r=s.prototype;return!(!Oa(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function Oa(t){return Object.prototype.toString.call(t)==="[object Object]"}function dd(t){return new Promise(s=>{xt.setTimeout(s,t)})}function fr(t,s,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,s):r.structuralSharing!==!1?$n(t,s):s}function ud(t,s,r=0){const a=[...t,s];return r&&a.length>r?a.slice(1):a}function md(t,s,r=0){const a=[s,...t];return r&&a.length>r?a.slice(0,-1):a}var Hr=Symbol();function zn(t,s){return!t.queryFn&&s?.initialPromise?()=>s.initialPromise:!t.queryFn||t.queryFn===Hr?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function Un(t,s){return typeof t=="function"?t(...s):!!t}var hd=class extends Lt{#e;#t;#s;constructor(){super(),this.#s=t=>{if(!vt&&window.addEventListener){const s=()=>t();return window.addEventListener("visibilitychange",s,!1),()=>{window.removeEventListener("visibilitychange",s)}}}}onSubscribe(){this.#t||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#s=t,this.#t?.(),this.#t=t(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()})}setFocused(t){this.#e!==t&&(this.#e=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(s=>{s(t)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},Kr=new hd;function pr(){let t,s;const r=new Promise((n,o)=>{t=n,s=o});r.status="pending",r.catch(()=>{});function a(n){Object.assign(r,n),delete r.resolve,delete r.reject}return r.resolve=n=>{a({status:"fulfilled",value:n}),t(n)},r.reject=n=>{a({status:"rejected",reason:n}),s(n)},r}var fd=id;function pd(){let t=[],s=0,r=c=>{c()},a=c=>{c()},n=fd;const o=c=>{s?t.push(c):n(()=>{r(c)})},l=()=>{const c=t;t=[],c.length&&n(()=>{a(()=>{c.forEach(d=>{r(d)})})})};return{batch:c=>{let d;s++;try{d=c()}finally{s--,s||l()}return d},batchCalls:c=>(...d)=>{o(()=>{c(...d)})},schedule:o,setNotifyFunction:c=>{r=c},setBatchNotifyFunction:c=>{a=c},setScheduler:c=>{n=c}}}var ue=pd(),xd=class extends Lt{#e=!0;#t;#s;constructor(){super(),this.#s=t=>{if(!vt&&window.addEventListener){const s=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",s,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",r)}}}}onSubscribe(){this.#t||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#s=t,this.#t?.(),this.#t=t(this.setOnline.bind(this))}setOnline(t){this.#e!==t&&(this.#e=t,this.listeners.forEach(r=>{r(t)}))}isOnline(){return this.#e}},Ss=new xd;function gd(t){return Math.min(1e3*2**t,3e4)}function Wn(t){return(t??"online")==="online"?Ss.isOnline():!0}var xr=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function Vn(t){let s=!1,r=0,a;const n=pr(),o=()=>n.status!=="pending",l=v=>{if(!o()){const p=new xr(v);h(p),t.onCancel?.(p)}},c=()=>{s=!0},d=()=>{s=!1},m=()=>Kr.isFocused()&&(t.networkMode==="always"||Ss.isOnline())&&t.canRun(),u=()=>Wn(t.networkMode)&&t.canRun(),f=v=>{o()||(a?.(),n.resolve(v))},h=v=>{o()||(a?.(),n.reject(v))},b=()=>new Promise(v=>{a=p=>{(o()||m())&&v(p)},t.onPause?.()}).then(()=>{a=void 0,o()||t.onContinue?.()}),g=()=>{if(o())return;let v;const p=r===0?t.initialPromise:void 0;try{v=p??t.fn()}catch(x){v=Promise.reject(x)}Promise.resolve(v).then(f).catch(x=>{if(o())return;const y=t.retry??(vt?0:3),P=t.retryDelay??gd,j=typeof P=="function"?P(r,x):P,E=y===!0||typeof y=="number"&&r<y||typeof y=="function"&&y(r,x);if(s||!E){h(x);return}r++,t.onFail?.(r,x),dd(j).then(()=>m()?void 0:b()).then(()=>{s?h(x):g()})})};return{promise:n,status:()=>n.status,cancel:l,continue:()=>(a?.(),n),cancelRetry:c,continueRetry:d,canStart:u,start:()=>(u()?g():b().then(g),n)}}var Bn=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),mr(this.gcTime)&&(this.#e=xt.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(vt?1/0:300*1e3))}clearGcTimeout(){this.#e&&(xt.clearTimeout(this.#e),this.#e=void 0)}},vd=class extends Bn{#e;#t;#s;#a;#r;#o;#i;constructor(t){super(),this.#i=!1,this.#o=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#a=t.client,this.#s=this.#a.getQueryCache(),this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#e=Fa(this.options),this.state=t.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#r?.promise}setOptions(t){if(this.options={...this.#o,...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const s=Fa(this.options);s.data!==void 0&&(this.setData(s.data,{updatedAt:s.dataUpdatedAt,manual:!0}),this.#e=s)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#s.remove(this)}setData(t,s){const r=fr(this.state.data,t,this.options);return this.#n({data:r,type:"success",dataUpdatedAt:s?.updatedAt,manual:s?.manual}),r}setState(t,s){this.#n({type:"setState",state:t,setStateOptions:s})}cancel(t){const s=this.#r?.promise;return this.#r?.cancel(t),s?s.then(je).catch(je):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(t=>Re(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Hr||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>nt(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!qn(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(s=>s.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#r?.continue()}onOnline(){this.observers.find(s=>s.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#r?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#s.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(s=>s!==t),this.observers.length||(this.#r&&(this.#i?this.#r.cancel({revert:!0}):this.#r.cancelRetry()),this.scheduleGc()),this.#s.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#n({type:"invalidate"})}async fetch(t,s){if(this.state.fetchStatus!=="idle"&&this.#r?.status()!=="rejected"){if(this.state.data!==void 0&&s?.cancelRefetch)this.cancel({silent:!0});else if(this.#r)return this.#r.continueRetry(),this.#r.promise}if(t&&this.setOptions(t),!this.options.queryFn){const c=this.observers.find(d=>d.options.queryFn);c&&this.setOptions(c.options)}const r=new AbortController,a=c=>{Object.defineProperty(c,"signal",{enumerable:!0,get:()=>(this.#i=!0,r.signal)})},n=()=>{const c=zn(this.options,s),m=(()=>{const u={client:this.#a,queryKey:this.queryKey,meta:this.meta};return a(u),u})();return this.#i=!1,this.options.persister?this.options.persister(c,m,this):c(m)},l=(()=>{const c={fetchOptions:s,options:this.options,queryKey:this.queryKey,client:this.#a,state:this.state,fetchFn:n};return a(c),c})();this.options.behavior?.onFetch(l,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==l.fetchOptions?.meta)&&this.#n({type:"fetch",meta:l.fetchOptions?.meta}),this.#r=Vn({initialPromise:s?.initialPromise,fn:l.fetchFn,onCancel:c=>{c instanceof xr&&c.revert&&this.setState({...this.#t,fetchStatus:"idle"}),r.abort()},onFail:(c,d)=>{this.#n({type:"failed",failureCount:c,error:d})},onPause:()=>{this.#n({type:"pause"})},onContinue:()=>{this.#n({type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0});try{const c=await this.#r.start();if(c===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(c),this.#s.config.onSuccess?.(c,this),this.#s.config.onSettled?.(c,this.state.error,this),c}catch(c){if(c instanceof xr){if(c.silent)return this.#r.promise;if(c.revert){if(this.state.data===void 0)throw c;return this.state.data}}throw this.#n({type:"error",error:c}),this.#s.config.onError?.(c,this),this.#s.config.onSettled?.(this.state.data,c,this),c}finally{this.scheduleGc()}}#n(t){const s=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...Hn(r.data,this.options),fetchMeta:t.meta??null};case"success":const a={...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=t.manual?a:void 0,a;case"error":const n=t.error;return{...r,error:n,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:n,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=s(this.state),ue.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),this.#s.notify({query:this,type:"updated",action:t})})}};function Hn(t,s){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Wn(s.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function Fa(t){const s=typeof t.initialData=="function"?t.initialData():t.initialData,r=s!==void 0,a=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:s,dataUpdateCount:0,dataUpdatedAt:r?a??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var bd=class extends Lt{constructor(t,s){super(),this.options=s,this.#e=t,this.#n=null,this.#i=pr(),this.bindMethods(),this.setOptions(s)}#e;#t=void 0;#s=void 0;#a=void 0;#r;#o;#i;#n;#p;#m;#h;#c;#d;#l;#f=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),La(this.#t,this.options)?this.#u():this.updateResult(),this.#b())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return gr(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return gr(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#y(),this.#j(),this.#t.removeObserver(this)}setOptions(t){const s=this.options,r=this.#t;if(this.options=this.#e.defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Re(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#w(),this.#t.setOptions(this.options),s._defaulted&&!Ns(this.options,s)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const a=this.hasListeners();a&&_a(this.#t,r,this.options,s)&&this.#u(),this.updateResult(),a&&(this.#t!==r||Re(this.options.enabled,this.#t)!==Re(s.enabled,this.#t)||nt(this.options.staleTime,this.#t)!==nt(s.staleTime,this.#t))&&this.#x();const n=this.#g();a&&(this.#t!==r||Re(this.options.enabled,this.#t)!==Re(s.enabled,this.#t)||n!==this.#l)&&this.#v(n)}getOptimisticResult(t){const s=this.#e.getQueryCache().build(this.#e,t),r=this.createResult(s,t);return jd(this,r)&&(this.#a=r,this.#o=this.options,this.#r=this.#t.state),r}getCurrentResult(){return this.#a}trackResult(t,s){return new Proxy(t,{get:(r,a)=>(this.trackProp(a),s?.(a),a==="promise"&&!this.options.experimental_prefetchInRender&&this.#i.status==="pending"&&this.#i.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(r,a))})}trackProp(t){this.#f.add(t)}getCurrentQuery(){return this.#t}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const s=this.#e.defaultQueryOptions(t),r=this.#e.getQueryCache().build(this.#e,s);return r.fetch().then(()=>this.createResult(r,s))}fetch(t){return this.#u({...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#a))}#u(t){this.#w();let s=this.#t.fetch(this.options,t);return t?.throwOnError||(s=s.catch(je)),s}#x(){this.#y();const t=nt(this.options.staleTime,this.#t);if(vt||this.#a.isStale||!mr(t))return;const r=qn(this.#a.dataUpdatedAt,t)+1;this.#c=xt.setTimeout(()=>{this.#a.isStale||this.updateResult()},r)}#g(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#v(t){this.#j(),this.#l=t,!(vt||Re(this.options.enabled,this.#t)===!1||!mr(this.#l)||this.#l===0)&&(this.#d=xt.setInterval(()=>{(this.options.refetchIntervalInBackground||Kr.isFocused())&&this.#u()},this.#l))}#b(){this.#x(),this.#v(this.#g())}#y(){this.#c&&(xt.clearTimeout(this.#c),this.#c=void 0)}#j(){this.#d&&(xt.clearInterval(this.#d),this.#d=void 0)}createResult(t,s){const r=this.#t,a=this.options,n=this.#a,o=this.#r,l=this.#o,d=t!==r?t.state:this.#s,{state:m}=t;let u={...m},f=!1,h;if(s._optimisticResults){const U=this.hasListeners(),D=!U&&La(t,s),A=U&&_a(t,r,s,a);(D||A)&&(u={...u,...Hn(m.data,t.options)}),s._optimisticResults==="isRestoring"&&(u.fetchStatus="idle")}let{error:b,errorUpdatedAt:g,status:v}=u;h=u.data;let p=!1;if(s.placeholderData!==void 0&&h===void 0&&v==="pending"){let U;n?.isPlaceholderData&&s.placeholderData===l?.placeholderData?(U=n.data,p=!0):U=typeof s.placeholderData=="function"?s.placeholderData(this.#h?.state.data,this.#h):s.placeholderData,U!==void 0&&(v="success",h=fr(n?.data,U,s),f=!0)}if(s.select&&h!==void 0&&!p)if(n&&h===o?.data&&s.select===this.#p)h=this.#m;else try{this.#p=s.select,h=s.select(h),h=fr(n?.data,h,s),this.#m=h,this.#n=null}catch(U){this.#n=U}this.#n&&(b=this.#n,h=this.#m,g=Date.now(),v="error");const x=u.fetchStatus==="fetching",y=v==="pending",P=v==="error",j=y&&x,E=h!==void 0,I={status:v,fetchStatus:u.fetchStatus,isPending:y,isSuccess:v==="success",isError:P,isInitialLoading:j,isLoading:j,data:h,dataUpdatedAt:u.dataUpdatedAt,error:b,errorUpdatedAt:g,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>d.dataUpdateCount||u.errorUpdateCount>d.errorUpdateCount,isFetching:x,isRefetching:x&&!y,isLoadingError:P&&!E,isPaused:u.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:P&&E,isStale:Yr(t,s),refetch:this.refetch,promise:this.#i,isEnabled:Re(s.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const U=N=>{I.status==="error"?N.reject(I.error):I.data!==void 0&&N.resolve(I.data)},D=()=>{const N=this.#i=I.promise=pr();U(N)},A=this.#i;switch(A.status){case"pending":t.queryHash===r.queryHash&&U(A);break;case"fulfilled":(I.status==="error"||I.data!==A.value)&&D();break;case"rejected":(I.status!=="error"||I.error!==A.reason)&&D();break}}return I}updateResult(){const t=this.#a,s=this.createResult(this.#t,this.options);if(this.#r=this.#t.state,this.#o=this.options,this.#r.data!==void 0&&(this.#h=this.#t),Ns(s,t))return;this.#a=s;const r=()=>{if(!t)return!0;const{notifyOnChangeProps:a}=this.options,n=typeof a=="function"?a():a;if(n==="all"||!n&&!this.#f.size)return!0;const o=new Set(n??this.#f);return this.options.throwOnError&&o.add("error"),Object.keys(this.#a).some(l=>{const c=l;return this.#a[c]!==t[c]&&o.has(c)})};this.#N({listeners:r()})}#w(){const t=this.#e.getQueryCache().build(this.#e,this.options);if(t===this.#t)return;const s=this.#t;this.#t=t,this.#s=t.state,this.hasListeners()&&(s?.removeObserver(this),t.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#b()}#N(t){ue.batch(()=>{t.listeners&&this.listeners.forEach(s=>{s(this.#a)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function yd(t,s){return Re(s.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&s.retryOnMount===!1)}function La(t,s){return yd(t,s)||t.state.data!==void 0&&gr(t,s,s.refetchOnMount)}function gr(t,s,r){if(Re(s.enabled,t)!==!1&&nt(s.staleTime,t)!=="static"){const a=typeof r=="function"?r(t):r;return a==="always"||a!==!1&&Yr(t,s)}return!1}function _a(t,s,r,a){return(t!==s||Re(a.enabled,t)===!1)&&(!r.suspense||t.state.status!=="error")&&Yr(t,r)}function Yr(t,s){return Re(s.enabled,t)!==!1&&t.isStaleByTime(nt(s.staleTime,t))}function jd(t,s){return!Ns(t.getCurrentResult(),s)}function qa(t){return{onFetch:(s,r)=>{const a=s.options,n=s.fetchOptions?.meta?.fetchMore?.direction,o=s.state.data?.pages||[],l=s.state.data?.pageParams||[];let c={pages:[],pageParams:[]},d=0;const m=async()=>{let u=!1;const f=g=>{Object.defineProperty(g,"signal",{enumerable:!0,get:()=>(s.signal.aborted?u=!0:s.signal.addEventListener("abort",()=>{u=!0}),s.signal)})},h=zn(s.options,s.fetchOptions),b=async(g,v,p)=>{if(u)return Promise.reject();if(v==null&&g.pages.length)return Promise.resolve(g);const y=(()=>{const S={client:s.client,queryKey:s.queryKey,pageParam:v,direction:p?"backward":"forward",meta:s.options.meta};return f(S),S})(),P=await h(y),{maxPages:j}=s.options,E=p?md:ud;return{pages:E(g.pages,P,j),pageParams:E(g.pageParams,v,j)}};if(n&&o.length){const g=n==="backward",v=g?wd:$a,p={pages:o,pageParams:l},x=v(a,p);c=await b(p,x,g)}else{const g=t??o.length;do{const v=d===0?l[0]??a.initialPageParam:$a(a,c);if(d>0&&v==null)break;c=await b(c,v),d++}while(d<g)}return c};s.options.persister?s.fetchFn=()=>s.options.persister?.(m,{client:s.client,queryKey:s.queryKey,meta:s.options.meta,signal:s.signal},r):s.fetchFn=m}}}function $a(t,{pages:s,pageParams:r}){const a=s.length-1;return s.length>0?t.getNextPageParam(s[a],s,r[a],r):void 0}function wd(t,{pages:s,pageParams:r}){return s.length>0?t.getPreviousPageParam?.(s[0],s,r[0],r):void 0}var Nd=class extends Bn{#e;#t;#s;#a;constructor(t){super(),this.#e=t.client,this.mutationId=t.mutationId,this.#s=t.mutationCache,this.#t=[],this.state=t.state||Kn(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#t.includes(t)||(this.#t.push(t),this.clearGcTimeout(),this.#s.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#t=this.#t.filter(s=>s!==t),this.scheduleGc(),this.#s.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#s.remove(this))}continue(){return this.#a?.continue()??this.execute(this.state.variables)}async execute(t){const s=()=>{this.#r({type:"continue"})},r={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#a=Vn({fn:()=>this.options.mutationFn?this.options.mutationFn(t,r):Promise.reject(new Error("No mutationFn found")),onFail:(o,l)=>{this.#r({type:"failed",failureCount:o,error:l})},onPause:()=>{this.#r({type:"pause"})},onContinue:s,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#s.canRun(this)});const a=this.state.status==="pending",n=!this.#a.canStart();try{if(a)s();else{this.#r({type:"pending",variables:t,isPaused:n}),await this.#s.config.onMutate?.(t,this,r);const l=await this.options.onMutate?.(t,r);l!==this.state.context&&this.#r({type:"pending",context:l,variables:t,isPaused:n})}const o=await this.#a.start();return await this.#s.config.onSuccess?.(o,t,this.state.context,this,r),await this.options.onSuccess?.(o,t,this.state.context,r),await this.#s.config.onSettled?.(o,null,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(o,null,t,this.state.context,r),this.#r({type:"success",data:o}),o}catch(o){try{throw await this.#s.config.onError?.(o,t,this.state.context,this,r),await this.options.onError?.(o,t,this.state.context,r),await this.#s.config.onSettled?.(void 0,o,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(void 0,o,t,this.state.context,r),o}finally{this.#r({type:"error",error:o})}}finally{this.#s.runNext(this)}}#r(t){const s=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=s(this.state),ue.batch(()=>{this.#t.forEach(r=>{r.onMutationUpdate(t)}),this.#s.notify({mutation:this,type:"updated",action:t})})}};function Kn(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Sd=class extends Lt{constructor(t={}){super(),this.config=t,this.#e=new Set,this.#t=new Map,this.#s=0}#e;#t;#s;build(t,s,r){const a=new Nd({client:t,mutationCache:this,mutationId:++this.#s,options:t.defaultMutationOptions(s),state:r});return this.add(a),a}add(t){this.#e.add(t);const s=fs(t);if(typeof s=="string"){const r=this.#t.get(s);r?r.push(t):this.#t.set(s,[t])}this.notify({type:"added",mutation:t})}remove(t){if(this.#e.delete(t)){const s=fs(t);if(typeof s=="string"){const r=this.#t.get(s);if(r)if(r.length>1){const a=r.indexOf(t);a!==-1&&r.splice(a,1)}else r[0]===t&&this.#t.delete(s)}}this.notify({type:"removed",mutation:t})}canRun(t){const s=fs(t);if(typeof s=="string"){const a=this.#t.get(s)?.find(n=>n.state.status==="pending");return!a||a===t}else return!0}runNext(t){const s=fs(t);return typeof s=="string"?this.#t.get(s)?.find(a=>a!==t&&a.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){ue.batch(()=>{this.#e.forEach(t=>{this.notify({type:"removed",mutation:t})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(t){const s={exact:!0,...t};return this.getAll().find(r=>Ia(s,r))}findAll(t={}){return this.getAll().filter(s=>Ia(t,s))}notify(t){ue.batch(()=>{this.listeners.forEach(s=>{s(t)})})}resumePausedMutations(){const t=this.getAll().filter(s=>s.state.isPaused);return ue.batch(()=>Promise.all(t.map(s=>s.continue().catch(je))))}};function fs(t){return t.options.scope?.id}var Cd=class extends Lt{#e;#t=void 0;#s;#a;constructor(s,r){super(),this.#e=s,this.setOptions(r),this.bindMethods(),this.#r()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(s){const r=this.options;this.options=this.#e.defaultMutationOptions(s),Ns(this.options,r)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#s,observer:this}),r?.mutationKey&&this.options.mutationKey&&bt(r.mutationKey)!==bt(this.options.mutationKey)?this.reset():this.#s?.state.status==="pending"&&this.#s.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#s?.removeObserver(this)}onMutationUpdate(s){this.#r(),this.#o(s)}getCurrentResult(){return this.#t}reset(){this.#s?.removeObserver(this),this.#s=void 0,this.#r(),this.#o()}mutate(s,r){return this.#a=r,this.#s?.removeObserver(this),this.#s=this.#e.getMutationCache().build(this.#e,this.options),this.#s.addObserver(this),this.#s.execute(s)}#r(){const s=this.#s?.state??Kn();this.#t={...s,isPending:s.status==="pending",isSuccess:s.status==="success",isError:s.status==="error",isIdle:s.status==="idle",mutate:this.mutate,reset:this.reset}}#o(s){ue.batch(()=>{if(this.#a&&this.hasListeners()){const r=this.#t.variables,a=this.#t.context,n={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};s?.type==="success"?(this.#a.onSuccess?.(s.data,r,a,n),this.#a.onSettled?.(s.data,null,r,a,n)):s?.type==="error"&&(this.#a.onError?.(s.error,r,a,n),this.#a.onSettled?.(void 0,s.error,r,a,n))}this.listeners.forEach(r=>{r(this.#t)})})}},kd=class extends Lt{constructor(t={}){super(),this.config=t,this.#e=new Map}#e;build(t,s,r){const a=s.queryKey,n=s.queryHash??Br(a,s);let o=this.get(n);return o||(o=new vd({client:t,queryKey:a,queryHash:n,options:t.defaultQueryOptions(s),state:r,defaultOptions:t.getQueryDefaults(a)}),this.add(o)),o}add(t){this.#e.has(t.queryHash)||(this.#e.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const s=this.#e.get(t.queryHash);s&&(t.destroy(),s===t&&this.#e.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){ue.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#e.get(t)}getAll(){return[...this.#e.values()]}find(t){const s={exact:!0,...t};return this.getAll().find(r=>Aa(s,r))}findAll(t={}){const s=this.getAll();return Object.keys(t).length>0?s.filter(r=>Aa(t,r)):s}notify(t){ue.batch(()=>{this.listeners.forEach(s=>{s(t)})})}onFocus(){ue.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){ue.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Pd=class{#e;#t;#s;#a;#r;#o;#i;#n;constructor(t={}){this.#e=t.queryCache||new kd,this.#t=t.mutationCache||new Sd,this.#s=t.defaultOptions||{},this.#a=new Map,this.#r=new Map,this.#o=0}mount(){this.#o++,this.#o===1&&(this.#i=Kr.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#n=Ss.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#o--,this.#o===0&&(this.#i?.(),this.#i=void 0,this.#n?.(),this.#n=void 0)}isFetching(t){return this.#e.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#t.findAll({...t,status:"pending"}).length}getQueryData(t){const s=this.defaultQueryOptions({queryKey:t});return this.#e.get(s.queryHash)?.state.data}ensureQueryData(t){const s=this.defaultQueryOptions(t),r=this.#e.build(this,s),a=r.state.data;return a===void 0?this.fetchQuery(t):(t.revalidateIfStale&&r.isStaleByTime(nt(s.staleTime,r))&&this.prefetchQuery(s),Promise.resolve(a))}getQueriesData(t){return this.#e.findAll(t).map(({queryKey:s,state:r})=>{const a=r.data;return[s,a]})}setQueryData(t,s,r){const a=this.defaultQueryOptions({queryKey:t}),o=this.#e.get(a.queryHash)?.state.data,l=ld(s,o);if(l!==void 0)return this.#e.build(this,a).setData(l,{...r,manual:!0})}setQueriesData(t,s,r){return ue.batch(()=>this.#e.findAll(t).map(({queryKey:a})=>[a,this.setQueryData(a,s,r)]))}getQueryState(t){const s=this.defaultQueryOptions({queryKey:t});return this.#e.get(s.queryHash)?.state}removeQueries(t){const s=this.#e;ue.batch(()=>{s.findAll(t).forEach(r=>{s.remove(r)})})}resetQueries(t,s){const r=this.#e;return ue.batch(()=>(r.findAll(t).forEach(a=>{a.reset()}),this.refetchQueries({type:"active",...t},s)))}cancelQueries(t,s={}){const r={revert:!0,...s},a=ue.batch(()=>this.#e.findAll(t).map(n=>n.cancel(r)));return Promise.all(a).then(je).catch(je)}invalidateQueries(t,s={}){return ue.batch(()=>(this.#e.findAll(t).forEach(r=>{r.invalidate()}),t?.refetchType==="none"?Promise.resolve():this.refetchQueries({...t,type:t?.refetchType??t?.type??"active"},s)))}refetchQueries(t,s={}){const r={...s,cancelRefetch:s.cancelRefetch??!0},a=ue.batch(()=>this.#e.findAll(t).filter(n=>!n.isDisabled()&&!n.isStatic()).map(n=>{let o=n.fetch(void 0,r);return r.throwOnError||(o=o.catch(je)),n.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(a).then(je)}fetchQuery(t){const s=this.defaultQueryOptions(t);s.retry===void 0&&(s.retry=!1);const r=this.#e.build(this,s);return r.isStaleByTime(nt(s.staleTime,r))?r.fetch(s):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(je).catch(je)}fetchInfiniteQuery(t){return t.behavior=qa(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(je).catch(je)}ensureInfiniteQueryData(t){return t.behavior=qa(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Ss.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#s}setDefaultOptions(t){this.#s=t}setQueryDefaults(t,s){this.#a.set(bt(t),{queryKey:t,defaultOptions:s})}getQueryDefaults(t){const s=[...this.#a.values()],r={};return s.forEach(a=>{ss(t,a.queryKey)&&Object.assign(r,a.defaultOptions)}),r}setMutationDefaults(t,s){this.#r.set(bt(t),{mutationKey:t,defaultOptions:s})}getMutationDefaults(t){const s=[...this.#r.values()],r={};return s.forEach(a=>{ss(t,a.mutationKey)&&Object.assign(r,a.defaultOptions)}),r}defaultQueryOptions(t){if(t._defaulted)return t;const s={...this.#s.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return s.queryHash||(s.queryHash=Br(s.queryKey,s)),s.refetchOnReconnect===void 0&&(s.refetchOnReconnect=s.networkMode!=="always"),s.throwOnError===void 0&&(s.throwOnError=!!s.suspense),!s.networkMode&&s.persister&&(s.networkMode="offlineFirst"),s.queryFn===Hr&&(s.enabled=!1),s}defaultMutationOptions(t){return t?._defaulted?t:{...this.#s.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},Yn=i.createContext(void 0),Ve=t=>{const s=i.useContext(Yn);if(!s)throw new Error("No QueryClient set, use QueryClientProvider to set one");return s},Ed=({client:t,children:s})=>(i.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),e.jsx(Yn.Provider,{value:t,children:s})),Gn=i.createContext(!1),Rd=()=>i.useContext(Gn);Gn.Provider;function Td(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var Md=i.createContext(Td()),Ad=()=>i.useContext(Md),Id=(t,s)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(s.isReset()||(t.retryOnMount=!1))},Dd=t=>{i.useEffect(()=>{t.clearReset()},[t])},Od=({result:t,errorResetBoundary:s,throwOnError:r,query:a,suspense:n})=>t.isError&&!s.isReset()&&!t.isFetching&&a&&(n&&t.data===void 0||Un(r,[t.error,a])),Fd=t=>{if(t.suspense){const r=n=>n==="static"?n:Math.max(n??1e3,1e3),a=t.staleTime;t.staleTime=typeof a=="function"?(...n)=>r(a(...n)):r(a),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},Ld=(t,s)=>t.isLoading&&t.isFetching&&!s,_d=(t,s)=>t?.suspense&&s.isPending,za=(t,s,r)=>s.fetchOptimistic(t).catch(()=>{r.clearReset()});function qd(t,s,r){const a=Rd(),n=Ad(),o=Ve(),l=o.defaultQueryOptions(t);o.getDefaultOptions().queries?._experimental_beforeQuery?.(l),l._optimisticResults=a?"isRestoring":"optimistic",Fd(l),Id(l,n),Dd(n);const c=!o.getQueryCache().get(l.queryHash),[d]=i.useState(()=>new s(o,l)),m=d.getOptimisticResult(l),u=!a&&t.subscribed!==!1;if(i.useSyncExternalStore(i.useCallback(f=>{const h=u?d.subscribe(ue.batchCalls(f)):je;return d.updateResult(),h},[d,u]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),i.useEffect(()=>{d.setOptions(l)},[l,d]),_d(l,m))throw za(l,d,n);if(Od({result:m,errorResetBoundary:n,throwOnError:l.throwOnError,query:o.getQueryCache().get(l.queryHash),suspense:l.suspense}))throw m.error;return o.getDefaultOptions().queries?._experimental_afterQuery?.(l,m),l.experimental_prefetchInRender&&!vt&&Ld(m,a)&&(c?za(l,d,n):o.getQueryCache().get(l.queryHash)?.promise)?.catch(je).finally(()=>{d.updateResult()}),l.notifyOnChangeProps?m:d.trackResult(m)}function it(t,s){return qd(t,bd)}function me(t,s){const r=Ve(),[a]=i.useState(()=>new Cd(r,t));i.useEffect(()=>{a.setOptions(t)},[a,t]);const n=i.useSyncExternalStore(i.useCallback(l=>a.subscribe(ue.batchCalls(l)),[a]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),o=i.useCallback((l,c)=>{a.mutate(l,c).catch(je)},[a]);if(n.error&&Un(a.options.throwOnError,[n.error]))throw n.error;return{...n,mutate:o,mutateAsync:n.mutate}}async function Qn(t){if(!t.ok){const s=await t.text()||t.statusText;throw new Error(`${t.status}: ${s}`)}}async function Jn(t,s,r){const a=await fetch(s,{method:t,headers:r?{"Content-Type":"application/json"}:{},body:r?JSON.stringify(r):void 0,credentials:"include"});return await Qn(a),a}const Cs=({on401:t})=>async({queryKey:s})=>{const r=await fetch(s.join("/"),{credentials:"include"});return t==="returnNull"&&r.status===401?null:(await Qn(r),await r.json())},rs=new Pd({defaultOptions:{queries:{queryFn:Cs({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),$d=1,zd=1e6;let Zs=0;function Ud(){return Zs=(Zs+1)%Number.MAX_SAFE_INTEGER,Zs.toString()}const er=new Map,Ua=t=>{if(er.has(t))return;const s=setTimeout(()=>{er.delete(t),Xt({type:"REMOVE_TOAST",toastId:t})},zd);er.set(t,s)},Wd=(t,s)=>{switch(s.type){case"ADD_TOAST":return{...t,toasts:[s.toast,...t.toasts].slice(0,$d)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(r=>r.id===s.toast.id?{...r,...s.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=s;return r?Ua(r):t.toasts.forEach(a=>{Ua(a.id)}),{...t,toasts:t.toasts.map(a=>a.id===r||r===void 0?{...a,open:!1}:a)}}case"REMOVE_TOAST":return s.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(r=>r.id!==s.toastId)}}},vs=[];let bs={toasts:[]};function Xt(t){bs=Wd(bs,t),vs.forEach(s=>{s(bs)})}function ie({...t}){const s=Ud(),r=n=>Xt({type:"UPDATE_TOAST",toast:{...n,id:s}}),a=()=>Xt({type:"DISMISS_TOAST",toastId:s});return Xt({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:n=>{n||a()}}}),{id:s,dismiss:a,update:r}}function ct(){const[t,s]=i.useState(bs);return i.useEffect(()=>(vs.push(s),()=>{const r=vs.indexOf(s);r>-1&&vs.splice(r,1)}),[t]),{...t,toast:ie,dismiss:r=>Xt({type:"DISMISS_TOAST",toastId:r})}}var Gr="ToastProvider",[Qr,Vd,Bd]=un("Toast"),[Xn]=We("Toast",[Bd]),[Hd,Fs]=Xn(Gr),Zn=t=>{const{__scopeToast:s,label:r="Notification",duration:a=5e3,swipeDirection:n="right",swipeThreshold:o=50,children:l}=t,[c,d]=i.useState(null),[m,u]=i.useState(0),f=i.useRef(!1),h=i.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${Gr}\`. Expected non-empty \`string\`.`),e.jsx(Qr.Provider,{scope:s,children:e.jsx(Hd,{scope:s,label:r,duration:a,swipeDirection:n,swipeThreshold:o,toastCount:m,viewport:c,onViewportChange:d,onToastAdd:i.useCallback(()=>u(b=>b+1),[]),onToastRemove:i.useCallback(()=>u(b=>b-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:h,children:l})})};Zn.displayName=Gr;var eo="ToastViewport",Kd=["F8"],vr="toast.viewportPause",br="toast.viewportResume",to=i.forwardRef((t,s)=>{const{__scopeToast:r,hotkey:a=Kd,label:n="Notifications ({hotkey})",...o}=t,l=Fs(eo,r),c=Vd(r),d=i.useRef(null),m=i.useRef(null),u=i.useRef(null),f=i.useRef(null),h=ce(s,f,l.onViewportChange),b=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),g=l.toastCount>0;i.useEffect(()=>{const p=x=>{a.length!==0&&a.every(P=>x[P]||x.code===P)&&f.current?.focus()};return document.addEventListener("keydown",p),()=>document.removeEventListener("keydown",p)},[a]),i.useEffect(()=>{const p=d.current,x=f.current;if(g&&p&&x){const y=()=>{if(!l.isClosePausedRef.current){const S=new CustomEvent(vr);x.dispatchEvent(S),l.isClosePausedRef.current=!0}},P=()=>{if(l.isClosePausedRef.current){const S=new CustomEvent(br);x.dispatchEvent(S),l.isClosePausedRef.current=!1}},j=S=>{!p.contains(S.relatedTarget)&&P()},E=()=>{p.contains(document.activeElement)||P()};return p.addEventListener("focusin",y),p.addEventListener("focusout",j),p.addEventListener("pointermove",y),p.addEventListener("pointerleave",E),window.addEventListener("blur",y),window.addEventListener("focus",P),()=>{p.removeEventListener("focusin",y),p.removeEventListener("focusout",j),p.removeEventListener("pointermove",y),p.removeEventListener("pointerleave",E),window.removeEventListener("blur",y),window.removeEventListener("focus",P)}}},[g,l.isClosePausedRef]);const v=i.useCallback(({tabbingDirection:p})=>{const y=c().map(P=>{const j=P.ref.current,E=[j,...ou(j)];return p==="forwards"?E:E.reverse()});return(p==="forwards"?y.reverse():y).flat()},[c]);return i.useEffect(()=>{const p=f.current;if(p){const x=y=>{const P=y.altKey||y.ctrlKey||y.metaKey;if(y.key==="Tab"&&!P){const E=document.activeElement,S=y.shiftKey;if(y.target===p&&S){m.current?.focus();return}const D=v({tabbingDirection:S?"backwards":"forwards"}),A=D.findIndex(N=>N===E);tr(D.slice(A+1))?y.preventDefault():S?m.current?.focus():u.current?.focus()}};return p.addEventListener("keydown",x),()=>p.removeEventListener("keydown",x)}},[c,v]),e.jsxs(fc,{ref:d,role:"region","aria-label":n.replace("{hotkey}",b),tabIndex:-1,style:{pointerEvents:g?void 0:"none"},children:[g&&e.jsx(yr,{ref:m,onFocusFromOutsideViewport:()=>{const p=v({tabbingDirection:"forwards"});tr(p)}}),e.jsx(Qr.Slot,{scope:r,children:e.jsx(G.ol,{tabIndex:-1,...o,ref:h})}),g&&e.jsx(yr,{ref:u,onFocusFromOutsideViewport:()=>{const p=v({tabbingDirection:"backwards"});tr(p)}})]})});to.displayName=eo;var so="ToastFocusProxy",yr=i.forwardRef((t,s)=>{const{__scopeToast:r,onFocusFromOutsideViewport:a,...n}=t,o=Fs(so,r);return e.jsx(mn,{tabIndex:0,...n,ref:s,style:{position:"fixed"},onFocus:l=>{const c=l.relatedTarget;!o.viewport?.contains(c)&&a()}})});yr.displayName=so;var ls="Toast",Yd="toast.swipeStart",Gd="toast.swipeMove",Qd="toast.swipeCancel",Jd="toast.swipeEnd",ro=i.forwardRef((t,s)=>{const{forceMount:r,open:a,defaultOpen:n,onOpenChange:o,...l}=t,[c,d]=Ot({prop:a,defaultProp:n??!0,onChange:o,caller:ls});return e.jsx(_e,{present:r||c,children:e.jsx(eu,{open:c,...l,ref:s,onClose:()=>d(!1),onPause:Te(t.onPause),onResume:Te(t.onResume),onSwipeStart:Y(t.onSwipeStart,m=>{m.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Y(t.onSwipeMove,m=>{const{x:u,y:f}=m.detail.delta;m.currentTarget.setAttribute("data-swipe","move"),m.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),m.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:Y(t.onSwipeCancel,m=>{m.currentTarget.setAttribute("data-swipe","cancel"),m.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),m.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),m.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),m.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Y(t.onSwipeEnd,m=>{const{x:u,y:f}=m.detail.delta;m.currentTarget.setAttribute("data-swipe","end"),m.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),m.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),m.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),m.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),d(!1)})})})});ro.displayName=ls;var[Xd,Zd]=Xn(ls,{onClose(){}}),eu=i.forwardRef((t,s)=>{const{__scopeToast:r,type:a="foreground",duration:n,open:o,onClose:l,onEscapeKeyDown:c,onPause:d,onResume:m,onSwipeStart:u,onSwipeMove:f,onSwipeCancel:h,onSwipeEnd:b,...g}=t,v=Fs(ls,r),[p,x]=i.useState(null),y=ce(s,_=>x(_)),P=i.useRef(null),j=i.useRef(null),E=n||v.duration,S=i.useRef(0),I=i.useRef(E),U=i.useRef(0),{onToastAdd:D,onToastRemove:A}=v,N=Te(()=>{p?.contains(document.activeElement)&&v.viewport?.focus(),l()}),C=i.useCallback(_=>{!_||_===1/0||(window.clearTimeout(U.current),S.current=new Date().getTime(),U.current=window.setTimeout(N,_))},[N]);i.useEffect(()=>{const _=v.viewport;if(_){const O=()=>{C(I.current),m?.()},q=()=>{const z=new Date().getTime()-S.current;I.current=I.current-z,window.clearTimeout(U.current),d?.()};return _.addEventListener(vr,q),_.addEventListener(br,O),()=>{_.removeEventListener(vr,q),_.removeEventListener(br,O)}}},[v.viewport,E,d,m,C]),i.useEffect(()=>{o&&!v.isClosePausedRef.current&&C(E)},[o,E,v.isClosePausedRef,C]),i.useEffect(()=>(D(),()=>A()),[D,A]);const W=i.useMemo(()=>p?uo(p):null,[p]);return v.viewport?e.jsxs(e.Fragment,{children:[W&&e.jsx(tu,{__scopeToast:r,role:"status","aria-live":a==="foreground"?"assertive":"polite",children:W}),e.jsx(Xd,{scope:r,onClose:N,children:pc.createPortal(e.jsx(Qr.ItemSlot,{scope:r,children:e.jsx(xc,{asChild:!0,onEscapeKeyDown:Y(c,()=>{v.isFocusedToastEscapeKeyDownRef.current||N(),v.isFocusedToastEscapeKeyDownRef.current=!1}),children:e.jsx(G.li,{tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":v.swipeDirection,...g,ref:y,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:Y(t.onKeyDown,_=>{_.key==="Escape"&&(c?.(_.nativeEvent),_.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,N()))}),onPointerDown:Y(t.onPointerDown,_=>{_.button===0&&(P.current={x:_.clientX,y:_.clientY})}),onPointerMove:Y(t.onPointerMove,_=>{if(!P.current)return;const O=_.clientX-P.current.x,q=_.clientY-P.current.y,z=!!j.current,B=["left","right"].includes(v.swipeDirection),Q=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,te=B?Q(0,O):0,se=B?0:Q(0,q),k=_.pointerType==="touch"?10:2,R={x:te,y:se},F={originalEvent:_,delta:R};z?(j.current=R,ps(Gd,f,F,{discrete:!1})):Wa(R,v.swipeDirection,k)?(j.current=R,ps(Yd,u,F,{discrete:!1}),_.target.setPointerCapture(_.pointerId)):(Math.abs(O)>k||Math.abs(q)>k)&&(P.current=null)}),onPointerUp:Y(t.onPointerUp,_=>{const O=j.current,q=_.target;if(q.hasPointerCapture(_.pointerId)&&q.releasePointerCapture(_.pointerId),j.current=null,P.current=null,O){const z=_.currentTarget,B={originalEvent:_,delta:O};Wa(O,v.swipeDirection,v.swipeThreshold)?ps(Jd,b,B,{discrete:!0}):ps(Qd,h,B,{discrete:!0}),z.addEventListener("click",Q=>Q.preventDefault(),{once:!0})}})})})}),v.viewport)})]}):null}),tu=t=>{const{__scopeToast:s,children:r,...a}=t,n=Fs(ls,s),[o,l]=i.useState(!1),[c,d]=i.useState(!1);return au(()=>l(!0)),i.useEffect(()=>{const m=window.setTimeout(()=>d(!0),1e3);return()=>window.clearTimeout(m)},[]),c?null:e.jsx(hn,{asChild:!0,children:e.jsx(mn,{...a,children:o&&e.jsxs(e.Fragment,{children:[n.label," ",r]})})})},su="ToastTitle",ao=i.forwardRef((t,s)=>{const{__scopeToast:r,...a}=t;return e.jsx(G.div,{...a,ref:s})});ao.displayName=su;var ru="ToastDescription",no=i.forwardRef((t,s)=>{const{__scopeToast:r,...a}=t;return e.jsx(G.div,{...a,ref:s})});no.displayName=ru;var oo="ToastAction",io=i.forwardRef((t,s)=>{const{altText:r,...a}=t;return r.trim()?e.jsx(co,{altText:r,asChild:!0,children:e.jsx(Jr,{...a,ref:s})}):(console.error(`Invalid prop \`altText\` supplied to \`${oo}\`. Expected non-empty \`string\`.`),null)});io.displayName=oo;var lo="ToastClose",Jr=i.forwardRef((t,s)=>{const{__scopeToast:r,...a}=t,n=Zd(lo,r);return e.jsx(co,{asChild:!0,children:e.jsx(G.button,{type:"button",...a,ref:s,onClick:Y(t.onClick,n.onClose)})})});Jr.displayName=lo;var co=i.forwardRef((t,s)=>{const{__scopeToast:r,altText:a,...n}=t;return e.jsx(G.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":a||void 0,...n,ref:s})});function uo(t){const s=[];return Array.from(t.childNodes).forEach(a=>{if(a.nodeType===a.TEXT_NODE&&a.textContent&&s.push(a.textContent),nu(a)){const n=a.ariaHidden||a.hidden||a.style.display==="none",o=a.dataset.radixToastAnnounceExclude==="";if(!n)if(o){const l=a.dataset.radixToastAnnounceAlt;l&&s.push(l)}else s.push(...uo(a))}}),s}function ps(t,s,r,{discrete:a}){const n=r.originalEvent.currentTarget,o=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:r});s&&n.addEventListener(t,s,{once:!0}),a?gc(n,o):n.dispatchEvent(o)}var Wa=(t,s,r=0)=>{const a=Math.abs(t.x),n=Math.abs(t.y),o=a>n;return s==="left"||s==="right"?o&&a>r:!o&&n>r};function au(t=()=>{}){const s=Te(t);es(()=>{let r=0,a=0;return r=window.requestAnimationFrame(()=>a=window.requestAnimationFrame(s)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(a)}},[s])}function nu(t){return t.nodeType===t.ELEMENT_NODE}function ou(t){const s=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:a=>{const n=a.tagName==="INPUT"&&a.type==="hidden";return a.disabled||a.hidden||n?NodeFilter.FILTER_SKIP:a.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)s.push(r.currentNode);return s}function tr(t){const s=document.activeElement;return t.some(r=>r===s?!0:(r.focus(),document.activeElement!==s))}var mo=Zn,Xr=to,Zr=ro,ho=ao,fo=no,ea=io,ta=Jr;function po(t){var s,r,a="";if(typeof t=="string"||typeof t=="number")a+=t;else if(typeof t=="object")if(Array.isArray(t)){var n=t.length;for(s=0;s<n;s++)t[s]&&(r=po(t[s]))&&(a&&(a+=" "),a+=r)}else for(r in t)t[r]&&(a&&(a+=" "),a+=r);return a}function xo(){for(var t,s,r=0,a="",n=arguments.length;r<n;r++)(t=arguments[r])&&(s=po(t))&&(a&&(a+=" "),a+=s);return a}const Va=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,Ba=xo,_t=(t,s)=>r=>{var a;if(s?.variants==null)return Ba(t,r?.class,r?.className);const{variants:n,defaultVariants:o}=s,l=Object.keys(n).map(m=>{const u=r?.[m],f=o?.[m];if(u===null)return null;const h=Va(u)||Va(f);return n[m][h]}),c=r&&Object.entries(r).reduce((m,u)=>{let[f,h]=u;return h===void 0||(m[f]=h),m},{}),d=s==null||(a=s.compoundVariants)===null||a===void 0?void 0:a.reduce((m,u)=>{let{class:f,className:h,...b}=u;return Object.entries(b).every(g=>{let[v,p]=g;return Array.isArray(p)?p.includes({...o,...c}[v]):{...o,...c}[v]===p})?[...m,f,h]:m},[]);return Ba(t,l,d,r?.class,r?.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iu=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),go=(...t)=>t.filter((s,r,a)=>!!s&&a.indexOf(s)===r).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var lu={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cu=i.forwardRef(({color:t="currentColor",size:s=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:n="",children:o,iconNode:l,...c},d)=>i.createElement("svg",{ref:d,...lu,width:s,height:s,stroke:t,strokeWidth:a?Number(r)*24/Number(s):r,className:go("lucide",n),...c},[...l.map(([m,u])=>i.createElement(m,u)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=(t,s)=>{const r=i.forwardRef(({className:a,...n},o)=>i.createElement(cu,{ref:o,iconNode:s,className:go(`lucide-${iu(t)}`,a),...n}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=$("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const du=$("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uu=$("AtSign",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8",key:"7n84p3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=$("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=$("Cake",[["path",{d:"M20 21v-8a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v8",key:"1w3rig"}],["path",{d:"M4 16s.5-1 2-1 2.5 2 4 2 2.5-2 4-2 2.5 2 4 2 2-1 2-1",key:"n2jgmb"}],["path",{d:"M2 21h20",key:"1nyx9w"}],["path",{d:"M7 8v3",key:"1qtyvj"}],["path",{d:"M12 8v3",key:"hwp4zt"}],["path",{d:"M17 8v3",key:"1i6e5u"}],["path",{d:"M7 4h.01",key:"1bh4kh"}],["path",{d:"M12 4h.01",key:"1ujb9j"}],["path",{d:"M17 4h.01",key:"1upcoc"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=$("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=$("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vo=$("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mt=$("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bo=$("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mu=$("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hu=$("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fu=$("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pu=$("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jr=$("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=$("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ha=$("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xu=$("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wr=$("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gu=$("Compass",[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vu=$("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bu=$("Dot",[["circle",{cx:"12.1",cy:"12.1",r:"1",key:"18d7e5"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yu=$("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ju=$("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xs=$("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ka=$("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ps=$("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wu=$("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nu=$("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=$("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Su=$("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cu=$("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ku=$("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ya=$("KeyRound",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=$("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kt=$("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yo=$("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=$("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=$("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pu=$("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=$("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sa=$("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jo=$("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eu=$("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ru=$("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tu=$("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ra=$("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gt=$("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wo=$("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=$("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const No=$("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const So=$("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sr=$("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=$("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nr=$("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mu=$("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Co=$("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ga=$("UserRound",[["circle",{cx:"12",cy:"8",r:"5",key:"1hypcn"}],["path",{d:"M20 21a8 8 0 0 0-16 0",key:"rfgkzh"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Au=$("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jt=$("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=$("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iu=$("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=$("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qa=$("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Du=$("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ou=$("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),aa="-",Fu=t=>{const s=_u(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:a}=t;return{getClassGroupId:l=>{const c=l.split(aa);return c[0]===""&&c.length!==1&&c.shift(),ko(c,s)||Lu(l)},getConflictingClassGroupIds:(l,c)=>{const d=r[l]||[];return c&&a[l]?[...d,...a[l]]:d}}},ko=(t,s)=>{if(t.length===0)return s.classGroupId;const r=t[0],a=s.nextPart.get(r),n=a?ko(t.slice(1),a):void 0;if(n)return n;if(s.validators.length===0)return;const o=t.join(aa);return s.validators.find(({validator:l})=>l(o))?.classGroupId},Ja=/^\[(.+)\]$/,Lu=t=>{if(Ja.test(t)){const s=Ja.exec(t)[1],r=s?.substring(0,s.indexOf(":"));if(r)return"arbitrary.."+r}},_u=t=>{const{theme:s,prefix:r}=t,a={nextPart:new Map,validators:[]};return $u(Object.entries(t.classGroups),r).forEach(([o,l])=>{Sr(l,a,o,s)}),a},Sr=(t,s,r,a)=>{t.forEach(n=>{if(typeof n=="string"){const o=n===""?s:Xa(s,n);o.classGroupId=r;return}if(typeof n=="function"){if(qu(n)){Sr(n(a),s,r,a);return}s.validators.push({validator:n,classGroupId:r});return}Object.entries(n).forEach(([o,l])=>{Sr(l,Xa(s,o),r,a)})})},Xa=(t,s)=>{let r=t;return s.split(aa).forEach(a=>{r.nextPart.has(a)||r.nextPart.set(a,{nextPart:new Map,validators:[]}),r=r.nextPart.get(a)}),r},qu=t=>t.isThemeGetter,$u=(t,s)=>s?t.map(([r,a])=>{const n=a.map(o=>typeof o=="string"?s+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([l,c])=>[s+l,c])):o);return[r,n]}):t,zu=t=>{if(t<1)return{get:()=>{},set:()=>{}};let s=0,r=new Map,a=new Map;const n=(o,l)=>{r.set(o,l),s++,s>t&&(s=0,a=r,r=new Map)};return{get(o){let l=r.get(o);if(l!==void 0)return l;if((l=a.get(o))!==void 0)return n(o,l),l},set(o,l){r.has(o)?r.set(o,l):n(o,l)}}},Po="!",Uu=t=>{const{separator:s,experimentalParseClassName:r}=t,a=s.length===1,n=s[0],o=s.length,l=c=>{const d=[];let m=0,u=0,f;for(let p=0;p<c.length;p++){let x=c[p];if(m===0){if(x===n&&(a||c.slice(p,p+o)===s)){d.push(c.slice(u,p)),u=p+o;continue}if(x==="/"){f=p;continue}}x==="["?m++:x==="]"&&m--}const h=d.length===0?c:c.substring(u),b=h.startsWith(Po),g=b?h.substring(1):h,v=f&&f>u?f-u:void 0;return{modifiers:d,hasImportantModifier:b,baseClassName:g,maybePostfixModifierPosition:v}};return r?c=>r({className:c,parseClassName:l}):l},Wu=t=>{if(t.length<=1)return t;const s=[];let r=[];return t.forEach(a=>{a[0]==="["?(s.push(...r.sort(),a),r=[]):r.push(a)}),s.push(...r.sort()),s},Vu=t=>({cache:zu(t.cacheSize),parseClassName:Uu(t),...Fu(t)}),Bu=/\s+/,Hu=(t,s)=>{const{parseClassName:r,getClassGroupId:a,getConflictingClassGroupIds:n}=s,o=[],l=t.trim().split(Bu);let c="";for(let d=l.length-1;d>=0;d-=1){const m=l[d],{modifiers:u,hasImportantModifier:f,baseClassName:h,maybePostfixModifierPosition:b}=r(m);let g=!!b,v=a(g?h.substring(0,b):h);if(!v){if(!g){c=m+(c.length>0?" "+c:c);continue}if(v=a(h),!v){c=m+(c.length>0?" "+c:c);continue}g=!1}const p=Wu(u).join(":"),x=f?p+Po:p,y=x+v;if(o.includes(y))continue;o.push(y);const P=n(v,g);for(let j=0;j<P.length;++j){const E=P[j];o.push(x+E)}c=m+(c.length>0?" "+c:c)}return c};function Ku(){let t=0,s,r,a="";for(;t<arguments.length;)(s=arguments[t++])&&(r=Eo(s))&&(a&&(a+=" "),a+=r);return a}const Eo=t=>{if(typeof t=="string")return t;let s,r="";for(let a=0;a<t.length;a++)t[a]&&(s=Eo(t[a]))&&(r&&(r+=" "),r+=s);return r};function Yu(t,...s){let r,a,n,o=l;function l(d){const m=s.reduce((u,f)=>f(u),t());return r=Vu(m),a=r.cache.get,n=r.cache.set,o=c,c(d)}function c(d){const m=a(d);if(m)return m;const u=Hu(d,r);return n(d,u),u}return function(){return o(Ku.apply(null,arguments))}}const oe=t=>{const s=r=>r[t]||[];return s.isThemeGetter=!0,s},Ro=/^\[(?:([a-z-]+):)?(.+)\]$/i,Gu=/^\d+\/\d+$/,Qu=new Set(["px","full","screen"]),Ju=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Xu=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Zu=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,em=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,tm=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ke=t=>Pt(t)||Qu.has(t)||Gu.test(t),et=t=>qt(t,"length",cm),Pt=t=>!!t&&!Number.isNaN(Number(t)),rr=t=>qt(t,"number",Pt),Bt=t=>!!t&&Number.isInteger(Number(t)),sm=t=>t.endsWith("%")&&Pt(t.slice(0,-1)),J=t=>Ro.test(t),tt=t=>Ju.test(t),rm=new Set(["length","size","percentage"]),am=t=>qt(t,rm,To),nm=t=>qt(t,"position",To),om=new Set(["image","url"]),im=t=>qt(t,om,um),lm=t=>qt(t,"",dm),Ht=()=>!0,qt=(t,s,r)=>{const a=Ro.exec(t);return a?a[1]?typeof s=="string"?a[1]===s:s.has(a[1]):r(a[2]):!1},cm=t=>Xu.test(t)&&!Zu.test(t),To=()=>!1,dm=t=>em.test(t),um=t=>tm.test(t),mm=()=>{const t=oe("colors"),s=oe("spacing"),r=oe("blur"),a=oe("brightness"),n=oe("borderColor"),o=oe("borderRadius"),l=oe("borderSpacing"),c=oe("borderWidth"),d=oe("contrast"),m=oe("grayscale"),u=oe("hueRotate"),f=oe("invert"),h=oe("gap"),b=oe("gradientColorStops"),g=oe("gradientColorStopPositions"),v=oe("inset"),p=oe("margin"),x=oe("opacity"),y=oe("padding"),P=oe("saturate"),j=oe("scale"),E=oe("sepia"),S=oe("skew"),I=oe("space"),U=oe("translate"),D=()=>["auto","contain","none"],A=()=>["auto","hidden","clip","visible","scroll"],N=()=>["auto",J,s],C=()=>[J,s],W=()=>["",Ke,et],_=()=>["auto",Pt,J],O=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],q=()=>["solid","dashed","dotted","double","none"],z=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],B=()=>["start","end","center","between","around","evenly","stretch"],Q=()=>["","0",J],te=()=>["auto","avoid","all","avoid-page","page","left","right","column"],se=()=>[Pt,J];return{cacheSize:500,separator:":",theme:{colors:[Ht],spacing:[Ke,et],blur:["none","",tt,J],brightness:se(),borderColor:[t],borderRadius:["none","","full",tt,J],borderSpacing:C(),borderWidth:W(),contrast:se(),grayscale:Q(),hueRotate:se(),invert:Q(),gap:C(),gradientColorStops:[t],gradientColorStopPositions:[sm,et],inset:N(),margin:N(),opacity:se(),padding:C(),saturate:se(),scale:se(),sepia:Q(),skew:se(),space:C(),translate:C()},classGroups:{aspect:[{aspect:["auto","square","video",J]}],container:["container"],columns:[{columns:[tt]}],"break-after":[{"break-after":te()}],"break-before":[{"break-before":te()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...O(),J]}],overflow:[{overflow:A()}],"overflow-x":[{"overflow-x":A()}],"overflow-y":[{"overflow-y":A()}],overscroll:[{overscroll:D()}],"overscroll-x":[{"overscroll-x":D()}],"overscroll-y":[{"overscroll-y":D()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Bt,J]}],basis:[{basis:N()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",J]}],grow:[{grow:Q()}],shrink:[{shrink:Q()}],order:[{order:["first","last","none",Bt,J]}],"grid-cols":[{"grid-cols":[Ht]}],"col-start-end":[{col:["auto",{span:["full",Bt,J]},J]}],"col-start":[{"col-start":_()}],"col-end":[{"col-end":_()}],"grid-rows":[{"grid-rows":[Ht]}],"row-start-end":[{row:["auto",{span:[Bt,J]},J]}],"row-start":[{"row-start":_()}],"row-end":[{"row-end":_()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",J]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",J]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...B()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...B(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...B(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[p]}],mx:[{mx:[p]}],my:[{my:[p]}],ms:[{ms:[p]}],me:[{me:[p]}],mt:[{mt:[p]}],mr:[{mr:[p]}],mb:[{mb:[p]}],ml:[{ml:[p]}],"space-x":[{"space-x":[I]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[I]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",J,s]}],"min-w":[{"min-w":[J,s,"min","max","fit"]}],"max-w":[{"max-w":[J,s,"none","full","min","max","fit","prose",{screen:[tt]},tt]}],h:[{h:[J,s,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[J,s,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[J,s,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[J,s,"auto","min","max","fit"]}],"font-size":[{text:["base",tt,et]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",rr]}],"font-family":[{font:[Ht]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",J]}],"line-clamp":[{"line-clamp":["none",Pt,rr]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ke,J]}],"list-image":[{"list-image":["none",J]}],"list-style-type":[{list:["none","disc","decimal",J]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...q(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ke,et]}],"underline-offset":[{"underline-offset":["auto",Ke,J]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:C()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",J]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",J]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...O(),nm]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",am]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},im]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[g]}],"gradient-via-pos":[{via:[g]}],"gradient-to-pos":[{to:[g]}],"gradient-from":[{from:[b]}],"gradient-via":[{via:[b]}],"gradient-to":[{to:[b]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[c]}],"border-w-x":[{"border-x":[c]}],"border-w-y":[{"border-y":[c]}],"border-w-s":[{"border-s":[c]}],"border-w-e":[{"border-e":[c]}],"border-w-t":[{"border-t":[c]}],"border-w-r":[{"border-r":[c]}],"border-w-b":[{"border-b":[c]}],"border-w-l":[{"border-l":[c]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[...q(),"hidden"]}],"divide-x":[{"divide-x":[c]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[c]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:q()}],"border-color":[{border:[n]}],"border-color-x":[{"border-x":[n]}],"border-color-y":[{"border-y":[n]}],"border-color-s":[{"border-s":[n]}],"border-color-e":[{"border-e":[n]}],"border-color-t":[{"border-t":[n]}],"border-color-r":[{"border-r":[n]}],"border-color-b":[{"border-b":[n]}],"border-color-l":[{"border-l":[n]}],"divide-color":[{divide:[n]}],"outline-style":[{outline:["",...q()]}],"outline-offset":[{"outline-offset":[Ke,J]}],"outline-w":[{outline:[Ke,et]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:W()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[Ke,et]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",tt,lm]}],"shadow-color":[{shadow:[Ht]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":[...z(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":z()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[a]}],contrast:[{contrast:[d]}],"drop-shadow":[{"drop-shadow":["","none",tt,J]}],grayscale:[{grayscale:[m]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[f]}],saturate:[{saturate:[P]}],sepia:[{sepia:[E]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[a]}],"backdrop-contrast":[{"backdrop-contrast":[d]}],"backdrop-grayscale":[{"backdrop-grayscale":[m]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[P]}],"backdrop-sepia":[{"backdrop-sepia":[E]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[l]}],"border-spacing-x":[{"border-spacing-x":[l]}],"border-spacing-y":[{"border-spacing-y":[l]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",J]}],duration:[{duration:se()}],ease:[{ease:["linear","in","out","in-out",J]}],delay:[{delay:se()}],animate:[{animate:["none","spin","ping","pulse","bounce",J]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[j]}],"scale-x":[{"scale-x":[j]}],"scale-y":[{"scale-y":[j]}],rotate:[{rotate:[Bt,J]}],"translate-x":[{"translate-x":[U]}],"translate-y":[{"translate-y":[U]}],"skew-x":[{"skew-x":[S]}],"skew-y":[{"skew-y":[S]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",J]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",J]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":C()}],"scroll-mx":[{"scroll-mx":C()}],"scroll-my":[{"scroll-my":C()}],"scroll-ms":[{"scroll-ms":C()}],"scroll-me":[{"scroll-me":C()}],"scroll-mt":[{"scroll-mt":C()}],"scroll-mr":[{"scroll-mr":C()}],"scroll-mb":[{"scroll-mb":C()}],"scroll-ml":[{"scroll-ml":C()}],"scroll-p":[{"scroll-p":C()}],"scroll-px":[{"scroll-px":C()}],"scroll-py":[{"scroll-py":C()}],"scroll-ps":[{"scroll-ps":C()}],"scroll-pe":[{"scroll-pe":C()}],"scroll-pt":[{"scroll-pt":C()}],"scroll-pr":[{"scroll-pr":C()}],"scroll-pb":[{"scroll-pb":C()}],"scroll-pl":[{"scroll-pl":C()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",J]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Ke,et,rr]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},hm=Yu(mm);function T(...t){return hm(xo(t))}const fm=mo,Mo=i.forwardRef(({className:t,...s},r)=>e.jsx(Xr,{ref:r,className:T("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...s}));Mo.displayName=Xr.displayName;const pm=_t("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Ao=i.forwardRef(({className:t,variant:s,...r},a)=>e.jsx(Zr,{ref:a,className:T(pm({variant:s}),t),...r}));Ao.displayName=Zr.displayName;const xm=i.forwardRef(({className:t,...s},r)=>e.jsx(ea,{ref:r,className:T("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...s}));xm.displayName=ea.displayName;const Io=i.forwardRef(({className:t,...s},r)=>e.jsx(ta,{ref:r,className:T("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...s,children:e.jsx(ze,{className:"h-4 w-4"})}));Io.displayName=ta.displayName;const Do=i.forwardRef(({className:t,...s},r)=>e.jsx(ho,{ref:r,className:T("text-sm font-semibold",t),...s}));Do.displayName=ho.displayName;const Oo=i.forwardRef(({className:t,...s},r)=>e.jsx(fo,{ref:r,className:T("text-sm opacity-90",t),...s}));Oo.displayName=fo.displayName;function gm(){const{toasts:t}=ct();return e.jsxs(fm,{children:[t.map(function({id:s,title:r,description:a,action:n,...o}){return e.jsxs(Ao,{...o,children:[e.jsxs("div",{className:"grid gap-1",children:[r&&e.jsx(Do,{children:r}),a&&e.jsx(Oo,{children:a})]}),n,e.jsx(Io,{})]},s)}),e.jsx(Mo,{})]})}const vm=5,bm=1e3,ym=5e3;let ar=0;function jm(){return ar=(ar+1)%Number.MAX_SAFE_INTEGER,ar.toString()}const nr=new Map,Ct=new Map,Za=t=>{if(nr.has(t))return;const s=setTimeout(()=>{nr.delete(t),Et({type:"REMOVE_NOTIFICATION",notificationId:t})},bm);nr.set(t,s)},wm=t=>{const s=setTimeout(()=>{Ct.delete(t),Et({type:"DISMISS_NOTIFICATION",notificationId:t})},ym);Ct.set(t,s)},Nm=(t,s)=>{switch(s.type){case"ADD_NOTIFICATION":return{...t,notifications:[s.notification,...t.notifications].slice(0,vm)};case"UPDATE_NOTIFICATION":return{...t,notifications:t.notifications.map(r=>r.id===s.notification.id?{...r,...s.notification}:r)};case"DISMISS_NOTIFICATION":{const{notificationId:r}=s;if(r){Za(r);const a=Ct.get(r);a&&(clearTimeout(a),Ct.delete(r))}else t.notifications.forEach(a=>{Za(a.id);const n=Ct.get(a.id);n&&(clearTimeout(n),Ct.delete(a.id))});return{...t,notifications:t.notifications.map(a=>a.id===r||r===void 0?{...a,open:!1}:a)}}case"REMOVE_NOTIFICATION":return s.notificationId===void 0?{...t,notifications:[]}:{...t,notifications:t.notifications.filter(r=>r.id!==s.notificationId)}}},ys=[];let js={notifications:[]};function Et(t){js=Nm(js,t),ys.forEach(s=>{s(js)})}function Ls({...t}){const s=jm(),r=n=>Et({type:"UPDATE_NOTIFICATION",notification:{...n,id:s}}),a=()=>Et({type:"DISMISS_NOTIFICATION",notificationId:s});return Et({type:"ADD_NOTIFICATION",notification:{...t,id:s,open:!0,onOpenChange:n=>{n||a()}}}),wm(s),{id:s,dismiss:a,update:r}}function Fo(){const[t,s]=i.useState(js);return i.useEffect(()=>(ys.push(s),()=>{const r=ys.indexOf(s);r>-1&&ys.splice(r,1)}),[t]),{...t,showNotification:Ls,dismiss:r=>Et({type:"DISMISS_NOTIFICATION",notificationId:r})}}function Sm(t,s,r,a){return Ls({type:"profile_view",fromUserName:t,fromUserPhoto:s,fromUserId:r,notificationId:a,title:"Profile view",description:`${t} viewed your profile.`})}function Cm(t,s,r,a){return Ls({type:"message_received",fromUserName:t,fromUserPhoto:s,fromUserId:r,notificationId:a,title:"New message",description:`${t} sent you a message.`})}function km(t,s,r,a){return Ls({type:"profile_like",fromUserName:t,fromUserPhoto:s,fromUserId:r,notificationId:a,title:"Profile like",description:`${t} liked your profile.`})}function Pm(){return En.useSyncExternalStore(Em,()=>!0,()=>!1)}function Em(){return()=>{}}var na="Avatar",[Rm]=We(na),[Tm,Lo]=Rm(na),_o=i.forwardRef((t,s)=>{const{__scopeAvatar:r,...a}=t,[n,o]=i.useState("idle");return e.jsx(Tm,{scope:r,imageLoadingStatus:n,onImageLoadingStatusChange:o,children:e.jsx(G.span,{...a,ref:s})})});_o.displayName=na;var qo="AvatarImage",$o=i.forwardRef((t,s)=>{const{__scopeAvatar:r,src:a,onLoadingStatusChange:n=()=>{},...o}=t,l=Lo(qo,r),c=Mm(a,o),d=Te(m=>{n(m),l.onImageLoadingStatusChange(m)});return es(()=>{c!=="idle"&&d(c)},[c,d]),c==="loaded"?e.jsx(G.img,{...o,ref:s,src:a}):null});$o.displayName=qo;var zo="AvatarFallback",Uo=i.forwardRef((t,s)=>{const{__scopeAvatar:r,delayMs:a,...n}=t,o=Lo(zo,r),[l,c]=i.useState(a===void 0);return i.useEffect(()=>{if(a!==void 0){const d=window.setTimeout(()=>c(!0),a);return()=>window.clearTimeout(d)}},[a]),l&&o.imageLoadingStatus!=="loaded"?e.jsx(G.span,{...n,ref:s}):null});Uo.displayName=zo;function en(t,s){return t?s?(t.src!==s&&(t.src=s),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function Mm(t,{referrerPolicy:s,crossOrigin:r}){const a=Pm(),n=i.useRef(null),o=a?(n.current||(n.current=new window.Image),n.current):null,[l,c]=i.useState(()=>en(o,t));return es(()=>{c(en(o,t))},[o,t]),es(()=>{const d=f=>()=>{c(f)};if(!o)return;const m=d("loaded"),u=d("error");return o.addEventListener("load",m),o.addEventListener("error",u),s&&(o.referrerPolicy=s),typeof r=="string"&&(o.crossOrigin=r),()=>{o.removeEventListener("load",m),o.removeEventListener("error",u)}},[o,r,s]),l}var Wo=_o,Vo=$o,Bo=Uo;const fe=i.forwardRef(({className:t,...s},r)=>e.jsx(Wo,{ref:r,className:T("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...s}));fe.displayName=Wo.displayName;const pe=i.forwardRef(({className:t,...s},r)=>e.jsx(Vo,{ref:r,className:T("aspect-square h-full w-full object-cover",t),...s}));pe.displayName=Vo.displayName;const xe=i.forwardRef(({className:t,...s},r)=>e.jsx(Bo,{ref:r,className:T("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...s}));xe.displayName=Bo.displayName;const Am=mo,Ho=i.forwardRef(({className:t,...s},r)=>e.jsx(Xr,{ref:r,className:T("fixed top-4 left-1/2 -translate-x-1/2 z-[200] flex max-h-screen w-full max-w-sm flex-col gap-2 p-4",t),...s}));Ho.displayName="NotificationViewport";const Im=_t("group pointer-events-auto relative flex w-full items-center space-x-4 overflow-hidden rounded-2xl border-2 p-5 shadow-2xl backdrop-blur-xl transition-all duration-300 cursor-pointer hover:scale-[1.03] hover:shadow-3xl active:scale-[0.97] data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-top-full data-[state=open]:slide-in-from-top-full data-[state=open]:zoom-in-95 data-[state=closed]:zoom-out-95",{variants:{variant:{default:"border-border bg-background/95 text-foreground",profile_view:"border-blue-400/50 bg-gradient-to-r from-blue-950/90 to-blue-900/80 backdrop-blur-xl shadow-blue-500/20",message_received:"border-green-400/50 bg-gradient-to-r from-green-950/90 to-green-900/80 backdrop-blur-xl shadow-green-500/20",profile_like:"border-red-400/50 bg-gradient-to-r from-red-950/90 to-red-900/80 backdrop-blur-xl shadow-red-500/20"}},defaultVariants:{variant:"default"}}),Ko=i.forwardRef(({className:t,variant:s,...r},a)=>e.jsx(Zr,{ref:a,className:T(Im({variant:s}),t),...r}));Ko.displayName="NotificationToast";const Dm=i.forwardRef(({className:t,...s},r)=>e.jsx(ea,{ref:r,className:T("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-xs font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",t),...s}));Dm.displayName="NotificationAction";const Yo=i.forwardRef(({className:t,...s},r)=>e.jsx(ta,{ref:r,className:T("absolute right-2 top-2 rounded-full p-1.5 text-foreground/50 opacity-0 transition-all hover:text-foreground hover:bg-background/20 focus:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring group-hover:opacity-100",t),...s,children:e.jsx(ze,{className:"h-3 w-3"})}));Yo.displayName="NotificationClose";const Go=i.forwardRef(({className:t,type:s,fromUserPhoto:r,fromUserName:a,...n},o)=>{const l=s==="profile_view"?jt:s==="message_received"?Qe:ge,c=a.split(" ").map(u=>u[0]).join("").toUpperCase();console.log("NotificationIcon render:",{type:s,fromUserName:a,fromUserPhoto:r,initials:c});const d=()=>s==="profile_view"?"bg-gradient-to-br from-blue-500 to-blue-600":s==="message_received"?"bg-gradient-to-br from-green-500 to-green-600":"bg-gradient-to-br from-red-500 to-red-600",m=()=>s==="profile_view"?"border-blue-300 shadow-lg shadow-blue-500/30":s==="message_received"?"border-green-300 shadow-lg shadow-green-500/30":"border-red-300 shadow-lg shadow-red-500/30";return e.jsx("div",{ref:o,className:T("flex h-10 w-10 shrink-0",t),...n,children:r?e.jsxs(fe,{className:"h-10 w-10",children:[e.jsx(pe,{src:r,alt:a}),e.jsx(xe,{className:T("text-white font-semibold",d()),children:c})]}):e.jsx("div",{className:T("flex h-10 w-10 items-center justify-center rounded-full",d(),`border-2 ${m()}`),children:e.jsx(l,{className:"h-5 w-5 text-white"})})})});Go.displayName="NotificationIcon";const Qo=i.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:T("flex-1 space-y-1",t),...s}));Qo.displayName="NotificationContent";const Jo=i.forwardRef(({className:t,...s},r)=>e.jsx("p",{ref:r,className:T("text-base font-bold leading-none text-white tracking-wide",t),...s}));Jo.displayName="NotificationTitle";const Xo=i.forwardRef(({className:t,...s},r)=>e.jsx("p",{ref:r,className:T("text-sm text-gray-200/90 mt-1.5",t),...s}));Xo.displayName="NotificationDescription";function Om(){const{notifications:t,dismiss:s}=Fo(),[,r]=de(),a=async o=>{try{await fetch(`/api/notifications/mark-read/${o}`,{method:"POST"}),window.dispatchEvent(new CustomEvent("notificationRead"))}catch(l){console.error("Failed to mark notification as read:",l)}},n=async o=>{o.notificationId&&await a(o.notificationId),s(o.id),o.type==="profile_view"&&o.fromUserId?r(`/profile/${o.fromUserId}`):o.type==="message_received"&&o.fromUserId?r(`/chat/${o.fromUserId}`):o.type==="profile_like"&&o.fromUserId&&r(`/profile/${o.fromUserId}`)};return e.jsxs(Am,{children:[t.map(o=>e.jsxs(Ko,{variant:o.type,open:o.open,onOpenChange:o.onOpenChange,className:"cursor-pointer hover:shadow-xl transition-shadow duration-200",onClick:()=>n(o),children:[e.jsx(Go,{type:o.type,fromUserPhoto:o.fromUserPhoto,fromUserName:o.fromUserName}),e.jsxs(Qo,{children:[e.jsx(Jo,{children:o.title}),o.description&&e.jsx(Xo,{children:o.description})]}),e.jsx(Yo,{})]},o.id)),e.jsx(Ho,{})]})}var[_s]=We("Tooltip",[Ms]),oa=Ms(),Zo="TooltipProvider",Fm=700,tn="tooltip.open",[Lm,ei]=_s(Zo),ti=t=>{const{__scopeTooltip:s,delayDuration:r=Fm,skipDelayDuration:a=300,disableHoverableContent:n=!1,children:o}=t,l=i.useRef(!0),c=i.useRef(!1),d=i.useRef(0);return i.useEffect(()=>{const m=d.current;return()=>window.clearTimeout(m)},[]),e.jsx(Lm,{scope:s,isOpenDelayedRef:l,delayDuration:r,onOpen:i.useCallback(()=>{window.clearTimeout(d.current),l.current=!1},[]),onClose:i.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>l.current=!0,a)},[a]),isPointerInTransitRef:c,onPointerInTransitChange:i.useCallback(m=>{c.current=m},[]),disableHoverableContent:n,children:o})};ti.displayName=Zo;var si="Tooltip",[Kx,qs]=_s(si),Cr="TooltipTrigger",_m=i.forwardRef((t,s)=>{const{__scopeTooltip:r,...a}=t,n=qs(Cr,r),o=ei(Cr,r),l=oa(r),c=i.useRef(null),d=ce(s,c,n.onTriggerChange),m=i.useRef(!1),u=i.useRef(!1),f=i.useCallback(()=>m.current=!1,[]);return i.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),e.jsx(Or,{asChild:!0,...l,children:e.jsx(G.button,{"aria-describedby":n.open?n.contentId:void 0,"data-state":n.stateAttribute,...a,ref:d,onPointerMove:Y(t.onPointerMove,h=>{h.pointerType!=="touch"&&!u.current&&!o.isPointerInTransitRef.current&&(n.onTriggerEnter(),u.current=!0)}),onPointerLeave:Y(t.onPointerLeave,()=>{n.onTriggerLeave(),u.current=!1}),onPointerDown:Y(t.onPointerDown,()=>{n.open&&n.onClose(),m.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:Y(t.onFocus,()=>{m.current||n.onOpen()}),onBlur:Y(t.onBlur,n.onClose),onClick:Y(t.onClick,n.onClose)})})});_m.displayName=Cr;var qm="TooltipPortal",[Yx,$m]=_s(qm,{forceMount:void 0}),At="TooltipContent",ri=i.forwardRef((t,s)=>{const r=$m(At,t.__scopeTooltip),{forceMount:a=r.forceMount,side:n="top",...o}=t,l=qs(At,t.__scopeTooltip);return e.jsx(_e,{present:a||l.open,children:l.disableHoverableContent?e.jsx(ai,{side:n,...o,ref:s}):e.jsx(zm,{side:n,...o,ref:s})})}),zm=i.forwardRef((t,s)=>{const r=qs(At,t.__scopeTooltip),a=ei(At,t.__scopeTooltip),n=i.useRef(null),o=ce(s,n),[l,c]=i.useState(null),{trigger:d,onClose:m}=r,u=n.current,{onPointerInTransitChange:f}=a,h=i.useCallback(()=>{c(null),f(!1)},[f]),b=i.useCallback((g,v)=>{const p=g.currentTarget,x={x:g.clientX,y:g.clientY},y=Hm(x,p.getBoundingClientRect()),P=Km(x,y),j=Ym(v.getBoundingClientRect()),E=Qm([...P,...j]);c(E),f(!0)},[f]);return i.useEffect(()=>()=>h(),[h]),i.useEffect(()=>{if(d&&u){const g=p=>b(p,u),v=p=>b(p,d);return d.addEventListener("pointerleave",g),u.addEventListener("pointerleave",v),()=>{d.removeEventListener("pointerleave",g),u.removeEventListener("pointerleave",v)}}},[d,u,b,h]),i.useEffect(()=>{if(l){const g=v=>{const p=v.target,x={x:v.clientX,y:v.clientY},y=d?.contains(p)||u?.contains(p),P=!Gm(x,l);y?h():P&&(h(),m())};return document.addEventListener("pointermove",g),()=>document.removeEventListener("pointermove",g)}},[d,u,l,m,h]),e.jsx(ai,{...t,ref:o})}),[Um,Wm]=_s(si,{isInside:!1}),Vm=vc("TooltipContent"),ai=i.forwardRef((t,s)=>{const{__scopeTooltip:r,children:a,"aria-label":n,onEscapeKeyDown:o,onPointerDownOutside:l,...c}=t,d=qs(At,r),m=oa(r),{onClose:u}=d;return i.useEffect(()=>(document.addEventListener(tn,u),()=>document.removeEventListener(tn,u)),[u]),i.useEffect(()=>{if(d.trigger){const f=h=>{h.target?.contains(d.trigger)&&u()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[d.trigger,u]),e.jsx(fn,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:f=>f.preventDefault(),onDismiss:u,children:e.jsxs(pn,{"data-state":d.stateAttribute,...m,...c,ref:s,style:{...c.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[e.jsx(Vm,{children:a}),e.jsx(Um,{scope:r,isInside:!0,children:e.jsx(bc,{id:d.contentId,role:"tooltip",children:n||a})})]})})});ri.displayName=At;var ni="TooltipArrow",Bm=i.forwardRef((t,s)=>{const{__scopeTooltip:r,...a}=t,n=oa(r);return Wm(ni,r).isInside?null:e.jsx(xn,{...n,...a,ref:s})});Bm.displayName=ni;function Hm(t,s){const r=Math.abs(s.top-t.y),a=Math.abs(s.bottom-t.y),n=Math.abs(s.right-t.x),o=Math.abs(s.left-t.x);switch(Math.min(r,a,n,o)){case o:return"left";case n:return"right";case r:return"top";case a:return"bottom";default:throw new Error("unreachable")}}function Km(t,s,r=5){const a=[];switch(s){case"top":a.push({x:t.x-r,y:t.y+r},{x:t.x+r,y:t.y+r});break;case"bottom":a.push({x:t.x-r,y:t.y-r},{x:t.x+r,y:t.y-r});break;case"left":a.push({x:t.x+r,y:t.y-r},{x:t.x+r,y:t.y+r});break;case"right":a.push({x:t.x-r,y:t.y-r},{x:t.x-r,y:t.y+r});break}return a}function Ym(t){const{top:s,right:r,bottom:a,left:n}=t;return[{x:n,y:s},{x:r,y:s},{x:r,y:a},{x:n,y:a}]}function Gm(t,s){const{x:r,y:a}=t;let n=!1;for(let o=0,l=s.length-1;o<s.length;l=o++){const c=s[o],d=s[l],m=c.x,u=c.y,f=d.x,h=d.y;u>a!=h>a&&r<(f-m)*(a-u)/(h-u)+m&&(n=!n)}return n}function Qm(t){const s=t.slice();return s.sort((r,a)=>r.x<a.x?-1:r.x>a.x?1:r.y<a.y?-1:r.y>a.y?1:0),Jm(s)}function Jm(t){if(t.length<=1)return t.slice();const s=[];for(let a=0;a<t.length;a++){const n=t[a];for(;s.length>=2;){const o=s[s.length-1],l=s[s.length-2];if((o.x-l.x)*(n.y-l.y)>=(o.y-l.y)*(n.x-l.x))s.pop();else break}s.push(n)}s.pop();const r=[];for(let a=t.length-1;a>=0;a--){const n=t[a];for(;r.length>=2;){const o=r[r.length-1],l=r[r.length-2];if((o.x-l.x)*(n.y-l.y)>=(o.y-l.y)*(n.x-l.x))r.pop();else break}r.push(n)}return r.pop(),s.length===1&&r.length===1&&s[0].x===r[0].x&&s[0].y===r[0].y?s:s.concat(r)}var Xm=ti,oi=ri;const Zm=Xm,eh=i.forwardRef(({className:t,sideOffset:s=4,...r},a)=>e.jsx(oi,{ref:a,sideOffset:s,className:T("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",t),...r}));eh.displayName=oi.displayName;const th=[{label:"Discover",icon:ra,path:"/discover"},{label:"Messages",icon:Qe,path:"/messages",hasCounter:!0,counterType:"messages"},{label:"Notifications",icon:st,path:"/notifications",hasCounter:!0,counterType:"notifications"},{label:"Profile",icon:jt,path:"/profile"}];function sh({isActive:t,unreadCount:s}){return e.jsxs("div",{className:"relative",children:[e.jsx(st,{className:T("h-5 w-5 transition-all duration-200",t?"scale-110":"scale-100")}),s>0&&e.jsx("div",{className:"absolute -top-2 -right-2 h-5 w-5 bg-primary rounded-full flex items-center justify-center min-w-[20px] shadow-lg",children:e.jsx("span",{className:"text-xs font-bold text-primary-foreground leading-none",children:s>99?"99+":s})})]})}function rh({isActive:t,unreadCount:s}){return e.jsxs("div",{className:"relative",children:[e.jsx(Qe,{className:T("h-5 w-5 transition-all duration-200",t?"scale-110":"scale-100")}),s>0&&e.jsx("div",{className:"absolute -top-2 -right-2 h-5 w-5 bg-primary rounded-full flex items-center justify-center min-w-[20px] shadow-lg",children:e.jsx("span",{className:"text-xs font-bold text-primary-foreground leading-none",children:s>99?"99+":s})})]})}function ah(){const[t]=de(),s=Ve(),{data:r}=it({queryKey:["/api/notifications/unread-count"],queryFn:Cs({on401:"returnNull"}),refetchInterval:3e4}),{data:a}=it({queryKey:["/api/messages/unread-count"],queryFn:Cs({on401:"returnNull"}),refetchInterval:3e4}),n=r?.count||0,o=a?.count||0;return i.useEffect(()=>{const l=()=>{s.invalidateQueries({queryKey:["/api/notifications/unread-count"]})},c=()=>{s.invalidateQueries({queryKey:["/api/messages/unread-count"]})};return window.addEventListener("notificationReceived",l),window.addEventListener("notificationRead",l),window.addEventListener("messageReceived",c),window.addEventListener("messageRead",c),()=>{window.removeEventListener("notificationReceived",l),window.removeEventListener("notificationRead",l),window.removeEventListener("messageReceived",c),window.removeEventListener("messageRead",c)}},[s]),e.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-background/95 backdrop-blur-md border-t border-border/50 z-50 supports-[backdrop-filter]:bg-background/80",style:{paddingBottom:"env(safe-area-inset-bottom)",marginBottom:"0",WebkitBackdropFilter:"blur(12px)"},children:e.jsx("div",{className:"flex items-center justify-around max-w-screen-xl mx-auto px-2 sm:px-4",children:th.map(l=>{const c=t===l.path||l.path==="/"&&t==="/"||l.path!=="/"&&t.startsWith(l.path);return e.jsxs(Ln,{href:l.path,className:T("flex flex-col items-center justify-center gap-1 min-w-0 flex-1 py-3 px-2 rounded-lg transition-all duration-200",c?"text-primary bg-primary/10":"text-muted-foreground hover:text-foreground hover:bg-accent/50"),children:[l.hasCounter?l.counterType==="messages"?e.jsx(rh,{isActive:c,unreadCount:o}):e.jsx(sh,{isActive:c,unreadCount:n}):e.jsx(l.icon,{className:T("h-5 w-5 sm:h-6 sm:w-6 transition-all duration-200",c?"scale-110":"scale-100")}),e.jsx("span",{className:T("text-[10px] sm:text-xs font-medium leading-tight",c?"text-primary font-semibold":"text-muted-foreground"),children:l.label})]},l.path)})})})}const nh=_t("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),L=i.forwardRef(({className:t,variant:s,size:r,asChild:a=!1,...n},o)=>{const l=a?yc:"button";return e.jsx(l,{className:T(nh({variant:s,size:r,className:t})),ref:o,...n})});L.displayName="Button";function oh(){const[,t]=de();return e.jsxs("div",{className:"min-h-screen w-full flex items-center justify-center bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 dark:from-gray-900 dark:via-gray-800 dark:to-slate-900 px-4 py-8",children:[e.jsxs("div",{className:"max-w-2xl w-full text-center",children:[e.jsx("div",{className:"mb-8 flex justify-center",children:e.jsxs("div",{className:"relative",children:[e.jsxs("svg",{className:"w-full max-w-md h-auto animate-float",viewBox:"0 0 400 200",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"gradient1",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#3b82f6"}),e.jsx("stop",{offset:"100%",stopColor:"#8b5cf6"})]}),e.jsxs("linearGradient",{id:"gradient2",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"#8b5cf6"}),e.jsx("stop",{offset:"100%",stopColor:"#ec4899"})]})]}),e.jsx("circle",{cx:"100",cy:"100",r:"60",fill:"url(#gradient1)",opacity:"0.1",className:"animate-pulse"}),e.jsx("circle",{cx:"300",cy:"100",r:"60",fill:"url(#gradient2)",opacity:"0.1",className:"animate-pulse",style:{animationDelay:"0.5s"}}),e.jsx("text",{x:"200",y:"130",fontSize:"120",fontWeight:"800",textAnchor:"middle",fill:"url(#gradient1)",className:"font-bold",children:"404"}),e.jsx("circle",{cx:"80",cy:"60",r:"8",fill:"#3b82f6",className:"animate-bounce"}),e.jsx("circle",{cx:"320",cy:"140",r:"6",fill:"#8b5cf6",className:"animate-bounce",style:{animationDelay:"0.3s"}}),e.jsx("circle",{cx:"200",cy:"40",r:"5",fill:"#ec4899",className:"animate-bounce",style:{animationDelay:"0.6s"}})]}),e.jsx("div",{className:"absolute -top-6 -right-6 animate-bounce-slow",children:e.jsx("img",{src:"/android-chrome-192x192.png",alt:"SpreadLov",className:"w-12 h-12 rounded-lg shadow-lg",width:"192",height:"192"})})]})}),e.jsx("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent mb-4 animate-fade-in",children:"Page Not Found"}),e.jsx("p",{className:"text-lg md:text-xl text-gray-700 dark:text-gray-300 mb-2 max-w-lg mx-auto animate-fade-in-delay",children:"Oops! The page you're looking for doesn't exist."}),e.jsx("p",{className:"text-base md:text-lg text-gray-600 dark:text-gray-400 mb-10 animate-fade-in-delay-2",children:"It might have been moved or deleted."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center animate-fade-in-delay-3",children:[e.jsxs(L,{onClick:()=>t("/"),size:"lg",className:"group w-full sm:w-auto bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-semibold px-8 py-6 text-lg shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",children:[e.jsx(Su,{className:"h-5 w-5 mr-2 group-hover:rotate-12 transition-transform duration-300"}),"Go Home"]}),e.jsxs(L,{onClick:()=>window.history.back(),size:"lg",className:"group w-full sm:w-auto bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-semibold px-8 py-6 text-lg shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",children:[e.jsx(Le,{className:"h-5 w-5 mr-2 group-hover:-translate-x-1 transition-transform duration-300"}),"Go Back"]})]}),e.jsx("div",{className:"mt-16 animate-fade-in-delay-4",children:e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500",children:"Lost? Let's get you back on track "})})]}),e.jsx("style",{children:`
        @keyframes float {
          0%, 100% {
            transform: translateY(0px);
          }
          50% {
            transform: translateY(-20px);
          }
        }

        @keyframes bounce-slow {
          0%, 100% {
            transform: translateY(0px);
          }
          50% {
            transform: translateY(-15px);
          }
        }

        @keyframes fade-in {
          from {
            opacity: 0;
            transform: translateY(20px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }

        .animate-float {
          animation: float 3s ease-in-out infinite;
        }

        .animate-bounce-slow {
          animation: bounce-slow 2s ease-in-out infinite;
        }

        .animate-fade-in {
          animation: fade-in 0.6s ease-out forwards;
        }

        .animate-fade-in-delay {
          animation: fade-in 0.6s ease-out 0.2s forwards;
          opacity: 0;
        }

        .animate-fade-in-delay-2 {
          animation: fade-in 0.6s ease-out 0.4s forwards;
          opacity: 0;
        }

        .animate-fade-in-delay-3 {
          animation: fade-in 0.6s ease-out 0.6s forwards;
          opacity: 0;
        }

        .animate-fade-in-delay-4 {
          animation: fade-in 0.6s ease-out 0.8s forwards;
          opacity: 0;
        }
      `})]})}const ii=i.createContext(null);function ih({children:t}){const{toast:s}=ct(),{data:r,error:a,isLoading:n}=it({queryKey:["/api/user"],queryFn:Cs({on401:"returnNull"})}),o=me({mutationFn:async d=>{const m=await fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d),credentials:"include"});if(!m.ok){const u=await m.json().catch(()=>({}));if(m.status===403&&u.requiresVerification){const f=new Error(u.message||"Email not verified. Please complete registration.");throw f.requiresVerification=!0,f.email=u.email,f}throw new Error(u.message||"Invalid username or password")}return await m.json()},onSuccess:d=>{rs.setQueryData(["/api/user"],d)},onError:d=>{s({title:"Login failed",description:d.message,variant:"destructive"})}}),l=me({mutationFn:async d=>{const m=await fetch("/api/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d),credentials:"include"});if(!m.ok){const f=await m.json().catch(()=>({}));throw new Error(f.message||"Registration failed")}return await m.json()},onSuccess:d=>{s({title:"Account created successfully!",description:"Please check your email for a verification code to complete your registration."})},onError:d=>{s({title:"Registration failed",description:d.message,variant:"destructive"})}}),c=me({mutationFn:async()=>{await Jn("POST","/api/logout")},onSuccess:()=>{rs.setQueryData(["/api/user"],null)},onError:d=>{s({title:"Logout failed",description:d.message,variant:"destructive"})}});return e.jsx(ii.Provider,{value:{user:r??null,isLoading:n,error:a,loginMutation:o,logoutMutation:c,registerMutation:l},children:t})}function be(){const t=i.useContext(ii);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t}const re=i.forwardRef(({className:t,type:s,...r},a)=>e.jsx("input",{type:s,className:T("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:a,...r}));re.displayName="Input";function lh(t,s){return i.useReducer((r,a)=>s[r][a]??r,t)}var ia="ScrollArea",[li]=We(ia),[ch,Me]=li(ia),ci=i.forwardRef((t,s)=>{const{__scopeScrollArea:r,type:a="hover",dir:n,scrollHideDelay:o=600,...l}=t,[c,d]=i.useState(null),[m,u]=i.useState(null),[f,h]=i.useState(null),[b,g]=i.useState(null),[v,p]=i.useState(null),[x,y]=i.useState(0),[P,j]=i.useState(0),[E,S]=i.useState(!1),[I,U]=i.useState(!1),D=ce(s,N=>d(N)),A=As(n);return e.jsx(ch,{scope:r,type:a,dir:A,scrollHideDelay:o,scrollArea:c,viewport:m,onViewportChange:u,content:f,onContentChange:h,scrollbarX:b,onScrollbarXChange:g,scrollbarXEnabled:E,onScrollbarXEnabledChange:S,scrollbarY:v,onScrollbarYChange:p,scrollbarYEnabled:I,onScrollbarYEnabledChange:U,onCornerWidthChange:y,onCornerHeightChange:j,children:e.jsx(G.div,{dir:A,...l,ref:D,style:{position:"relative","--radix-scroll-area-corner-width":x+"px","--radix-scroll-area-corner-height":P+"px",...t.style}})})});ci.displayName=ia;var di="ScrollAreaViewport",ui=i.forwardRef((t,s)=>{const{__scopeScrollArea:r,children:a,nonce:n,...o}=t,l=Me(di,r),c=i.useRef(null),d=ce(s,c,l.onViewportChange);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),e.jsx(G.div,{"data-radix-scroll-area-viewport":"",...o,ref:d,style:{overflowX:l.scrollbarXEnabled?"scroll":"hidden",overflowY:l.scrollbarYEnabled?"scroll":"hidden",...t.style},children:e.jsx("div",{ref:l.onContentChange,style:{minWidth:"100%",display:"table"},children:a})})]})});ui.displayName=di;var Be="ScrollAreaScrollbar",la=i.forwardRef((t,s)=>{const{forceMount:r,...a}=t,n=Me(Be,t.__scopeScrollArea),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:l}=n,c=t.orientation==="horizontal";return i.useEffect(()=>(c?o(!0):l(!0),()=>{c?o(!1):l(!1)}),[c,o,l]),n.type==="hover"?e.jsx(dh,{...a,ref:s,forceMount:r}):n.type==="scroll"?e.jsx(uh,{...a,ref:s,forceMount:r}):n.type==="auto"?e.jsx(mi,{...a,ref:s,forceMount:r}):n.type==="always"?e.jsx(ca,{...a,ref:s}):null});la.displayName=Be;var dh=i.forwardRef((t,s)=>{const{forceMount:r,...a}=t,n=Me(Be,t.__scopeScrollArea),[o,l]=i.useState(!1);return i.useEffect(()=>{const c=n.scrollArea;let d=0;if(c){const m=()=>{window.clearTimeout(d),l(!0)},u=()=>{d=window.setTimeout(()=>l(!1),n.scrollHideDelay)};return c.addEventListener("pointerenter",m),c.addEventListener("pointerleave",u),()=>{window.clearTimeout(d),c.removeEventListener("pointerenter",m),c.removeEventListener("pointerleave",u)}}},[n.scrollArea,n.scrollHideDelay]),e.jsx(_e,{present:r||o,children:e.jsx(mi,{"data-state":o?"visible":"hidden",...a,ref:s})})}),uh=i.forwardRef((t,s)=>{const{forceMount:r,...a}=t,n=Me(Be,t.__scopeScrollArea),o=t.orientation==="horizontal",l=zs(()=>d("SCROLL_END"),100),[c,d]=lh("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return i.useEffect(()=>{if(c==="idle"){const m=window.setTimeout(()=>d("HIDE"),n.scrollHideDelay);return()=>window.clearTimeout(m)}},[c,n.scrollHideDelay,d]),i.useEffect(()=>{const m=n.viewport,u=o?"scrollLeft":"scrollTop";if(m){let f=m[u];const h=()=>{const b=m[u];f!==b&&(d("SCROLL"),l()),f=b};return m.addEventListener("scroll",h),()=>m.removeEventListener("scroll",h)}},[n.viewport,o,d,l]),e.jsx(_e,{present:r||c!=="hidden",children:e.jsx(ca,{"data-state":c==="hidden"?"hidden":"visible",...a,ref:s,onPointerEnter:Y(t.onPointerEnter,()=>d("POINTER_ENTER")),onPointerLeave:Y(t.onPointerLeave,()=>d("POINTER_LEAVE"))})})}),mi=i.forwardRef((t,s)=>{const r=Me(Be,t.__scopeScrollArea),{forceMount:a,...n}=t,[o,l]=i.useState(!1),c=t.orientation==="horizontal",d=zs(()=>{if(r.viewport){const m=r.viewport.offsetWidth<r.viewport.scrollWidth,u=r.viewport.offsetHeight<r.viewport.scrollHeight;l(c?m:u)}},10);return It(r.viewport,d),It(r.content,d),e.jsx(_e,{present:a||o,children:e.jsx(ca,{"data-state":o?"visible":"hidden",...n,ref:s})})}),ca=i.forwardRef((t,s)=>{const{orientation:r="vertical",...a}=t,n=Me(Be,t.__scopeScrollArea),o=i.useRef(null),l=i.useRef(0),[c,d]=i.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),m=gi(c.viewport,c.content),u={...a,sizes:c,onSizesChange:d,hasThumb:m>0&&m<1,onThumbChange:h=>o.current=h,onThumbPointerUp:()=>l.current=0,onThumbPointerDown:h=>l.current=h};function f(h,b){return gh(h,l.current,c,b)}return r==="horizontal"?e.jsx(mh,{...u,ref:s,onThumbPositionChange:()=>{if(n.viewport&&o.current){const h=n.viewport.scrollLeft,b=sn(h,c,n.dir);o.current.style.transform=`translate3d(${b}px, 0, 0)`}},onWheelScroll:h=>{n.viewport&&(n.viewport.scrollLeft=h)},onDragScroll:h=>{n.viewport&&(n.viewport.scrollLeft=f(h,n.dir))}}):r==="vertical"?e.jsx(hh,{...u,ref:s,onThumbPositionChange:()=>{if(n.viewport&&o.current){const h=n.viewport.scrollTop,b=sn(h,c);o.current.style.transform=`translate3d(0, ${b}px, 0)`}},onWheelScroll:h=>{n.viewport&&(n.viewport.scrollTop=h)},onDragScroll:h=>{n.viewport&&(n.viewport.scrollTop=f(h))}}):null}),mh=i.forwardRef((t,s)=>{const{sizes:r,onSizesChange:a,...n}=t,o=Me(Be,t.__scopeScrollArea),[l,c]=i.useState(),d=i.useRef(null),m=ce(s,d,o.onScrollbarXChange);return i.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),e.jsx(fi,{"data-orientation":"horizontal",...n,ref:m,sizes:r,style:{bottom:0,left:o.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:o.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":$s(r)+"px",...t.style},onThumbPointerDown:u=>t.onThumbPointerDown(u.x),onDragScroll:u=>t.onDragScroll(u.x),onWheelScroll:(u,f)=>{if(o.viewport){const h=o.viewport.scrollLeft+u.deltaX;t.onWheelScroll(h),bi(h,f)&&u.preventDefault()}},onResize:()=>{d.current&&o.viewport&&l&&a({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:Rs(l.paddingLeft),paddingEnd:Rs(l.paddingRight)}})}})}),hh=i.forwardRef((t,s)=>{const{sizes:r,onSizesChange:a,...n}=t,o=Me(Be,t.__scopeScrollArea),[l,c]=i.useState(),d=i.useRef(null),m=ce(s,d,o.onScrollbarYChange);return i.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),e.jsx(fi,{"data-orientation":"vertical",...n,ref:m,sizes:r,style:{top:0,right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":$s(r)+"px",...t.style},onThumbPointerDown:u=>t.onThumbPointerDown(u.y),onDragScroll:u=>t.onDragScroll(u.y),onWheelScroll:(u,f)=>{if(o.viewport){const h=o.viewport.scrollTop+u.deltaY;t.onWheelScroll(h),bi(h,f)&&u.preventDefault()}},onResize:()=>{d.current&&o.viewport&&l&&a({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:Rs(l.paddingTop),paddingEnd:Rs(l.paddingBottom)}})}})}),[fh,hi]=li(Be),fi=i.forwardRef((t,s)=>{const{__scopeScrollArea:r,sizes:a,hasThumb:n,onThumbChange:o,onThumbPointerUp:l,onThumbPointerDown:c,onThumbPositionChange:d,onDragScroll:m,onWheelScroll:u,onResize:f,...h}=t,b=Me(Be,r),[g,v]=i.useState(null),p=ce(s,D=>v(D)),x=i.useRef(null),y=i.useRef(""),P=b.viewport,j=a.content-a.viewport,E=Te(u),S=Te(d),I=zs(f,10);function U(D){if(x.current){const A=D.clientX-x.current.left,N=D.clientY-x.current.top;m({x:A,y:N})}}return i.useEffect(()=>{const D=A=>{const N=A.target;g?.contains(N)&&E(A,j)};return document.addEventListener("wheel",D,{passive:!1}),()=>document.removeEventListener("wheel",D,{passive:!1})},[P,g,j,E]),i.useEffect(S,[a,S]),It(g,I),It(b.content,I),e.jsx(fh,{scope:r,scrollbar:g,hasThumb:n,onThumbChange:Te(o),onThumbPointerUp:Te(l),onThumbPositionChange:S,onThumbPointerDown:Te(c),children:e.jsx(G.div,{...h,ref:p,style:{position:"absolute",...h.style},onPointerDown:Y(t.onPointerDown,D=>{D.button===0&&(D.target.setPointerCapture(D.pointerId),x.current=g.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",b.viewport&&(b.viewport.style.scrollBehavior="auto"),U(D))}),onPointerMove:Y(t.onPointerMove,U),onPointerUp:Y(t.onPointerUp,D=>{const A=D.target;A.hasPointerCapture(D.pointerId)&&A.releasePointerCapture(D.pointerId),document.body.style.webkitUserSelect=y.current,b.viewport&&(b.viewport.style.scrollBehavior=""),x.current=null})})})}),Es="ScrollAreaThumb",pi=i.forwardRef((t,s)=>{const{forceMount:r,...a}=t,n=hi(Es,t.__scopeScrollArea);return e.jsx(_e,{present:r||n.hasThumb,children:e.jsx(ph,{ref:s,...a})})}),ph=i.forwardRef((t,s)=>{const{__scopeScrollArea:r,style:a,...n}=t,o=Me(Es,r),l=hi(Es,r),{onThumbPositionChange:c}=l,d=ce(s,f=>l.onThumbChange(f)),m=i.useRef(void 0),u=zs(()=>{m.current&&(m.current(),m.current=void 0)},100);return i.useEffect(()=>{const f=o.viewport;if(f){const h=()=>{if(u(),!m.current){const b=vh(f,c);m.current=b,c()}};return c(),f.addEventListener("scroll",h),()=>f.removeEventListener("scroll",h)}},[o.viewport,u,c]),e.jsx(G.div,{"data-state":l.hasThumb?"visible":"hidden",...n,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...a},onPointerDownCapture:Y(t.onPointerDownCapture,f=>{const b=f.target.getBoundingClientRect(),g=f.clientX-b.left,v=f.clientY-b.top;l.onThumbPointerDown({x:g,y:v})}),onPointerUp:Y(t.onPointerUp,l.onThumbPointerUp)})});pi.displayName=Es;var da="ScrollAreaCorner",xi=i.forwardRef((t,s)=>{const r=Me(da,t.__scopeScrollArea),a=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&a?e.jsx(xh,{...t,ref:s}):null});xi.displayName=da;var xh=i.forwardRef((t,s)=>{const{__scopeScrollArea:r,...a}=t,n=Me(da,r),[o,l]=i.useState(0),[c,d]=i.useState(0),m=!!(o&&c);return It(n.scrollbarX,()=>{const u=n.scrollbarX?.offsetHeight||0;n.onCornerHeightChange(u),d(u)}),It(n.scrollbarY,()=>{const u=n.scrollbarY?.offsetWidth||0;n.onCornerWidthChange(u),l(u)}),m?e.jsx(G.div,{...a,ref:s,style:{width:o,height:c,position:"absolute",right:n.dir==="ltr"?0:void 0,left:n.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function Rs(t){return t?parseInt(t,10):0}function gi(t,s){const r=t/s;return isNaN(r)?0:r}function $s(t){const s=gi(t.viewport,t.content),r=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,a=(t.scrollbar.size-r)*s;return Math.max(a,18)}function gh(t,s,r,a="ltr"){const n=$s(r),o=n/2,l=s||o,c=n-l,d=r.scrollbar.paddingStart+l,m=r.scrollbar.size-r.scrollbar.paddingEnd-c,u=r.content-r.viewport,f=a==="ltr"?[0,u]:[u*-1,0];return vi([d,m],f)(t)}function sn(t,s,r="ltr"){const a=$s(s),n=s.scrollbar.paddingStart+s.scrollbar.paddingEnd,o=s.scrollbar.size-n,l=s.content-s.viewport,c=o-a,d=r==="ltr"?[0,l]:[l*-1,0],m=Fr(t,d);return vi([0,l],[0,c])(m)}function vi(t,s){return r=>{if(t[0]===t[1]||s[0]===s[1])return s[0];const a=(s[1]-s[0])/(t[1]-t[0]);return s[0]+a*(r-t[0])}}function bi(t,s){return t>0&&t<s}var vh=(t,s=()=>{})=>{let r={left:t.scrollLeft,top:t.scrollTop},a=0;return(function n(){const o={left:t.scrollLeft,top:t.scrollTop},l=r.left!==o.left,c=r.top!==o.top;(l||c)&&s(),r=o,a=window.requestAnimationFrame(n)})(),()=>window.cancelAnimationFrame(a)};function zs(t,s){const r=Te(t),a=i.useRef(0);return i.useEffect(()=>()=>window.clearTimeout(a.current),[]),i.useCallback(()=>{window.clearTimeout(a.current),a.current=window.setTimeout(r,s)},[r,s])}function It(t,s){const r=Te(s);es(()=>{let a=0;if(t){const n=new ResizeObserver(()=>{cancelAnimationFrame(a),a=window.requestAnimationFrame(r)});return n.observe(t),()=>{window.cancelAnimationFrame(a),n.unobserve(t)}}},[t,r])}var yi=ci,bh=ui,yh=xi;const Ne=i.forwardRef(({className:t,children:s,...r},a)=>e.jsxs(yi,{ref:a,className:T("relative overflow-hidden",t),...r,children:[e.jsx(bh,{className:"h-full w-full rounded-[inherit]",children:s}),e.jsx(ji,{}),e.jsx(yh,{})]}));Ne.displayName=yi.displayName;const ji=i.forwardRef(({className:t,orientation:s="vertical",...r},a)=>e.jsx(la,{ref:a,orientation:s,className:T("flex touch-none select-none transition-colors",s==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",s==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...r,children:e.jsx(pi,{className:"relative flex-1 rounded-full bg-border"})}));ji.displayName=la.displayName;function jh({currentUser:t,selectedUser:s,onSelectUser:r,onOpenProfile:a}){const{logoutMutation:n}=be(),o=Ve(),[l,c]=i.useState(""),{data:d=[]}=it({queryKey:["/api/conversations"]}),{data:m=[]}=it({queryKey:["/api/users/online"],refetchInterval:3e4});i.useEffect(()=>{const h=()=>{o.invalidateQueries({queryKey:["/api/users/online"]}),o.invalidateQueries({queryKey:["/api/conversations"]})};return window.addEventListener("onlineStatusChanged",h),()=>window.removeEventListener("onlineStatusChanged",h)},[o]);const u=d.filter(h=>h.otherUser.firstName.toLowerCase().includes(l.toLowerCase())||h.otherUser.lastName.toLowerCase().includes(l.toLowerCase())||h.otherUser.username.toLowerCase().includes(l.toLowerCase())),f=h=>{const b=new Date,g=new Date(h),v=(b.getTime()-g.getTime())/(1e3*60*60);return v<24?g.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"}):v<168?g.toLocaleDateString("en-US",{weekday:"short"}):g.toLocaleDateString("en-US",{month:"short",day:"numeric"})};return e.jsxs("div",{className:"w-80 bg-card border-r border-border flex flex-col","data-testid":"sidebar",children:[e.jsx("div",{className:"p-4 border-b border-border",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(fe,{className:"relative",children:[e.jsx(pe,{src:t.profilePhoto||void 0}),e.jsxs(xe,{children:[t.firstName[0],t.lastName[0]]}),e.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-accent border-2 border-card rounded-full"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-sm","data-testid":"text-current-user-name",children:t.firstName}),e.jsx("p",{className:"text-xs text-accent",children:"Online"})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(L,{variant:"ghost",size:"sm",onClick:a,"data-testid":"button-profile-settings",children:e.jsx(wo,{className:"h-4 w-4"})}),e.jsx(L,{variant:"ghost",size:"sm",onClick:()=>n.mutate(),className:"text-destructive hover:text-destructive","data-testid":"button-logout",children:e.jsx(yo,{className:"h-4 w-4"})})]})]})}),e.jsx("div",{className:"p-4 border-b border-border",children:e.jsxs("div",{className:"relative",children:[e.jsx(ra,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(re,{placeholder:"Search conversations...",className:"pl-10",value:l,onChange:h=>c(h.target.value),"data-testid":"input-search-conversations"})]})}),e.jsx(Ne,{className:"flex-1",children:e.jsx("div",{className:"space-y-1 p-2",children:u.map(h=>e.jsx("div",{className:T("p-3 hover:bg-secondary cursor-pointer rounded-md transition-colors",s?.id===h.otherUser.id&&"bg-secondary border-l-2 border-primary"),onClick:()=>r(h.otherUser),"data-testid":`conversation-${h.otherUser.id}`,children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(fe,{className:"relative",children:[e.jsx(pe,{src:h.otherUser.profilePhoto||void 0}),e.jsxs(xe,{children:[h.otherUser.firstName[0],h.otherUser.lastName[0]]}),h.otherUser.isOnline&&e.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-accent border-2 border-card rounded-full"})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h4",{className:"font-medium text-sm truncate","data-testid":`text-user-name-${h.otherUser.id}`,children:[h.otherUser.firstName," ",h.otherUser.lastName]}),h.lastMessage&&e.jsx("span",{className:"text-xs text-muted-foreground","data-testid":`text-last-message-time-${h.otherUser.id}`,children:f(h.lastMessage.timestamp)})]}),h.lastMessage&&e.jsx("p",{className:"text-xs text-muted-foreground truncate","data-testid":`text-last-message-preview-${h.otherUser.id}`,children:h.lastMessage.imageUrl?" Photo":h.lastMessage.content})]})]})},h.id))})}),e.jsxs("div",{className:"border-t border-border p-4",children:[e.jsx("h5",{className:"text-sm font-medium text-muted-foreground mb-3",children:"Online Now"}),e.jsx("div",{className:"flex space-x-2 overflow-x-auto",children:m.map(h=>e.jsxs(fe,{className:"relative cursor-pointer hover:ring-2 hover:ring-primary transition-all flex-shrink-0",onClick:()=>r(h),"data-testid":`avatar-online-user-${h.id}`,children:[e.jsx(pe,{src:h.profilePhoto||void 0}),e.jsxs(xe,{children:[h.firstName[0],h.lastName[0]]}),e.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-accent border-2 border-card rounded-full"})]},h.id))})]})]})}const ua=i.forwardRef(({className:t,...s},r)=>e.jsx("textarea",{className:T("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...s}));ua.displayName="Textarea";const wi=i.createContext(null);function wh({children:t}){const{user:s}=be(),[r,a]=i.useState(null),[n,o]=i.useState(!1),[l,c]=i.useState([]),[d,m]=i.useState({}),u=i.useRef();Fo();const f=()=>{if(!s||r?.readyState===WebSocket.CONNECTING)return;const x=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/ws`,y=new WebSocket(x);y.onopen=()=>{o(!0),a(y)},y.onmessage=P=>{try{const j=JSON.parse(P.data);switch(j.type){case"newMessage":console.log("Received newMessage:",j),window.dispatchEvent(new CustomEvent("newMessage",{detail:j}));break;case"messageConfirmed":console.log("Received messageConfirmed:",j),window.dispatchEvent(new CustomEvent("messageConfirmed",{detail:j}));break;case"userTyping":m(S=>({...S,[j.userId]:j.isTyping})),j.isTyping&&setTimeout(()=>{m(S=>({...S,[j.userId]:!1}))},3e3);break;case"userOnline":case"userOffline":console.log(`[WebSocket] User ${j.userId} is now ${j.type==="userOnline"?"ONLINE":"OFFLINE"}`),window.dispatchEvent(new CustomEvent("onlineStatusChanged",{detail:{userId:j.userId,isOnline:j.type==="userOnline"}}));break;case"newNotification":const{notification:E}=j;console.log("Received notification:",E),E.type==="profile_view"?Sm(E.fromUserName,E.fromUserPhoto,E.fromUserId,E.id):E.type==="message_received"?Cm(E.fromUserName,E.fromUserPhoto,E.fromUserId,E.id):E.type==="profile_like"&&km(E.fromUserName,E.fromUserPhoto,E.fromUserId,E.id),window.dispatchEvent(new CustomEvent("notificationReceived"));break;case"consentRequest":console.log("Received consent request:",j),window.dispatchEvent(new CustomEvent("consentRequest",{detail:j}));break;case"consentPending":console.log("Received consent pending:",j),window.dispatchEvent(new CustomEvent("consentPending",{detail:j}));break;case"consentAccepted":console.log("Received consent accepted:",j),window.dispatchEvent(new CustomEvent("consentAccepted",{detail:j}));break;case"consentRejected":console.log("Received consent rejected:",j),window.dispatchEvent(new CustomEvent("consentRejected",{detail:j}));break;case"messageNotificationsRead":console.log("Message notifications marked as read from user:",j.fromUserId),window.dispatchEvent(new CustomEvent("messageRead"));break;case"messageCountUpdate":console.log("Message count update:",j.action),j.action==="increment"&&window.dispatchEvent(new CustomEvent("messageReceived"));break;case"notificationCountUpdate":console.log("Notification count update:",j.action),j.action==="increment"&&window.dispatchEvent(new CustomEvent("notificationReceived"));break}}catch(j){console.error("Error parsing WebSocket message:",j)}},y.onclose=()=>{o(!1),a(null),s&&(u.current=setTimeout(f,3e3))},y.onerror=P=>{console.error("WebSocket error:",P)}};i.useEffect(()=>(s&&!r?f():!s&&r&&(r.close(),a(null),o(!1)),()=>{u.current&&clearTimeout(u.current),r&&r.close()}),[s]);const h=(p,x,y)=>{r&&r.readyState===WebSocket.OPEN&&r.send(JSON.stringify({type:"sendMessage",receiverId:p,content:x,imageUrl:y}))},b=(p,x)=>{r&&r.readyState===WebSocket.OPEN&&r.send(JSON.stringify({type:"typing",receiverId:p,isTyping:x}))},g=p=>{r&&r.readyState===WebSocket.OPEN&&r.send(JSON.stringify({type:"openChatWindow",otherUserId:p}))},v=p=>{r&&r.readyState===WebSocket.OPEN&&r.send(JSON.stringify({type:"closeChatWindow",otherUserId:p}))};return e.jsx(wi.Provider,{value:{socket:r,isConnected:n,sendMessage:h,sendTyping:b,openChatWindow:g,closeChatWindow:v,onlineUsers:l,typingUsers:d},children:t})}function ma(){const t=i.useContext(wi);if(!t)throw new Error("useSocket must be used within a SocketProvider");return t}const ae=i.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:T("rounded-lg border bg-card text-card-foreground shadow-sm",t),...s}));ae.displayName="Card";const Nh=i.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:T("flex flex-col space-y-1.5 p-6",t),...s}));Nh.displayName="CardHeader";const Sh=i.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:T("text-2xl font-semibold leading-none tracking-tight",t),...s}));Sh.displayName="CardTitle";const Ch=i.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:T("text-sm text-muted-foreground",t),...s}));Ch.displayName="CardDescription";const he=i.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:T("p-6 pt-0",t),...s}));he.displayName="CardContent";const kh=i.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:T("flex items-center p-6 pt-0",t),...s}));kh.displayName="CardFooter";const or={recent:{name:"Recent",icon:"",emojis:["","","","","",""]},smileys:{name:"Smileys",icon:"",emojis:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},hearts:{name:"Hearts",icon:"",emojis:["","","","","","","","","","","","","","","",""]},gestures:{name:"Gestures",icon:"",emojis:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},celebration:{name:"Celebration",icon:"",emojis:["","","","","","","","","","","","","","","",""]}};function Ni({onEmojiSelect:t,onClose:s}){const r=i.useRef(null),[a,n]=i.useState("smileys");i.useEffect(()=>{const l=c=>{r.current&&!r.current.contains(c.target)&&s()};return document.addEventListener("mousedown",l),()=>document.removeEventListener("mousedown",l)},[s]);const o=l=>{t(l)};return e.jsx(ae,{ref:r,className:"absolute bottom-14 sm:bottom-16 right-0 left-0 sm:left-auto w-full sm:w-[380px] md:w-[420px] max-w-[calc(100vw-1rem)] shadow-2xl border-border/50 z-50 overflow-hidden mx-2 sm:mx-0","data-testid":"emoji-picker",children:e.jsxs("div",{className:"flex flex-col h-[280px] sm:h-[320px]",children:[e.jsx("div",{className:"flex items-center gap-1 px-2 py-2 border-b bg-muted/30",children:Object.entries(or).map(([l,c])=>e.jsx("button",{onClick:()=>n(l),className:T("flex-1 py-2 px-2 sm:px-3 rounded-lg text-xl sm:text-2xl transition-all hover:bg-background/80",a===l?"bg-background shadow-sm scale-110":"opacity-50 hover:opacity-100"),title:c.name,children:c.icon},l))}),e.jsx(Ne,{className:"flex-1 px-3 py-3",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-xs font-semibold text-muted-foreground px-1",children:or[a].name}),e.jsx("div",{className:"grid grid-cols-7 sm:grid-cols-8 gap-1",children:or[a].emojis.map((l,c)=>e.jsx("button",{className:"aspect-square flex items-center justify-center text-xl sm:text-2xl hover:bg-muted/50 rounded-lg transition-all hover:scale-125 active:scale-95",onClick:()=>o(l),"data-testid":`emoji-${c}`,children:l},c))})]})})]})})}function Ph({currentUser:t,selectedUser:s,onToggleUserInfo:r}){console.log("[ChatWindow]  Component RENDER - selectedUser:",s?.id,s?.firstName);const{sendMessage:a,sendTyping:n,typingUsers:o}=ma(),{toast:l}=ct(),c=Ve(),[d,m]=i.useState(""),[u,f]=i.useState(!1),[h,b]=i.useState(s),[g,v]=i.useState(null),[p,x]=i.useState(null),y=i.useRef(null),P=i.useRef(),j=i.useRef(null),{data:E=[]}=it({queryKey:["/api/conversations",s?.id,"messages"],enabled:!!s}),S=me({mutationFn:async O=>{const q=new FormData;q.append("messageImage",O);const z=await fetch("/api/upload/message",{method:"POST",body:q,credentials:"include"});if(!z.ok)throw new Error("Upload failed");return z.json()},onSuccess:O=>{s&&a(s.id,void 0,O.imageUrl)},onError:()=>{l({title:"Upload failed",description:"Failed to upload image",variant:"destructive"})}});i.useEffect(()=>{S.isPending||y.current?.scrollIntoView({behavior:"smooth"})},[E,S.isPending]),i.useEffect(()=>{b(s)},[s]),i.useEffect(()=>{s?.id&&c.invalidateQueries({queryKey:["/api/conversations",s.id,"messages"]})},[s?.id,c]),i.useEffect(()=>{const O=async q=>{const{userId:z,isOnline:B}=q.detail||{};if(console.log(`[ChatWindow] Received onlineStatusChanged event: userId=${z}, isOnline=${B}, selectedUser.id=${s?.id}`),s?.id&&z===s.id){console.log(`[ChatWindow] Updating status for ${z} to ${B?"online":"offline"}`);try{const Q=await fetch(`/api/users/${s.id}`);if(Q.ok){const te=await Q.json();console.log("[ChatWindow] Fetched updated user data:",te),b(te)}}catch(Q){console.error("Failed to fetch updated user data:",Q)}}};return console.log(`[ChatWindow] Setting up onlineStatusChanged listener for selectedUser.id=${s?.id}`),window.addEventListener("onlineStatusChanged",O),()=>{console.log("[ChatWindow] Removing onlineStatusChanged listener"),window.removeEventListener("onlineStatusChanged",O)}},[s?.id]),i.useEffect(()=>{const O=async()=>{if(!s){console.log("[ChatWindow] Consent fetch skipped: selectedUser is null/undefined");return}console.log(`[ChatWindow] ===== FETCHING CONSENT STATUS for user ${s.id} (${s.firstName}) =====`);try{const q=await fetch(`/api/consent/${s.id}`,{credentials:"include"});if(console.log(`[ChatWindow] Consent API response status: ${q.status}`),q.ok){const z=await q.json();console.log("[ChatWindow] Fetched consent status:",JSON.stringify(z,null,2)),z.status==="pending"&&z.consent&&z.requester?(console.log("[ChatWindow]  Setting consent request from API data (we are responder)"),console.log("[ChatWindow] Consent ID:",z.consent.id),console.log("[ChatWindow] Requester:",z.requester.firstName,z.requester.id),v("pending"),x({consent:z.consent,requester:z.requester})):z.status==="waiting"?(console.log("[ChatWindow]  We are waiting for consent"),v("waiting"),x(null)):(console.log("[ChatWindow] Other status:",z.status||"null"),v(z.status||null),x(null))}else console.error("[ChatWindow]  Consent API failed with status:",q.status)}catch(q){console.error("[ChatWindow]  Failed to fetch consent status:",q)}};console.log("[ChatWindow] useEffect triggered for consent fetch, selectedUser:",s?.id),O()},[s?.id]),i.useEffect(()=>{const O=Q=>{const{consent:te,requester:se,firstMessage:k}=Q.detail;console.log("[ChatWindow]  Received consent request event"),console.log("[ChatWindow] Requester:",se?.firstName,se?.id),console.log("[ChatWindow] Consent ID:",te?.id),console.log("[ChatWindow] Selected User:",s?.firstName,s?.id),console.log("[ChatWindow] First Message:",k?.content),s&&se&&se.id===s.id?(console.log("[ChatWindow]  Setting consent request for selected user - MATCH!"),x({consent:te,requester:se}),v("pending")):(console.log("[ChatWindow]  Consent request NOT for current selected user"),console.log("[ChatWindow] Condition failed: selectedUser?",!!s,"requester.id === selectedUser.id?",se?.id===s?.id))},q=Q=>{const{receiverId:te}=Q.detail;console.log("[ChatWindow] Received consent pending event:",{receiverId:te,selectedUserId:s?.id}),s&&te===s.id?(console.log("[ChatWindow] Setting consent status to waiting (we sent request)"),v("waiting"),x(null)):console.log("[ChatWindow] Consent pending not for current selected user")},z=Q=>{const{responderId:te}=Q.detail;s&&te===s.id&&(v("accepted"),x(null),l({title:"Request accepted!",description:`${s.firstName} accepted your chat request.`}))},B=Q=>{const{responderId:te}=Q.detail;s&&te===s.id&&(v("rejected"),x(null))};return window.addEventListener("consentRequest",O),window.addEventListener("consentPending",q),window.addEventListener("consentAccepted",z),window.addEventListener("consentRejected",B),()=>{window.removeEventListener("consentRequest",O),window.removeEventListener("consentPending",q),window.removeEventListener("consentAccepted",z),window.removeEventListener("consentRejected",B)}},[s?.id,s?.firstName,l]),i.useEffect(()=>{const O=z=>{const{message:B}=z.detail;s&&(B.senderId===s.id&&B.receiverId===t?.id||B.senderId===t?.id&&B.receiverId===s.id)&&c.setQueryData(["/api/conversations",s.id,"messages"],(te=[])=>te.some(k=>k.id===B.id)?te:[...te,B]),c.invalidateQueries({queryKey:["/api/conversations"]})},q=z=>{const{message:B}=z.detail;s&&(B.senderId===s.id&&B.receiverId===t?.id||B.senderId===t?.id&&B.receiverId===s.id)&&c.setQueryData(["/api/conversations",s.id,"messages"],(te=[])=>te.some(k=>k.id===B.id)?te:[...te,B]),c.invalidateQueries({queryKey:["/api/conversations"]})};return window.addEventListener("newMessage",O),window.addEventListener("messageConfirmed",q),()=>{window.removeEventListener("newMessage",O),window.removeEventListener("messageConfirmed",q)}},[c,s?.id,t?.id]);const I=()=>{!s||!d.trim()||(a(s.id,d.trim()),m(""),u&&f(!1))},U=O=>{O.key==="Enter"&&!O.shiftKey&&(O.preventDefault(),I())},D=O=>{m(O.target.value),s&&(n(s.id,!0),P.current&&clearTimeout(P.current),P.current=setTimeout(()=>{n(s.id,!1)},1e3))},A=()=>{j.current?.click()},N=O=>{const q=O.target.files?.[0];if(q){if(!q.type.startsWith("image/")){l({title:"Invalid file type",description:"Only image files are allowed",variant:"destructive"});return}if(q.size>5*1024*1024){l({title:"File too large",description:"Image must be smaller than 5MB",variant:"destructive"});return}S.mutate(q)}O.target&&(O.target.value="")},C=async()=>{if(p)try{(await fetch("/api/consent/accept",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({consentId:p.consent.id,requesterId:p.requester.id})})).ok&&(v("accepted"),x(null),l({title:"Request accepted",description:`You can now chat with ${s?.firstName}.`}))}catch(O){console.error("Failed to accept consent:",O),l({title:"Error",description:"Failed to accept request",variant:"destructive"})}},W=async()=>{if(p)try{(await fetch("/api/consent/reject",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({consentId:p.consent.id,requesterId:p.requester.id})})).ok&&(v("rejected"),x(null),l({title:"Request declined",description:`You declined ${s?.firstName}'s chat request.`}))}catch(O){console.error("Failed to reject consent:",O),l({title:"Error",description:"Failed to decline request",variant:"destructive"})}},_=O=>new Date(O).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"});return s?e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsxs("div",{className:"bg-card border-b border-border p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(fe,{className:"relative",children:[e.jsx(pe,{src:h?.profilePhoto||void 0}),e.jsxs(xe,{children:[h?.firstName[0],h?.lastName[0]]}),h?.isOnline&&e.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-accent border-2 border-card rounded-full"})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold","data-testid":"text-selected-user-name",children:[h?.firstName," ",h?.lastName]}),e.jsx("p",{className:T("text-sm",h?.isOnline?"text-accent":"text-muted-foreground"),children:h?.isOnline?"Online":"Offline"})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(L,{variant:"ghost",size:"sm",onClick:r,"data-testid":"button-toggle-user-info",children:e.jsx(ku,{className:"h-4 w-4"})}),e.jsx(L,{variant:"ghost",size:"sm",className:"md:hidden","data-testid":"button-toggle-sidebar",children:e.jsx(Pu,{className:"h-4 w-4"})})]})]}),e.jsx(Ne,{className:"flex-1 p-4",children:e.jsxs("div",{className:"space-y-4",children:[E.map(O=>{const q=O.senderId===t.id;return e.jsxs("div",{className:T("flex items-start space-x-3",q&&"justify-end"),"data-testid":`message-${O.id}`,children:[!q&&e.jsxs(fe,{className:"w-8 h-8 mt-1",children:[e.jsx(pe,{src:s.profilePhoto||void 0}),e.jsx(xe,{children:s.firstName[0]})]}),e.jsxs("div",{className:"message-bubble max-w-[70%]",children:[e.jsxs("div",{className:T("rounded-lg p-3",q?"bg-primary text-primary-foreground rounded-tr-none":"bg-secondary rounded-tl-none"),children:[O.imageUrl&&e.jsx("img",{src:O.imageUrl,alt:"Shared image",className:"rounded-md max-w-xs w-full h-auto cursor-pointer hover:opacity-90 transition-opacity mb-2",onClick:()=>window.open(O.imageUrl,"_blank"),"data-testid":`image-message-${O.id}`}),O.content&&e.jsx("p",{className:"text-sm","data-testid":`text-message-content-${O.id}`,children:O.content})]}),e.jsxs("span",{className:T("text-xs text-muted-foreground mt-1 block",q&&"text-right"),"data-testid":`text-message-time-${O.id}`,children:[_(O.timestamp)," ",q&&""]})]})]},O.id)}),p&&e.jsx("div",{className:"flex justify-center py-4",children:e.jsx("div",{className:"max-w-md w-full bg-gradient-to-br from-blue-500/10 to-purple-500/10 border border-blue-500/20 rounded-2xl p-6 shadow-lg",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"mx-auto w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-500 rounded-full flex items-center justify-center",children:e.jsx(gt,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg mb-1",children:"Chat Request"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[p.requester.firstName," wants to chat with you. Do you want to accept this request?"]})]}),e.jsxs("div",{className:"flex gap-3 justify-center",children:[e.jsx(L,{onClick:C,className:"bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600",children:"Accept"}),e.jsx(L,{onClick:W,variant:"outline",children:"Decline"})]})]})})}),g==="waiting"&&e.jsx("div",{className:"flex justify-center py-4",children:e.jsx("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-xl px-6 py-3",children:e.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[e.jsx(De,{className:"h-4 w-4 animate-spin text-blue-500"}),"Waiting for ",s.firstName," to accept your chat request..."]})})}),g==="rejected"&&e.jsx("div",{className:"flex justify-center py-4",children:e.jsx("div",{className:"bg-red-500/10 border border-red-500/20 rounded-xl px-6 py-3",children:e.jsxs("p",{className:"text-sm text-red-600 dark:text-red-400",children:[s.firstName," has declined your chat request."]})})}),o[s.id]&&e.jsxs("div",{className:"flex items-start space-x-3","data-testid":"typing-indicator",children:[e.jsxs(fe,{className:"w-8 h-8 mt-1",children:[e.jsx(pe,{src:s.profilePhoto||void 0}),e.jsx(xe,{children:s.firstName[0]})]}),e.jsx("div",{className:"message-bubble max-w-[70%]",children:e.jsx("div",{className:"bg-secondary rounded-lg rounded-tl-none p-3",children:e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("div",{className:"w-2 h-2 bg-muted-foreground rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-muted-foreground rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-muted-foreground rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})})]}),e.jsx("div",{ref:y})]})}),e.jsxs("div",{className:"bg-card border-t border-border p-4",children:[e.jsxs("div",{className:"flex items-end space-x-3",children:[e.jsx(L,{variant:"ghost",size:"sm",onClick:A,disabled:S.isPending||g==="pending"||g==="waiting"||g==="rejected","data-testid":"button-upload-file",children:S.isPending?e.jsx(De,{className:"h-4 w-4 animate-spin"}):e.jsx(jo,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(ua,{placeholder:g==="pending"?"Waiting for your response...":g==="waiting"?"Waiting for chat permission...":g==="rejected"?"Chat request declined":"Type a message...",value:d,onChange:D,onKeyDown:U,disabled:g==="pending"||g==="waiting"||g==="rejected",className:"resize-none min-h-[48px] max-h-32 pr-10","data-testid":"textarea-message-input"}),e.jsx(L,{variant:"ghost",size:"sm",className:"absolute right-2 top-1/2 transform -translate-y-1/2",onClick:()=>f(!u),disabled:g==="pending"||g==="waiting"||g==="rejected","data-testid":"button-emoji-picker",children:e.jsx(No,{className:"h-4 w-4"})}),u&&e.jsx(Ni,{onEmojiSelect:O=>{m(q=>q+O),f(!1)},onClose:()=>f(!1)})]}),e.jsx(L,{onClick:I,disabled:!d.trim()||g==="pending"||g==="waiting"||g==="rejected","data-testid":"button-send-message",children:e.jsx(gt,{className:"h-4 w-4"})})]}),e.jsx("input",{type:"file",ref:j,onChange:N,accept:"image/*",className:"hidden","data-testid":"input-file-upload"})]})]}):e.jsx("div",{className:"flex-1 flex items-center justify-center bg-background",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-medium text-muted-foreground mb-2",children:"Select a conversation to start chatting"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose someone from your contacts to send a message"})]})})}function Eh({user:t,isVisible:s,className:r}){const a=n=>new Date(n).toLocaleDateString("en-US",{month:"long",year:"numeric"});return e.jsx("div",{className:T("w-80 bg-card border-l border-border p-6 transition-all duration-300",!s&&"hidden",r),"data-testid":"user-info-panel",children:e.jsxs("div",{className:"text-center",children:[e.jsxs(fe,{className:"w-24 h-24 mx-auto mb-4 relative",children:[e.jsx(pe,{src:t.profilePhoto||void 0}),e.jsxs(xe,{className:"text-lg",children:[t.firstName[0],t.lastName[0]]}),t.isOnline&&e.jsx("div",{className:"absolute bottom-1 right-1 w-4 h-4 bg-accent border-2 border-card rounded-full"})]}),e.jsxs("h3",{className:"text-xl font-semibold mb-2","data-testid":"text-user-full-name",children:[t.firstName," ",t.lastName]}),e.jsx("p",{className:T("text-sm mb-6",t.isOnline?"text-accent":"text-muted-foreground"),"data-testid":"text-user-status",children:t.isOnline?"Online":"Offline"}),e.jsxs("div",{className:"space-y-4 text-left",children:[e.jsx(ae,{children:e.jsxs(he,{className:"p-3",children:[e.jsx("h4",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Email"}),e.jsx("p",{className:"text-sm","data-testid":"text-user-email",children:t.email})]})}),e.jsx(ae,{children:e.jsxs(he,{className:"p-3",children:[e.jsx("h4",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Username"}),e.jsxs("p",{className:"text-sm","data-testid":"text-user-username",children:["@",t.username]})]})}),e.jsx(ae,{children:e.jsxs(he,{className:"p-3",children:[e.jsx("h4",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Joined"}),e.jsx("p",{className:"text-sm","data-testid":"text-user-join-date",children:a(t.createdAt)})]})})]})]})})}const cs=_r,Rh=vn,Th=Lr,Si=i.forwardRef(({className:t,...s},r)=>e.jsx(ns,{ref:r,className:T("fixed inset-0 z-50 bg-black/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 transition-all duration-300",t),...s}));Si.displayName=ns.displayName;const $t=i.forwardRef(({className:t,children:s,...r},a)=>e.jsxs(Th,{children:[e.jsx(Si,{}),e.jsxs(os,{ref:a,className:T("fixed left-[50%] top-[50%] z-50 grid w-[95vw] max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-2xl duration-300 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] rounded-2xl md:rounded-3xl sm:w-full",t),...r,children:[s,e.jsxs(gn,{className:"absolute right-3 top-3 md:right-4 md:top-4 rounded-full p-2 opacity-70 ring-offset-background transition-all hover:opacity-100 hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(ze,{className:"h-4 w-4 md:h-5 md:w-5"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));$t.displayName=os.displayName;const zt=({className:t,...s})=>e.jsx("div",{className:T("flex flex-col space-y-1.5 text-center sm:text-left",t),...s});zt.displayName="DialogHeader";const Ut=i.forwardRef(({className:t,...s},r)=>e.jsx(Is,{ref:r,className:T("text-lg md:text-xl font-semibold leading-none tracking-tight",t),...s}));Ut.displayName=Is.displayName;const Us=i.forwardRef(({className:t,...s},r)=>e.jsx(Ds,{ref:r,className:T("text-sm text-muted-foreground",t),...s}));Us.displayName=Ds.displayName;var Mh="Label",Ci=i.forwardRef((t,s)=>e.jsx(G.label,{...t,ref:s,onMouseDown:r=>{r.target.closest("button, input, select, textarea")||(t.onMouseDown?.(r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));Ci.displayName=Mh;var ki=Ci;const Ah=_t("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Z=i.forwardRef(({className:t,...s},r)=>e.jsx(ki,{ref:r,className:T(Ah(),t),...s}));Z.displayName=ki.displayName;const qe=kc,$e=Pc,Oe=i.forwardRef(({className:t,children:s,...r},a)=>e.jsxs(bn,{ref:a,className:T("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...r,children:[s,e.jsx(jc,{asChild:!0,children:e.jsx(bo,{className:"h-4 w-4 opacity-50"})})]}));Oe.displayName=bn.displayName;const Pi=i.forwardRef(({className:t,...s},r)=>e.jsx(yn,{ref:r,className:T("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(fu,{className:"h-4 w-4"})}));Pi.displayName=yn.displayName;const Ei=i.forwardRef(({className:t,...s},r)=>e.jsx(jn,{ref:r,className:T("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(bo,{className:"h-4 w-4"})}));Ei.displayName=jn.displayName;const Fe=i.forwardRef(({className:t,children:s,position:r="popper",...a},n)=>e.jsx(wc,{children:e.jsxs(wn,{ref:n,className:T("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...a,children:[e.jsx(Pi,{}),e.jsx(Nc,{className:T("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),e.jsx(Ei,{})]})}));Fe.displayName=wn.displayName;const Ih=i.forwardRef(({className:t,...s},r)=>e.jsx(Nn,{ref:r,className:T("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...s}));Ih.displayName=Nn.displayName;const w=i.forwardRef(({className:t,children:s,...r},a)=>e.jsxs(Sn,{ref:a,className:T("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Sc,{children:e.jsx(Mt,{className:"h-4 w-4"})})}),e.jsx(Cc,{children:s})]}));w.displayName=Sn.displayName;const Dh=i.forwardRef(({className:t,...s},r)=>e.jsx(Cn,{ref:r,className:T("-mx-1 my-1 h-px bg-muted",t),...s}));Dh.displayName=Cn.displayName;function Ri({isOpen:t,onClose:s,user:r}){const{toast:a}=ct(),n=Ve(),o=i.useRef(null),l=r.dateOfBirth?r.dateOfBirth.split("-"):["","",""],c=l[0]||"",d=l[1]?String(parseInt(l[1])):"",m=l[2]?String(parseInt(l[2])):"",[u,f]=i.useState({firstName:r.firstName,lastName:r.lastName,username:r.username,email:r.email,gender:r.gender,bio:r.bio||"",location:r.location||"",birthMonth:d,birthDay:m,birthYear:c}),h=me({mutationFn:async x=>{const{username:y,email:P,birthMonth:j,birthDay:E,birthYear:S,...I}=x;let U,D;if(j&&E&&S){const C=`${S}-${j.padStart(2,"0")}-${E.padStart(2,"0")}`,W=new Date(C);if(!(!isNaN(W.getTime())&&W.getFullYear()===parseInt(S)&&W.getMonth()+1===parseInt(j)&&W.getDate()===parseInt(E)))throw new Error("Invalid date selected. Please check your date of birth.");D=C;const O=new Date;U=O.getFullYear()-W.getFullYear();const q=O.getMonth()-W.getMonth();(q<0||q===0&&O.getDate()<W.getDate())&&U--}const A={...I,...U!==void 0&&{age:U},...D&&{dateOfBirth:D}};return(await Jn("PATCH","/api/profile",A)).json()},onSuccess:x=>{n.setQueryData(["/api/user"],x),a({title:"Profile updated",description:"Your profile has been updated successfully"}),s()},onError:x=>{a({title:"Update failed",description:x.message,variant:"destructive"})}}),b=me({mutationFn:async x=>{const y=new FormData;y.append("profilePicture",x);const P=await fetch("/api/upload/profile",{method:"POST",body:y,credentials:"include"});if(!P.ok)throw new Error("Upload failed");return P.json()},onSuccess:x=>{n.setQueryData(["/api/user"],x.user),a({title:"Profile picture updated",description:"Your profile picture has been updated successfully"})},onError:()=>{a({title:"Upload failed",description:"Failed to upload profile picture",variant:"destructive"})}}),g=x=>{x.preventDefault(),h.mutate(u)},v=()=>{o.current?.click()},p=x=>{const y=x.target.files?.[0];y&&b.mutate(y)};return e.jsx(cs,{open:t,onOpenChange:s,children:e.jsxs($t,{className:"sm:max-w-2xl max-h-[85vh] md:max-h-[90vh] flex flex-col p-0 gap-0","data-testid":"profile-modal",children:[e.jsx(zt,{className:"px-4 py-4 md:px-6 md:py-5 border-b sticky top-0 bg-background z-10 rounded-t-2xl md:rounded-t-3xl",children:e.jsx(Ut,{className:"text-center sm:text-left",children:"Profile Settings"})}),e.jsxs("div",{className:"overflow-y-auto px-4 py-5 md:px-6 md:py-6 space-y-6",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs("div",{className:"relative group",children:[e.jsxs(fe,{className:"w-24 h-24 md:w-32 md:h-32 ring-4 ring-background shadow-xl transition-all duration-300 group-hover:ring-primary/20",children:[e.jsx(pe,{src:r.profilePhoto||void 0,className:"object-cover"}),e.jsxs(xe,{className:"text-xl md:text-2xl font-semibold bg-gradient-to-br from-primary/20 to-primary/10",children:[r.firstName[0],r.lastName[0]]})]}),e.jsx("div",{className:"absolute inset-0 rounded-full bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center cursor-pointer",onClick:v,children:e.jsx(Ye,{className:"h-6 w-6 md:h-8 md:w-8 text-white"})})]}),e.jsxs(L,{variant:"outline",onClick:v,disabled:b.isPending,className:"mt-4 rounded-full px-6 transition-all hover:scale-105","data-testid":"button-change-photo",children:[e.jsx(Ye,{className:"h-4 w-4 mr-2"}),b.isPending?"Uploading...":"Change Photo"]}),e.jsx("input",{type:"file",ref:o,onChange:p,accept:"image/*",className:"hidden","data-testid":"input-profile-picture"})]}),e.jsxs("form",{onSubmit:g,className:"space-y-5",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"firstName",className:"text-sm font-medium",children:"First Name"}),e.jsx(re,{id:"firstName",value:u.firstName,onChange:x=>f(y=>({...y,firstName:x.target.value})),required:!0,className:"rounded-xl border-2 focus:border-primary transition-all","data-testid":"input-first-name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"lastName",className:"text-sm font-medium",children:"Last Name"}),e.jsx(re,{id:"lastName",value:u.lastName,onChange:x=>f(y=>({...y,lastName:x.target.value})),required:!0,className:"rounded-xl border-2 focus:border-primary transition-all","data-testid":"input-last-name"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"username",className:"text-sm font-medium",children:"Username"}),e.jsx(re,{id:"username",value:u.username,disabled:!0,className:"bg-secondary/50 rounded-xl border-2 cursor-not-allowed","data-testid":"input-username"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Username cannot be changed"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"email",className:"text-sm font-medium",children:"Email"}),e.jsx(re,{id:"email",type:"email",value:u.email||"No email provided",disabled:!0,className:"bg-secondary/50 rounded-xl border-2 cursor-not-allowed","data-testid":"input-email"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Email cannot be changed"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"gender",className:"text-sm font-medium",children:"Gender"}),e.jsxs(qe,{value:u.gender,onValueChange:x=>f(y=>({...y,gender:x})),children:[e.jsx(Oe,{"data-testid":"select-gender",className:"rounded-xl border-2 focus:border-primary transition-all",children:e.jsx($e,{placeholder:"Select gender"})}),e.jsxs(Fe,{children:[e.jsx(w,{value:"male",children:"Male"}),e.jsx(w,{value:"female",children:"Female"}),e.jsx(w,{value:"other",children:"Other"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"location",className:"text-sm font-medium",children:"Country/Region"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ge,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground z-10"}),e.jsxs(qe,{value:u.location,onValueChange:x=>f(y=>({...y,location:x})),children:[e.jsx(Oe,{"data-testid":"select-location",className:"rounded-xl border-2 pl-10 focus:border-primary transition-all",children:e.jsx($e,{placeholder:"Select country/region"})}),e.jsxs(Fe,{className:"max-h-[200px]",children:[e.jsx(w,{value:"Afghanistan",children:"Afghanistan"}),e.jsx(w,{value:"Albania",children:"Albania"}),e.jsx(w,{value:"Algeria",children:"Algeria"}),e.jsx(w,{value:"Argentina",children:"Argentina"}),e.jsx(w,{value:"Australia",children:"Australia"}),e.jsx(w,{value:"Austria",children:"Austria"}),e.jsx(w,{value:"Bangladesh",children:"Bangladesh"}),e.jsx(w,{value:"Belgium",children:"Belgium"}),e.jsx(w,{value:"Brazil",children:"Brazil"}),e.jsx(w,{value:"Canada",children:"Canada"}),e.jsx(w,{value:"Chile",children:"Chile"}),e.jsx(w,{value:"China",children:"China"}),e.jsx(w,{value:"Colombia",children:"Colombia"}),e.jsx(w,{value:"Denmark",children:"Denmark"}),e.jsx(w,{value:"Egypt",children:"Egypt"}),e.jsx(w,{value:"Finland",children:"Finland"}),e.jsx(w,{value:"France",children:"France"}),e.jsx(w,{value:"Germany",children:"Germany"}),e.jsx(w,{value:"Greece",children:"Greece"}),e.jsx(w,{value:"India",children:"India"}),e.jsx(w,{value:"Indonesia",children:"Indonesia"}),e.jsx(w,{value:"Iran",children:"Iran"}),e.jsx(w,{value:"Iraq",children:"Iraq"}),e.jsx(w,{value:"Ireland",children:"Ireland"}),e.jsx(w,{value:"Israel",children:"Israel"}),e.jsx(w,{value:"Italy",children:"Italy"}),e.jsx(w,{value:"Japan",children:"Japan"}),e.jsx(w,{value:"Jordan",children:"Jordan"}),e.jsx(w,{value:"Kenya",children:"Kenya"}),e.jsx(w,{value:"Malaysia",children:"Malaysia"}),e.jsx(w,{value:"Mexico",children:"Mexico"}),e.jsx(w,{value:"Morocco",children:"Morocco"}),e.jsx(w,{value:"Netherlands",children:"Netherlands"}),e.jsx(w,{value:"New Zealand",children:"New Zealand"}),e.jsx(w,{value:"Nigeria",children:"Nigeria"}),e.jsx(w,{value:"Norway",children:"Norway"}),e.jsx(w,{value:"Pakistan",children:"Pakistan"}),e.jsx(w,{value:"Peru",children:"Peru"}),e.jsx(w,{value:"Philippines",children:"Philippines"}),e.jsx(w,{value:"Poland",children:"Poland"}),e.jsx(w,{value:"Portugal",children:"Portugal"}),e.jsx(w,{value:"Russia",children:"Russia"}),e.jsx(w,{value:"Saudi Arabia",children:"Saudi Arabia"}),e.jsx(w,{value:"Singapore",children:"Singapore"}),e.jsx(w,{value:"South Africa",children:"South Africa"}),e.jsx(w,{value:"South Korea",children:"South Korea"}),e.jsx(w,{value:"Spain",children:"Spain"}),e.jsx(w,{value:"Sweden",children:"Sweden"}),e.jsx(w,{value:"Switzerland",children:"Switzerland"}),e.jsx(w,{value:"Thailand",children:"Thailand"}),e.jsx(w,{value:"Turkey",children:"Turkey"}),e.jsx(w,{value:"UAE",children:"United Arab Emirates"}),e.jsx(w,{value:"UK",children:"United Kingdom"}),e.jsx(w,{value:"USA",children:"United States"}),e.jsx(w,{value:"Vietnam",children:"Vietnam"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{className:"text-sm font-medium",children:"Date of Birth"}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(yt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground z-10"}),e.jsxs(qe,{value:u.birthMonth,onValueChange:x=>f(y=>({...y,birthMonth:x})),children:[e.jsx(Oe,{"data-testid":"select-birth-month",className:"rounded-xl border-2 pl-9 focus:border-primary transition-all",children:e.jsx($e,{placeholder:"Month"})}),e.jsxs(Fe,{children:[e.jsx(w,{value:"1",children:"January"}),e.jsx(w,{value:"2",children:"February"}),e.jsx(w,{value:"3",children:"March"}),e.jsx(w,{value:"4",children:"April"}),e.jsx(w,{value:"5",children:"May"}),e.jsx(w,{value:"6",children:"June"}),e.jsx(w,{value:"7",children:"July"}),e.jsx(w,{value:"8",children:"August"}),e.jsx(w,{value:"9",children:"September"}),e.jsx(w,{value:"10",children:"October"}),e.jsx(w,{value:"11",children:"November"}),e.jsx(w,{value:"12",children:"December"})]})]})]}),e.jsxs(qe,{value:u.birthDay,onValueChange:x=>f(y=>({...y,birthDay:x})),children:[e.jsx(Oe,{"data-testid":"select-birth-day",className:"rounded-xl border-2 focus:border-primary transition-all",children:e.jsx($e,{placeholder:"Day"})}),e.jsx(Fe,{className:"max-h-[200px]",children:Array.from({length:31},(x,y)=>y+1).map(x=>e.jsx(w,{value:String(x),children:x},x))})]}),e.jsxs(qe,{value:u.birthYear,onValueChange:x=>f(y=>({...y,birthYear:x})),children:[e.jsx(Oe,{"data-testid":"select-birth-year",className:"rounded-xl border-2 focus:border-primary transition-all",children:e.jsx($e,{placeholder:"Year"})}),e.jsx(Fe,{className:"max-h-[200px]",children:Array.from({length:new Date().getFullYear()-1924},(x,y)=>new Date().getFullYear()-18-y).map(x=>e.jsx(w,{value:String(x),children:x},x))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"bio",className:"text-sm font-medium",children:"Bio (Optional)"}),e.jsx(ua,{id:"bio",placeholder:"Hello, Welcome to my profile!",value:u.bio,onChange:x=>f(y=>({...y,bio:x.target.value})),className:"rounded-xl border-2 focus:border-primary transition-all min-h-[80px] resize-none","data-testid":"textarea-bio",maxLength:500,rows:3}),e.jsxs("p",{className:"text-xs text-muted-foreground text-right",children:[u.bio.length,"/500 characters"]})]}),e.jsxs("div",{className:"flex flex-col-reverse sm:flex-row gap-3 pt-4",children:[e.jsx(L,{type:"button",variant:"outline",className:"flex-1 rounded-full transition-all hover:scale-105",onClick:s,"data-testid":"button-cancel-profile",children:"Cancel"}),e.jsx(L,{type:"submit",className:"flex-1 rounded-full bg-primary hover:bg-primary/90 transition-all hover:scale-105 shadow-lg",disabled:h.isPending,"data-testid":"button-save-profile",children:h.isPending?"Saving...":"Save Changes"})]})]})]})]})})}function Oh(){const{user:t}=be(),[,s]=de(),[r,a]=i.useState(null),[n,o]=i.useState(!1),[l,c]=i.useState(!1);return i.useEffect(()=>{t&&s("/discover")},[t,s]),t?e.jsxs("div",{className:"h-screen flex overflow-hidden","data-testid":"chat-interface",children:[e.jsx(jh,{currentUser:t,selectedUser:r,onSelectUser:a,onOpenProfile:()=>c(!0)}),e.jsx("div",{className:"flex-1 flex flex-col",children:e.jsx(Ph,{currentUser:t,selectedUser:r,onToggleUserInfo:()=>o(!n)})}),r&&e.jsx(Eh,{user:r,isVisible:n,className:"hidden lg:block"}),e.jsx(Ri,{isOpen:l,onClose:()=>c(!1),user:t})]}):null}var Ws="Tabs",[Fh]=We(Ws,[Os]),Ti=Os(),[Lh,ha]=Fh(Ws),Mi=i.forwardRef((t,s)=>{const{__scopeTabs:r,value:a,onValueChange:n,defaultValue:o,orientation:l="horizontal",dir:c,activationMode:d="automatic",...m}=t,u=As(c),[f,h]=Ot({prop:a,onChange:n,defaultProp:o??"",caller:Ws});return e.jsx(Lh,{scope:r,baseId:at(),value:f,onValueChange:h,orientation:l,dir:u,activationMode:d,children:e.jsx(G.div,{dir:u,"data-orientation":l,...m,ref:s})})});Mi.displayName=Ws;var Ai="TabsList",Ii=i.forwardRef((t,s)=>{const{__scopeTabs:r,loop:a=!0,...n}=t,o=ha(Ai,r),l=Ti(r);return e.jsx(kn,{asChild:!0,...l,orientation:o.orientation,dir:o.dir,loop:a,children:e.jsx(G.div,{role:"tablist","aria-orientation":o.orientation,...n,ref:s})})});Ii.displayName=Ai;var Di="TabsTrigger",Oi=i.forwardRef((t,s)=>{const{__scopeTabs:r,value:a,disabled:n=!1,...o}=t,l=ha(Di,r),c=Ti(r),d=_i(l.baseId,a),m=qi(l.baseId,a),u=a===l.value;return e.jsx(Pn,{asChild:!0,...c,focusable:!n,active:u,children:e.jsx(G.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":m,"data-state":u?"active":"inactive","data-disabled":n?"":void 0,disabled:n,id:d,...o,ref:s,onMouseDown:Y(t.onMouseDown,f=>{!n&&f.button===0&&f.ctrlKey===!1?l.onValueChange(a):f.preventDefault()}),onKeyDown:Y(t.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&l.onValueChange(a)}),onFocus:Y(t.onFocus,()=>{const f=l.activationMode!=="manual";!u&&!n&&f&&l.onValueChange(a)})})})});Oi.displayName=Di;var Fi="TabsContent",Li=i.forwardRef((t,s)=>{const{__scopeTabs:r,value:a,forceMount:n,children:o,...l}=t,c=ha(Fi,r),d=_i(c.baseId,a),m=qi(c.baseId,a),u=a===c.value,f=i.useRef(u);return i.useEffect(()=>{const h=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(h)},[]),e.jsx(_e,{present:n||u,children:({present:h})=>e.jsx(G.div,{"data-state":u?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":d,hidden:!h,id:m,tabIndex:0,...l,ref:s,style:{...t.style,animationDuration:f.current?"0s":void 0},children:h&&o})})});Li.displayName=Fi;function _i(t,s){return`${t}-trigger-${s}`}function qi(t,s){return`${t}-content-${s}`}var _h=Mi,$i=Ii,zi=Oi,Ui=Li;const Wi=_h,fa=i.forwardRef(({className:t,...s},r)=>e.jsx($i,{ref:r,className:T("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...s}));fa.displayName=$i.displayName;const Rt=i.forwardRef(({className:t,...s},r)=>e.jsx(zi,{ref:r,className:T("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...s}));Rt.displayName=zi.displayName;const Tt=i.forwardRef(({className:t,...s},r)=>e.jsx(Ui,{ref:r,className:T("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...s}));Tt.displayName=Ui.displayName;var Vs="Checkbox",[qh]=We(Vs),[$h,pa]=qh(Vs);function zh(t){const{__scopeCheckbox:s,checked:r,children:a,defaultChecked:n,disabled:o,form:l,name:c,onCheckedChange:d,required:m,value:u="on",internal_do_not_use_render:f}=t,[h,b]=Ot({prop:r,defaultProp:n??!1,onChange:d,caller:Vs}),[g,v]=i.useState(null),[p,x]=i.useState(null),y=i.useRef(!1),P=g?!!l||!!g.closest("form"):!0,j={checked:h,disabled:o,setChecked:b,control:g,setControl:v,name:c,form:l,value:u,hasConsumerStoppedPropagationRef:y,required:m,defaultChecked:ot(n)?!1:n,isFormControl:P,bubbleInput:p,setBubbleInput:x};return e.jsx($h,{scope:s,...j,children:Uh(f)?f(j):a})}var Vi="CheckboxTrigger",Bi=i.forwardRef(({__scopeCheckbox:t,onKeyDown:s,onClick:r,...a},n)=>{const{control:o,value:l,disabled:c,checked:d,required:m,setControl:u,setChecked:f,hasConsumerStoppedPropagationRef:h,isFormControl:b,bubbleInput:g}=pa(Vi,t),v=ce(n,u),p=i.useRef(d);return i.useEffect(()=>{const x=o?.form;if(x){const y=()=>f(p.current);return x.addEventListener("reset",y),()=>x.removeEventListener("reset",y)}},[o,f]),e.jsx(G.button,{type:"button",role:"checkbox","aria-checked":ot(d)?"mixed":d,"aria-required":m,"data-state":Qi(d),"data-disabled":c?"":void 0,disabled:c,value:l,...a,ref:v,onKeyDown:Y(s,x=>{x.key==="Enter"&&x.preventDefault()}),onClick:Y(r,x=>{f(y=>ot(y)?!0:!y),g&&b&&(h.current=x.isPropagationStopped(),h.current||x.stopPropagation())})})});Bi.displayName=Vi;var xa=i.forwardRef((t,s)=>{const{__scopeCheckbox:r,name:a,checked:n,defaultChecked:o,required:l,disabled:c,value:d,onCheckedChange:m,form:u,...f}=t;return e.jsx(zh,{__scopeCheckbox:r,checked:n,defaultChecked:o,disabled:c,required:l,onCheckedChange:m,name:a,form:u,value:d,internal_do_not_use_render:({isFormControl:h})=>e.jsxs(e.Fragment,{children:[e.jsx(Bi,{...f,ref:s,__scopeCheckbox:r}),h&&e.jsx(Gi,{__scopeCheckbox:r})]})})});xa.displayName=Vs;var Hi="CheckboxIndicator",Ki=i.forwardRef((t,s)=>{const{__scopeCheckbox:r,forceMount:a,...n}=t,o=pa(Hi,r);return e.jsx(_e,{present:a||ot(o.checked)||o.checked===!0,children:e.jsx(G.span,{"data-state":Qi(o.checked),"data-disabled":o.disabled?"":void 0,...n,ref:s,style:{pointerEvents:"none",...t.style}})})});Ki.displayName=Hi;var Yi="CheckboxBubbleInput",Gi=i.forwardRef(({__scopeCheckbox:t,...s},r)=>{const{control:a,hasConsumerStoppedPropagationRef:n,checked:o,defaultChecked:l,required:c,disabled:d,name:m,value:u,form:f,bubbleInput:h,setBubbleInput:b}=pa(Yi,t),g=ce(r,b),v=qr(o),p=$r(a);i.useEffect(()=>{const y=h;if(!y)return;const P=window.HTMLInputElement.prototype,E=Object.getOwnPropertyDescriptor(P,"checked").set,S=!n.current;if(v!==o&&E){const I=new Event("click",{bubbles:S});y.indeterminate=ot(o),E.call(y,ot(o)?!1:o),y.dispatchEvent(I)}},[h,v,o,n]);const x=i.useRef(ot(o)?!1:o);return e.jsx(G.input,{type:"checkbox","aria-hidden":!0,defaultChecked:l??x.current,required:c,disabled:d,name:m,value:u,form:f,...s,tabIndex:-1,ref:g,style:{...s.style,...p,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});Gi.displayName=Yi;function Uh(t){return typeof t=="function"}function ot(t){return t==="indeterminate"}function Qi(t){return ot(t)?"indeterminate":t?"checked":"unchecked"}const Ji=i.forwardRef(({className:t,...s},r)=>e.jsx(xa,{ref:r,className:T("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...s,children:e.jsx(Ki,{className:T("flex items-center justify-center text-current"),children:e.jsx(Mt,{className:"h-4 w-4"})})}));Ji.displayName=xa.displayName;function Wt({title:t,description:s,canonical:r,noindex:a=!1}){return i.useEffect(()=>{t&&(document.title=t);let n=document.querySelector("link[rel='canonical']");if(n||(n=document.createElement("link"),n.setAttribute("rel","canonical"),document.head.appendChild(n)),r)n.setAttribute("href",r);else{const c=window.location.href.split("?")[0].split("#")[0];n.setAttribute("href",c)}let o=document.querySelector("meta[name='description']");o||(o=document.createElement("meta"),o.setAttribute("name","description"),document.head.appendChild(o)),s&&o.setAttribute("content",s);let l=document.querySelector("meta[name='robots']");l||(l=document.createElement("meta"),l.setAttribute("name","robots"),document.head.appendChild(l)),l.setAttribute("content",a?"noindex, nofollow":"index, follow")},[t,s,r,a]),null}function Wh(){const{user:t,loginMutation:s,registerMutation:r}=be(),[,a]=de(),o=new URLSearchParams(window.location.search).get("tab")==="signup"?"register":"login",[l,c]=i.useState({username:"",password:""}),[d,m]=i.useState({username:"",password:"",email:"",firstName:"",lastName:"",gender:"",dateOfBirth:"",location:"",country:"",birthMonth:"",birthDay:"",birthYear:""}),[u,f]=i.useState(!1),[h,b]=i.useState([]),[g,v]=i.useState(!1),[p,x]=i.useState(!1),[y,P]=i.useState(0);if(i.useEffect(()=>{t&&!r.isPending&&a("/discover")},[t,a,r.isPending]),t&&!r.isPending)return null;const j=async N=>{N.preventDefault(),s.mutate(l,{onSuccess:()=>{a("/discover")},onError:C=>{if(C.requiresVerification){const W=C.email||l.username;a(`/verify-email?email=${encodeURIComponent(W)}`)}}})},E=N=>{const C=[];return N.length<8&&C.push("At least 8 characters"),/[A-Z]/.test(N)||C.push("One uppercase letter"),/[a-z]/.test(N)||C.push("One lowercase letter"),/[0-9]/.test(N)||C.push("One number"),/[!@#$%^&*(),.?":{}|<>]/.test(N)||C.push("One special character (!@#$%^&*)"),C},S=N=>{if(!N)return 0;let C=0;return N.length>=8&&(C+=20),N.length>=12&&(C+=10),N.length>=16&&(C+=10),/[a-z]/.test(N)&&(C+=15),/[A-Z]/.test(N)&&(C+=15),/[0-9]/.test(N)&&(C+=15),/[!@#$%^&*(),.?":{}|<>]/.test(N)&&(C+=15),Math.min(C,100)},I=N=>N<40?"bg-red-500":N<70?"bg-yellow-500":"bg-green-500",U=N=>N===0?"":N<40?"Weak":N<70?"Medium":"Strong",D=N=>{const C=N.target.value;if(m(W=>({...W,password:C})),C){const W=E(C);b(W);const _=S(C);P(_)}else b([]),P(0)},A=async N=>{if(N.preventDefault(),!d.gender||!d.birthMonth||!d.birthDay||!d.birthYear)return;const C=`${d.birthYear}-${d.birthMonth.padStart(2,"0")}-${d.birthDay.padStart(2,"0")}`,W=new Date,_=new Date(C);let O=W.getFullYear()-_.getFullYear();const q=W.getMonth()-_.getMonth();(q<0||q===0&&W.getDate()<_.getDate())&&O--;const z={username:d.username,password:d.password,email:d.email,firstName:d.firstName,lastName:d.lastName,gender:d.gender,age:O,location:d.country||void 0};r.mutate(z,{onSuccess:B=>{const Q=B?.email||z.email;a(`/verify-email?email=${encodeURIComponent(Q)}`)}})};return e.jsxs(e.Fragment,{children:[e.jsx(Wt,{title:"Sign In or Sign Up - SpreadLov Dating Platform",description:"Join SpreadLov to discover meaningful connections. Sign in to your account or create a new profile to start your dating journey.",canonical:"https://spreadlov.com/auth"}),e.jsxs("div",{className:"min-h-screen flex flex-col lg:flex-row bg-background",children:[e.jsx("div",{className:"flex-1 flex items-center justify-center p-4 sm:p-6 md:p-8 lg:p-12",children:e.jsxs("div",{className:"w-full max-w-md space-y-6 sm:space-y-8",children:[e.jsxs("header",{className:"text-center space-y-2 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx("img",{src:"/android-chrome-192x192.png",alt:"SpreadLov Dating - Modern Dating Platform for Meaningful Connections",className:"h-16 w-16 sm:h-20 sm:w-20 rounded-2xl shadow-lg",width:"192",height:"192"})}),e.jsx("h1",{className:"text-3xl sm:text-4xl lg:text-5xl font-bold bg-gradient-to-r from-primary via-primary to-primary/70 bg-clip-text text-transparent",children:"Find Your Perfect Match on SpreadLov"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg text-muted-foreground max-w-md mx-auto leading-relaxed",children:"Join thousands of singles finding meaningful relationships. Start your journey to authentic connections today."})]}),e.jsxs(Wi,{defaultValue:o,className:"w-full",children:[e.jsxs(fa,{className:"grid w-full grid-cols-2 h-12 sm:h-14 rounded-xl bg-secondary/50 p-1",children:[e.jsx(Rt,{value:"login","data-testid":"tab-login",className:"rounded-lg text-sm sm:text-base font-semibold transition-all data-[state=active]:bg-primary data-[state=active]:text-primary-foreground data-[state=active]:shadow-lg data-[state=inactive]:text-foreground/80",children:"Sign In"}),e.jsx(Rt,{value:"register","data-testid":"tab-register",className:"rounded-lg text-sm sm:text-base font-semibold transition-all data-[state=active]:bg-primary data-[state=active]:text-primary-foreground data-[state=active]:shadow-lg data-[state=inactive]:text-foreground/80",children:"Sign Up"})]}),e.jsx(Tt,{value:"login",className:"mt-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:e.jsx(ae,{className:"border-0 shadow-2xl rounded-2xl overflow-hidden bg-gradient-to-br from-card to-card/80",children:e.jsxs(he,{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold tracking-tight",children:"Welcome Back to Your Dating Journey"}),e.jsx("p",{className:"text-sm sm:text-base text-muted-foreground mt-2",children:"Sign in to discover meaningful connections and chat with compatible singles"})]}),e.jsxs("form",{onSubmit:j,className:"space-y-5",children:[e.jsxs(L,{type:"button",variant:"outline",onClick:()=>window.location.href="/api/auth/google",className:"w-full h-12 sm:h-14 text-base font-semibold rounded-xl border-2 hover:bg-secondary/50 transition-all duration-300 hover:scale-[1.02]","data-testid":"button-google-login",children:[e.jsxs("svg",{className:"mr-2 h-5 w-5",viewBox:"0 0 24 24",children:[e.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),e.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),e.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),e.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),"Continue with Google"]}),e.jsxs("div",{className:"relative my-6",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-border"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-card px-2 text-muted-foreground",children:"Or sign in with email"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"login-username",className:"text-sm font-semibold",children:"Username"}),e.jsxs("div",{className:"relative",children:[e.jsx(jt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground"}),e.jsx(re,{id:"login-username",type:"text",placeholder:"Enter your username",value:l.username,onChange:N=>c(C=>({...C,username:N.target.value})),required:!0,"data-testid":"input-login-username",className:"pl-10 h-12 rounded-xl border-2 transition-all focus:border-primary focus:ring-2 focus:ring-primary/20"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"login-password",className:"text-sm font-semibold",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(kt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground"}),e.jsx(re,{id:"login-password",type:g?"text":"password",placeholder:"Enter your password",value:l.password,onChange:N=>c(C=>({...C,password:N.target.value})),required:!0,"data-testid":"input-login-password",className:"pl-10 pr-10 h-12 rounded-xl border-2 transition-all focus:border-primary focus:ring-2 focus:ring-primary/20"}),e.jsx("button",{type:"button",onClick:()=>v(!g),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors","aria-label":g?"Hide password":"Show password",children:g?e.jsx(Ka,{className:"h-5 w-5"}):e.jsx(Ps,{className:"h-5 w-5"})})]})]}),e.jsx("div",{className:"flex items-center justify-end",children:e.jsx("button",{type:"button",onClick:()=>a("/forgot-password"),className:"text-sm text-primary hover:underline font-medium transition-colors",children:"Forgot password?"})}),e.jsx(L,{type:"submit",className:"w-full h-12 sm:h-14 text-base font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-[1.02]",disabled:s.isPending,"data-testid":"button-login",children:s.isPending?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Signing In..."]}):"Sign In"})]})]})})}),e.jsx(Tt,{value:"register",className:"mt-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:e.jsx(ae,{className:"border-0 shadow-2xl rounded-2xl overflow-hidden bg-gradient-to-br from-card to-card/80",children:e.jsxs(he,{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold tracking-tight",children:"Start Your Love Story"}),e.jsx("p",{className:"text-sm sm:text-base text-muted-foreground mt-2",children:"Create your profile and meet amazing singles looking for meaningful relationships"})]}),e.jsxs("form",{onSubmit:A,className:"space-y-5",children:[e.jsxs(L,{type:"button",variant:"outline",onClick:()=>window.location.href="/api/auth/google",className:"w-full h-12 sm:h-14 text-base font-semibold rounded-xl border-2 hover:bg-secondary/50 transition-all duration-300 hover:scale-[1.02]","data-testid":"button-google-register",children:[e.jsxs("svg",{className:"mr-2 h-5 w-5",viewBox:"0 0 24 24",children:[e.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),e.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),e.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),e.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),"Continue with Google"]}),e.jsxs("div",{className:"relative my-6",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-border"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-card px-2 text-muted-foreground",children:"Or sign up with email"})})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"first-name",className:"text-sm font-semibold",children:"First Name"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ha,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground"}),e.jsx(re,{id:"first-name",type:"text",placeholder:"First name",value:d.firstName,onChange:N=>m(C=>({...C,firstName:N.target.value})),required:!0,"data-testid":"input-first-name",className:"pl-10 h-12 rounded-xl border-2 transition-all focus:border-primary focus:ring-2 focus:ring-primary/20"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"last-name",className:"text-sm font-semibold",children:"Last Name"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ha,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground"}),e.jsx(re,{id:"last-name",type:"text",placeholder:"Last name",value:d.lastName,onChange:N=>m(C=>({...C,lastName:N.target.value})),required:!0,"data-testid":"input-last-name",className:"pl-10 h-12 rounded-xl border-2 transition-all focus:border-primary focus:ring-2 focus:ring-primary/20"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"email",className:"text-sm font-semibold",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(we,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground"}),e.jsx(re,{id:"email",type:"email",placeholder:"Enter your email",value:d.email,onChange:N=>m(C=>({...C,email:N.target.value})),required:!0,"data-testid":"input-email",className:"pl-10 h-12 rounded-xl border-2 transition-all focus:border-primary focus:ring-2 focus:ring-primary/20"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"username",className:"text-sm font-semibold",children:"Username"}),e.jsxs("div",{className:"relative",children:[e.jsx(jt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground"}),e.jsx(re,{id:"username",type:"text",placeholder:"Choose a username",value:d.username,onChange:N=>m(C=>({...C,username:N.target.value})),required:!0,"data-testid":"input-register-username",className:"pl-10 h-12 rounded-xl border-2 transition-all focus:border-primary focus:ring-2 focus:ring-primary/20"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"password",className:"text-sm font-semibold",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(kt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground"}),e.jsx(re,{id:"password",type:p?"text":"password",placeholder:"Create a strong password",value:d.password,onChange:D,required:!0,"data-testid":"input-register-password",className:"pl-10 pr-10 h-12 rounded-xl border-2 transition-all focus:border-primary focus:ring-2 focus:ring-primary/20"}),e.jsx("button",{type:"button",onClick:()=>x(!p),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors","aria-label":p?"Hide password":"Show password",children:p?e.jsx(Ka,{className:"h-5 w-5"}):e.jsx(Ps,{className:"h-5 w-5"})})]}),d.password&&e.jsxs("div",{className:"space-y-2 mt-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-muted-foreground",children:"Password strength:"}),e.jsx("span",{className:`font-semibold ${y<40?"text-red-500":y<70?"text-yellow-500":"text-green-500"}`,children:U(y)})]}),e.jsx("div",{className:"w-full bg-secondary rounded-full h-2 overflow-hidden",children:e.jsx("div",{className:`h-full transition-all duration-300 ease-out ${I(y)}`,style:{width:`${y}%`}})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Z,{htmlFor:"gender",className:"text-sm font-semibold",children:["Gender ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(qe,{onValueChange:N=>m(C=>({...C,gender:N})),required:!0,children:[e.jsx(Oe,{"data-testid":"select-gender",className:"h-12 rounded-xl border-2",children:e.jsx($e,{placeholder:"Select gender"})}),e.jsxs(Fe,{children:[e.jsx(w,{value:"male",children:"Male"}),e.jsx(w,{value:"female",children:"Female"}),e.jsx(w,{value:"other",children:"Other"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"country",className:"text-sm font-semibold",children:"Country/Region"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ge,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground z-10"}),e.jsxs(qe,{value:d.country,onValueChange:N=>m(C=>({...C,country:N})),children:[e.jsx(Oe,{"data-testid":"select-country",className:"h-12 rounded-xl border-2 pl-10",children:e.jsx($e,{placeholder:"Select country/region"})}),e.jsxs(Fe,{className:"max-h-[200px]",children:[e.jsx(w,{value:"Afghanistan",children:"Afghanistan"}),e.jsx(w,{value:"Albania",children:"Albania"}),e.jsx(w,{value:"Algeria",children:"Algeria"}),e.jsx(w,{value:"Argentina",children:"Argentina"}),e.jsx(w,{value:"Australia",children:"Australia"}),e.jsx(w,{value:"Austria",children:"Austria"}),e.jsx(w,{value:"Bangladesh",children:"Bangladesh"}),e.jsx(w,{value:"Belgium",children:"Belgium"}),e.jsx(w,{value:"Brazil",children:"Brazil"}),e.jsx(w,{value:"Canada",children:"Canada"}),e.jsx(w,{value:"Chile",children:"Chile"}),e.jsx(w,{value:"China",children:"China"}),e.jsx(w,{value:"Colombia",children:"Colombia"}),e.jsx(w,{value:"Denmark",children:"Denmark"}),e.jsx(w,{value:"Egypt",children:"Egypt"}),e.jsx(w,{value:"Finland",children:"Finland"}),e.jsx(w,{value:"France",children:"France"}),e.jsx(w,{value:"Germany",children:"Germany"}),e.jsx(w,{value:"Greece",children:"Greece"}),e.jsx(w,{value:"India",children:"India"}),e.jsx(w,{value:"Indonesia",children:"Indonesia"}),e.jsx(w,{value:"Iran",children:"Iran"}),e.jsx(w,{value:"Iraq",children:"Iraq"}),e.jsx(w,{value:"Ireland",children:"Ireland"}),e.jsx(w,{value:"Israel",children:"Israel"}),e.jsx(w,{value:"Italy",children:"Italy"}),e.jsx(w,{value:"Japan",children:"Japan"}),e.jsx(w,{value:"Jordan",children:"Jordan"}),e.jsx(w,{value:"Kenya",children:"Kenya"}),e.jsx(w,{value:"Malaysia",children:"Malaysia"}),e.jsx(w,{value:"Mexico",children:"Mexico"}),e.jsx(w,{value:"Morocco",children:"Morocco"}),e.jsx(w,{value:"Netherlands",children:"Netherlands"}),e.jsx(w,{value:"New Zealand",children:"New Zealand"}),e.jsx(w,{value:"Nigeria",children:"Nigeria"}),e.jsx(w,{value:"Norway",children:"Norway"}),e.jsx(w,{value:"Pakistan",children:"Pakistan"}),e.jsx(w,{value:"Peru",children:"Peru"}),e.jsx(w,{value:"Philippines",children:"Philippines"}),e.jsx(w,{value:"Poland",children:"Poland"}),e.jsx(w,{value:"Portugal",children:"Portugal"}),e.jsx(w,{value:"Russia",children:"Russia"}),e.jsx(w,{value:"Saudi Arabia",children:"Saudi Arabia"}),e.jsx(w,{value:"Singapore",children:"Singapore"}),e.jsx(w,{value:"South Africa",children:"South Africa"}),e.jsx(w,{value:"South Korea",children:"South Korea"}),e.jsx(w,{value:"Spain",children:"Spain"}),e.jsx(w,{value:"Sweden",children:"Sweden"}),e.jsx(w,{value:"Switzerland",children:"Switzerland"}),e.jsx(w,{value:"Thailand",children:"Thailand"}),e.jsx(w,{value:"Turkey",children:"Turkey"}),e.jsx(w,{value:"UAE",children:"United Arab Emirates"}),e.jsx(w,{value:"UK",children:"United Kingdom"}),e.jsx(w,{value:"USA",children:"United States"}),e.jsx(w,{value:"Vietnam",children:"Vietnam"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Z,{className:"text-sm font-semibold",children:["Date of Birth ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(yt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground z-10"}),e.jsxs(qe,{value:d.birthMonth,onValueChange:N=>m(C=>({...C,birthMonth:N})),children:[e.jsx(Oe,{"data-testid":"select-birth-month",className:"h-12 rounded-xl border-2 pl-9",children:e.jsx($e,{placeholder:"Month"})}),e.jsxs(Fe,{children:[e.jsx(w,{value:"1",children:"January"}),e.jsx(w,{value:"2",children:"February"}),e.jsx(w,{value:"3",children:"March"}),e.jsx(w,{value:"4",children:"April"}),e.jsx(w,{value:"5",children:"May"}),e.jsx(w,{value:"6",children:"June"}),e.jsx(w,{value:"7",children:"July"}),e.jsx(w,{value:"8",children:"August"}),e.jsx(w,{value:"9",children:"September"}),e.jsx(w,{value:"10",children:"October"}),e.jsx(w,{value:"11",children:"November"}),e.jsx(w,{value:"12",children:"December"})]})]})]}),e.jsxs(qe,{value:d.birthDay,onValueChange:N=>m(C=>({...C,birthDay:N})),children:[e.jsx(Oe,{"data-testid":"select-birth-day",className:"h-12 rounded-xl border-2",children:e.jsx($e,{placeholder:"Day"})}),e.jsx(Fe,{className:"max-h-[200px]",children:Array.from({length:31},(N,C)=>C+1).map(N=>e.jsx(w,{value:String(N),children:N},N))})]}),e.jsxs(qe,{value:d.birthYear,onValueChange:N=>m(C=>({...C,birthYear:N})),children:[e.jsx(Oe,{"data-testid":"select-birth-year",className:"h-12 rounded-xl border-2",children:e.jsx($e,{placeholder:"Year"})}),e.jsx(Fe,{className:"max-h-[200px]",children:Array.from({length:new Date().getFullYear()-1924},(N,C)=>new Date().getFullYear()-18-C).map(N=>e.jsx(w,{value:String(N),children:N},N))})]})]})]}),e.jsxs("div",{className:"flex items-start space-x-3 p-4 rounded-xl bg-secondary/30 border-2 border-border/50 hover:border-primary/30 transition-colors",children:[e.jsx(Ji,{id:"terms",checked:u,onCheckedChange:N=>f(N),className:"mt-1","data-testid":"checkbox-terms"}),e.jsx("div",{className:"flex-1",children:e.jsxs("label",{htmlFor:"terms",className:"text-sm font-medium leading-relaxed cursor-pointer",children:["I agree to the"," ",e.jsx("button",{type:"button",onClick:N=>{N.preventDefault(),a("/terms")},className:"text-primary hover:underline font-semibold",children:"Terms and Conditions"})]})})]}),e.jsx(L,{type:"submit",className:"w-full h-12 sm:h-14 text-base font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-[1.02]",disabled:r.isPending||!u||h.length>0,"data-testid":"button-register",children:r.isPending?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Creating Account..."]}):"Create Account"})]})]})})})]}),e.jsxs("section",{className:"lg:hidden space-y-4 mt-8 px-2 animate-in fade-in slide-in-from-bottom-8 duration-700",children:[e.jsx("h2",{className:"text-2xl font-bold text-center bg-gradient-to-r from-primary to-primary/70 bg-clip-text text-transparent",children:"Why Choose SpreadLov?"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("article",{className:"group p-5 rounded-2xl bg-gradient-to-br from-yellow-500/10 to-orange-500/10 border border-yellow-500/20 hover:shadow-lg transition-all duration-300",children:[e.jsx("div",{className:"bg-gradient-to-br from-yellow-500 to-orange-500 w-12 h-12 rounded-xl flex items-center justify-center mb-3 group-hover:scale-110 transition-transform duration-300",children:e.jsx(Qa,{className:"h-6 w-6 text-white"})}),e.jsx("h3",{className:"font-bold text-lg mb-2",children:"Real-Time Messaging"}),e.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:"Connect instantly with compatible singles through our advanced real-time chat system. Build meaningful relationships through authentic conversations."})]}),e.jsxs("article",{className:"group p-5 rounded-2xl bg-gradient-to-br from-green-500/10 to-emerald-500/10 border border-green-500/20 hover:shadow-lg transition-all duration-300",children:[e.jsx("div",{className:"bg-gradient-to-br from-green-500 to-emerald-500 w-12 h-12 rounded-xl flex items-center justify-center mb-3 group-hover:scale-110 transition-transform duration-300",children:e.jsx(as,{className:"h-6 w-6 text-white"})}),e.jsx("h3",{className:"font-bold text-lg mb-2",children:"Smart Profile Matching"}),e.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:"Our intelligent matching algorithm helps you discover people who share your interests, values, and relationship goals for authentic connections."})]}),e.jsxs("article",{className:"group p-5 rounded-2xl bg-gradient-to-br from-blue-500/10 to-purple-500/10 border border-blue-500/20 hover:shadow-lg transition-all duration-300",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-purple-500 w-12 h-12 rounded-xl flex items-center justify-center mb-3 group-hover:scale-110 transition-transform duration-300",children:e.jsx(sa,{className:"h-6 w-6 text-white"})}),e.jsx("h3",{className:"font-bold text-lg mb-2",children:"Safe & Secure Platform"}),e.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:"Your privacy and safety are our top priorities. All profiles are verified, and our platform uses industry-leading security measures to protect your data."})]}),e.jsxs("article",{className:"group p-5 rounded-2xl bg-gradient-to-br from-pink-500/10 to-rose-500/10 border border-pink-500/20 hover:shadow-lg transition-all duration-300",children:[e.jsx("div",{className:"bg-gradient-to-br from-pink-500 to-rose-500 w-12 h-12 rounded-xl flex items-center justify-center mb-3 group-hover:scale-110 transition-transform duration-300",children:e.jsx(ge,{className:"h-6 w-6 text-white"})}),e.jsx("h3",{className:"font-bold text-lg mb-2",children:"Meaningful Relationships"}),e.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:"SpreadLov is designed for people seeking genuine connections and long-term relationships. Join thousands of singles who've found love on our platform."})]})]})]})]})}),e.jsxs("div",{className:"hidden lg:flex flex-1 bg-gradient-to-br from-primary/10 via-primary/5 to-background items-center justify-center p-8 xl:p-12 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-grid-white/10 [mask-image:radial-gradient(white,transparent_85%)]"}),e.jsxs("div",{className:"max-w-lg text-center space-y-8 relative z-10 animate-in fade-in slide-in-from-right-8 duration-1000",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("div",{className:"bg-gradient-to-br from-primary to-primary/70 p-4 rounded-3xl shadow-2xl",children:e.jsx(ge,{className:"h-16 w-16 xl:h-20 xl:w-20 text-white"})})}),e.jsx("h2",{className:"text-3xl xl:text-4xl font-bold bg-gradient-to-r from-primary to-primary/70 bg-clip-text text-transparent",children:"Where Real Connections Happen"}),e.jsx("p",{className:"text-muted-foreground text-base xl:text-lg leading-relaxed",children:"Join a modern dating platform designed for authentic relationships and meaningful conversations with compatible singles."})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[e.jsxs("div",{className:"group flex items-start gap-5 p-6 rounded-2xl bg-background/50 backdrop-blur-sm border border-border/50 shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105",children:[e.jsx("div",{className:"bg-gradient-to-br from-yellow-500 to-orange-500 p-3 rounded-xl shadow-lg group-hover:scale-110 transition-transform duration-300",children:e.jsx(Qa,{className:"h-7 w-7 text-white"})}),e.jsxs("div",{className:"text-left flex-1",children:[e.jsx("h3",{className:"font-bold text-lg mb-1",children:"Instant Messaging"}),e.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:"Chat in real-time with matches and build connections instantly"})]})]}),e.jsxs("div",{className:"group flex items-start gap-5 p-6 rounded-2xl bg-background/50 backdrop-blur-sm border border-border/50 shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105",children:[e.jsx("div",{className:"bg-gradient-to-br from-green-500 to-emerald-500 p-3 rounded-xl shadow-lg group-hover:scale-110 transition-transform duration-300",children:e.jsx(as,{className:"h-7 w-7 text-white"})}),e.jsxs("div",{className:"text-left flex-1",children:[e.jsx("h3",{className:"font-bold text-lg mb-1",children:"Smart Matching"}),e.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:"Discover compatible singles based on your interests and preferences"})]})]})]})]})]})]})]})}function Vh(){const[,t]=de(),{toast:s}=ct(),[r,a]=i.useState("email"),[n,o]=i.useState(""),[l,c]=i.useState(""),[d,m]=i.useState(""),[u,f]=i.useState(""),[h,b]=i.useState(!1),g=async p=>{p.preventDefault(),b(!0);try{const x=await fetch("/api/forgot-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n})}),y=await x.json();x.ok?(s({title:"Success",description:y.message}),a("reset")):s({title:"Error",description:y.message||"Failed to send reset code",variant:"destructive"})}catch{s({title:"Error",description:"Failed to send reset code. Please try again.",variant:"destructive"})}finally{b(!1)}},v=async p=>{if(p.preventDefault(),d!==u){s({title:"Error",description:"Passwords do not match",variant:"destructive"});return}if(d.length<6){s({title:"Error",description:"Password must be at least 6 characters",variant:"destructive"});return}b(!0);try{const x=await fetch("/api/reset-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,code:l,newPassword:d})}),y=await x.json();x.ok?(a("success"),s({title:"Success",description:y.message})):s({title:"Error",description:y.message||"Failed to reset password",variant:"destructive"})}catch{s({title:"Error",description:"Failed to reset password. Please try again.",variant:"destructive"})}finally{b(!1)}};return e.jsxs("div",{className:"min-h-screen flex flex-col lg:flex-row bg-background",children:[e.jsx("div",{className:"flex-1 flex items-center justify-center p-4 sm:p-6 md:p-8 lg:p-12",children:e.jsxs("div",{className:"w-full max-w-md space-y-6 sm:space-y-8",children:[e.jsxs("div",{className:"text-center space-y-2 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx("img",{src:"/android-chrome-192x192.png",alt:"SpreadLov",className:"h-16 w-16 sm:h-20 sm:w-20 rounded-2xl shadow-lg",width:"192",height:"192"})}),e.jsx("h1",{className:"text-3xl sm:text-4xl lg:text-5xl font-bold bg-gradient-to-r from-primary via-primary to-primary/70 bg-clip-text text-transparent",children:"SpreadLov"}),e.jsx("p",{className:"text-sm sm:text-base text-muted-foreground max-w-sm mx-auto",children:"Reset your password"})]}),e.jsx(ae,{className:"border-0 shadow-2xl rounded-2xl overflow-hidden bg-gradient-to-br from-card to-card/80 animate-in fade-in slide-in-from-bottom-4 duration-500",children:e.jsxs(he,{className:"p-6 sm:p-8",children:[r==="email"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Forgot Password?"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Enter your email to receive a reset code"})]}),e.jsxs("form",{onSubmit:g,className:"space-y-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"email",className:"text-sm font-semibold",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(we,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground"}),e.jsx(re,{id:"email",type:"email",placeholder:"Enter your email",value:n,onChange:p=>o(p.target.value),required:!0,className:"pl-10 h-12 rounded-xl border-2 transition-all focus:border-primary focus:ring-2 focus:ring-primary/20"})]})]}),e.jsx(L,{type:"submit",className:"w-full h-12 sm:h-14 text-base font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-[1.02]",disabled:h,children:h?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Sending Code..."]}):"Send Reset Code"}),e.jsxs("button",{type:"button",onClick:()=>t("/"),className:"w-full flex items-center justify-center gap-2 text-sm text-primary hover:underline font-medium transition-colors mt-4",children:[e.jsx(Le,{className:"h-4 w-4"}),"Back to Login"]})]})]}),r==="reset"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Reset Password"}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Enter the code sent to ",n," and your new password"]})]}),e.jsxs("form",{onSubmit:v,className:"space-y-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"code",className:"text-sm font-semibold",children:"Verification Code"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ya,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground"}),e.jsx(re,{id:"code",type:"text",placeholder:"Enter 6-digit code",value:l,onChange:p=>c(p.target.value),required:!0,maxLength:6,className:"pl-10 h-12 rounded-xl border-2 transition-all focus:border-primary focus:ring-2 focus:ring-primary/20 text-center text-2xl tracking-widest font-mono"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"new-password",className:"text-sm font-semibold",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(kt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground"}),e.jsx(re,{id:"new-password",type:"password",placeholder:"Enter new password (min. 6 characters)",value:d,onChange:p=>m(p.target.value),required:!0,className:"pl-10 h-12 rounded-xl border-2 transition-all focus:border-primary focus:ring-2 focus:ring-primary/20"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"confirm-password",className:"text-sm font-semibold",children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(kt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground"}),e.jsx(re,{id:"confirm-password",type:"password",placeholder:"Confirm new password",value:u,onChange:p=>f(p.target.value),required:!0,className:"pl-10 h-12 rounded-xl border-2 transition-all focus:border-primary focus:ring-2 focus:ring-primary/20"})]})]}),e.jsx(L,{type:"submit",className:"w-full h-12 sm:h-14 text-base font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-[1.02]",disabled:h,children:h?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Resetting Password..."]}):"Reset Password"}),e.jsxs("button",{type:"button",onClick:()=>a("email"),className:"w-full flex items-center justify-center gap-2 text-sm text-primary hover:underline font-medium transition-colors mt-4",children:[e.jsx(Le,{className:"h-4 w-4"}),"Back"]})]})]}),r==="success"&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mb-6",children:e.jsx(Mt,{className:"h-8 w-8 text-green-600 dark:text-green-400"})}),e.jsx("h2",{className:"text-2xl font-bold tracking-tight mb-2",children:"Password Reset Successful!"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-6",children:"Your password has been reset successfully. You can now log in with your new password."}),e.jsx(L,{onClick:()=>t("/"),className:"w-full h-12 sm:h-14 text-base font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-[1.02]",children:"Back to Login"})]})]})})]})}),e.jsx("div",{className:"hidden lg:flex flex-1 items-center justify-center p-12 bg-gradient-to-br from-primary/10 via-primary/5 to-transparent",children:e.jsxs("div",{className:"max-w-md space-y-8 text-center animate-in fade-in slide-in-from-right-4 duration-700 delay-300",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"p-6 bg-primary/10 rounded-3xl",children:e.jsx(Ya,{className:"h-16 w-16 text-primary"})})}),e.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-primary via-purple-500 to-pink-500 bg-clip-text text-transparent",children:"Secure Password Reset"}),e.jsx("p",{className:"text-lg text-muted-foreground leading-relaxed",children:"We'll send a verification code to your email. The code expires in 10 minutes for your security."}),e.jsxs("div",{className:"space-y-4 pt-4",children:[e.jsxs("div",{className:"flex items-start gap-4 text-left p-4 rounded-xl bg-card/50 border border-border/50",children:[e.jsx("div",{className:"p-2 bg-orange-100 dark:bg-orange-900/30 rounded-lg",children:e.jsx(we,{className:"h-5 w-5 text-orange-600 dark:text-orange-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-1",children:"Email Verification"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive a 6-digit code instantly via email"})]})]}),e.jsxs("div",{className:"flex items-start gap-4 text-left p-4 rounded-xl bg-card/50 border border-border/50",children:[e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-lg",children:e.jsx(kt,{className:"h-5 w-5 text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-1",children:"Secure Process"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Your password is encrypted and never shared"})]})]})]})]})})]})}function Bh(){const{toast:t}=ct(),{user:s}=be(),[r,a]=i.useState("email"),[n,o]=i.useState(""),[l,c]=i.useState(""),[d,m]=i.useState(!1),u=async h=>{h.preventDefault(),m(!0);try{const b=await fetch("/api/account/request-delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n})}),g=await b.json();b.ok?(t({title:"Verification Code Sent",description:g.message}),a("verify")):t({title:"Error",description:g.message||"Failed to send verification code",variant:"destructive"})}catch{t({title:"Error",description:"Failed to process request. Please try again.",variant:"destructive"})}finally{m(!1)}},f=async h=>{h.preventDefault(),m(!0);try{const b=await fetch("/api/account/verify-delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,code:l}),credentials:"include"}),g=await b.json();b.ok?(a("success"),t({title:"Account Deleted",description:g.message}),localStorage.clear(),sessionStorage.clear(),setTimeout(()=>{window.location.replace("https://spreadlov.com")},3e3)):t({title:"Error",description:g.message||"Failed to verify code",variant:"destructive"})}catch{t({title:"Error",description:"Failed to delete account. Please try again.",variant:"destructive"})}finally{m(!1)}};return e.jsxs("div",{className:`min-h-screen flex flex-col lg:flex-row bg-gradient-to-br from-background via-background to-destructive/5 ${s?"pb-20":""}`,children:[e.jsx("div",{className:"flex-1 flex items-center justify-center p-4 sm:p-6 md:p-8 lg:p-12",children:e.jsxs("div",{className:"w-full max-w-md space-y-6 sm:space-y-8",children:[e.jsxs("div",{className:"text-center space-y-2 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx("img",{src:"/android-chrome-192x192.png",alt:"SpreadLov",className:"h-16 w-16 sm:h-20 sm:w-20 rounded-2xl shadow-lg",width:"192",height:"192"})}),e.jsx("h1",{className:"text-3xl sm:text-4xl lg:text-5xl font-bold bg-gradient-to-r from-primary via-primary to-primary/70 bg-clip-text text-transparent",children:"SpreadLov"}),e.jsx("p",{className:"text-sm sm:text-base text-muted-foreground max-w-sm mx-auto",children:"Delete your account"})]}),e.jsx(ae,{className:"border-0 shadow-2xl rounded-2xl overflow-hidden bg-gradient-to-br from-card to-card/80 animate-in fade-in slide-in-from-bottom-4 duration-500",children:e.jsxs(he,{className:"p-6 sm:p-8",children:[r==="email"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight text-destructive",children:"Delete Account"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Enter your email to receive a verification code"})]}),e.jsx("div",{className:"mb-6 p-4 bg-destructive/10 border-l-4 border-destructive rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Nr,{className:"h-5 w-5 text-destructive mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-destructive text-sm",children:"Warning: This action is permanent"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"All your data including profile, messages, photos, and connections will be permanently deleted and cannot be recovered."})]})]})}),e.jsxs("form",{onSubmit:u,className:"space-y-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"email",className:"text-sm font-semibold",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(we,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground"}),e.jsx(re,{id:"email",type:"email",placeholder:"Enter your email",value:n,onChange:h=>o(h.target.value),required:!0,className:"pl-10 h-12 rounded-xl border-2 transition-all focus:border-destructive focus:ring-2 focus:ring-destructive/20"})]})]}),e.jsx(L,{type:"submit",variant:"destructive",className:"w-full h-12 sm:h-14 text-base font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-[1.02]",disabled:d,children:d?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Sending Code..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Je,{className:"h-5 w-5 mr-2"}),"Request Deletion Code"]})})]})]}),r==="verify"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight text-destructive",children:"Verify Deletion"}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Enter the 6-digit code sent to ",n]})]}),e.jsx("div",{className:"mb-6 p-4 bg-amber-500/10 border-l-4 border-amber-500 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Nr,{className:"h-5 w-5 text-amber-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-amber-600 text-sm",children:"Final Step"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Once you verify this code, your account will be deleted immediately and permanently."})]})]})}),e.jsxs("form",{onSubmit:f,className:"space-y-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"code",className:"text-sm font-semibold",children:"Verification Code"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ue,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground"}),e.jsx(re,{id:"code",type:"text",placeholder:"Enter 6-digit code",value:l,onChange:h=>c(h.target.value),required:!0,maxLength:6,className:"pl-10 h-12 rounded-xl border-2 transition-all focus:border-destructive focus:ring-2 focus:ring-destructive/20 text-center text-2xl tracking-widest font-mono"})]}),e.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Code expires in 10 minutes"})]}),e.jsx(L,{type:"submit",variant:"destructive",className:"w-full h-12 sm:h-14 text-base font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-[1.02]",disabled:d,children:d?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Deleting Account..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Je,{className:"h-5 w-5 mr-2"}),"Confirm & Delete Account"]})}),e.jsx("button",{type:"button",onClick:()=>a("email"),className:"w-full text-sm text-muted-foreground hover:text-primary transition-colors mt-2",children:"Cancel deletion"})]})]}),r==="success"&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mb-6",children:e.jsx(Mt,{className:"h-8 w-8 text-green-600 dark:text-green-400"})}),e.jsx("h2",{className:"text-2xl font-bold tracking-tight mb-2",children:"Account Deleted Successfully"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-6",children:"Your account and all associated data have been permanently deleted."}),e.jsx("p",{className:"text-xs text-muted-foreground mb-4",children:"Redirecting to spreadlov.com in 3 seconds..."}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-primary",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary"}),e.jsx("span",{className:"text-sm",children:"Please wait..."})]})]})]})})]})}),e.jsx("div",{className:"hidden lg:flex flex-1 items-center justify-center p-12 bg-gradient-to-br from-destructive/10 via-destructive/5 to-transparent",children:e.jsxs("div",{className:"max-w-md space-y-8 text-center animate-in fade-in slide-in-from-right-4 duration-700 delay-300",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"p-6 bg-destructive/10 rounded-3xl",children:e.jsx(Je,{className:"h-16 w-16 text-destructive"})})}),e.jsx("h2",{className:"text-3xl font-bold text-foreground",children:"Account Deletion Process"}),e.jsx("p",{className:"text-lg text-muted-foreground leading-relaxed",children:"We take your privacy seriously. Once you confirm deletion, all your data will be permanently removed from our systems."}),e.jsxs("div",{className:"space-y-4 pt-4",children:[e.jsxs("div",{className:"flex items-start gap-4 text-left p-4 rounded-xl bg-card/50 border border-border/50",children:[e.jsx("div",{className:"p-2 bg-orange-100 dark:bg-orange-900/30 rounded-lg",children:e.jsx(we,{className:"h-5 w-5 text-orange-600 dark:text-orange-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-1",children:"Email Verification"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive a 6-digit verification code to confirm your identity"})]})]}),e.jsxs("div",{className:"flex items-start gap-4 text-left p-4 rounded-xl bg-card/50 border border-border/50",children:[e.jsx("div",{className:"p-2 bg-red-100 dark:bg-red-900/30 rounded-lg",children:e.jsx(Je,{className:"h-5 w-5 text-red-600 dark:text-red-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-1",children:"Permanent Deletion"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"All profile data, messages, photos, and connections removed"})]})]}),e.jsxs("div",{className:"flex items-start gap-4 text-left p-4 rounded-xl bg-card/50 border border-border/50",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:e.jsx(Ue,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-1",children:"Secure & Private"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Your data is completely erased from our database"})]})]})]})]})})]})}function Hh(){const[,t]=de();return e.jsxs(e.Fragment,{children:[e.jsx(Wt,{title:"Terms and Conditions - SpreadLov Dating Platform",description:"Read the terms and conditions for using SpreadLov dating platform. Understand your rights and responsibilities as a user.",canonical:"https://spreadlov.com/terms"}),e.jsx("div",{className:"min-h-screen bg-background",children:e.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-5xl",children:[e.jsxs(L,{variant:"ghost",onClick:()=>t("/auth?tab=signup"),className:"mb-6 hover:bg-secondary/50 transition-colors",children:[e.jsx(Le,{className:"mr-2 h-4 w-4"}),"Back to Sign Up"]}),e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("div",{className:"bg-gradient-to-br from-blue-500 via-purple-500 to-pink-500 p-4 rounded-2xl shadow-2xl",children:e.jsx(wu,{className:"h-12 w-12 text-white"})})}),e.jsx("h1",{className:"text-3xl sm:text-4xl lg:text-5xl font-bold bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 bg-clip-text text-transparent",children:"Terms and Conditions"}),e.jsx("p",{className:"text-muted-foreground text-sm sm:text-base max-w-2xl mx-auto",children:"Last updated: November 2, 2025"})]}),e.jsx(ae,{className:"border-0 shadow-2xl rounded-2xl overflow-hidden bg-gradient-to-br from-card to-card/80",children:e.jsx(he,{className:"p-6 sm:p-8 lg:p-10",children:e.jsx(Ne,{className:"h-[600px] pr-4",children:e.jsxs("div",{className:"space-y-8",children:[e.jsxs("section",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-purple-500 p-2 rounded-lg",children:e.jsx(Co,{className:"h-5 w-5 text-white"})}),e.jsx("h2",{className:"text-2xl font-bold",children:"1. Acceptance of Terms"})]}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:'By accessing and using SpreadLov ("the Service"), you accept and agree to be bound by the terms and provision of this agreement. If you do not agree to abide by the above, please do not use this service.'}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"These Terms and Conditions constitute a legally binding agreement between you and SpreadLov regarding your use of our platform and services."})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-purple-500 to-pink-500 p-2 rounded-lg",children:e.jsx(Ue,{className:"h-5 w-5 text-white"})}),e.jsx("h2",{className:"text-2xl font-bold",children:"2. Eligibility and Account Registration"})]}),e.jsx("div",{className:"bg-red-500/10 border-l-4 border-red-500 p-4 rounded-r-lg mb-4",children:e.jsx("p",{className:"text-sm font-semibold text-red-600 dark:text-red-400",children:"You must be at least 18 years old to use SpreadLov. No users under 18 are permitted."})}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"By registering for an account, you represent and warrant that:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-muted-foreground ml-4",children:[e.jsx("li",{children:"You are at least 18 years of age"}),e.jsx("li",{children:"All information you provide during registration is accurate and truthful"}),e.jsx("li",{children:"You will maintain the confidentiality of your account credentials"}),e.jsx("li",{children:"You will notify us immediately of any unauthorized access to your account"}),e.jsx("li",{children:"You agree to verify your email address to access full platform features"})]}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"You may register using email/password authentication or through Google OAuth. Email verification is required to access certain features including messaging and profile interactions."}),e.jsx("div",{className:"bg-secondary/30 border-l-4 border-primary p-4 rounded-r-lg",children:e.jsx("p",{className:"text-sm font-medium",children:"You are solely responsible for all activities that occur under your account."})})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"3. Platform Features and Services"}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"SpreadLov provides the following features and services:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-muted-foreground ml-4",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Profile Creation:"})," Create detailed profiles with photos, bio, location, age, and preferences"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"User Discovery:"})," Browse and filter other users by gender, location, and age range"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Messaging:"})," Real-time one-on-one chat with consent-based communication system"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Image Sharing:"})," Share photos within chat conversations"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Profile Interactions:"})," Like/unlike profiles and view who has liked your profile"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Notifications:"})," Receive in-app and push notifications for profile views, messages, and likes"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Email Communications:"})," Verification codes, password resets, and optional newsletter subscriptions"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Account Management:"})," Update profile information, manage privacy settings, and delete your account"]})]})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"4. Messaging and Consent System"}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"SpreadLov implements a consent-based messaging system to protect user privacy and prevent unwanted communication:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-muted-foreground ml-4",children:[e.jsx("li",{children:"Before initiating a conversation with another user, you must send a chat request"}),e.jsx("li",{children:"The recipient can accept or decline your request"}),e.jsx("li",{children:"Direct messaging is only enabled after both parties have consented to communicate"}),e.jsx("li",{children:"Users can report or block others at any time"}),e.jsx("li",{children:"Consent can be withdrawn by either party"})]}),e.jsx("div",{className:"bg-primary/10 border-l-4 border-primary p-4 rounded-r-lg",children:e.jsx("p",{className:"text-sm font-medium",children:"Respecting user consent and privacy is mandatory. Violations may result in account suspension or termination."})})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"5. User Conduct and Prohibited Activities"}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"You agree not to use SpreadLov to:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-muted-foreground ml-4",children:[e.jsx("li",{children:"Harass, abuse, threaten, or harm another person"}),e.jsx("li",{children:"Transmit any content that is unlawful, harmful, threatening, abusive, or otherwise objectionable"}),e.jsx("li",{children:"Impersonate any person or entity, or falsely state or misrepresent your identity or affiliation"}),e.jsx("li",{children:"Post or share sexually explicit content involving minors (zero tolerance policy)"}),e.jsx("li",{children:"Spam, solicit, or send unsolicited commercial communications"}),e.jsx("li",{children:"Interfere with or disrupt the Service or servers or networks connected to the Service"}),e.jsx("li",{children:"Violate any applicable local, state, national, or international law"}),e.jsx("li",{children:"Upload or transmit viruses, malware, or any other type of malicious code"}),e.jsx("li",{children:"Attempt to gain unauthorized access to other user accounts or the Service infrastructure"}),e.jsx("li",{children:"Use automated systems, bots, or scripts to access the Service"})]}),e.jsx("div",{className:"bg-amber-500/10 border-l-4 border-amber-500 p-4 rounded-r-lg",children:e.jsx("p",{className:"text-sm font-medium",children:"Violations will result in immediate account termination and may be reported to law enforcement authorities."})})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"6. User Content and Photos"}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"You may upload profile photos, gallery images, and share images in chat conversations. By uploading content, you represent and warrant that:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-muted-foreground ml-4",children:[e.jsx("li",{children:"You own or have the right to use the content you upload"}),e.jsx("li",{children:"Your content does not violate any third-party rights or applicable laws"}),e.jsx("li",{children:"Your content does not contain nudity, sexually explicit material involving minors, or illegal content"}),e.jsx("li",{children:"You grant SpreadLov a license to store, process, and display your content as part of the Service"})]}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"We reserve the right to remove any content that violates these Terms or is deemed inappropriate. You remain the owner of your content, but grant us the necessary rights to operate the Service."})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"7. Privacy and Data Protection"}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"SpreadLov collects and processes the following types of personal information:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-muted-foreground ml-4",children:[e.jsx("li",{children:"Account information (username, email, password hash)"}),e.jsx("li",{children:"Profile information (name, age, gender, location, bio, photos)"}),e.jsx("li",{children:"Usage data (messages, profile views, likes, notifications)"}),e.jsx("li",{children:"Device information for push notifications (FCM tokens)"}),e.jsx("li",{children:"Session data and authentication tokens"})]}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"We implement appropriate security measures to protect your personal information, including encryption, secure session management, and access controls. However, no method of transmission over the Internet is 100% secure, and we cannot guarantee absolute security."}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"You have the right to access, update, or delete your personal information through your account settings. You may request complete account deletion at any time."})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"8. Push Notifications and Communications"}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"By using SpreadLov, you agree to receive the following types of communications:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-muted-foreground ml-4",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Email Communications:"})," Account verification codes, password reset emails, and optional newsletter subscriptions"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Push Notifications:"})," Real-time notifications for messages, profile views, and likes via Firebase Cloud Messaging"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"In-App Notifications:"})," Alerts for profile interactions and system messages"]})]}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"You can manage notification preferences in your device settings. You may unsubscribe from the newsletter at any time using the unsubscribe link in email communications."})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"9. Account Deletion and Data Retention"}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"You may request to permanently delete your account at any time through the account deletion page. The deletion process requires:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-muted-foreground ml-4",children:[e.jsx("li",{children:"Email verification via a 6-digit code sent to your registered email address"}),e.jsx("li",{children:"Confirmation within 10 minutes of receiving the code"})]}),e.jsx("div",{className:"bg-destructive/10 border-l-4 border-destructive p-4 rounded-r-lg",children:e.jsx("p",{className:"text-sm font-medium text-destructive",children:"Account deletion is permanent and irreversible. All your data including profile, messages, photos, and connections will be permanently deleted and cannot be recovered."})})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"10. Intellectual Property"}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"The Service and its original content, features, and functionality are and will remain the exclusive property of SpreadLov and its licensors. The Service is protected by copyright, trademark, and other laws."}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"You retain ownership of any content you submit, post, or display on or through the Service. By posting content, you grant us a worldwide, non-exclusive, royalty-free license to use, copy, reproduce, process, adapt, modify, publish, transmit, display, and distribute such content for the purpose of operating and providing the Service."})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"11. Child Safety and Protection"}),e.jsx("div",{className:"bg-red-500/10 border-l-4 border-red-500 p-4 rounded-r-lg mb-4",children:e.jsx("p",{className:"text-sm font-semibold text-red-600 dark:text-red-400",children:"SpreadLov has ZERO TOLERANCE for child sexual abuse material (CSAM), child exploitation, or grooming."})}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"We are committed to maintaining the highest standards of child safety:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-muted-foreground ml-4",children:[e.jsx("li",{children:"Strict age verification during registration (18+ only)"}),e.jsx("li",{children:"Active monitoring and reporting of suspicious content"}),e.jsx("li",{children:"Immediate escalation to law enforcement for suspected violations"}),e.jsx("li",{children:"Full compliance with child safety regulations"}),e.jsx("li",{children:"Easy reporting mechanisms for users (spreadlov.aid@gmail.com)"})]}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"Any violation of our child safety policies will result in immediate account termination and reporting to law enforcement authorities. For complete details, please review our Child Safety & Protection Policy."})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-orange-500 to-red-500 p-2 rounded-lg",children:e.jsx(Tu,{className:"h-5 w-5 text-white"})}),e.jsx("h2",{className:"text-2xl font-bold",children:"12. Limitation of Liability"})]}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"In no event shall SpreadLov, nor its directors, employees, partners, agents, suppliers, or affiliates, be liable for any indirect, incidental, special, consequential, or punitive damages, including without limitation, loss of profits, data, use, goodwill, or other intangible losses, resulting from:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-muted-foreground ml-4",children:[e.jsx("li",{children:"Your access to or use of or inability to access or use the Service"}),e.jsx("li",{children:"Any conduct or content of any third party on the Service"}),e.jsx("li",{children:"Any content obtained from the Service"}),e.jsx("li",{children:"Unauthorized access, use, or alteration of your transmissions or content"}),e.jsx("li",{children:"Any interactions or relationships formed through the Service"})]})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"13. Disclaimer of Warranties"}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:'The Service is provided on an "AS IS" and "AS AVAILABLE" basis. SpreadLov makes no warranties, expressed or implied, and hereby disclaims and negates all other warranties including, without limitation, implied warranties or conditions of merchantability, fitness for a particular purpose, or non-infringement of intellectual property.'}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"We do not guarantee that you will find a match, relationship, or specific results from using the Service. User experiences may vary."})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"14. Account Termination and Suspension"}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"We may terminate or suspend your account immediately, without prior notice or liability, for any reason, including:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-muted-foreground ml-4",children:[e.jsx("li",{children:"Violation of these Terms and Conditions"}),e.jsx("li",{children:"Fraudulent, abusive, or illegal activity"}),e.jsx("li",{children:"Harassment or harm to other users"}),e.jsx("li",{children:"Violations of our Child Safety Policy"}),e.jsx("li",{children:"Creating multiple accounts to circumvent restrictions"})]}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"If you wish to terminate your account voluntarily, you may use the account deletion feature in your profile settings or contact support at spreadlov.aid@gmail.com."})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"15. Changes to Terms"}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"We reserve the right to modify or replace these Terms at any time at our sole discretion. If a revision is material, we will provide at least 30 days' notice prior to any new terms taking effect through email or in-app notification."}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"By continuing to access or use our Service after any revisions become effective, you agree to be bound by the revised terms. If you do not agree to the new terms, you must discontinue use of the Service and may delete your account."})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"16. Governing Law and Dispute Resolution"}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"These Terms shall be governed and construed in accordance with the laws of the jurisdiction in which SpreadLov operates, without regard to its conflict of law provisions."}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"Our failure to enforce any right or provision of these Terms will not be considered a waiver of those rights. Any disputes arising from these Terms or use of the Service shall be resolved through binding arbitration or in the courts of our operating jurisdiction."})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"17. Contact Information"}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"If you have any questions, concerns, or feedback about these Terms, please contact us:"}),e.jsxs("div",{className:"bg-primary/10 border-l-4 border-primary p-4 rounded-r-lg",children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Email: spreadlov.aid@gmail.com"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"You can also reach us through the support and feedback feature within the application from your profile settings."})]})]}),e.jsx("div",{className:"mt-8 p-6 bg-gradient-to-br from-primary/10 to-primary/5 rounded-xl border-2 border-primary/20",children:e.jsx("p",{className:"text-sm text-center font-medium",children:"By creating an account on SpreadLov, you acknowledge that you have read, understood, and agree to be bound by these Terms and Conditions."})})]})})})}),e.jsx("div",{className:"flex justify-center pb-8",children:e.jsx(L,{onClick:()=>t("/auth?tab=signup"),className:"h-12 px-8 text-base font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105",children:"Back to Sign Up"})})]})]})})]})}function Kh(){const[,t]=de();return e.jsxs(e.Fragment,{children:[e.jsx(Wt,{title:"About SpreadLov - Modern Dating Platform",description:"Learn about SpreadLov, a modern digital platform founded by Krishnakant Yadav, focused on creating meaningful human connections through technology.",canonical:"https://spreadlov.com/about"}),e.jsx("div",{className:"min-h-screen bg-background",children:e.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-5xl",children:[e.jsxs(L,{variant:"ghost",onClick:()=>t("/auth?tab=signup"),className:"mb-6 hover:bg-secondary/50 transition-colors",children:[e.jsx(Le,{className:"mr-2 h-4 w-4"}),"Back to Sign Up"]}),e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("div",{className:"bg-gradient-to-br from-blue-500 via-purple-500 to-pink-500 p-4 rounded-2xl shadow-2xl",children:e.jsx(ge,{className:"h-12 w-12 text-white"})})}),e.jsx("h1",{className:"text-3xl sm:text-4xl lg:text-5xl font-bold bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 bg-clip-text text-transparent",children:"About SpreadLov"}),e.jsx("p",{className:"text-muted-foreground text-sm sm:text-base max-w-2xl mx-auto",children:"Creating meaningful connections through technology"})]}),e.jsx(ae,{className:"border-0 shadow-2xl rounded-2xl overflow-hidden bg-gradient-to-br from-card to-card/80",children:e.jsx(he,{className:"p-6 sm:p-8 lg:p-10",children:e.jsx(Ne,{className:"h-[600px] pr-4",children:e.jsxs("div",{className:"space-y-8",children:[e.jsxs("section",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-purple-500 p-2 rounded-lg",children:e.jsx(So,{className:"h-5 w-5 text-white"})}),e.jsx("h2",{className:"text-2xl font-bold",children:"Our Mission"})]}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"SpreadLov is a modern digital platform founded by Krishnakant Yadav, focused on creating meaningful human connections through technology. Based in India, SpreadLov develops secure, user-friendly social and dating applications that promote positivity, respect, and authenticity."}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"Our mission is to make online interactions safe, uplifting, and genuinely personal. We believe technology should bring people closer  not apart  and every product we build reflects that vision."}),e.jsx("div",{className:"bg-primary/10 border-l-4 border-primary p-4 rounded-r-lg",children:e.jsx("p",{className:"text-sm font-medium",children:"Join us in spreading love, one connection at a time."})})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-purple-500 to-pink-500 p-2 rounded-lg",children:e.jsx(as,{className:"h-5 w-5 text-white"})}),e.jsx("h2",{className:"text-2xl font-bold",children:"What We Do"})]}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"At SpreadLov, we create platforms that prioritize:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-muted-foreground ml-4",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Authenticity:"})," Real connections with verified users"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Safety:"})," Robust security measures and user protection"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Privacy:"})," Your data is protected and never sold"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Respect:"})," A consent-based communication system"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Inclusivity:"})," A welcoming space for everyone"]})]})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-pink-500 to-red-500 p-2 rounded-lg",children:e.jsx(Ue,{className:"h-5 w-5 text-white"})}),e.jsx("h2",{className:"text-2xl font-bold",children:"Our Values"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-secondary/30 border-l-4 border-blue-500 p-4 rounded-r-lg",children:[e.jsx("h3",{className:"font-semibold mb-1",children:"Safety First"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"We implement strict age verification, content moderation, and zero-tolerance policies for abuse and harassment."})]}),e.jsxs("div",{className:"bg-secondary/30 border-l-4 border-purple-500 p-4 rounded-r-lg",children:[e.jsx("h3",{className:"font-semibold mb-1",children:"User Privacy"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Your personal information is encrypted and protected. We never share or sell your data to third parties."})]}),e.jsxs("div",{className:"bg-secondary/30 border-l-4 border-pink-500 p-4 rounded-r-lg",children:[e.jsx("h3",{className:"font-semibold mb-1",children:"Genuine Connections"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"We foster meaningful relationships by encouraging authentic profiles and respectful communication."})]})]})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Founded by Krishnakant Yadav"}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"SpreadLov was founded with a clear vision: to create a dating platform that puts people first. Our founder, Krishnakant Yadav, recognized the need for a safe, authentic space where individuals can connect without fear of judgment or harassment."}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"Based in India, we understand the unique challenges and opportunities in the digital dating landscape. Our platform is designed to respect cultural values while embracing modern technology."})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-orange-500 to-red-500 p-2 rounded-lg",children:e.jsx(we,{className:"h-5 w-5 text-white"})}),e.jsx("h2",{className:"text-2xl font-bold",children:"Connect With Us"})]}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"We love hearing from our community! Follow us on social media or reach out directly:"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mt-6",children:[e.jsxs("a",{href:"https://x.com/SpreadlovAid",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-4 bg-secondary/50 hover:bg-secondary transition-all rounded-lg group",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-400 to-blue-600 p-2 rounded-lg",children:e.jsx(xs,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold group-hover:text-primary transition-colors",children:"X (Twitter)"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"@SpreadlovAid"})]})]}),e.jsxs("a",{href:"https://www.instagram.com/spreadlov.aid",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-4 bg-secondary/50 hover:bg-secondary transition-all rounded-lg group",children:[e.jsx("div",{className:"bg-gradient-to-br from-pink-500 to-purple-600 p-2 rounded-lg",children:e.jsx(xs,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold group-hover:text-primary transition-colors",children:"Instagram"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"@spreadlov.aid"})]})]}),e.jsxs("a",{href:"https://www.facebook.com/people/SpreadLov/61582553866904/",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-4 bg-secondary/50 hover:bg-secondary transition-all rounded-lg group",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-blue-700 p-2 rounded-lg",children:e.jsx(xs,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold group-hover:text-primary transition-colors",children:"Facebook"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"SpreadLov"})]})]}),e.jsxs("a",{href:"https://www.linkedin.com/company/spreadlov",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-4 bg-secondary/50 hover:bg-secondary transition-all rounded-lg group",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-600 to-blue-800 p-2 rounded-lg",children:e.jsx(xs,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold group-hover:text-primary transition-colors",children:"LinkedIn"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"SpreadLov"})]})]}),e.jsxs("a",{href:"mailto:spreadlov.aid@gmail.com",className:"flex items-center gap-3 p-4 bg-secondary/50 hover:bg-secondary transition-all rounded-lg group",children:[e.jsx("div",{className:"bg-gradient-to-br from-green-500 to-emerald-600 p-2 rounded-lg",children:e.jsx(we,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold group-hover:text-primary transition-colors",children:"Email"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"spreadlov.aid@gmail.com"})]})]})]}),e.jsxs("div",{className:"bg-primary/10 border-l-4 border-primary p-4 rounded-r-lg mt-6",children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Need Support or Have Feedback?"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"For feedback or support, open the in-app Support & Feedback section from your profile settings."})]})]}),e.jsx("div",{className:"mt-8 p-6 bg-gradient-to-br from-primary/10 to-primary/5 rounded-xl border-2 border-primary/20",children:e.jsx("p",{className:"text-sm text-center font-medium",children:"Thank you for being part of the SpreadLov community. Together, we're building a better way to connect."})})]})})})}),e.jsx("div",{className:"flex justify-center pb-8",children:e.jsx(L,{onClick:()=>t("/auth?tab=signup"),className:"h-12 px-8 text-base font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105",children:"Back to Sign Up"})})]})]})})]})}function Yh(){const[,t]=de();return e.jsxs(e.Fragment,{children:[e.jsx(Wt,{title:"Privacy Policy - SpreadLov Dating Platform",description:"Read SpreadLov's privacy policy to understand how we collect, use, and protect your personal information.",canonical:"https://spreadlov.com/privacy-policy"}),e.jsx("div",{className:"min-h-screen bg-background",children:e.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-5xl",children:[e.jsxs(L,{variant:"ghost",onClick:()=>t("/auth?tab=signup"),className:"mb-6 hover:bg-secondary/50 transition-colors",children:[e.jsx(Le,{className:"mr-2 h-4 w-4"}),"Back to Sign Up"]}),e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("div",{className:"bg-gradient-to-br from-blue-500 via-purple-500 to-pink-500 p-4 rounded-2xl shadow-2xl",children:e.jsx(Ue,{className:"h-12 w-12 text-white"})})}),e.jsx("h1",{className:"text-3xl sm:text-4xl lg:text-5xl font-bold bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 bg-clip-text text-transparent",children:"Privacy Policy"}),e.jsx("p",{className:"text-muted-foreground text-sm sm:text-base max-w-2xl mx-auto",children:"Last updated: November 12, 2025"})]}),e.jsx(ae,{className:"border-0 shadow-2xl rounded-2xl overflow-hidden bg-gradient-to-br from-card to-card/80",children:e.jsx(he,{className:"p-6 sm:p-8 lg:p-10",children:e.jsx(Ne,{className:"h-[600px] pr-4",children:e.jsxs("div",{className:"space-y-8",children:[e.jsxs("section",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-purple-500 p-2 rounded-lg",children:e.jsx(Ue,{className:"h-5 w-5 text-white"})}),e.jsx("h2",{className:"text-2xl font-bold",children:"1. Introduction"})]}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"At SpreadLov, we are committed to protecting your privacy and ensuring the security of your personal information. This Privacy Policy explains how we collect, use, store, and protect your data when you use our dating platform and services."}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"By using SpreadLov, you agree to the collection and use of information in accordance with this policy. If you do not agree with our policies and practices, please do not use our services."})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-purple-500 to-pink-500 p-2 rounded-lg",children:e.jsx(vu,{className:"h-5 w-5 text-white"})}),e.jsx("h2",{className:"text-2xl font-bold",children:"2. Information We Collect"})]}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"We collect several types of information to provide and improve our services:"}),e.jsx("h3",{className:"text-xl font-semibold mt-4",children:"2.1 Account Information"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-muted-foreground ml-4",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Email address:"})," Used for account creation, verification, and communication"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Password:"})," Stored as encrypted hash for account security"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Username:"})," Your chosen display name on the platform"]})]}),e.jsx("h3",{className:"text-xl font-semibold mt-4",children:"2.2 Profile Information"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-muted-foreground ml-4",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Name:"})," Your first and last name"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Date of Birth:"})," For age verification (18+ only)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Gender:"})," Your gender identity"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Location:"})," City and country for matchmaking"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Bio:"})," Personal description and interests"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Profile Photos:"})," Images you upload to your profile and gallery"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Preferences:"})," Gender preferences, age range, and location preferences"]})]}),e.jsx("h3",{className:"text-xl font-semibold mt-4",children:"2.3 Usage Data"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-muted-foreground ml-4",children:[e.jsx("li",{children:"Messages sent and received"}),e.jsx("li",{children:"Profile views and interactions (likes, matches)"}),e.jsx("li",{children:"Search queries and filters used"}),e.jsx("li",{children:"Time spent on the platform"}),e.jsx("li",{children:"Features accessed and used"})]}),e.jsx("h3",{className:"text-xl font-semibold mt-4",children:"2.4 Device and Technical Information"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-muted-foreground ml-4",children:[e.jsx("li",{children:"Device type and operating system"}),e.jsx("li",{children:"Browser type and version"}),e.jsx("li",{children:"IP address and general location"}),e.jsx("li",{children:"Firebase Cloud Messaging (FCM) tokens for push notifications"}),e.jsx("li",{children:"Session data and authentication tokens"})]})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-pink-500 to-red-500 p-2 rounded-lg",children:e.jsx(Ps,{className:"h-5 w-5 text-white"})}),e.jsx("h2",{className:"text-2xl font-bold",children:"3. How We Use Your Information"})]}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"We use your personal information for the following purposes:"}),e.jsx("h3",{className:"text-xl font-semibold mt-4",children:"3.1 Core Services"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-muted-foreground ml-4",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Authentication:"})," Verify your identity and secure your account"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Matchmaking:"})," Connect you with compatible users based on preferences"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Messaging:"})," Enable real-time communication with your matches"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Profile Display:"})," Show your profile to other users"]})]}),e.jsx("h3",{className:"text-xl font-semibold mt-4",children:"3.2 Notifications"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-muted-foreground ml-4",children:[e.jsx("li",{children:"Send push notifications for new messages and likes"}),e.jsx("li",{children:"Email notifications for account security and verification"}),e.jsx("li",{children:"In-app alerts for profile views and interactions"})]}),e.jsx("h3",{className:"text-xl font-semibold mt-4",children:"3.3 Platform Improvement"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-muted-foreground ml-4",children:[e.jsx("li",{children:"Analyze usage patterns to improve features"}),e.jsx("li",{children:"Monitor and prevent fraudulent activity"}),e.jsx("li",{children:"Ensure platform security and stability"}),e.jsx("li",{children:"Provide customer support and respond to inquiries"})]})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"4. Third-Party Integrations"}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"We integrate with the following third-party services to enhance your experience:"}),e.jsxs("div",{className:"bg-secondary/30 border-l-4 border-blue-500 p-4 rounded-r-lg",children:[e.jsx("h3",{className:"font-semibold mb-1",children:"Google OAuth"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Used for optional sign-in and authentication. We only receive your basic profile information (name, email) when you choose to sign in with Google."})]}),e.jsxs("div",{className:"bg-secondary/30 border-l-4 border-purple-500 p-4 rounded-r-lg mt-3",children:[e.jsx("h3",{className:"font-semibold mb-1",children:"Firebase Cloud Messaging"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Used to send push notifications to your device. We store FCM tokens securely and use them only for notification delivery."})]}),e.jsxs("div",{className:"bg-secondary/30 border-l-4 border-pink-500 p-4 rounded-r-lg mt-3",children:[e.jsx("h3",{className:"font-semibold mb-1",children:"Meta APIs (Optional)"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"May be used for optional features. We only access data you explicitly authorize."})]})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-green-500 to-emerald-600 p-2 rounded-lg",children:e.jsx(kt,{className:"h-5 w-5 text-white"})}),e.jsx("h2",{className:"text-2xl font-bold",children:"5. Data Protection & Security"})]}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"We implement comprehensive security measures to protect your personal information:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-muted-foreground ml-4",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Encryption:"})," All passwords are hashed using bcrypt encryption"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Secure Sessions:"})," Session data is encrypted and stored securely"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"HTTPS:"})," All data transmission is encrypted using SSL/TLS"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Access Controls:"})," Strict access controls limit who can view your data"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Regular Audits:"})," We regularly review and update our security practices"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Database Security:"})," Your data is stored in secure, encrypted databases"]})]}),e.jsx("div",{className:"bg-amber-500/10 border-l-4 border-amber-500 p-4 rounded-r-lg mt-4",children:e.jsx("p",{className:"text-sm font-medium",children:"While we implement industry-standard security measures, no method of transmission over the Internet is 100% secure. We cannot guarantee absolute security but are committed to protecting your data."})})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"6. Data Sharing and Disclosure"}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"We respect your privacy and have strict policies about data sharing:"}),e.jsx("div",{className:"bg-primary/10 border-l-4 border-primary p-4 rounded-r-lg",children:e.jsx("p",{className:"text-sm font-medium mb-2",children:"We NEVER sell your personal data to third parties."})}),e.jsx("p",{className:"text-muted-foreground leading-relaxed mt-4",children:"We may share your information only in the following limited circumstances:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-muted-foreground ml-4",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"With Other Users:"})," Your profile information is visible to other users based on your privacy settings"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Service Providers:"})," Third-party services that help us operate the platform (e.g., Firebase, email services)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Legal Requirements:"})," When required by law or to protect our rights and safety"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Business Transfers:"})," In the event of a merger, acquisition, or sale of assets"]})]})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"7. Your Privacy Rights"}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"You have the following rights regarding your personal data:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-muted-foreground ml-4",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Access:"})," Request a copy of all personal data we hold about you"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Update:"})," Modify your profile information at any time through account settings"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Delete:"})," Request complete deletion of your account and all associated data"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Opt-Out:"})," Unsubscribe from marketing emails and manage notification preferences"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Data Portability:"})," Request your data in a portable format"]})]})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-red-500 to-pink-500 p-2 rounded-lg",children:e.jsx(Je,{className:"h-5 w-5 text-white"})}),e.jsx("h2",{className:"text-2xl font-bold",children:"8. Account Deletion and Data Removal"})]}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"You can permanently delete your account at any time by visiting the account deletion page:"}),e.jsx("div",{className:"bg-secondary/30 border-l-4 border-primary p-4 rounded-r-lg",children:e.jsx("p",{className:"text-sm font-medium",children:e.jsx("a",{href:"/delete-account",className:"text-primary hover:underline",children:"Delete Account Page"})})}),e.jsx("p",{className:"text-muted-foreground leading-relaxed mt-4",children:"When you delete your account:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-muted-foreground ml-4",children:[e.jsx("li",{children:"All your profile information is permanently removed"}),e.jsx("li",{children:"Your messages and conversations are deleted"}),e.jsx("li",{children:"Your photos and gallery images are permanently erased"}),e.jsx("li",{children:"Your likes, matches, and connections are removed"}),e.jsx("li",{children:"All notification tokens and device data are deleted"})]}),e.jsx("div",{className:"bg-destructive/10 border-l-4 border-destructive p-4 rounded-r-lg mt-4",children:e.jsx("p",{className:"text-sm font-medium text-destructive",children:"Account deletion is permanent and irreversible. We cannot recover your data once it has been deleted."})})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"9. Data Retention"}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"We retain your personal information for as long as your account is active or as needed to provide our services. We may also retain certain information:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-muted-foreground ml-4",children:[e.jsx("li",{children:"To comply with legal obligations"}),e.jsx("li",{children:"To resolve disputes and enforce our agreements"}),e.jsx("li",{children:"For fraud prevention and security purposes"})]}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"After account deletion, we may retain anonymized or aggregated data that cannot be used to identify you."})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"10. Children's Privacy"}),e.jsx("div",{className:"bg-red-500/10 border-l-4 border-red-500 p-4 rounded-r-lg",children:e.jsx("p",{className:"text-sm font-semibold text-red-600 dark:text-red-400",children:"SpreadLov is strictly for users 18 years and older. We do not knowingly collect information from anyone under 18."})}),e.jsx("p",{className:"text-muted-foreground leading-relaxed mt-4",children:"If we discover that a user under 18 has created an account, we will immediately terminate the account and delete all associated data."})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"11. Changes to This Privacy Policy"}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"We may update this Privacy Policy from time to time to reflect changes in our practices or legal requirements. When we make significant changes, we will:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-muted-foreground ml-4",children:[e.jsx("li",{children:'Update the "Last updated" date at the top of this policy'}),e.jsx("li",{children:"Notify you via email or in-app notification"}),e.jsx("li",{children:"Provide at least 30 days' notice for material changes"})]}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"Your continued use of SpreadLov after changes become effective constitutes your acceptance of the updated policy."})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-cyan-500 p-2 rounded-lg",children:e.jsx(we,{className:"h-5 w-5 text-white"})}),e.jsx("h2",{className:"text-2xl font-bold",children:"12. Contact Us"})]}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"If you have any questions, concerns, or requests regarding this Privacy Policy or our data practices, please contact us:"}),e.jsxs("div",{className:"bg-primary/10 border-l-4 border-primary p-4 rounded-r-lg",children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Email: spreadlov.aid@gmail.com"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"You can also reach us through the Support & Feedback section in your profile settings."})]})]}),e.jsx("div",{className:"mt-8 p-6 bg-gradient-to-br from-primary/10 to-primary/5 rounded-xl border-2 border-primary/20",children:e.jsx("p",{className:"text-sm text-center font-medium",children:"By using SpreadLov, you acknowledge that you have read, understood, and agree to this Privacy Policy."})})]})})})}),e.jsx("div",{className:"flex justify-center pb-8",children:e.jsx(L,{onClick:()=>t("/auth?tab=signup"),className:"h-12 px-8 text-base font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105",children:"Back to Sign Up"})})]})]})})]})}function Gh(){const[,t]=de();return e.jsxs(e.Fragment,{children:[e.jsx(Wt,{title:"Child Safety & Protection Policy - SpreadLov",description:"SpreadLov's commitment to maintaining a safe environment. Learn about our zero tolerance policy for CSAM and our safety measures.",canonical:"https://spreadlov.com/safety-standards"}),e.jsx("div",{className:"min-h-screen bg-background",children:e.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-5xl",children:[e.jsxs(L,{variant:"ghost",onClick:()=>t("/"),className:"mb-6 hover:bg-secondary/50 transition-colors",children:[e.jsx(Le,{className:"mr-2 h-4 w-4"}),"Back to Home"]}),e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("div",{className:"bg-gradient-to-br from-blue-500 via-purple-500 to-pink-500 p-4 rounded-2xl shadow-2xl",children:e.jsx(Ue,{className:"h-12 w-12 text-white"})})}),e.jsx("h1",{className:"text-3xl sm:text-4xl lg:text-5xl font-bold bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 bg-clip-text text-transparent",children:"Child Safety & Protection Policy"}),e.jsx("p",{className:"text-muted-foreground text-sm sm:text-base max-w-2xl mx-auto",children:"Last updated: November 2025"})]}),e.jsx(ae,{className:"border-0 shadow-2xl rounded-2xl overflow-hidden bg-gradient-to-br from-card to-card/80",children:e.jsx(he,{className:"p-6 sm:p-8 lg:p-10",children:e.jsx(Ne,{className:"h-[600px] pr-4",children:e.jsxs("div",{className:"space-y-8",children:[e.jsx("section",{className:"space-y-4",children:e.jsx("div",{className:"bg-gradient-to-br from-blue-500/10 via-purple-500/10 to-pink-500/10 border-l-4 border-primary p-6 rounded-r-xl",children:e.jsx("p",{className:"text-base sm:text-lg leading-relaxed font-medium",children:"SpreadLov is committed to maintaining a safe and respectful environment for all users. We have zero tolerance for any form of child sexual abuse material (CSAM), exploitation, or grooming."})})}),e.jsxs("section",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-purple-500 p-2 rounded-lg",children:e.jsx(Au,{className:"h-5 w-5 text-white"})}),e.jsx("h2",{className:"text-2xl font-bold",children:"Age Restriction"})]}),e.jsx("div",{className:"bg-red-500/10 border-l-4 border-red-500 p-4 rounded-r-lg",children:e.jsx("p",{className:"text-base font-semibold text-red-600 dark:text-red-400",children:"No users under the age of 18 are permitted to use SpreadLov."})}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"Our platform is exclusively designed for adults aged 18 and above. We implement strict age verification measures during registration to ensure compliance with this policy."})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-purple-500 to-pink-500 p-2 rounded-lg",children:e.jsx(Ue,{className:"h-5 w-5 text-white"})}),e.jsx("h2",{className:"text-2xl font-bold",children:"Our Safety Commitments"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-secondary/30 rounded-lg",children:[e.jsx(Jt,{className:"h-6 w-6 text-green-500 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-1",children:"Active Monitoring"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"We actively monitor, report, and remove any content that violates child safety laws."})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-secondary/30 rounded-lg",children:[e.jsx(Jt,{className:"h-6 w-6 text-green-500 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-1",children:"Immediate Escalation"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Reports of suspected child exploitation are immediately escalated to relevant authorities and law enforcement agencies."})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-secondary/30 rounded-lg",children:[e.jsx(Jt,{className:"h-6 w-6 text-green-500 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-1",children:"Regulatory Compliance"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"We comply with all applicable child safety regulations and reporting requirements."})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-secondary/30 rounded-lg",children:[e.jsx(Jt,{className:"h-6 w-6 text-green-500 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-1",children:"Easy Reporting"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Users can report any concerns or suspicious activity directly within the app or by emailing spreadlov.aid@gmail.com."})]})]})]})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-orange-500 to-red-500 p-2 rounded-lg",children:e.jsx(jr,{className:"h-5 w-5 text-white"})}),e.jsx("h2",{className:"text-2xl font-bold",children:"Zero Tolerance Policy"})]}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"SpreadLov maintains a zero-tolerance policy for child sexual abuse material (CSAM), child exploitation, grooming, or any behavior that endangers minors."}),e.jsx("div",{className:"bg-amber-500/10 border-l-4 border-amber-500 p-4 rounded-r-lg",children:e.jsx("p",{className:"text-sm font-medium",children:"Any violation of our child safety policies will result in immediate account termination and reporting to law enforcement authorities."})})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-pink-500 to-red-500 p-2 rounded-lg",children:e.jsx(jr,{className:"h-5 w-5 text-white"})}),e.jsx("h2",{className:"text-2xl font-bold",children:"How to Report Concerns"})]}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"If you encounter any behavior or content that may violate our child safety standards, please report it immediately through one of the following methods:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-muted-foreground ml-4",children:[e.jsx("li",{children:"Use the in-app reporting feature available on all user profiles and content"}),e.jsx("li",{children:"Email our safety team directly at spreadlov.aid@gmail.com"}),e.jsx("li",{children:"All reports are treated with the highest priority and confidentiality"})]}),e.jsx("div",{className:"bg-primary/10 border-l-4 border-primary p-4 rounded-r-lg",children:e.jsx("p",{className:"text-sm font-medium",children:"Your reports help us maintain a safe community. All reports are investigated promptly and thoroughly."})})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-cyan-500 p-2 rounded-lg",children:e.jsx(we,{className:"h-5 w-5 text-white"})}),e.jsx("h2",{className:"text-2xl font-bold",children:"Contact Information"})]}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"For child safety and compliance inquiries, please contact us at:"}),e.jsx("div",{className:"bg-gradient-to-br from-primary/10 to-primary/5 rounded-xl border-2 border-primary/20 p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(we,{className:"h-6 w-6 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Email"}),e.jsx("a",{href:"mailto:spreadlov.aid@gmail.com",className:"text-lg font-semibold text-primary hover:underline",children:"spreadlov.aid@gmail.com"})]})]})})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Law Enforcement Cooperation"}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"SpreadLov cooperates fully with law enforcement agencies in investigations related to child safety. We maintain detailed logs and records to assist in any legal proceedings related to child protection."}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"We are committed to providing timely responses to law enforcement requests and will preserve relevant evidence as required by law."})]}),e.jsx("div",{className:"mt-8 p-6 bg-gradient-to-br from-primary/10 to-primary/5 rounded-xl border-2 border-primary/20",children:e.jsx("p",{className:"text-sm text-center font-medium",children:"By using SpreadLov, you acknowledge that you have read and understood our Child Safety & Protection Policy and agree to report any violations immediately."})})]})})})}),e.jsx("div",{className:"flex justify-center pb-8",children:e.jsx(L,{onClick:()=>t("/"),className:"h-12 px-8 text-base font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105",children:"Back to Home"})})]})]})})]})}function Qh(){const[t,s]=i.useState(""),[r,a]=i.useState(!1),n=me({mutationFn:async l=>{const c=await fetch("/api/subscribe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:l})});if(!c.ok){const d=await c.json();throw new Error(d.message||"Failed to subscribe")}return c.json()},onSuccess:()=>{a(!0),s(""),setTimeout(()=>{window.location.href="https://spreadlov.com"},3e3)}}),o=l=>{l.preventDefault(),t&&n.mutate(t)};return e.jsxs(e.Fragment,{children:[e.jsx(Wt,{title:"Subscribe to SpreadLov - Get Dating Tips & Updates",description:"Subscribe to get exclusive updates, dating tips, and be the first to know about new features that help you find meaningful connections on SpreadLov.",canonical:"https://spreadlov.com/subscribe"}),e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center px-4 py-12",children:e.jsx("div",{className:"w-full max-w-2xl",children:r?e.jsx("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-700",children:e.jsx(ae,{className:"border-0 shadow-2xl rounded-3xl overflow-hidden bg-gradient-to-br from-card to-card/80",children:e.jsxs(he,{className:"p-12 sm:p-16 text-center space-y-6",children:[e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-primary/20 rounded-full blur-2xl opacity-30 animate-pulse"}),e.jsx("div",{className:"relative bg-primary p-6 rounded-full shadow-2xl",children:e.jsx(Jt,{className:"h-16 w-16 sm:h-20 sm:w-20 text-primary-foreground"})})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h2",{className:"text-3xl sm:text-4xl font-bold bg-gradient-to-r from-primary to-primary/70 bg-clip-text text-transparent",children:"Successfully Subscribed!"}),e.jsx("p",{className:"text-lg text-muted-foreground",children:"Thank you for joining the SpreadLov community!"})]}),e.jsxs("div",{className:"pt-4 pb-2 space-y-3",children:[e.jsx("p",{className:"text-base text-muted-foreground",children:"Check your inbox for a welcome message and exciting updates coming your way."}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-muted-foreground",children:[e.jsx("div",{className:"w-2 h-2 bg-primary rounded-full animate-pulse"}),e.jsx("p",{children:"Redirecting to SpreadLov in 3 seconds..."})]})]}),e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(ge,{className:"h-5 w-5 text-primary fill-primary animate-bounce",style:{animationDelay:"0ms"}}),e.jsx(ge,{className:"h-5 w-5 text-primary fill-primary animate-bounce",style:{animationDelay:"150ms"}}),e.jsx(ge,{className:"h-5 w-5 text-primary fill-primary animate-bounce",style:{animationDelay:"300ms"}})]})]})})}):e.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"relative",children:e.jsx("img",{src:"/favicon.png",alt:"SpreadLov Logo",className:"h-24 w-24 sm:h-32 sm:w-32 rounded-3xl shadow-2xl ring-4 ring-primary/20",width:"192",height:"192"})})}),e.jsxs("div",{className:"text-center space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(ge,{className:"h-8 w-8 text-primary fill-primary animate-pulse"}),e.jsx("h1",{className:"text-4xl sm:text-5xl lg:text-6xl font-bold bg-gradient-to-r from-primary via-primary to-primary/70 bg-clip-text text-transparent",children:"SpreadLov"}),e.jsx(ge,{className:"h-8 w-8 text-primary fill-primary animate-pulse"})]}),e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold",children:"Stay Connected with Love"}),e.jsx("p",{className:"text-base sm:text-lg text-muted-foreground max-w-xl mx-auto leading-relaxed",children:"Subscribe to get exclusive updates, dating tips, and be the first to know about new features that help you find meaningful connections."})]}),e.jsx(ae,{className:"border-0 shadow-2xl rounded-3xl overflow-hidden bg-gradient-to-br from-card to-card/80",children:e.jsxs(he,{className:"p-8 sm:p-12",children:[e.jsxs("form",{onSubmit:o,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-semibold",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(we,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),e.jsx(re,{id:"email",type:"email",placeholder:"your.email@example.com",value:t,onChange:l=>s(l.target.value),required:!0,disabled:n.isPending,className:"pl-12 h-14 text-base rounded-xl border-2 focus:border-primary focus:ring-primary transition-all"})]}),n.isError&&e.jsxs("p",{className:"text-sm text-destructive flex items-center gap-2",children:[e.jsx("span",{className:"inline-block w-1.5 h-1.5 rounded-full bg-destructive"}),n.error?.message||"Failed to subscribe. Please try again."]})]}),e.jsx(L,{type:"submit",disabled:n.isPending||!t,className:"w-full h-14 text-lg font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100",children:n.isPending?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-primary-foreground/30 border-t-primary-foreground rounded-full animate-spin"}),"Subscribing..."]}):e.jsxs("span",{className:"flex items-center gap-2",children:["Subscribe Now",e.jsx(du,{className:"h-5 w-5"})]})})]}),e.jsx("div",{className:"mt-8 p-4 bg-secondary/30 rounded-xl border border-border",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(So,{className:"h-5 w-5 text-primary flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-semibold mb-1",children:"What you'll get:"}),e.jsxs("ul",{className:"space-y-1 text-muted-foreground",children:[e.jsx("li",{children:" Early access to new features"}),e.jsx("li",{children:" Expert dating tips and advice"}),e.jsx("li",{children:" Exclusive community updates"}),e.jsx("li",{children:" Special promotions and offers"})]})]})]})})]})}),e.jsx("p",{className:"text-center text-sm text-muted-foreground max-w-md mx-auto",children:"We respect your privacy. Unsubscribe at any time. Your email will never be shared with third parties."})]})})})]})}const Jh=_t("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Zt({className:t,variant:s,...r}){return e.jsx("div",{className:T(Jh({variant:s}),t),...r})}var Xi=["PageUp","PageDown"],Zi=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],el={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Vt="Slider",[kr,Xh,Zh]=un(Vt),[tl]=We(Vt,[Zh]),[ef,Bs]=tl(Vt),sl=i.forwardRef((t,s)=>{const{name:r,min:a=0,max:n=100,step:o=1,orientation:l="horizontal",disabled:c=!1,minStepsBetweenThumbs:d=0,defaultValue:m=[a],value:u,onValueChange:f=()=>{},onValueCommit:h=()=>{},inverted:b=!1,form:g,...v}=t,p=i.useRef(new Set),x=i.useRef(0),P=l==="horizontal"?tf:sf,[j=[],E]=Ot({prop:u,defaultProp:m,onChange:N=>{[...p.current][x.current]?.focus(),f(N)}}),S=i.useRef(j);function I(N){const C=lf(j,N);A(N,C)}function U(N){A(N,x.current)}function D(){const N=S.current[x.current];j[x.current]!==N&&h(j)}function A(N,C,{commit:W}={commit:!1}){const _=mf(o),O=hf(Math.round((N-a)/o)*o+a,_),q=Fr(O,[a,n]);E((z=[])=>{const B=nf(z,q,C);if(uf(B,d*o)){x.current=B.indexOf(q);const Q=String(B)!==String(z);return Q&&W&&h(B),Q?B:z}else return z})}return e.jsx(ef,{scope:t.__scopeSlider,name:r,disabled:c,min:a,max:n,valueIndexToChangeRef:x,thumbs:p.current,values:j,orientation:l,form:g,children:e.jsx(kr.Provider,{scope:t.__scopeSlider,children:e.jsx(kr.Slot,{scope:t.__scopeSlider,children:e.jsx(P,{"aria-disabled":c,"data-disabled":c?"":void 0,...v,ref:s,onPointerDown:Y(v.onPointerDown,()=>{c||(S.current=j)}),min:a,max:n,inverted:b,onSlideStart:c?void 0:I,onSlideMove:c?void 0:U,onSlideEnd:c?void 0:D,onHomeKeyDown:()=>!c&&A(a,0,{commit:!0}),onEndKeyDown:()=>!c&&A(n,j.length-1,{commit:!0}),onStepKeyDown:({event:N,direction:C})=>{if(!c){const O=Xi.includes(N.key)||N.shiftKey&&Zi.includes(N.key)?10:1,q=x.current,z=j[q],B=o*O*C;A(z+B,q,{commit:!0})}}})})})})});sl.displayName=Vt;var[rl,al]=tl(Vt,{startEdge:"left",endEdge:"right",size:"width",direction:1}),tf=i.forwardRef((t,s)=>{const{min:r,max:a,dir:n,inverted:o,onSlideStart:l,onSlideMove:c,onSlideEnd:d,onStepKeyDown:m,...u}=t,[f,h]=i.useState(null),b=ce(s,P=>h(P)),g=i.useRef(void 0),v=As(n),p=v==="ltr",x=p&&!o||!p&&o;function y(P){const j=g.current||f.getBoundingClientRect(),E=[0,j.width],I=ga(E,x?[r,a]:[a,r]);return g.current=j,I(P-j.left)}return e.jsx(rl,{scope:t.__scopeSlider,startEdge:x?"left":"right",endEdge:x?"right":"left",direction:x?1:-1,size:"width",children:e.jsx(nl,{dir:v,"data-orientation":"horizontal",...u,ref:b,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:P=>{const j=y(P.clientX);l?.(j)},onSlideMove:P=>{const j=y(P.clientX);c?.(j)},onSlideEnd:()=>{g.current=void 0,d?.()},onStepKeyDown:P=>{const E=el[x?"from-left":"from-right"].includes(P.key);m?.({event:P,direction:E?-1:1})}})})}),sf=i.forwardRef((t,s)=>{const{min:r,max:a,inverted:n,onSlideStart:o,onSlideMove:l,onSlideEnd:c,onStepKeyDown:d,...m}=t,u=i.useRef(null),f=ce(s,u),h=i.useRef(void 0),b=!n;function g(v){const p=h.current||u.current.getBoundingClientRect(),x=[0,p.height],P=ga(x,b?[a,r]:[r,a]);return h.current=p,P(v-p.top)}return e.jsx(rl,{scope:t.__scopeSlider,startEdge:b?"bottom":"top",endEdge:b?"top":"bottom",size:"height",direction:b?1:-1,children:e.jsx(nl,{"data-orientation":"vertical",...m,ref:f,style:{...m.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:v=>{const p=g(v.clientY);o?.(p)},onSlideMove:v=>{const p=g(v.clientY);l?.(p)},onSlideEnd:()=>{h.current=void 0,c?.()},onStepKeyDown:v=>{const x=el[b?"from-bottom":"from-top"].includes(v.key);d?.({event:v,direction:x?-1:1})}})})}),nl=i.forwardRef((t,s)=>{const{__scopeSlider:r,onSlideStart:a,onSlideMove:n,onSlideEnd:o,onHomeKeyDown:l,onEndKeyDown:c,onStepKeyDown:d,...m}=t,u=Bs(Vt,r);return e.jsx(G.span,{...m,ref:s,onKeyDown:Y(t.onKeyDown,f=>{f.key==="Home"?(l(f),f.preventDefault()):f.key==="End"?(c(f),f.preventDefault()):Xi.concat(Zi).includes(f.key)&&(d(f),f.preventDefault())}),onPointerDown:Y(t.onPointerDown,f=>{const h=f.target;h.setPointerCapture(f.pointerId),f.preventDefault(),u.thumbs.has(h)?h.focus():a(f)}),onPointerMove:Y(t.onPointerMove,f=>{f.target.hasPointerCapture(f.pointerId)&&n(f)}),onPointerUp:Y(t.onPointerUp,f=>{const h=f.target;h.hasPointerCapture(f.pointerId)&&(h.releasePointerCapture(f.pointerId),o(f))})})}),ol="SliderTrack",il=i.forwardRef((t,s)=>{const{__scopeSlider:r,...a}=t,n=Bs(ol,r);return e.jsx(G.span,{"data-disabled":n.disabled?"":void 0,"data-orientation":n.orientation,...a,ref:s})});il.displayName=ol;var Pr="SliderRange",ll=i.forwardRef((t,s)=>{const{__scopeSlider:r,...a}=t,n=Bs(Pr,r),o=al(Pr,r),l=i.useRef(null),c=ce(s,l),d=n.values.length,m=n.values.map(h=>ul(h,n.min,n.max)),u=d>1?Math.min(...m):0,f=100-Math.max(...m);return e.jsx(G.span,{"data-orientation":n.orientation,"data-disabled":n.disabled?"":void 0,...a,ref:c,style:{...t.style,[o.startEdge]:u+"%",[o.endEdge]:f+"%"}})});ll.displayName=Pr;var Er="SliderThumb",cl=i.forwardRef((t,s)=>{const r=Xh(t.__scopeSlider),[a,n]=i.useState(null),o=ce(s,c=>n(c)),l=i.useMemo(()=>a?r().findIndex(c=>c.ref.current===a):-1,[r,a]);return e.jsx(rf,{...t,ref:o,index:l})}),rf=i.forwardRef((t,s)=>{const{__scopeSlider:r,index:a,name:n,...o}=t,l=Bs(Er,r),c=al(Er,r),[d,m]=i.useState(null),u=ce(s,y=>m(y)),f=d?l.form||!!d.closest("form"):!0,h=$r(d),b=l.values[a],g=b===void 0?0:ul(b,l.min,l.max),v=of(a,l.values.length),p=h?.[c.size],x=p?cf(p,g,c.direction):0;return i.useEffect(()=>{if(d)return l.thumbs.add(d),()=>{l.thumbs.delete(d)}},[d,l.thumbs]),e.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[c.startEdge]:`calc(${g}% + ${x}px)`},children:[e.jsx(kr.ItemSlot,{scope:t.__scopeSlider,children:e.jsx(G.span,{role:"slider","aria-label":t["aria-label"]||v,"aria-valuemin":l.min,"aria-valuenow":b,"aria-valuemax":l.max,"aria-orientation":l.orientation,"data-orientation":l.orientation,"data-disabled":l.disabled?"":void 0,tabIndex:l.disabled?void 0:0,...o,ref:u,style:b===void 0?{display:"none"}:t.style,onFocus:Y(t.onFocus,()=>{l.valueIndexToChangeRef.current=a})})}),f&&e.jsx(dl,{name:n??(l.name?l.name+(l.values.length>1?"[]":""):void 0),form:l.form,value:b},a)]})});cl.displayName=Er;var af="RadioBubbleInput",dl=i.forwardRef(({__scopeSlider:t,value:s,...r},a)=>{const n=i.useRef(null),o=ce(n,a),l=qr(s);return i.useEffect(()=>{const c=n.current;if(!c)return;const d=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(d,"value").set;if(l!==s&&u){const f=new Event("input",{bubbles:!0});u.call(c,s),c.dispatchEvent(f)}},[l,s]),e.jsx(G.input,{style:{display:"none"},...r,ref:o,defaultValue:s})});dl.displayName=af;function nf(t=[],s,r){const a=[...t];return a[r]=s,a.sort((n,o)=>n-o)}function ul(t,s,r){const o=100/(r-s)*(t-s);return Fr(o,[0,100])}function of(t,s){return s>2?`Value ${t+1} of ${s}`:s===2?["Minimum","Maximum"][t]:void 0}function lf(t,s){if(t.length===1)return 0;const r=t.map(n=>Math.abs(n-s)),a=Math.min(...r);return r.indexOf(a)}function cf(t,s,r){const a=t/2,o=ga([0,50],[0,a]);return(a-o(s)*r)*r}function df(t){return t.slice(0,-1).map((s,r)=>t[r+1]-s)}function uf(t,s){if(s>0){const r=df(t);return Math.min(...r)>=s}return!0}function ga(t,s){return r=>{if(t[0]===t[1]||s[0]===s[1])return s[0];const a=(s[1]-s[0])/(t[1]-t[0]);return s[0]+a*(r-t[0])}}function mf(t){return(String(t).split(".")[1]||"").length}function hf(t,s){const r=Math.pow(10,s);return Math.round(t*r)/r}var ml=sl,ff=il,pf=ll,xf=cl;const hl=i.forwardRef(({className:t,...s},r)=>e.jsxs(ml,{ref:r,className:T("relative flex w-full touch-none select-none items-center",t),...s,children:[e.jsx(ff,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:e.jsx(pf,{className:"absolute h-full bg-primary"})}),(s.value||s.defaultValue||[0]).map((a,n)=>e.jsx(xf,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"},n))]}));hl.displayName=ml.displayName;var va="Radio",[gf,fl]=We(va),[vf,bf]=gf(va),pl=i.forwardRef((t,s)=>{const{__scopeRadio:r,name:a,checked:n=!1,required:o,disabled:l,value:c="on",onCheck:d,form:m,...u}=t,[f,h]=i.useState(null),b=ce(s,p=>h(p)),g=i.useRef(!1),v=f?m||!!f.closest("form"):!0;return e.jsxs(vf,{scope:r,checked:n,disabled:l,children:[e.jsx(G.button,{type:"button",role:"radio","aria-checked":n,"data-state":bl(n),"data-disabled":l?"":void 0,disabled:l,value:c,...u,ref:b,onClick:Y(t.onClick,p=>{n||d?.(),v&&(g.current=p.isPropagationStopped(),g.current||p.stopPropagation())})}),v&&e.jsx(vl,{control:f,bubbles:!g.current,name:a,value:c,checked:n,required:o,disabled:l,form:m,style:{transform:"translateX(-100%)"}})]})});pl.displayName=va;var xl="RadioIndicator",gl=i.forwardRef((t,s)=>{const{__scopeRadio:r,forceMount:a,...n}=t,o=bf(xl,r);return e.jsx(_e,{present:a||o.checked,children:e.jsx(G.span,{"data-state":bl(o.checked),"data-disabled":o.disabled?"":void 0,...n,ref:s})})});gl.displayName=xl;var yf="RadioBubbleInput",vl=i.forwardRef(({__scopeRadio:t,control:s,checked:r,bubbles:a=!0,...n},o)=>{const l=i.useRef(null),c=ce(l,o),d=qr(r),m=$r(s);return i.useEffect(()=>{const u=l.current;if(!u)return;const f=window.HTMLInputElement.prototype,b=Object.getOwnPropertyDescriptor(f,"checked").set;if(d!==r&&b){const g=new Event("click",{bubbles:a});b.call(u,r),u.dispatchEvent(g)}},[d,r,a]),e.jsx(G.input,{type:"radio","aria-hidden":!0,defaultChecked:r,...n,tabIndex:-1,ref:c,style:{...n.style,...m,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});vl.displayName=yf;function bl(t){return t?"checked":"unchecked"}var jf=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Hs="RadioGroup",[wf]=We(Hs,[Os,fl]),yl=Os(),jl=fl(),[Nf,Sf]=wf(Hs),wl=i.forwardRef((t,s)=>{const{__scopeRadioGroup:r,name:a,defaultValue:n,value:o,required:l=!1,disabled:c=!1,orientation:d,dir:m,loop:u=!0,onValueChange:f,...h}=t,b=yl(r),g=As(m),[v,p]=Ot({prop:o,defaultProp:n??null,onChange:f,caller:Hs});return e.jsx(Nf,{scope:r,name:a,required:l,disabled:c,value:v,onValueChange:p,children:e.jsx(kn,{asChild:!0,...b,orientation:d,dir:g,loop:u,children:e.jsx(G.div,{role:"radiogroup","aria-required":l,"aria-orientation":d,"data-disabled":c?"":void 0,dir:g,...h,ref:s})})})});wl.displayName=Hs;var Nl="RadioGroupItem",Sl=i.forwardRef((t,s)=>{const{__scopeRadioGroup:r,disabled:a,...n}=t,o=Sf(Nl,r),l=o.disabled||a,c=yl(r),d=jl(r),m=i.useRef(null),u=ce(s,m),f=o.value===n.value,h=i.useRef(!1);return i.useEffect(()=>{const b=v=>{jf.includes(v.key)&&(h.current=!0)},g=()=>h.current=!1;return document.addEventListener("keydown",b),document.addEventListener("keyup",g),()=>{document.removeEventListener("keydown",b),document.removeEventListener("keyup",g)}},[]),e.jsx(Pn,{asChild:!0,...c,focusable:!l,active:f,children:e.jsx(pl,{disabled:l,required:o.required,checked:f,...d,...n,name:o.name,ref:u,onCheck:()=>o.onValueChange(n.value),onKeyDown:Y(b=>{b.key==="Enter"&&b.preventDefault()}),onFocus:Y(n.onFocus,()=>{h.current&&m.current?.click()})})})});Sl.displayName=Nl;var Cf="RadioGroupIndicator",Cl=i.forwardRef((t,s)=>{const{__scopeRadioGroup:r,...a}=t,n=jl(r);return e.jsx(gl,{...n,...a,ref:s})});Cl.displayName=Cf;var kl=wl,Pl=Sl,kf=Cl;const ba=i.forwardRef(({className:t,...s},r)=>e.jsx(kl,{className:T("grid gap-2",t),...s,ref:r}));ba.displayName=kl.displayName;const rt=i.forwardRef(({className:t,...s},r)=>e.jsx(Pl,{ref:r,className:T("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...s,children:e.jsx(kf,{className:"flex items-center justify-center",children:e.jsx(xu,{className:"h-2.5 w-2.5 fill-current text-current"})})}));rt.displayName=Pl.displayName;var rn=1,Pf=.9,Ef=.8,Rf=.17,ir=.1,lr=.999,Tf=.9999,Mf=.99,Af=/[\\\/_+.#"@\[\(\{&]/,If=/[\\\/_+.#"@\[\(\{&]/g,Df=/[\s-]/,El=/[\s-]/g;function Rr(t,s,r,a,n,o,l){if(o===s.length)return n===t.length?rn:Mf;var c=`${n},${o}`;if(l[c]!==void 0)return l[c];for(var d=a.charAt(o),m=r.indexOf(d,n),u=0,f,h,b,g;m>=0;)f=Rr(t,s,r,a,m+1,o+1,l),f>u&&(m===n?f*=rn:Af.test(t.charAt(m-1))?(f*=Ef,b=t.slice(n,m-1).match(If),b&&n>0&&(f*=Math.pow(lr,b.length))):Df.test(t.charAt(m-1))?(f*=Pf,g=t.slice(n,m-1).match(El),g&&n>0&&(f*=Math.pow(lr,g.length))):(f*=Rf,n>0&&(f*=Math.pow(lr,m-n))),t.charAt(m)!==s.charAt(o)&&(f*=Tf)),(f<ir&&r.charAt(m-1)===a.charAt(o+1)||a.charAt(o+1)===a.charAt(o)&&r.charAt(m-1)!==a.charAt(o))&&(h=Rr(t,s,r,a,m+1,o+2,l),h*ir>f&&(f=h*ir)),f>u&&(u=f),m=r.indexOf(d,m+1);return l[c]=u,u}function an(t){return t.toLowerCase().replace(El," ")}function Of(t,s,r){return t=r&&r.length>0?`${t+" "+r.join(" ")}`:t,Rr(t,s,an(t),an(s),0,0,{})}var Kt='[cmdk-group=""]',cr='[cmdk-group-items=""]',Ff='[cmdk-group-heading=""]',Rl='[cmdk-item=""]',nn=`${Rl}:not([aria-disabled="true"])`,Tr="cmdk-item-select",Nt="data-value",Lf=(t,s,r)=>Of(t,s,r),Tl=i.createContext(void 0),ds=()=>i.useContext(Tl),Ml=i.createContext(void 0),ya=()=>i.useContext(Ml),Al=i.createContext(void 0),Il=i.forwardRef((t,s)=>{let r=St(()=>{var k,R;return{search:"",value:(R=(k=t.value)!=null?k:t.defaultValue)!=null?R:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),a=St(()=>new Set),n=St(()=>new Map),o=St(()=>new Map),l=St(()=>new Set),c=Dl(t),{label:d,children:m,value:u,onValueChange:f,filter:h,shouldFilter:b,loop:g,disablePointerSelection:v=!1,vimBindings:p=!0,...x}=t,y=at(),P=at(),j=at(),E=i.useRef(null),S=Yf();wt(()=>{if(u!==void 0){let k=u.trim();r.current.value=k,I.emit()}},[u]),wt(()=>{S(6,W)},[]);let I=i.useMemo(()=>({subscribe:k=>(l.current.add(k),()=>l.current.delete(k)),snapshot:()=>r.current,setState:(k,R,F)=>{var M,V,H,ee;if(!Object.is(r.current[k],R)){if(r.current[k]=R,k==="search")C(),A(),S(1,N);else if(k==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let ne=document.getElementById(j);ne?ne.focus():(M=document.getElementById(y))==null||M.focus()}if(S(7,()=>{var ne;r.current.selectedItemId=(ne=_())==null?void 0:ne.id,I.emit()}),F||S(5,W),((V=c.current)==null?void 0:V.value)!==void 0){let ne=R??"";(ee=(H=c.current).onValueChange)==null||ee.call(H,ne);return}}I.emit()}},emit:()=>{l.current.forEach(k=>k())}}),[]),U=i.useMemo(()=>({value:(k,R,F)=>{var M;R!==((M=o.current.get(k))==null?void 0:M.value)&&(o.current.set(k,{value:R,keywords:F}),r.current.filtered.items.set(k,D(R,F)),S(2,()=>{A(),I.emit()}))},item:(k,R)=>(a.current.add(k),R&&(n.current.has(R)?n.current.get(R).add(k):n.current.set(R,new Set([k]))),S(3,()=>{C(),A(),r.current.value||N(),I.emit()}),()=>{o.current.delete(k),a.current.delete(k),r.current.filtered.items.delete(k);let F=_();S(4,()=>{C(),F?.getAttribute("id")===k&&N(),I.emit()})}),group:k=>(n.current.has(k)||n.current.set(k,new Set),()=>{o.current.delete(k),n.current.delete(k)}),filter:()=>c.current.shouldFilter,label:d||t["aria-label"],getDisablePointerSelection:()=>c.current.disablePointerSelection,listId:y,inputId:j,labelId:P,listInnerRef:E}),[]);function D(k,R){var F,M;let V=(M=(F=c.current)==null?void 0:F.filter)!=null?M:Lf;return k?V(k,r.current.search,R):0}function A(){if(!r.current.search||c.current.shouldFilter===!1)return;let k=r.current.filtered.items,R=[];r.current.filtered.groups.forEach(M=>{let V=n.current.get(M),H=0;V.forEach(ee=>{let ne=k.get(ee);H=Math.max(ne,H)}),R.push([M,H])});let F=E.current;O().sort((M,V)=>{var H,ee;let ne=M.getAttribute("id"),Ae=V.getAttribute("id");return((H=k.get(Ae))!=null?H:0)-((ee=k.get(ne))!=null?ee:0)}).forEach(M=>{let V=M.closest(cr);V?V.appendChild(M.parentElement===V?M:M.closest(`${cr} > *`)):F.appendChild(M.parentElement===F?M:M.closest(`${cr} > *`))}),R.sort((M,V)=>V[1]-M[1]).forEach(M=>{var V;let H=(V=E.current)==null?void 0:V.querySelector(`${Kt}[${Nt}="${encodeURIComponent(M[0])}"]`);H?.parentElement.appendChild(H)})}function N(){let k=O().find(F=>F.getAttribute("aria-disabled")!=="true"),R=k?.getAttribute(Nt);I.setState("value",R||void 0)}function C(){var k,R,F,M;if(!r.current.search||c.current.shouldFilter===!1){r.current.filtered.count=a.current.size;return}r.current.filtered.groups=new Set;let V=0;for(let H of a.current){let ee=(R=(k=o.current.get(H))==null?void 0:k.value)!=null?R:"",ne=(M=(F=o.current.get(H))==null?void 0:F.keywords)!=null?M:[],Ae=D(ee,ne);r.current.filtered.items.set(H,Ae),Ae>0&&V++}for(let[H,ee]of n.current)for(let ne of ee)if(r.current.filtered.items.get(ne)>0){r.current.filtered.groups.add(H);break}r.current.filtered.count=V}function W(){var k,R,F;let M=_();M&&(((k=M.parentElement)==null?void 0:k.firstChild)===M&&((F=(R=M.closest(Kt))==null?void 0:R.querySelector(Ff))==null||F.scrollIntoView({block:"nearest"})),M.scrollIntoView({block:"nearest"}))}function _(){var k;return(k=E.current)==null?void 0:k.querySelector(`${Rl}[aria-selected="true"]`)}function O(){var k;return Array.from(((k=E.current)==null?void 0:k.querySelectorAll(nn))||[])}function q(k){let R=O()[k];R&&I.setState("value",R.getAttribute(Nt))}function z(k){var R;let F=_(),M=O(),V=M.findIndex(ee=>ee===F),H=M[V+k];(R=c.current)!=null&&R.loop&&(H=V+k<0?M[M.length-1]:V+k===M.length?M[0]:M[V+k]),H&&I.setState("value",H.getAttribute(Nt))}function B(k){let R=_(),F=R?.closest(Kt),M;for(;F&&!M;)F=k>0?Hf(F,Kt):Kf(F,Kt),M=F?.querySelector(nn);M?I.setState("value",M.getAttribute(Nt)):z(k)}let Q=()=>q(O().length-1),te=k=>{k.preventDefault(),k.metaKey?Q():k.altKey?B(1):z(1)},se=k=>{k.preventDefault(),k.metaKey?q(0):k.altKey?B(-1):z(-1)};return i.createElement(G.div,{ref:s,tabIndex:-1,...x,"cmdk-root":"",onKeyDown:k=>{var R;(R=x.onKeyDown)==null||R.call(x,k);let F=k.nativeEvent.isComposing||k.keyCode===229;if(!(k.defaultPrevented||F))switch(k.key){case"n":case"j":{p&&k.ctrlKey&&te(k);break}case"ArrowDown":{te(k);break}case"p":case"k":{p&&k.ctrlKey&&se(k);break}case"ArrowUp":{se(k);break}case"Home":{k.preventDefault(),q(0);break}case"End":{k.preventDefault(),Q();break}case"Enter":{k.preventDefault();let M=_();if(M){let V=new Event(Tr);M.dispatchEvent(V)}}}}},i.createElement("label",{"cmdk-label":"",htmlFor:U.inputId,id:U.labelId,style:Qf},d),Ks(t,k=>i.createElement(Ml.Provider,{value:I},i.createElement(Tl.Provider,{value:U},k))))}),_f=i.forwardRef((t,s)=>{var r,a;let n=at(),o=i.useRef(null),l=i.useContext(Al),c=ds(),d=Dl(t),m=(a=(r=d.current)==null?void 0:r.forceMount)!=null?a:l?.forceMount;wt(()=>{if(!m)return c.item(n,l?.id)},[m]);let u=Ol(n,o,[t.value,t.children,o],t.keywords),f=ya(),h=lt(S=>S.value&&S.value===u.current),b=lt(S=>m||c.filter()===!1?!0:S.search?S.filtered.items.get(n)>0:!0);i.useEffect(()=>{let S=o.current;if(!(!S||t.disabled))return S.addEventListener(Tr,g),()=>S.removeEventListener(Tr,g)},[b,t.onSelect,t.disabled]);function g(){var S,I;v(),(I=(S=d.current).onSelect)==null||I.call(S,u.current)}function v(){f.setState("value",u.current,!0)}if(!b)return null;let{disabled:p,value:x,onSelect:y,forceMount:P,keywords:j,...E}=t;return i.createElement(G.div,{ref:ts(o,s),...E,id:n,"cmdk-item":"",role:"option","aria-disabled":!!p,"aria-selected":!!h,"data-disabled":!!p,"data-selected":!!h,onPointerMove:p||c.getDisablePointerSelection()?void 0:v,onClick:p?void 0:g},t.children)}),qf=i.forwardRef((t,s)=>{let{heading:r,children:a,forceMount:n,...o}=t,l=at(),c=i.useRef(null),d=i.useRef(null),m=at(),u=ds(),f=lt(b=>n||u.filter()===!1?!0:b.search?b.filtered.groups.has(l):!0);wt(()=>u.group(l),[]),Ol(l,c,[t.value,t.heading,d]);let h=i.useMemo(()=>({id:l,forceMount:n}),[n]);return i.createElement(G.div,{ref:ts(c,s),...o,"cmdk-group":"",role:"presentation",hidden:f?void 0:!0},r&&i.createElement("div",{ref:d,"cmdk-group-heading":"","aria-hidden":!0,id:m},r),Ks(t,b=>i.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":r?m:void 0},i.createElement(Al.Provider,{value:h},b))))}),$f=i.forwardRef((t,s)=>{let{alwaysRender:r,...a}=t,n=i.useRef(null),o=lt(l=>!l.search);return!r&&!o?null:i.createElement(G.div,{ref:ts(n,s),...a,"cmdk-separator":"",role:"separator"})}),zf=i.forwardRef((t,s)=>{let{onValueChange:r,...a}=t,n=t.value!=null,o=ya(),l=lt(m=>m.search),c=lt(m=>m.selectedItemId),d=ds();return i.useEffect(()=>{t.value!=null&&o.setState("search",t.value)},[t.value]),i.createElement(G.input,{ref:s,...a,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":d.listId,"aria-labelledby":d.labelId,"aria-activedescendant":c,id:d.inputId,type:"text",value:n?t.value:l,onChange:m=>{n||o.setState("search",m.target.value),r?.(m.target.value)}})}),Uf=i.forwardRef((t,s)=>{let{children:r,label:a="Suggestions",...n}=t,o=i.useRef(null),l=i.useRef(null),c=lt(m=>m.selectedItemId),d=ds();return i.useEffect(()=>{if(l.current&&o.current){let m=l.current,u=o.current,f,h=new ResizeObserver(()=>{f=requestAnimationFrame(()=>{let b=m.offsetHeight;u.style.setProperty("--cmdk-list-height",b.toFixed(1)+"px")})});return h.observe(m),()=>{cancelAnimationFrame(f),h.unobserve(m)}}},[]),i.createElement(G.div,{ref:ts(o,s),...n,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":c,"aria-label":a,id:d.listId},Ks(t,m=>i.createElement("div",{ref:ts(l,d.listInnerRef),"cmdk-list-sizer":""},m)))}),Wf=i.forwardRef((t,s)=>{let{open:r,onOpenChange:a,overlayClassName:n,contentClassName:o,container:l,...c}=t;return i.createElement(_r,{open:r,onOpenChange:a},i.createElement(Lr,{container:l},i.createElement(ns,{"cmdk-overlay":"",className:n}),i.createElement(os,{"aria-label":t.label,"cmdk-dialog":"",className:o},i.createElement(Il,{ref:s,...c}))))}),Vf=i.forwardRef((t,s)=>lt(r=>r.filtered.count===0)?i.createElement(G.div,{ref:s,...t,"cmdk-empty":"",role:"presentation"}):null),Bf=i.forwardRef((t,s)=>{let{progress:r,children:a,label:n="Loading...",...o}=t;return i.createElement(G.div,{ref:s,...o,"cmdk-loading":"",role:"progressbar","aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":100,"aria-label":n},Ks(t,l=>i.createElement("div",{"aria-hidden":!0},l)))}),Se=Object.assign(Il,{List:Uf,Item:_f,Input:zf,Group:qf,Separator:$f,Dialog:Wf,Empty:Vf,Loading:Bf});function Hf(t,s){let r=t.nextElementSibling;for(;r;){if(r.matches(s))return r;r=r.nextElementSibling}}function Kf(t,s){let r=t.previousElementSibling;for(;r;){if(r.matches(s))return r;r=r.previousElementSibling}}function Dl(t){let s=i.useRef(t);return wt(()=>{s.current=t}),s}var wt=typeof window>"u"?i.useEffect:i.useLayoutEffect;function St(t){let s=i.useRef();return s.current===void 0&&(s.current=t()),s}function lt(t){let s=ya(),r=()=>t(s.snapshot());return i.useSyncExternalStore(s.subscribe,r,r)}function Ol(t,s,r,a=[]){let n=i.useRef(),o=ds();return wt(()=>{var l;let c=(()=>{var m;for(let u of r){if(typeof u=="string")return u.trim();if(typeof u=="object"&&"current"in u)return u.current?(m=u.current.textContent)==null?void 0:m.trim():n.current}})(),d=a.map(m=>m.trim());o.value(t,c,d),(l=s.current)==null||l.setAttribute(Nt,c),n.current=c}),n}var Yf=()=>{let[t,s]=i.useState(),r=St(()=>new Map);return wt(()=>{r.current.forEach(a=>a()),r.current=new Map},[t]),(a,n)=>{r.current.set(a,n),s({})}};function Gf(t){let s=t.type;return typeof s=="function"?s(t.props):"render"in s?s.render(t.props):t}function Ks({asChild:t,children:s},r){return t&&i.isValidElement(s)?i.cloneElement(Gf(s),{ref:s.ref},r(s.props.children)):r(s)}var Qf={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const Fl=i.forwardRef(({className:t,...s},r)=>e.jsx(Se,{ref:r,className:T("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",t),...s}));Fl.displayName=Se.displayName;const Ll=i.forwardRef(({className:t,...s},r)=>e.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[e.jsx(ra,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),e.jsx(Se.Input,{ref:r,className:T("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",t),...s})]}));Ll.displayName=Se.Input.displayName;const _l=i.forwardRef(({className:t,...s},r)=>e.jsx(Se.List,{ref:r,className:T("max-h-[300px] overflow-y-auto overflow-x-hidden",t),...s}));_l.displayName=Se.List.displayName;const ql=i.forwardRef((t,s)=>e.jsx(Se.Empty,{ref:s,className:"py-6 text-center text-sm",...t}));ql.displayName=Se.Empty.displayName;const $l=i.forwardRef(({className:t,...s},r)=>e.jsx(Se.Group,{ref:r,className:T("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",t),...s}));$l.displayName=Se.Group.displayName;const Jf=i.forwardRef(({className:t,...s},r)=>e.jsx(Se.Separator,{ref:r,className:T("-mx-1 h-px bg-border",t),...s}));Jf.displayName=Se.Separator.displayName;const Mr=i.forwardRef(({className:t,...s},r)=>e.jsx(Se.Item,{ref:r,className:T("relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t),...s}));Mr.displayName=Se.Item.displayName;var Ys="Popover",[zl]=We(Ys,[Ms]),us=Ms(),[Xf,dt]=zl(Ys),Ul=t=>{const{__scopePopover:s,children:r,open:a,defaultOpen:n,onOpenChange:o,modal:l=!1}=t,c=us(s),d=i.useRef(null),[m,u]=i.useState(!1),[f,h]=Ot({prop:a,defaultProp:n??!1,onChange:o,caller:Ys});return e.jsx(Ic,{...c,children:e.jsx(Xf,{scope:s,contentId:at(),triggerRef:d,open:f,onOpenChange:h,onOpenToggle:i.useCallback(()=>h(b=>!b),[h]),hasCustomAnchor:m,onCustomAnchorAdd:i.useCallback(()=>u(!0),[]),onCustomAnchorRemove:i.useCallback(()=>u(!1),[]),modal:l,children:r})})};Ul.displayName=Ys;var Wl="PopoverAnchor",Zf=i.forwardRef((t,s)=>{const{__scopePopover:r,...a}=t,n=dt(Wl,r),o=us(r),{onCustomAnchorAdd:l,onCustomAnchorRemove:c}=n;return i.useEffect(()=>(l(),()=>c()),[l,c]),e.jsx(Or,{...o,...a,ref:s})});Zf.displayName=Wl;var Vl="PopoverTrigger",Bl=i.forwardRef((t,s)=>{const{__scopePopover:r,...a}=t,n=dt(Vl,r),o=us(r),l=ce(s,n.triggerRef),c=e.jsx(G.button,{type:"button","aria-haspopup":"dialog","aria-expanded":n.open,"aria-controls":n.contentId,"data-state":Ql(n.open),...a,ref:l,onClick:Y(t.onClick,n.onOpenToggle)});return n.hasCustomAnchor?c:e.jsx(Or,{asChild:!0,...o,children:c})});Bl.displayName=Vl;var ja="PopoverPortal",[ep,tp]=zl(ja,{forceMount:void 0}),Hl=t=>{const{__scopePopover:s,forceMount:r,children:a,container:n}=t,o=dt(ja,s);return e.jsx(ep,{scope:s,forceMount:r,children:e.jsx(_e,{present:r||o.open,children:e.jsx(hn,{asChild:!0,container:n,children:a})})})};Hl.displayName=ja;var Dt="PopoverContent",Kl=i.forwardRef((t,s)=>{const r=tp(Dt,t.__scopePopover),{forceMount:a=r.forceMount,...n}=t,o=dt(Dt,t.__scopePopover);return e.jsx(_e,{present:a||o.open,children:o.modal?e.jsx(rp,{...n,ref:s}):e.jsx(ap,{...n,ref:s})})});Kl.displayName=Dt;var sp=Tc("PopoverContent.RemoveScroll"),rp=i.forwardRef((t,s)=>{const r=dt(Dt,t.__scopePopover),a=i.useRef(null),n=ce(s,a),o=i.useRef(!1);return i.useEffect(()=>{const l=a.current;if(l)return Ec(l)},[]),e.jsx(Rc,{as:sp,allowPinchZoom:!0,children:e.jsx(Yl,{...t,ref:n,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Y(t.onCloseAutoFocus,l=>{l.preventDefault(),o.current||r.triggerRef.current?.focus()}),onPointerDownOutside:Y(t.onPointerDownOutside,l=>{const c=l.detail.originalEvent,d=c.button===0&&c.ctrlKey===!0,m=c.button===2||d;o.current=m},{checkForDefaultPrevented:!1}),onFocusOutside:Y(t.onFocusOutside,l=>l.preventDefault(),{checkForDefaultPrevented:!1})})})}),ap=i.forwardRef((t,s)=>{const r=dt(Dt,t.__scopePopover),a=i.useRef(!1),n=i.useRef(!1);return e.jsx(Yl,{...t,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{t.onCloseAutoFocus?.(o),o.defaultPrevented||(a.current||r.triggerRef.current?.focus(),o.preventDefault()),a.current=!1,n.current=!1},onInteractOutside:o=>{t.onInteractOutside?.(o),o.defaultPrevented||(a.current=!0,o.detail.originalEvent.type==="pointerdown"&&(n.current=!0));const l=o.target;r.triggerRef.current?.contains(l)&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&n.current&&o.preventDefault()}})}),Yl=i.forwardRef((t,s)=>{const{__scopePopover:r,trapFocus:a,onOpenAutoFocus:n,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEscapeKeyDown:c,onPointerDownOutside:d,onFocusOutside:m,onInteractOutside:u,...f}=t,h=dt(Dt,r),b=us(r);return Mc(),e.jsx(Ac,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:n,onUnmountAutoFocus:o,children:e.jsx(fn,{asChild:!0,disableOutsidePointerEvents:l,onInteractOutside:u,onEscapeKeyDown:c,onPointerDownOutside:d,onFocusOutside:m,onDismiss:()=>h.onOpenChange(!1),children:e.jsx(pn,{"data-state":Ql(h.open),role:"dialog",id:h.contentId,...b,...f,ref:s,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),Gl="PopoverClose",np=i.forwardRef((t,s)=>{const{__scopePopover:r,...a}=t,n=dt(Gl,r);return e.jsx(G.button,{type:"button",...a,ref:s,onClick:Y(t.onClick,()=>n.onOpenChange(!1))})});np.displayName=Gl;var op="PopoverArrow",ip=i.forwardRef((t,s)=>{const{__scopePopover:r,...a}=t,n=us(r);return e.jsx(xn,{...n,...a,ref:s})});ip.displayName=op;function Ql(t){return t?"open":"closed"}var lp=Ul,cp=Bl,dp=Hl,Jl=Kl;const up=lp,mp=cp,Xl=i.forwardRef(({className:t,align:s="center",sideOffset:r=4,...a},n)=>e.jsx(dp,{children:e.jsx(Jl,{ref:n,align:s,sideOffset:r,className:T("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",t),...a})}));Xl.displayName=Jl.displayName;function hp({photos:t=[],fallbackInitials:s="",className:r="",aspectRatio:a="square",showDots:n=!0,showArrows:o=!0}){const[l,c]=i.useState(0);if(t.length===0)return e.jsx("div",{className:T("relative bg-gradient-to-br from-primary/20 to-primary/5 flex items-center justify-center",a==="square"&&"aspect-square",a==="portrait"&&"aspect-[3/4]",a==="landscape"&&"aspect-[4/3]",r),children:e.jsxs("div",{className:"flex flex-col items-center text-muted-foreground",children:[e.jsx(jt,{className:"h-12 w-12 mb-2"}),e.jsx("span",{className:"text-lg font-medium",children:s})]})});const d=()=>{c(f=>(f+1)%t.length)},m=()=>{c(f=>(f-1+t.length)%t.length)},u=f=>{c(f)};return e.jsxs("div",{className:T("relative overflow-hidden",r),children:[e.jsxs("div",{className:T("relative",a==="square"&&"aspect-square",a==="portrait"&&"aspect-[3/4]",a==="landscape"&&"aspect-[4/3]"),children:[e.jsx("img",{src:t[l],alt:`Photo ${l+1}`,className:"w-full h-full object-cover transition-opacity duration-300",onError:f=>{const h=f.target;h.style.display="none"}}),o&&t.length>1&&e.jsxs(e.Fragment,{children:[e.jsx(L,{variant:"ghost",size:"icon",className:"absolute left-2 top-1/2 -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white",onClick:m,children:e.jsx(mu,{className:"h-4 w-4"})}),e.jsx(L,{variant:"ghost",size:"icon",className:"absolute right-2 top-1/2 -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white",onClick:d,children:e.jsx(hu,{className:"h-4 w-4"})})]}),t.length>1&&e.jsxs("div",{className:"absolute top-2 right-2 bg-black/50 text-white text-xs px-2 py-1 rounded",children:[l+1," / ",t.length]})]}),n&&t.length>1&&e.jsx("div",{className:"flex justify-center space-x-2 mt-3",children:t.map((f,h)=>e.jsx("button",{className:T("w-2 h-2 rounded-full transition-colors",h===l?"bg-primary":"bg-muted-foreground/30 hover:bg-muted-foreground/50"),onClick:()=>u(h)},h))})]})}function fp(){const{user:t}=be(),{isConnected:s}=ma(),[,r]=de(),[a,n]=i.useState([]),[o,l]=i.useState(!0),[c,d]=i.useState(!1),[m,u]=i.useState(!1),f=["India","USA","UK","Canada","Australia","Germany","France","Spain","Italy","Japan","South Korea","Brazil","Mexico","Netherlands","Sweden","China","Russia","Argentina","Chile","Colombia","Peru","Portugal","Belgium","Switzerland","Austria"],[h,b]=i.useState({gender:"",location:"",ageMin:18,ageMax:40}),[g,v]=i.useState({gender:"",location:"",ageMin:18,ageMax:40}),p=i.useCallback(async()=>{try{const S=new URLSearchParams;h.gender&&S.set("gender",h.gender),h.location&&S.set("location",h.location),S.set("ageMin",h.ageMin.toString()),S.set("ageMax",h.ageMax.toString());const I=await fetch(`/api/users/online?${S}`);if(I.ok){const U=await I.json();n(U)}}catch(S){console.error("Failed to fetch users:",S)}finally{l(!1)}},[h]),x=async()=>{try{const S=await fetch("/api/user/filters");if(S.ok){const I=await S.json();b(I),v(I)}}catch(S){console.error("Failed to load saved filters:",S)}};i.useEffect(()=>{x()},[]),i.useEffect(()=>{p()},[h]),i.useEffect(()=>{c&&v(h)},[c,h]);const y=async()=>{try{(await fetch("/api/user/filters",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)})).ok&&(b(g),d(!1))}catch(S){console.error("Failed to save filters:",S)}},P=async()=>{try{if((await fetch("/api/user/filters",{method:"DELETE"})).ok){const I={gender:"",location:"",ageMin:18,ageMax:40};v(I),b(I),d(!1)}}catch(S){console.error("Failed to reset filters:",S)}},j=h.gender||h.location||h.ageMin!==18||h.ageMax!==40,E=async S=>{let I={...h};S==="gender"?I.gender="":S==="location"?I.location="":S==="age"&&(I.ageMin=18,I.ageMax=40);try{(await fetch("/api/user/filters",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(I)})).ok&&b(I)}catch(U){console.error("Failed to update filters:",U)}};return i.useEffect(()=>{const S=async I=>{const U=I,{userId:D,isOnline:A}=U.detail;if(!(!t||D===t.id))if(A)try{const N=new URLSearchParams;h.gender&&N.set("gender",h.gender),h.location&&N.set("location",h.location),N.set("ageMin",h.ageMin.toString()),N.set("ageMax",h.ageMax.toString());const C=await fetch(`/api/users/online?${N}`);if(C.ok){const _=(await C.json()).find(O=>O.id===D);_&&n(O=>O.some(z=>z.id===D)?O.map(z=>z.id===D?{...z,isOnline:!0}:z):[...O,_])}}catch(N){console.error("Failed to fetch user for real-time update:",N)}else n(N=>N.filter(C=>C.id!==D))};return window.addEventListener("onlineStatusChanged",S),()=>window.removeEventListener("onlineStatusChanged",S)},[t,h]),t?o?e.jsx("div",{className:"flex items-center justify-center min-h-screen pb-16",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Finding amazing people near you..."})]})}):e.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[e.jsx(cs,{open:c,onOpenChange:d,children:e.jsxs($t,{className:"max-w-lg max-h-[90vh] p-0 gap-0 overflow-hidden flex flex-col",children:[e.jsxs(zt,{className:"flex-shrink-0 p-6 pb-4 bg-gradient-to-r from-primary/5 to-primary/10 border-b",children:[e.jsx(Ut,{className:"text-2xl font-bold",children:"Filter Profiles"}),e.jsx(Us,{className:"text-sm text-muted-foreground",children:"Customize your search to find the perfect match"})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto px-6 py-4 space-y-6 min-h-0",children:[e.jsxs("div",{className:"space-y-4 p-5 rounded-xl bg-gradient-to-br from-primary/5 to-primary/10 border border-primary/20 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("label",{className:"text-sm font-semibold flex items-center gap-2",children:[e.jsx(yt,{className:"h-5 w-5 text-primary"}),"Age Range"]}),e.jsxs("div",{className:"text-xl font-bold text-primary",children:[g.ageMin," - ",g.ageMax]})]}),e.jsxs("div",{className:"pt-2 px-1",children:[e.jsx(hl,{value:[g.ageMin,g.ageMax],onValueChange:([S,I])=>{v({...g,ageMin:S,ageMax:I})},min:18,max:80,step:1,className:"py-4",minStepsBetweenThumbs:1}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-2",children:[e.jsx("span",{children:"18"}),e.jsx("span",{children:"80"})]})]})]}),e.jsxs("div",{className:"space-y-3 p-5 rounded-xl bg-gradient-to-br from-blue-500/5 to-purple-500/10 border border-blue-500/20 shadow-sm",children:[e.jsxs("label",{className:"text-sm font-semibold flex items-center gap-2",children:[e.jsx(ge,{className:"h-5 w-5 text-blue-500"}),"Gender Preference"]}),e.jsxs(ba,{value:g.gender,onValueChange:S=>v({...g,gender:S}),className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-3 rounded-lg border bg-background/50 p-4 hover:bg-accent/50 transition-all cursor-pointer hover:border-primary/50",children:[e.jsx(rt,{value:"",id:"all",className:"h-5 w-5"}),e.jsx(Z,{htmlFor:"all",className:"flex-1 cursor-pointer font-medium",children:"All Genders"})]}),e.jsxs("div",{className:"flex items-center space-x-3 rounded-lg border bg-background/50 p-4 hover:bg-accent/50 transition-all cursor-pointer hover:border-primary/50",children:[e.jsx(rt,{value:"male",id:"male",className:"h-5 w-5"}),e.jsx(Z,{htmlFor:"male",className:"flex-1 cursor-pointer font-medium",children:"Male"})]}),e.jsxs("div",{className:"flex items-center space-x-3 rounded-lg border bg-background/50 p-4 hover:bg-accent/50 transition-all cursor-pointer hover:border-primary/50",children:[e.jsx(rt,{value:"female",id:"female",className:"h-5 w-5"}),e.jsx(Z,{htmlFor:"female",className:"flex-1 cursor-pointer font-medium",children:"Female"})]}),e.jsxs("div",{className:"flex items-center space-x-3 rounded-lg border bg-background/50 p-4 hover:bg-accent/50 transition-all cursor-pointer hover:border-primary/50",children:[e.jsx(rt,{value:"other",id:"other",className:"h-5 w-5"}),e.jsx(Z,{htmlFor:"other",className:"flex-1 cursor-pointer font-medium",children:"Other"})]})]})]}),e.jsxs("div",{className:"space-y-3 p-5 rounded-xl bg-gradient-to-br from-green-500/5 to-emerald-500/10 border border-green-500/20 shadow-sm",children:[e.jsxs("label",{className:"text-sm font-semibold flex items-center gap-2",children:[e.jsx(Ge,{className:"h-5 w-5 text-green-500"}),"Location"]}),e.jsxs(up,{open:m,onOpenChange:u,children:[e.jsx(mp,{asChild:!0,children:e.jsxs(L,{variant:"outline",role:"combobox","aria-expanded":m,className:"w-full justify-between rounded-lg h-12 bg-background/50 hover:bg-accent/50 border-green-500/30",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ge,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:T(!g.location&&"text-muted-foreground"),children:g.location||"Any location"})]}),e.jsx(pu,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),e.jsx(Xl,{className:"w-[--radix-popover-trigger-width] p-0",align:"start",children:e.jsxs(Fl,{children:[e.jsx(Ll,{placeholder:"Search country...",className:"h-12"}),e.jsxs(_l,{children:[e.jsx(ql,{children:"No country found."}),e.jsxs($l,{children:[e.jsxs(Mr,{value:"",onSelect:()=>{v({...g,location:""}),u(!1)},className:"py-3",children:[e.jsx(Mt,{className:T("mr-2 h-4 w-4",g.location?"opacity-0":"opacity-100")}),"Any location"]}),f.map(S=>e.jsxs(Mr,{value:S,onSelect:()=>{v({...g,location:S}),u(!1)},className:"py-3",children:[e.jsx(Mt,{className:T("mr-2 h-4 w-4",g.location===S?"opacity-100":"opacity-0")}),S]},S))]})]})]})})]})]})]}),e.jsxs("div",{className:"flex-shrink-0 p-6 pt-4 border-t bg-background space-y-3",children:[e.jsx(L,{className:"w-full h-12 rounded-xl font-semibold text-base shadow-lg hover:shadow-xl transition-all",onClick:y,children:"Apply Filters"}),e.jsx(L,{variant:"outline",className:"w-full h-12 rounded-xl font-semibold text-base hover:bg-destructive/10 hover:text-destructive hover:border-destructive/50 transition-all",onClick:P,children:"Reset All"})]})]})}),e.jsxs("div",{className:"sticky top-0 z-30 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 border-b",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 sm:p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-xl bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center shadow-lg",children:e.jsx(gu,{className:"h-5 w-5 sm:h-6 sm:w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Discover"}),e.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground",children:[a.length," ",a.length===1?"person":"people"," online now"]})]})]}),e.jsxs(L,{variant:"outline",size:"icon",className:"relative h-10 w-10 rounded-xl hover:bg-primary/10 hover:border-primary/50 transition-all",onClick:()=>d(!0),children:[e.jsx(Nu,{className:"h-5 w-5"}),j&&e.jsx("div",{className:"absolute -top-1 -right-1 h-4 w-4 bg-primary rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-[10px] text-primary-foreground font-bold",children:[h.gender,h.location,h.ageMin!==18||h.ageMax!==40?"age":""].filter(Boolean).length})})]})]}),j&&e.jsxs("div",{className:"px-3 sm:px-4 pb-3 flex flex-wrap gap-2",children:[h.gender&&e.jsxs(Zt,{variant:"secondary",className:"rounded-full px-3 py-1.5 cursor-pointer hover:bg-secondary/80 transition-all",onClick:()=>E("gender"),children:[e.jsx("span",{className:"capitalize",children:h.gender}),e.jsx(ze,{className:"h-3 w-3 ml-1"})]}),h.location&&e.jsxs(Zt,{variant:"secondary",className:"rounded-full px-3 py-1.5 cursor-pointer hover:bg-secondary/80 transition-all",onClick:()=>E("location"),children:[e.jsx(Ge,{className:"h-3 w-3 mr-1"}),h.location,e.jsx(ze,{className:"h-3 w-3 ml-1"})]}),(h.ageMin!==20||h.ageMax!==40)&&e.jsxs(Zt,{variant:"secondary",className:"rounded-full px-3 py-1.5 cursor-pointer hover:bg-secondary/80 transition-all",onClick:()=>E("age"),children:[e.jsx(yt,{className:"h-3 w-3 mr-1"}),"Age ",h.ageMin,"-",h.ageMax,e.jsx(ze,{className:"h-3 w-3 ml-1"})]})]})]}),e.jsx("div",{className:"p-2 sm:p-4",children:a.length===0?e.jsxs("div",{className:"text-center py-8 sm:py-12 px-4",children:[e.jsx(ge,{className:"h-8 w-8 sm:h-12 sm:w-12 text-muted-foreground mx-auto mb-3 sm:mb-4"}),e.jsx("h2",{className:"text-base sm:text-lg font-semibold mb-2",children:"No matches found"}),e.jsx("p",{className:"text-sm sm:text-base text-muted-foreground",children:"Try adjusting your filters to discover more compatible singles"})]}):e.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-7 2xl:grid-cols-8 gap-1.5 sm:gap-2",children:a.map(S=>e.jsx(ae,{className:"overflow-hidden hover:shadow-lg active:scale-95 transition-all duration-300 group cursor-pointer",onClick:()=>r(`/profile/${S.id}`),children:e.jsxs(he,{className:"p-0",children:[e.jsxs("div",{className:"relative aspect-[4/3] overflow-hidden",children:[e.jsx(hp,{photos:[S.profilePhoto,...S.photos&&Array.isArray(S.photos)?S.photos:[]].filter(Boolean),fallbackInitials:`${S.firstName[0]}${S.lastName[0]}`,aspectRatio:"landscape",showDots:!1,showArrows:!1,className:"w-full h-full group-hover:scale-105 transition-transform duration-300"}),S.isOnline&&e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full border-2 border-white shadow-lg shadow-green-500/50 animate-pulse"})})]}),e.jsxs("div",{className:"p-2 sm:p-1.5 space-y-1.5 sm:space-y-1",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsxs("h3",{className:"font-semibold text-xs sm:text-xs leading-tight line-clamp-1",children:[S.firstName," ",S.lastName]}),e.jsxs("div",{className:"flex items-center gap-1 text-[10px] sm:text-xs text-muted-foreground",children:[e.jsx(ks,{className:"h-2.5 w-2.5 sm:h-3 sm:w-3 flex-shrink-0 text-blue-500/70"}),e.jsx("span",{children:S.age}),e.jsx("span",{className:"mx-0.5",children:""}),e.jsx(as,{className:"h-2.5 w-2.5 sm:h-3 sm:w-3 flex-shrink-0 text-purple-500/70"}),e.jsx("span",{className:"capitalize",children:S.gender})]}),e.jsx("div",{className:"flex items-center gap-1 text-[10px] sm:text-xs text-muted-foreground min-h-[14px] sm:min-h-[16px]",children:S.location?e.jsxs(e.Fragment,{children:[e.jsx(Ge,{className:"h-2.5 w-2.5 sm:h-3 sm:w-3 flex-shrink-0 text-green-500/70"}),e.jsx("span",{className:"line-clamp-1",children:S.location})]}):e.jsx("span",{className:"text-transparent select-none",children:"."})})]}),e.jsxs("div",{className:"flex gap-1 sm:gap-0.5 pt-0.5",children:[e.jsx(L,{size:"sm",className:"flex-1 text-[10px] sm:text-xs px-1.5 sm:px-1 py-1 sm:py-0.5 h-7 sm:h-6 font-medium",onClick:I=>{I.stopPropagation(),r(`/profile/${S.id}`)},children:"Profile"}),e.jsx(L,{size:"sm",variant:"outline",className:"flex-1 text-[10px] sm:text-xs px-1.5 sm:px-1 py-1 sm:py-0.5 h-7 sm:h-6 font-medium",onClick:I=>{I.stopPropagation(),r(`/chat/${S.id}`)},children:"Chat"})]})]})]})},S.id))})})]}):null}function ve(t){const s=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&s==="[object Date]"?new t.constructor(+t):typeof t=="number"||s==="[object Number]"||typeof t=="string"||s==="[object String]"?new Date(t):new Date(NaN)}function pp(t,s){return t instanceof Date?new t.constructor(s):new Date(s)}const gs=43200,on=1440;let xp={};function gp(){return xp}function ln(t){const s=ve(t),r=new Date(Date.UTC(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds()));return r.setUTCFullYear(s.getFullYear()),+t-+r}function ws(t,s){const r=ve(t),a=ve(s),n=r.getTime()-a.getTime();return n<0?-1:n>0?1:n}function vp(t){return pp(t,Date.now())}function bp(t,s){const r=ve(t),a=ve(s),n=r.getFullYear()-a.getFullYear(),o=r.getMonth()-a.getMonth();return n*12+o}function yp(t){return s=>{const a=(t?Math[t]:Math.trunc)(s);return a===0?0:a}}function jp(t,s){return+ve(t)-+ve(s)}function wp(t){const s=ve(t);return s.setHours(23,59,59,999),s}function Np(t){const s=ve(t),r=s.getMonth();return s.setFullYear(s.getFullYear(),r+1,0),s.setHours(23,59,59,999),s}function Sp(t){const s=ve(t);return+wp(s)==+Np(s)}function Cp(t,s){const r=ve(t),a=ve(s),n=ws(r,a),o=Math.abs(bp(r,a));let l;if(o<1)l=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-n*o);let c=ws(r,a)===-n;Sp(ve(t))&&o===1&&ws(t,a)===1&&(c=!1),l=n*(o-Number(c))}return l===0?0:l}function kp(t,s,r){const a=jp(t,s)/1e3;return yp(r?.roundingMethod)(a)}const Pp={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Ep=(t,s,r)=>{let a;const n=Pp[t];return typeof n=="string"?a=n:s===1?a=n.one:a=n.other.replace("{{count}}",s.toString()),r?.addSuffix?r.comparison&&r.comparison>0?"in "+a:a+" ago":a};function dr(t){return(s={})=>{const r=s.width?String(s.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const Rp={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Tp={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Mp={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Ap={date:dr({formats:Rp,defaultWidth:"full"}),time:dr({formats:Tp,defaultWidth:"full"}),dateTime:dr({formats:Mp,defaultWidth:"full"})},Ip={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Dp=(t,s,r,a)=>Ip[t];function Yt(t){return(s,r)=>{const a=r?.context?String(r.context):"standalone";let n;if(a==="formatting"&&t.formattingValues){const l=t.defaultFormattingWidth||t.defaultWidth,c=r?.width?String(r.width):l;n=t.formattingValues[c]||t.formattingValues[l]}else{const l=t.defaultWidth,c=r?.width?String(r.width):t.defaultWidth;n=t.values[c]||t.values[l]}const o=t.argumentCallback?t.argumentCallback(s):s;return n[o]}}const Op={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Fp={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Lp={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},_p={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},qp={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},$p={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},zp=(t,s)=>{const r=Number(t),a=r%100;if(a>20||a<10)switch(a%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},Up={ordinalNumber:zp,era:Yt({values:Op,defaultWidth:"wide"}),quarter:Yt({values:Fp,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Yt({values:Lp,defaultWidth:"wide"}),day:Yt({values:_p,defaultWidth:"wide"}),dayPeriod:Yt({values:qp,defaultWidth:"wide",formattingValues:$p,defaultFormattingWidth:"wide"})};function Gt(t){return(s,r={})=>{const a=r.width,n=a&&t.matchPatterns[a]||t.matchPatterns[t.defaultMatchWidth],o=s.match(n);if(!o)return null;const l=o[0],c=a&&t.parsePatterns[a]||t.parsePatterns[t.defaultParseWidth],d=Array.isArray(c)?Vp(c,f=>f.test(l)):Wp(c,f=>f.test(l));let m;m=t.valueCallback?t.valueCallback(d):d,m=r.valueCallback?r.valueCallback(m):m;const u=s.slice(l.length);return{value:m,rest:u}}}function Wp(t,s){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&s(t[r]))return r}function Vp(t,s){for(let r=0;r<t.length;r++)if(s(t[r]))return r}function Bp(t){return(s,r={})=>{const a=s.match(t.matchPattern);if(!a)return null;const n=a[0],o=s.match(t.parsePattern);if(!o)return null;let l=t.valueCallback?t.valueCallback(o[0]):o[0];l=r.valueCallback?r.valueCallback(l):l;const c=s.slice(n.length);return{value:l,rest:c}}}const Hp=/^(\d+)(th|st|nd|rd)?/i,Kp=/\d+/i,Yp={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Gp={any:[/^b/i,/^(a|c)/i]},Qp={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Jp={any:[/1/i,/2/i,/3/i,/4/i]},Xp={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Zp={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},ex={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},tx={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},sx={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},rx={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},ax={ordinalNumber:Bp({matchPattern:Hp,parsePattern:Kp,valueCallback:t=>parseInt(t,10)}),era:Gt({matchPatterns:Yp,defaultMatchWidth:"wide",parsePatterns:Gp,defaultParseWidth:"any"}),quarter:Gt({matchPatterns:Qp,defaultMatchWidth:"wide",parsePatterns:Jp,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Gt({matchPatterns:Xp,defaultMatchWidth:"wide",parsePatterns:Zp,defaultParseWidth:"any"}),day:Gt({matchPatterns:ex,defaultMatchWidth:"wide",parsePatterns:tx,defaultParseWidth:"any"}),dayPeriod:Gt({matchPatterns:sx,defaultMatchWidth:"any",parsePatterns:rx,defaultParseWidth:"any"})},nx={code:"en-US",formatDistance:Ep,formatLong:Ap,formatRelative:Dp,localize:Up,match:ax,options:{weekStartsOn:0,firstWeekContainsDate:1}};function ox(t,s,r){const a=gp(),n=r?.locale??a.locale??nx,o=2520,l=ws(t,s);if(isNaN(l))throw new RangeError("Invalid time value");const c=Object.assign({},r,{addSuffix:r?.addSuffix,comparison:l});let d,m;l>0?(d=ve(s),m=ve(t)):(d=ve(t),m=ve(s));const u=kp(m,d),f=(ln(m)-ln(d))/1e3,h=Math.round((u-f)/60);let b;if(h<2)return r?.includeSeconds?u<5?n.formatDistance("lessThanXSeconds",5,c):u<10?n.formatDistance("lessThanXSeconds",10,c):u<20?n.formatDistance("lessThanXSeconds",20,c):u<40?n.formatDistance("halfAMinute",0,c):u<60?n.formatDistance("lessThanXMinutes",1,c):n.formatDistance("xMinutes",1,c):h===0?n.formatDistance("lessThanXMinutes",1,c):n.formatDistance("xMinutes",h,c);if(h<45)return n.formatDistance("xMinutes",h,c);if(h<90)return n.formatDistance("aboutXHours",1,c);if(h<on){const g=Math.round(h/60);return n.formatDistance("aboutXHours",g,c)}else{if(h<o)return n.formatDistance("xDays",1,c);if(h<gs){const g=Math.round(h/on);return n.formatDistance("xDays",g,c)}else if(h<gs*2)return b=Math.round(h/gs),n.formatDistance("aboutXMonths",b,c)}if(b=Cp(m,d),b<12){const g=Math.round(h/gs);return n.formatDistance("xMonths",g,c)}else{const g=b%12,v=Math.trunc(b/12);return g<3?n.formatDistance("aboutXYears",v,c):g<9?n.formatDistance("overXYears",v,c):n.formatDistance("almostXYears",v+1,c)}}function ix(t,s){return ox(t,vp(t),s)}function lx(){const{user:t}=be(),[s,r]=i.useState([]),[a,n]=i.useState(!0),o=async()=>{try{const u=await fetch("/api/conversations");if(u.ok){const f=await u.json();r(f)}}catch(u){console.error("Failed to fetch conversations:",u)}finally{n(!1)}};if(i.useEffect(()=>{t&&o()},[t]),i.useEffect(()=>{const u=h=>{o()},f=()=>{o()};return window.addEventListener("newMessage",u),window.addEventListener("onlineStatusChanged",f),()=>{window.removeEventListener("newMessage",u),window.removeEventListener("onlineStatusChanged",f)}},[]),!t)return null;const l=({conversation:u})=>{const f=u.lastMessage&&u.lastMessage.senderId!==t.id&&!u.lastMessage.isRead;return e.jsx(Ln,{href:`/chat/${u.otherUser.id}`,className:"block",children:e.jsxs("div",{className:`group relative rounded-xl border transition-all duration-200 hover:shadow-md cursor-pointer ${f?"bg-primary/5 border-primary/20":"bg-card/50 border-border/50 hover:bg-card/80"}`,children:[f&&e.jsx("div",{className:"absolute top-3 right-3 w-2.5 h-2.5 bg-primary rounded-full shadow-sm"}),e.jsx("div",{className:"p-3 sm:p-4",children:e.jsxs("div",{className:"flex gap-3 items-start",children:[e.jsxs("div",{className:"flex-shrink-0 relative",children:[e.jsxs(fe,{className:"h-11 w-11 sm:h-12 sm:w-12 ring-2 ring-background shadow-sm",children:[e.jsx(pe,{src:u.otherUser.profilePhoto||void 0}),e.jsxs(xe,{className:"bg-primary/10 text-primary font-semibold text-sm",children:[u.otherUser.firstName[0],u.otherUser.lastName[0]]})]}),u.otherUser.isOnline&&e.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-3.5 h-3.5 bg-green-500 border-2 border-background rounded-full"})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"flex items-start justify-between gap-3 mb-1",children:e.jsxs("h3",{className:"font-semibold text-sm sm:text-base text-foreground line-clamp-1 flex-1",children:[u.otherUser.firstName," ",u.otherUser.lastName]})}),u.lastMessage?e.jsxs("div",{className:"flex items-center gap-2 text-xs sm:text-sm text-muted-foreground",children:[u.lastMessage.senderId===t.id?e.jsx(gt,{className:"h-3 w-3 sm:h-3.5 sm:w-3.5 flex-shrink-0"}):e.jsx(Qe,{className:"h-3 w-3 sm:h-3.5 sm:w-3.5 flex-shrink-0"}),e.jsx("p",{className:"line-clamp-1 flex-1",children:u.lastMessage.imageUrl?e.jsx("span",{className:"italic",children:" Photo"}):u.lastMessage.content})]}):e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground italic",children:"No messages yet"})]}),u.lastMessage&&e.jsx("div",{className:"absolute top-9 sm:top-10 right-3",children:e.jsx("span",{className:"text-xs text-muted-foreground/70 font-medium whitespace-nowrap",children:ix(new Date(u.lastMessage.timestamp),{addSuffix:!0})})})]})})]})})};if(a)return e.jsx("div",{className:"flex items-center justify-center min-h-screen pb-16",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading your messages..."})]})});const c=s,d=s.filter(u=>u.lastMessage&&u.lastMessage.senderId!==t.id&&!u.lastMessage.isRead),m=s.filter(u=>u.lastMessage&&u.lastMessage.senderId===t.id);return e.jsxs("div",{className:"flex flex-col h-screen bg-background",children:[e.jsx("div",{className:"flex-none px-4 sm:px-6 lg:px-8 py-4 sm:py-6 border-b border-border/50 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/80",children:e.jsx("div",{className:"max-w-5xl mx-auto",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-xl bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center shadow-lg",children:e.jsx(Qe,{className:"h-5 w-5 sm:h-6 sm:w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Messages"}),e.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground",children:[s.length," conversations"]})]})]})})}),e.jsx("div",{className:"flex-1 overflow-hidden pb-20",children:e.jsx("div",{className:"h-full px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"max-w-5xl mx-auto h-full",children:e.jsxs(Wi,{defaultValue:"all",className:"h-full flex flex-col pt-4 sm:pt-6",children:[e.jsxs(fa,{className:"grid w-full grid-cols-3 mb-4 flex-shrink-0",children:[e.jsxs(Rt,{value:"all",className:"flex items-center gap-1.5 sm:gap-2 text-xs sm:text-sm",children:[e.jsx(Qe,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}),e.jsx("span",{className:"hidden xs:inline",children:"All "}),"(",c.length,")"]}),e.jsxs(Rt,{value:"unread",className:"flex items-center gap-1.5 sm:gap-2 text-xs sm:text-sm",children:[e.jsx(wr,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}),e.jsx("span",{className:"hidden xs:inline",children:"Unread "}),"(",d.length,")"]}),e.jsxs(Rt,{value:"sent",className:"flex items-center gap-1.5 sm:gap-2 text-xs sm:text-sm",children:[e.jsx(gt,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}),e.jsx("span",{className:"hidden xs:inline",children:"Sent "}),"(",m.length,")"]})]}),e.jsx(Tt,{value:"all",className:"flex-1 overflow-hidden",children:e.jsx(Ne,{className:"h-full",children:e.jsx("div",{className:"space-y-3 pr-4",children:c.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-[60vh] text-center p-4",children:[e.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 rounded-full bg-muted/50 flex items-center justify-center mb-6",children:e.jsx(Qe,{className:"h-10 w-10 sm:h-12 sm:w-12 text-muted-foreground/50"})}),e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold mb-2",children:"No conversations yet"}),e.jsx("p",{className:"text-muted-foreground max-w-sm text-sm sm:text-base",children:"Start discovering people and begin chatting!"})]}):c.map(u=>e.jsx(l,{conversation:u},u.id))})})}),e.jsx(Tt,{value:"unread",className:"flex-1 overflow-hidden",children:e.jsx(Ne,{className:"h-full",children:e.jsx("div",{className:"space-y-3 pr-4",children:d.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-[60vh] text-center p-4",children:[e.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 rounded-full bg-muted/50 flex items-center justify-center mb-6",children:e.jsx(vo,{className:"h-10 w-10 sm:h-12 sm:w-12 text-muted-foreground/50"})}),e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold mb-2",children:"All caught up!"}),e.jsx("p",{className:"text-muted-foreground max-w-sm text-sm sm:text-base",children:"No unread messages"})]}):d.map(u=>e.jsx(l,{conversation:u},u.id))})})}),e.jsx(Tt,{value:"sent",className:"flex-1 overflow-hidden",children:e.jsx(Ne,{className:"h-full",children:e.jsx("div",{className:"space-y-3 pr-4",children:m.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-[60vh] text-center p-4",children:[e.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 rounded-full bg-muted/50 flex items-center justify-center mb-6",children:e.jsx(gt,{className:"h-10 w-10 sm:h-12 sm:w-12 text-muted-foreground/50"})}),e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold mb-2",children:"No sent messages"}),e.jsx("p",{className:"text-muted-foreground max-w-sm text-sm sm:text-base",children:"Start a conversation!"})]}):m.map(u=>e.jsx(l,{conversation:u},u.id))})})})]})})})})]})}async function cx(){const t=await fetch("/api/notifications",{credentials:"include"});if(!t.ok)throw new Error("Failed to fetch notifications");return t.json()}async function dx(t){if(!(await fetch(`/api/notifications/mark-read/${t}`,{method:"POST",credentials:"include"})).ok)throw new Error("Failed to mark notification as read")}async function ux(){if(!(await fetch("/api/notifications/mark-all-read",{method:"POST",credentials:"include"})).ok)throw new Error("Failed to mark all notifications as read")}async function mx(t){if(!(await fetch(`/api/notifications/${t}`,{method:"DELETE",credentials:"include"})).ok)throw new Error("Failed to delete notification")}function hx(t){const r=Math.floor((new Date().getTime()-t.getTime())/(1e3*60));if(r<1)return"Just now";if(r<60)return`${r}m ago`;const a=Math.floor(r/60);return a<24?`${a}h ago`:`${Math.floor(a/24)}d ago`}function fx(){const t=Ve(),[,s]=de(),{data:r=[],isLoading:a,error:n}=it({queryKey:["notifications"],queryFn:cx,refetchOnMount:"always",refetchOnWindowFocus:!0});i.useEffect(()=>{const p=()=>{t.refetchQueries({queryKey:["notifications"]}),t.refetchQueries({queryKey:["/api/notifications/unread-count"]})};return window.addEventListener("notificationReceived",p),window.addEventListener("notificationRead",p),()=>{window.removeEventListener("notificationReceived",p),window.removeEventListener("notificationRead",p)}},[t]);const o=me({mutationFn:dx,onSuccess:()=>{t.invalidateQueries({queryKey:["notifications"]}),t.invalidateQueries({queryKey:["/api/notifications/unread-count"]})}}),l=me({mutationFn:ux,onSuccess:()=>{t.invalidateQueries({queryKey:["notifications"]}),t.invalidateQueries({queryKey:["/api/notifications/unread-count"]})}}),c=me({mutationFn:mx,onSuccess:()=>{t.invalidateQueries({queryKey:["notifications"]}),t.invalidateQueries({queryKey:["/api/notifications/unread-count"]})}}),d=p=>{o.mutate(p)},m=()=>{l.mutate()},u=p=>{c.mutate(p)},f=()=>{r.forEach(p=>{c.mutate(p.id)})},h=p=>{switch(p.isRead||o.mutate(p.id),p.type){case"profile_view":s(`/profile/${p.fromUserId}`);break;case"message_received":s(`/chat/${p.fromUserId}`);break;case"profile_like":s(`/profile/${p.fromUserId}`);break}},b=r.filter(p=>!p.isRead).length,g=p=>{switch(p.type){case"profile_view":return`${p.fromUser.firstName} viewed your profile.`;case"message_received":return`${p.fromUser.firstName} sent you a message.`;case"profile_like":return`${p.fromUser.firstName} liked your profile.`;default:return"New notification"}},v=p=>{switch(p){case"profile_view":return"Profile View";case"message_received":return"New Message";case"profile_like":return"Profile Like";default:return"Notification"}};return a?e.jsxs("div",{className:"flex flex-col h-screen bg-background",children:[e.jsx("div",{className:"flex-none px-4 sm:px-6 lg:px-8 py-4 sm:py-6 border-b border-border/50 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/80",children:e.jsx("div",{className:"max-w-5xl mx-auto",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-xl bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center shadow-lg",children:e.jsx(st,{className:"h-5 w-5 sm:h-6 sm:w-6 text-white"})}),e.jsx("h1",{className:"text-xl sm:text-2xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Notifications"})]})})}),e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"text-center p-4",children:[e.jsx(st,{className:"h-16 w-16 text-muted-foreground/50 mb-4 mx-auto animate-pulse"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading notifications..."})]})})]}):n?e.jsxs("div",{className:"flex flex-col h-screen bg-background",children:[e.jsx("div",{className:"flex-none px-4 sm:px-6 lg:px-8 py-4 sm:py-6 border-b border-border/50 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/80",children:e.jsx("div",{className:"max-w-5xl mx-auto",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-xl bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center shadow-lg",children:e.jsx(st,{className:"h-5 w-5 sm:h-6 sm:w-6 text-white"})}),e.jsx("h1",{className:"text-xl sm:text-2xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Notifications"})]})})}),e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"text-center p-4",children:[e.jsx(st,{className:"h-16 w-16 text-muted-foreground/50 mb-4 mx-auto"}),e.jsx("p",{className:"text-red-500 font-medium",children:"Failed to load notifications"}),e.jsx("p",{className:"text-muted-foreground text-sm mt-1",children:"Please try refreshing the page"})]})})]}):e.jsxs("div",{className:"flex flex-col h-screen bg-background",children:[e.jsx("div",{className:"flex-none px-4 sm:px-6 lg:px-8 py-4 sm:py-6 border-b border-border/50 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/80",children:e.jsx("div",{className:"max-w-5xl mx-auto",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-xl bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center shadow-lg",children:e.jsx(st,{className:"h-5 w-5 sm:h-6 sm:w-6 text-white"})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Notifications"}),b>0&&e.jsx("div",{className:"bg-primary text-primary-foreground text-xs font-bold px-2.5 py-1 rounded-full shadow-sm",children:b})]})]}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[b>0&&e.jsxs(L,{variant:"outline",size:"sm",onClick:m,className:"rounded-full hover:bg-primary/10 hover:border-primary transition-all duration-200",children:[e.jsx(vo,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Mark all read"}),e.jsx("span",{className:"sm:hidden",children:"Mark all"})]}),r.length>0&&e.jsxs(L,{variant:"outline",size:"sm",onClick:f,className:"rounded-full hover:bg-destructive/10 hover:border-destructive hover:text-destructive transition-all duration-200",children:[e.jsx(Je,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Clear all"}),e.jsx("span",{className:"sm:hidden",children:"Clear"})]})]})]})})}),e.jsx(Ne,{className:"flex-1 pb-20 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"max-w-5xl mx-auto py-4 sm:py-6",children:r.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-[60vh] text-center p-4",children:[e.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 rounded-full bg-muted/50 flex items-center justify-center mb-6",children:e.jsx(st,{className:"h-10 w-10 sm:h-12 sm:w-12 text-muted-foreground/50"})}),e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold mb-2",children:"No notifications"}),e.jsx("p",{className:"text-muted-foreground max-w-sm text-sm sm:text-base",children:"You're all caught up! New notifications will appear here."})]}):e.jsx("div",{className:"space-y-3",children:r.map(p=>e.jsxs("div",{className:`group relative rounded-xl border transition-all duration-200 hover:shadow-md cursor-pointer ${p.isRead?"bg-card/50 border-border/50 hover:bg-card/80":"bg-primary/5 border-primary/20"}`,onClick:()=>h(p),children:[!p.isRead&&e.jsx("div",{className:"absolute top-3 right-3 w-2.5 h-2.5 bg-primary rounded-full shadow-sm"}),e.jsx("div",{className:"p-3 sm:p-4",children:e.jsxs("div",{className:"flex gap-3 items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsxs(fe,{className:"h-11 w-11 sm:h-12 sm:w-12 ring-2 ring-background shadow-sm",children:[e.jsx(pe,{src:p.fromUser.profilePhoto||""}),e.jsxs(xe,{className:"bg-primary/10 text-primary font-semibold text-sm",children:[p.fromUser.firstName[0],p.fromUser.lastName[0]]})]})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-sm sm:text-base text-foreground line-clamp-1 pr-16 sm:pr-20 mb-1",children:v(p.type)}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground line-clamp-2",children:g(p)})]}),e.jsx("div",{className:"absolute top-9 sm:top-10 right-3",children:e.jsx("span",{className:"text-xs text-muted-foreground/70 font-medium whitespace-nowrap",children:hx(new Date(p.createdAt))})}),e.jsxs("div",{className:"absolute top-3 right-3 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity duration-200",onClick:x=>x.stopPropagation(),children:[!p.isRead&&e.jsx(L,{variant:"ghost",size:"icon",onClick:x=>{x.stopPropagation(),d(p.id)},className:"h-7 w-7 sm:h-8 sm:w-8 rounded-lg hover:bg-primary/10 hover:text-primary transition-all duration-200",title:"Mark as read",children:e.jsx(Ps,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})}),e.jsx(L,{variant:"ghost",size:"icon",onClick:x=>{x.stopPropagation(),u(p.id)},className:"h-7 w-7 sm:h-8 sm:w-8 rounded-lg hover:bg-destructive/10 hover:text-destructive transition-all duration-200",title:"Delete notification",children:e.jsx(Je,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})})]})]})})]},p.id))})})})]})}const cn=_r,px=vn,xx=Lr,Zl=i.forwardRef(({className:t,...s},r)=>e.jsx(ns,{className:T("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s,ref:r}));Zl.displayName=ns.displayName;const gx=_t("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),Ar=i.forwardRef(({side:t="right",className:s,children:r,...a},n)=>e.jsxs(xx,{children:[e.jsx(Zl,{}),e.jsxs(os,{ref:n,className:T(gx({side:t}),s),...a,children:[r,e.jsxs(gn,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[e.jsx(ze,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Ar.displayName=os.displayName;const Ir=({className:t,...s})=>e.jsx("div",{className:T("flex flex-col space-y-2 text-center sm:text-left",t),...s});Ir.displayName="SheetHeader";const Dr=i.forwardRef(({className:t,...s},r)=>e.jsx(Is,{ref:r,className:T("text-lg font-semibold text-foreground",t),...s}));Dr.displayName=Is.displayName;const vx=i.forwardRef(({className:t,...s},r)=>e.jsx(Ds,{ref:r,className:T("text-sm text-muted-foreground",t),...s}));vx.displayName=Ds.displayName;function ur({currentPhotos:t=[],children:s,onPhotosUpdated:r}){const[a,n]=i.useState(!1),[o,l]=i.useState([]),[c,d]=i.useState([]),m=Ve(),u=5-t.length,f=me({mutationFn:async j=>{const E=new FormData;j.forEach(I=>{E.append("photos",I)});const S=await fetch("/api/upload/photos",{method:"POST",body:E,credentials:"include"});if(!S.ok){const I=await S.json();throw new Error(I.message||"Upload failed")}return S.json()},onSuccess:j=>{m.setQueryData(["/api/user"],j.user),r?.(j.photos),ie({title:"Photos uploaded",description:`Successfully uploaded ${j.newPhotos.length} photo(s)`}),n(!1),b()},onError:j=>{ie({title:"Upload failed",description:j.message,variant:"destructive"})}}),h=me({mutationFn:async j=>{const E=await fetch("/api/photos",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({photoUrl:j}),credentials:"include"});if(!E.ok){const S=await E.json();throw new Error(S.message||"Delete failed")}return E.json()},onSuccess:j=>{m.setQueryData(["/api/user"],j.user),r?.(j.photos),ie({title:"Photo deleted",description:"Photo has been removed from your gallery"})},onError:j=>{ie({title:"Delete failed",description:j.message,variant:"destructive"})}}),b=()=>{l([]),d([])},g=i.useCallback(j=>{if(!j)return;const E=Array.from(j),S=[],I=["image/jpeg","image/png","image/gif","image/webp"];for(const D of E){if(!I.includes(D.type)){ie({title:"Invalid file type",description:`${D.name} is not a valid image format`,variant:"destructive"});continue}if(D.size>5*1024*1024){ie({title:"File too large",description:`${D.name} is larger than 5MB`,variant:"destructive"});continue}S.push(D)}if(t.length+S.length>5){ie({title:"Too many photos",description:`Maximum 5 photos allowed. You have ${t.length} photos.`,variant:"destructive"});return}l(S);const U=S.map(D=>URL.createObjectURL(D));d(U)},[t.length]),v=i.useCallback(j=>{j.preventDefault(),g(j.dataTransfer.files)},[g]),p=i.useCallback(j=>{j.preventDefault()},[]),x=j=>{const E=o.filter((I,U)=>U!==j),S=c.filter((I,U)=>U!==j);URL.revokeObjectURL(c[j]),l(E),d(S)},y=j=>{h.mutate(j)},P=()=>{o.length!==0&&f.mutate(o)};return e.jsxs(cs,{open:a,onOpenChange:n,children:[e.jsx(Rh,{asChild:!0,children:s}),e.jsxs($t,{className:"sm:max-w-[600px] max-h-[85vh] md:max-h-[90vh] flex flex-col p-0 gap-0",children:[e.jsx(zt,{className:"px-4 py-4 md:px-6 md:py-5 border-b sticky top-0 bg-background z-10 rounded-t-2xl md:rounded-t-3xl",children:e.jsx(Ut,{children:"Manage Photos"})}),e.jsxs("div",{className:"overflow-y-auto px-4 py-5 md:px-6 md:py-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-secondary/30 rounded-xl border border-border/50",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold",children:[t.length," of 5 photos"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:u>0?`${u} slot${u>1?"s":""} available`:"Photo limit reached"})]}),t.length>0&&e.jsx("div",{className:"text-xs text-muted-foreground",children:"Hover to delete"})]}),t.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-sm font-semibold flex items-center gap-2",children:e.jsx("span",{children:"Your Gallery"})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:[t.map((j,E)=>e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"aspect-square rounded-xl overflow-hidden bg-secondary/20 shadow-md hover:shadow-xl transition-all duration-300",children:e.jsx("img",{src:j,alt:`Gallery photo ${E+1}`,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"})}),e.jsx(L,{variant:"destructive",size:"icon",className:"absolute top-2 right-2 h-8 w-8 rounded-full opacity-0 group-hover:opacity-100 transition-all duration-300 shadow-lg hover:scale-110",onClick:()=>y(j),disabled:h.isPending,children:e.jsx(Je,{className:"h-4 w-4"})})]},E)),u>0&&e.jsxs("label",{htmlFor:"add-photo-upload",className:"aspect-square rounded-xl border-2 border-dashed border-muted-foreground/30 hover:border-primary/50 bg-secondary/10 hover:bg-primary/5 flex flex-col items-center justify-center gap-2 cursor-pointer transition-all duration-300 hover:scale-105 group",children:[e.jsx("div",{className:"bg-primary/10 p-3 rounded-full group-hover:bg-primary/20 transition-colors",children:e.jsx(Ru,{className:"h-6 w-6 text-primary"})}),e.jsx("p",{className:"text-xs font-medium text-center px-2",children:"Add Photo"}),e.jsx("input",{id:"add-photo-upload",type:"file",multiple:!0,accept:"image/*",className:"hidden",onChange:j=>g(j.target.files)})]})]})]}),t.length===0&&e.jsx("div",{className:T("border-2 border-dashed border-muted-foreground/25 rounded-2xl p-8 text-center transition-all duration-300","hover:border-primary/50 hover:bg-primary/5"),onDrop:v,onDragOver:p,children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"bg-primary/10 p-4 rounded-full",children:e.jsx(Mu,{className:"h-10 w-10 text-primary"})}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"photo-upload",className:"cursor-pointer text-primary hover:underline font-medium",children:"Click to upload"}),e.jsx("span",{className:"text-muted-foreground",children:" or drag and drop"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"PNG, JPG, GIF, WebP up to 5MB each (max 5 photos)"}),e.jsx("input",{id:"photo-upload",type:"file",multiple:!0,accept:"image/*",className:"hidden",onChange:j=>g(j.target.files)})]})}),o.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h4",{className:"text-sm font-semibold",children:["Ready to Upload (",o.length,")"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:c.map((j,E)=>e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"aspect-square rounded-xl overflow-hidden bg-secondary/20 shadow-md",children:e.jsx("img",{src:j,alt:`Preview ${E+1}`,className:"w-full h-full object-cover"})}),e.jsx(L,{variant:"destructive",size:"icon",className:"absolute top-2 right-2 h-8 w-8 rounded-full opacity-0 group-hover:opacity-100 transition-opacity shadow-lg",onClick:()=>x(E),children:e.jsx(ze,{className:"h-4 w-4"})})]},E))})]}),e.jsxs("div",{className:"flex flex-col-reverse sm:flex-row gap-3 pt-4",children:[e.jsx(L,{variant:"outline",className:"flex-1 rounded-full transition-all hover:scale-105",onClick:()=>{b(),n(!1)},children:o.length>0?"Cancel":"Close"}),o.length>0&&e.jsx(L,{onClick:P,disabled:f.isPending,className:"flex-1 rounded-full bg-primary hover:bg-primary/90 transition-all hover:scale-105 shadow-lg",children:f.isPending?"Uploading...":`Upload ${o.length} Photo${o.length>1?"s":""}`})]})]})]})]})}function bx({open:t,onOpenChange:s}){const{user:r}=be(),[a,n]=i.useState(""),o=me({mutationFn:async c=>{const d=await fetch("/api/support/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c),credentials:"include"});if(!d.ok){const m=await d.json();throw new Error(m.message||"Failed to send message")}return d.json()},onSuccess:()=>{ie({title:"Message sent successfully",description:"We've received your feedback and will get back to you soon."}),n(""),s(!1)},onError:c=>{ie({title:"Failed to send message",description:c.message,variant:"destructive"})}}),l=c=>{if(c.preventDefault(),!a.trim()){ie({title:"Message required",description:"Please enter your message before sending.",variant:"destructive"});return}if(!r){ie({title:"Authentication required",description:"You must be logged in to send feedback.",variant:"destructive"});return}o.mutate({firstName:r.firstName,lastName:r.lastName,email:r.email,message:a.trim()})};return r?e.jsx(cs,{open:t,onOpenChange:s,children:e.jsxs($t,{className:"sm:max-w-[500px]",children:[e.jsxs(zt,{children:[e.jsxs(Ut,{className:"flex items-center gap-2",children:[e.jsx("div",{className:"bg-primary/10 p-2 rounded-lg",children:e.jsx(sa,{className:"h-5 w-5 text-primary"})}),"Support & Feedback"]}),e.jsx(Us,{children:"We'd love to hear from you! Send us your feedback, questions, or report any issues."})]}),e.jsxs("form",{onSubmit:l,className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"firstName",className:"text-sm font-medium",children:"First Name"}),e.jsx(re,{id:"firstName",value:r.firstName,disabled:!0,className:"bg-secondary/30 cursor-not-allowed"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"lastName",className:"text-sm font-medium",children:"Last Name"}),e.jsx(re,{id:"lastName",value:r.lastName,disabled:!0,className:"bg-secondary/30 cursor-not-allowed"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"email",className:"text-sm font-medium",children:"Email"}),e.jsx(re,{id:"email",type:"email",value:r.email,disabled:!0,className:"bg-secondary/30 cursor-not-allowed"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"message",className:"text-sm font-medium",children:"Message *"}),e.jsx("textarea",{id:"message",value:a,onChange:c=>n(c.target.value),placeholder:"Tell us what's on your mind...",className:"flex min-h-[140px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:border-primary disabled:cursor-not-allowed disabled:opacity-50 resize-none",disabled:o.isPending,maxLength:2e3}),e.jsxs("p",{className:"text-xs text-muted-foreground text-right",children:[a.length,"/2000 characters"]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(L,{type:"button",variant:"outline",onClick:()=>s(!1),disabled:o.isPending,children:"Cancel"}),e.jsx(L,{type:"submit",disabled:o.isPending||!a.trim(),className:"gap-2",children:o.isPending?e.jsxs(e.Fragment,{children:[e.jsx(De,{className:"h-4 w-4 animate-spin"}),"Sending..."]}):e.jsxs(e.Fragment,{children:[e.jsx(gt,{className:"h-4 w-4"}),"Send Message"]})})]})]})]})}):null}function yx(){const{user:t,logoutMutation:s}=be(),[,r]=de(),[a,n]=i.useState(!1),[o,l]=i.useState(!1),[c,d]=i.useState(!1),[m,u]=i.useState(null),[f,h]=i.useState(0),[b,g]=i.useState([]),[v,p]=i.useState(!1),x=Ve(),y=me({mutationFn:async A=>{const N=new FormData;N.append("profilePicture",A);const C=await fetch("/api/upload/profile",{method:"POST",body:N,credentials:"include"});if(!C.ok){const W=await C.json();throw new Error(W.message||"Upload failed")}return C.json()},onSuccess:A=>{x.setQueryData(["/api/user"],A.user),ie({title:"Profile photo updated",description:"Your profile picture has been updated successfully"})},onError:A=>{ie({title:"Upload failed",description:A.message,variant:"destructive"})}}),[,P]=de(),j=async()=>{try{const A=await fetch("/api/likes/count");if(A.ok){const N=await A.json();h(N.count)}}catch(A){console.error("Error fetching likes count:",A)}},E=async()=>{p(!0);try{const A=await fetch("/api/likes/received");if(A.ok){const N=await A.json();g(N)}}catch(A){console.error("Error fetching likes list:",A)}finally{p(!1)}},S=()=>{d(!0),E()};if(!t)return null;const I=()=>{s.mutate()},U=A=>{const N=A.target.files?.[0];if(N){if(!["image/jpeg","image/png","image/gif","image/webp"].includes(N.type)){ie({title:"Invalid file type",description:"Please select a valid image file (JPEG, PNG, GIF, or WebP)",variant:"destructive"});return}if(N.size>5*1024*1024){ie({title:"File too large",description:"Please select an image smaller than 5MB",variant:"destructive"});return}y.mutate(N)}A.target.value=""},D=t.photos&&Array.isArray(t.photos)?t.photos:[];return i.useEffect(()=>{j()},[]),e.jsxs("div",{className:"flex flex-col h-screen bg-background",children:[e.jsx("div",{className:"flex-none z-40 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/80 border-b",children:e.jsxs("div",{className:"container max-w-5xl mx-auto flex items-center justify-between p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-xl bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center shadow-lg",children:e.jsx(jt,{className:"h-5 w-5 sm:h-6 sm:w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Profile"}),e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground",children:"Manage your account"})]})]}),e.jsxs(cn,{children:[e.jsx(px,{asChild:!0,children:e.jsx(L,{variant:"outline",size:"icon",className:"rounded-full",children:e.jsx(wo,{className:"h-4 w-4"})})}),e.jsxs(Ar,{side:"right",className:"w-80",children:[e.jsx(Ir,{children:e.jsx(Dr,{children:"Settings"})}),e.jsxs("div",{className:"space-y-3 mt-6",children:[e.jsxs(L,{variant:"outline",className:"w-full justify-start rounded-lg transition-all hover:bg-primary/10",onClick:()=>n(!0),children:[e.jsx(sr,{className:"h-4 w-4 mr-2"}),"Edit Profile"]}),e.jsxs(L,{variant:"outline",className:"w-full justify-start rounded-lg transition-all hover:bg-blue-500/10",onClick:()=>l(!0),children:[e.jsx(sa,{className:"h-4 w-4 mr-2"}),"Support & Feedback"]}),e.jsxs(L,{variant:"outline",className:"w-full justify-start rounded-lg transition-all hover:bg-red-500/10 text-red-600 hover:text-red-700",onClick:()=>r("/delete-account"),children:[e.jsx(Je,{className:"h-4 w-4 mr-2"}),"Delete Account"]}),e.jsxs(L,{variant:"destructive",className:"w-full justify-start rounded-lg",onClick:I,children:[e.jsx(yo,{className:"h-4 w-4 mr-2"}),"Sign Out"]})]})]})]})]})}),e.jsx(Ne,{className:"flex-1 pb-20 md:pb-6",children:e.jsxs("div",{className:"container max-w-5xl mx-auto p-4 space-y-6",children:[e.jsx(ae,{className:"overflow-hidden rounded-2xl shadow-lg border-0 bg-gradient-to-br from-card to-card/80",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"h-32 md:h-40 bg-gradient-to-br from-primary/30 via-primary/20 to-primary/10"}),e.jsxs("div",{className:"relative px-4 md:px-8 pb-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-end md:justify-between gap-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-end gap-4",children:[e.jsxs("div",{className:"relative -mt-16 md:-mt-20",children:[e.jsxs("div",{className:"relative w-28 h-28 md:w-36 md:h-36 border-4 border-background shadow-2xl rounded-full overflow-hidden group cursor-pointer bg-secondary/20",onClick:()=>document.getElementById("profile-photo-upload")?.click(),children:[e.jsxs(fe,{className:"w-full h-full",children:[e.jsx(pe,{src:t.profilePhoto||"",alt:"Profile Picture",className:"object-cover"}),e.jsx(xe,{className:"text-2xl md:text-3xl font-semibold",children:`${t.firstName[0]}${t.lastName[0]}`})]}),e.jsx("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all duration-300",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ye,{className:"h-6 w-6 md:h-8 md:w-8 text-white mx-auto mb-1"}),e.jsx("p",{className:"text-xs text-white font-medium",children:"Change"})]})})]}),t.isOnline&&e.jsx("div",{className:"absolute bottom-2 right-2 bg-green-500 w-5 h-5 md:w-6 md:h-6 rounded-full border-4 border-background shadow-lg"}),e.jsx(re,{id:"profile-photo-upload",type:"file",accept:"image/*",onChange:U,className:"hidden"})]}),e.jsxs("div",{className:"space-y-2 mb-2",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl md:text-3xl font-bold tracking-tight",children:[t.firstName," ",t.lastName]}),e.jsxs("p",{className:"text-sm md:text-base text-muted-foreground",children:["@",t.username]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs md:text-sm",children:[e.jsx(Zt,{variant:"secondary",className:"rounded-full px-3 py-1 capitalize",children:t.gender}),e.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[e.jsx(ks,{className:"h-3 w-3 md:h-4 md:w-4 text-blue-500"}),e.jsxs("span",{children:[t.age," years old"]})]}),t.location&&e.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[e.jsx(Ge,{className:"h-3 w-3 md:h-4 md:w-4 text-green-500"}),e.jsx("span",{children:t.location})]})]})]})]}),e.jsx("div",{className:"hidden md:block",children:e.jsxs(L,{variant:"outline",className:"rounded-full px-6",onClick:()=>n(!0),children:[e.jsx(sr,{className:"h-4 w-4 mr-2"}),"Edit Profile"]})})]}),t.bio&&e.jsx("div",{className:"mt-4 bg-secondary/30 backdrop-blur-sm rounded-xl p-4 border border-border/50",children:e.jsx("p",{className:"text-sm md:text-base leading-relaxed",children:t.bio})})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 md:hidden",children:[e.jsx(L,{variant:"outline",className:"h-auto py-4 rounded-xl hover:shadow-md transition-all hover:scale-105",onClick:()=>n(!0),children:e.jsxs("div",{className:"text-center",children:[e.jsx(sr,{className:"h-6 w-6 mx-auto mb-2 text-primary"}),e.jsx("p",{className:"font-semibold text-sm",children:"Edit Profile"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Update info"})]})}),e.jsx(ur,{currentPhotos:D,onPhotosUpdated:A=>{console.log("Photos updated:",A)},children:e.jsx(L,{variant:"outline",className:"h-auto py-4 rounded-xl hover:shadow-md transition-all hover:scale-105 w-full",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ye,{className:"h-6 w-6 mx-auto mb-2 text-primary"}),e.jsx("p",{className:"font-semibold text-sm",children:"Photos"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Manage (",D.length,"/5)"]})]})})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 md:gap-4",children:[e.jsx(ae,{className:"rounded-xl shadow-md border-0 bg-gradient-to-br from-red-500/10 to-red-500/5 hover:shadow-lg transition-all duration-300 hover:scale-105 cursor-pointer",onClick:S,children:e.jsxs(he,{className:"p-4 md:p-6 text-center",children:[e.jsx("div",{className:"bg-red-500/10 w-10 h-10 md:w-12 md:h-12 rounded-full flex items-center justify-center mx-auto mb-2 md:mb-3",children:e.jsx(ge,{className:"h-5 w-5 md:h-6 md:w-6 text-red-500"})}),e.jsx("div",{className:"text-xl md:text-2xl font-bold",children:f}),e.jsx("div",{className:"text-xs md:text-sm text-muted-foreground mt-1",children:"Likes"})]})}),e.jsx(ae,{className:"rounded-xl shadow-md border-0 bg-gradient-to-br from-blue-500/10 to-blue-500/5 hover:shadow-lg transition-all duration-300 hover:scale-105",children:e.jsxs(he,{className:"p-4 md:p-6 text-center",children:[e.jsx("div",{className:"bg-blue-500/10 w-10 h-10 md:w-12 md:h-12 rounded-full flex items-center justify-center mx-auto mb-2 md:mb-3",children:e.jsx(Qe,{className:"h-5 w-5 md:h-6 md:w-6 text-blue-500"})}),e.jsx("div",{className:"text-xl md:text-2xl font-bold",children:"0"}),e.jsx("div",{className:"text-xs md:text-sm text-muted-foreground mt-1",children:"Chats"})]})}),e.jsx(ae,{className:"rounded-xl shadow-md border-0 bg-gradient-to-br from-green-500/10 to-green-500/5 hover:shadow-lg transition-all duration-300 hover:scale-105",children:e.jsxs(he,{className:"p-4 md:p-6 text-center",children:[e.jsx("div",{className:"bg-green-500/10 w-10 h-10 md:w-12 md:h-12 rounded-full flex items-center justify-center mx-auto mb-2 md:mb-3",children:e.jsx(Co,{className:"h-5 w-5 md:h-6 md:w-6 text-green-500"})}),e.jsx("div",{className:"text-xl md:text-2xl font-bold",children:"0"}),e.jsx("div",{className:"text-xs md:text-sm text-muted-foreground mt-1",children:"Matches"})]})})]}),e.jsx(ae,{className:"rounded-2xl shadow-lg border-0",children:e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"bg-primary/10 p-2 rounded-lg",children:e.jsx(Ye,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-base md:text-lg",children:"Photo Gallery"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[D.length," of 5 photos"]})]})]}),e.jsx(ur,{currentPhotos:D,onPhotosUpdated:A=>{console.log("Photos updated:",A)},children:e.jsxs(L,{variant:"outline",size:"sm",className:"rounded-full hidden md:flex",children:[e.jsx(Ye,{className:"h-4 w-4 mr-2"}),"Manage"]})})]}),D.length>0?e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2 md:gap-3",children:D.map((A,N)=>e.jsxs("div",{className:"aspect-square rounded-xl overflow-hidden bg-secondary/20 group relative shadow-md hover:shadow-xl transition-all duration-300",children:[e.jsx("img",{src:A,alt:`Gallery photo ${N+1}`,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500 cursor-pointer",onClick:()=>u(N)}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none"})]},N))}):e.jsx(ur,{currentPhotos:D,onPhotosUpdated:A=>{console.log("Photos updated:",A)},children:e.jsx("div",{className:"border-2 border-dashed border-muted-foreground/30 rounded-2xl p-8 md:p-12 text-center hover:border-primary/50 hover:bg-primary/5 transition-all duration-300 cursor-pointer group",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"bg-primary/10 p-4 rounded-full group-hover:bg-primary/20 transition-colors",children:e.jsx(Ye,{className:"h-8 w-8 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold mb-1",children:"No photos yet"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Click to add your first photo"})]})]})})})]})}),e.jsx(ae,{className:"rounded-2xl shadow-lg border-0",children:e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx("div",{className:"bg-primary/10 p-2 rounded-lg",children:e.jsx(jt,{className:"h-5 w-5 text-primary"})}),e.jsx("h3",{className:"font-semibold text-base md:text-lg",children:"Account Information"})]}),e.jsxs("div",{className:"grid gap-3 md:gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-xl bg-secondary/30 hover:bg-secondary/50 transition-colors",children:[e.jsx("div",{className:"bg-primary/10 p-3 rounded-lg",children:e.jsx(we,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground font-medium",children:"Email"}),e.jsx("p",{className:"text-sm md:text-base font-semibold truncate",children:t.email})]})]}),e.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-xl bg-secondary/30 hover:bg-secondary/50 transition-colors",children:[e.jsx("div",{className:"bg-blue-500/10 p-3 rounded-lg",children:e.jsx(uu,{className:"h-5 w-5 text-blue-500"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground font-medium",children:"Username"}),e.jsxs("p",{className:"text-sm md:text-base font-semibold",children:["@",t.username]})]})]}),e.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-xl bg-secondary/30 hover:bg-secondary/50 transition-colors",children:[e.jsx("div",{className:"bg-green-500/10 p-3 rounded-lg",children:e.jsx(yt,{className:"h-5 w-5 text-green-500"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground font-medium",children:"Member since"}),e.jsx("p",{className:"text-sm md:text-base font-semibold",children:t.createdAt?new Date(t.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A"})]})]})]})]})})]})}),e.jsx(Ri,{isOpen:a,onClose:()=>n(!1),user:t}),e.jsx(bx,{open:o,onOpenChange:l}),e.jsx(cn,{open:c,onOpenChange:d,children:e.jsxs(Ar,{side:"right",className:"w-full sm:w-96",children:[e.jsx(Ir,{children:e.jsxs(Dr,{className:"flex items-center gap-2",children:[e.jsx(ge,{className:"h-5 w-5 text-red-500"}),"People Who Liked You (",f,")"]})}),e.jsx("div",{className:"mt-6",children:v?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(De,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):b.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx("div",{className:"bg-red-500/10 p-4 rounded-full mb-4",children:e.jsx(ge,{className:"h-8 w-8 text-red-500"})}),e.jsx("p",{className:"text-lg font-semibold mb-1",children:"No likes yet"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"When someone likes your profile, they'll appear here"})]}):e.jsx("div",{className:"space-y-3",children:b.map(A=>e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-secondary/30 hover:bg-secondary/50 transition-all duration-200 cursor-pointer",onClick:()=>{d(!1),P(`/user/${A.likerUser.id}`)},children:[e.jsxs(fe,{className:"h-12 w-12 border-2 border-background",children:[e.jsx(pe,{src:A.likerUser.profilePhoto||"",alt:`${A.likerUser.firstName} ${A.likerUser.lastName}`}),e.jsxs(xe,{className:"text-sm font-semibold",children:[A.likerUser.firstName[0],A.likerUser.lastName[0]]})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("p",{className:"font-semibold truncate",children:[A.likerUser.firstName," ",A.likerUser.lastName]}),e.jsxs("p",{className:"text-sm text-muted-foreground truncate",children:["@",A.likerUser.username,"  ",A.likerUser.age," years old"]})]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(A.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]},A.id))})})]})})]})}function jx(){const{userId:t}=Vr(),[,s]=de(),{user:r}=be(),[a,n]=i.useState(null),[o,l]=i.useState(!0),[c,d]=i.useState(null),[m,u]=i.useState(!1),[f,h]=i.useState(!1),b=async()=>{if(t)try{const y=await fetch(`/api/users/${t}`);if(y.ok){const P=await y.json();n(P)}else console.error("Failed to fetch user profile")}catch(y){console.error("Error fetching user profile:",y)}finally{l(!1)}},g=async()=>{if(t)try{const y=await fetch(`/api/likes/check/${t}`);if(y.ok){const P=await y.json();u(P.isLiked)}}catch(y){console.error("Error checking like status:",y)}},v=async()=>{if(!(!t||f)){h(!0);try{m?(await fetch(`/api/likes/${t}`,{method:"DELETE"})).ok&&u(!1):(await fetch(`/api/likes/${t}`,{method:"POST"})).ok&&u(!0)}catch(y){console.error("Error toggling like:",y)}finally{h(!1)}}};if(i.useEffect(()=>{b(),g()},[t]),i.useEffect(()=>{const y=P=>{const{userId:j}=P.detail||{};j===t&&b()};return window.addEventListener("onlineStatusChanged",y),()=>window.removeEventListener("onlineStatusChanged",y)},[t]),!r)return null;if(o)return e.jsx("div",{className:"flex items-center justify-center min-h-screen pb-16",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading profile..."})]})});if(!a)return e.jsx("div",{className:"flex items-center justify-center min-h-screen pb-16",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Profile not found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"This user's profile could not be loaded."}),e.jsxs(L,{onClick:()=>s("/discover"),children:[e.jsx(Le,{className:"h-4 w-4 mr-2"}),"Back to Discover"]})]})});const p=a.photos&&Array.isArray(a.photos)?a.photos:[],x=a.profilePhoto?[a.profilePhoto,...p].filter(Boolean):p;return e.jsxs("div",{className:"flex flex-col h-screen bg-background",children:[e.jsx("div",{className:"flex-none z-40 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/80 border-b",children:e.jsxs("div",{className:"container max-w-5xl mx-auto flex items-center gap-4 p-4",children:[e.jsx(L,{variant:"ghost",size:"icon",className:"rounded-full",onClick:()=>window.history.back(),children:e.jsx(Le,{className:"h-5 w-5"})}),e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-xl bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center shadow-lg",children:e.jsx(Ga,{className:"h-5 w-5 sm:h-6 sm:w-6 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h1",{className:"text-xl md:text-2xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent",children:[a.firstName," ",a.lastName]}),e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground",children:a.isOnline?"Online now":"Last seen recently"})]})]})}),e.jsx(Ne,{className:"flex-1 pb-20 md:pb-6",children:e.jsxs("div",{className:"container max-w-5xl mx-auto p-4 space-y-6",children:[e.jsx(ae,{className:"overflow-hidden rounded-2xl shadow-lg border-0 bg-gradient-to-br from-card to-card/80",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"h-32 md:h-40 bg-gradient-to-br from-primary/30 via-primary/20 to-primary/10"}),e.jsxs("div",{className:"relative px-4 md:px-8 pb-6",children:[e.jsx("div",{className:"flex flex-col md:flex-row md:items-end md:justify-between gap-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-end gap-4",children:[e.jsxs("div",{className:"relative -mt-16 md:-mt-20",children:[e.jsx("div",{className:"relative w-28 h-28 md:w-36 md:h-36 border-4 border-background shadow-2xl rounded-full overflow-hidden bg-secondary/20",children:e.jsxs(fe,{className:"w-full h-full",children:[e.jsx(pe,{src:a.profilePhoto||"",alt:"Profile Picture",className:"object-cover"}),e.jsx(xe,{className:"text-2xl md:text-3xl font-semibold",children:`${a.firstName[0]}${a.lastName[0]}`})]})}),a.isOnline&&e.jsx("div",{className:"absolute bottom-2 right-2 bg-green-500 w-5 h-5 md:w-6 md:h-6 rounded-full border-4 border-background shadow-lg animate-pulse"})]}),e.jsxs("div",{className:"space-y-2 mb-2",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl md:text-3xl font-bold tracking-tight",children:[a.firstName," ",a.lastName]}),e.jsxs("p",{className:"text-sm md:text-base text-muted-foreground",children:["@",a.username]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs md:text-sm",children:[e.jsx(Zt,{variant:"secondary",className:"rounded-full px-3 py-1 capitalize",children:a.gender}),e.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[e.jsx(ks,{className:"h-3 w-3 md:h-4 md:w-4"}),e.jsxs("span",{children:[a.age," years old"]})]}),a.location&&e.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[e.jsx(Ge,{className:"h-3 w-3 md:h-4 md:w-4"}),e.jsx("span",{children:a.location})]})]})]})]})}),a.bio&&e.jsx("div",{className:"mt-4 bg-secondary/30 backdrop-blur-sm rounded-xl p-4 border border-border/50",children:e.jsx("p",{className:"text-sm md:text-base leading-relaxed",children:a.bio})})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 md:gap-4",children:[e.jsxs(L,{className:"h-12 md:h-14 rounded-xl hover:shadow-lg transition-all duration-300 hover:scale-105",onClick:()=>s(`/chat/${a.id}`),children:[e.jsx(Qe,{className:"h-4 w-4 md:h-5 md:w-5 mr-2"}),e.jsx("span",{className:"font-semibold",children:"Start Chat"})]}),e.jsxs(L,{variant:m?"default":"outline",className:`h-12 md:h-14 rounded-xl hover:shadow-lg transition-all duration-300 hover:scale-105 ${m?"bg-red-500 hover:bg-red-600 text-white":"hover:bg-red-500/10 hover:text-red-500 hover:border-red-500/50"}`,onClick:v,disabled:f,children:[e.jsx(ge,{className:`h-4 w-4 md:h-5 md:w-5 mr-2 ${m?"fill-current":""}`}),e.jsx("span",{className:"font-semibold",children:m?"Liked Profile":"Like Profile"})]})]}),x.length>0&&e.jsx(ae,{className:"rounded-2xl shadow-lg border-0",children:e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx("div",{className:"bg-primary/10 p-2 rounded-lg",children:e.jsx(Ye,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-base md:text-lg",children:"Photos"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[x.length," ",x.length===1?"photo":"photos"]})]})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-2 md:gap-3",children:x.map((y,P)=>e.jsxs("div",{className:"aspect-square rounded-xl overflow-hidden bg-secondary/20 group relative shadow-md hover:shadow-2xl transition-all duration-300 cursor-pointer",onClick:()=>d(P),children:[e.jsx("img",{src:y,alt:`Photo ${P+1}`,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsx("div",{className:"absolute bottom-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:e.jsx("div",{className:"bg-white/20 backdrop-blur-sm rounded-full p-2",children:e.jsx(Ye,{className:"h-4 w-4 text-white"})})})]},P))})]})}),e.jsx(ae,{className:"rounded-2xl shadow-lg border-0",children:e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx("div",{className:"bg-primary/10 p-2 rounded-lg",children:e.jsx(Ga,{className:"h-5 w-5 text-primary"})}),e.jsxs("h3",{className:"font-semibold text-base md:text-lg",children:["About ",a.firstName]})]}),e.jsxs("div",{className:"grid gap-3 md:gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-xl bg-secondary/30 hover:bg-secondary/50 transition-colors",children:[e.jsx("div",{className:"bg-blue-500/10 p-3 rounded-lg",children:e.jsx(ks,{className:"h-5 w-5 text-blue-500"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground font-medium",children:"Age"}),e.jsxs("p",{className:"text-sm md:text-base font-semibold",children:[a.age," years old"]})]})]}),e.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-xl bg-secondary/30 hover:bg-secondary/50 transition-colors",children:[e.jsx("div",{className:"bg-purple-500/10 p-3 rounded-lg",children:e.jsx(as,{className:"h-5 w-5 text-purple-500"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground font-medium",children:"Gender"}),e.jsx("p",{className:"text-sm md:text-base font-semibold capitalize",children:a.gender})]})]}),a.location&&e.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-xl bg-secondary/30 hover:bg-secondary/50 transition-colors",children:[e.jsx("div",{className:"bg-green-500/10 p-3 rounded-lg",children:e.jsx(Ge,{className:"h-5 w-5 text-green-500"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground font-medium",children:"Location"}),e.jsx("p",{className:"text-sm md:text-base font-semibold",children:a.location})]})]}),a.createdAt&&e.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-xl bg-secondary/30 hover:bg-secondary/50 transition-colors",children:[e.jsx("div",{className:"bg-orange-500/10 p-3 rounded-lg",children:e.jsx(yt,{className:"h-5 w-5 text-orange-500"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground font-medium",children:"Member since"}),e.jsx("p",{className:"text-sm md:text-base font-semibold",children:new Date(a.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]})]})]})]})})]})}),c!==null&&e.jsxs("div",{className:"fixed inset-0 z-50 bg-black/90 backdrop-blur-sm flex items-center justify-center p-4 animate-in fade-in duration-300",onClick:()=>d(null),children:[e.jsx("button",{className:"absolute top-4 right-4 text-white hover:text-gray-300 transition-colors",onClick:()=>d(null),children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsxs("div",{className:"relative max-w-4xl w-full max-h-[90vh] flex items-center justify-center",children:[e.jsx("img",{src:x[c],alt:`Photo ${c+1}`,className:"max-w-full max-h-[90vh] object-contain rounded-lg shadow-2xl",onClick:y=>y.stopPropagation()}),x.length>1&&e.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 flex gap-2",children:x.map((y,P)=>e.jsx("button",{className:`w-2 h-2 rounded-full transition-all ${P===c?"bg-white w-8":"bg-white/50"}`,onClick:j=>{j.stopPropagation(),d(P)}},P))})]})]})]})}function wx({imageUrl:t,isOpen:s,onClose:r}){const[a,n]=i.useState(1),[o,l]=i.useState(!1),[c,d]=i.useState({x:0,y:0}),[m,u]=i.useState({x:0,y:0});if(i.useEffect(()=>{s?(document.body.style.overflow="hidden",n(1),d({x:0,y:0})):document.body.style.overflow="unset";const x=y=>{y.key==="Escape"&&s&&r()};return document.addEventListener("keydown",x),()=>{document.removeEventListener("keydown",x),document.body.style.overflow="unset"}},[s,r]),!s)return null;const f=()=>{n(x=>Math.min(x+.5,3))},h=()=>{n(x=>Math.max(x-.5,.5))},b=()=>{const x=document.createElement("a");x.href=t,x.download=`image-${Date.now()}.jpg`,document.body.appendChild(x),x.click(),document.body.removeChild(x)},g=x=>{a>1&&(l(!0),u({x:x.clientX-c.x,y:x.clientY-c.y}))},v=x=>{o&&a>1&&d({x:x.clientX-m.x,y:x.clientY-m.y})},p=()=>{l(!1)};return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/95 backdrop-blur-sm animate-in fade-in-0 duration-300",onClick:r,children:[e.jsxs("div",{className:"absolute top-0 left-0 right-0 z-10 flex items-center justify-between p-4 bg-gradient-to-b from-black/80 to-transparent",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:x=>{x.stopPropagation(),h()},disabled:a<=.5,className:T("p-2 rounded-lg bg-white/10 hover:bg-white/20 text-white transition-all duration-200",a<=.5&&"opacity-50 cursor-not-allowed"),"aria-label":"Zoom out",children:e.jsx(Ou,{className:"h-5 w-5"})}),e.jsxs("span",{className:"text-white text-sm font-medium min-w-[60px] text-center",children:[Math.round(a*100),"%"]}),e.jsx("button",{onClick:x=>{x.stopPropagation(),f()},disabled:a>=3,className:T("p-2 rounded-lg bg-white/10 hover:bg-white/20 text-white transition-all duration-200",a>=3&&"opacity-50 cursor-not-allowed"),"aria-label":"Zoom in",children:e.jsx(Du,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:x=>{x.stopPropagation(),b()},className:"p-2 rounded-lg bg-white/10 hover:bg-white/20 text-white transition-all duration-200","aria-label":"Download image",children:e.jsx(yu,{className:"h-5 w-5"})}),e.jsx("button",{onClick:x=>{x.stopPropagation(),r()},className:"p-2 rounded-lg bg-white/10 hover:bg-white/20 text-white transition-all duration-200","aria-label":"Close viewer",children:e.jsx(ze,{className:"h-5 w-5"})})]})]}),e.jsx("div",{className:"relative w-full h-full flex items-center justify-center px-4 pt-20 pb-20 overflow-hidden",onClick:x=>x.stopPropagation(),onMouseDown:g,onMouseMove:v,onMouseUp:p,onMouseLeave:p,style:{cursor:a>1?o?"grabbing":"grab":"default"},children:e.jsx("img",{src:t,alt:"Full size view",className:"max-w-full max-h-full object-contain select-none transition-transform duration-200",style:{transform:`scale(${a}) translate(${c.x/a}px, ${c.y/a}px)`},draggable:!1})}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-black/80 to-transparent",children:e.jsxs("p",{className:"text-white/70 text-sm text-center",children:[a>1?"Drag to pan  ":"","Scroll or use buttons to zoom  ESC or click outside to close"]})})]})}function Nx({chatUser:t}){const{user:s}=be(),{sendMessage:r,sendTyping:a,typingUsers:n,isConnected:o,openChatWindow:l,closeChatWindow:c}=ma(),d=Ve(),[m,u]=i.useState(""),[f,h]=i.useState(!1),[b,g]=i.useState(!1),[v,p]=i.useState(null),[x,y]=i.useState(null),[P,j]=i.useState(!1),[E,S]=i.useState(""),I=i.useRef(null),U=i.useRef(),D=i.useRef(null),A=i.useRef(null);console.log("[ChatPage] ChatContent render - consentStatus:",v,"chatUser:",t?.id);const{data:N=[]}=it({queryKey:["/api/conversations",t.id,"messages"],enabled:!!t.id});i.useEffect(()=>{I.current?.scrollIntoView({behavior:"smooth"})},[N,n]),i.useEffect(()=>(t.id&&(d.invalidateQueries({queryKey:["/api/conversations",t.id,"messages"]}),l(t.id)),()=>{t.id&&c(t.id)}),[t.id,d,l,c]),i.useEffect(()=>{const R=async()=>{if(!t?.id){console.log("[ChatPage] Consent fetch skipped: chatUser is null/undefined");return}console.log(`[ChatPage] ===== FETCHING CONSENT STATUS for user ${t.id} (${t.firstName}) =====`);try{const F=await fetch(`/api/consent/${t.id}`,{credentials:"include"});if(console.log(`[ChatPage] Consent API response status: ${F.status}`),F.ok){const M=await F.json();console.log("[ChatPage] Fetched consent status:",JSON.stringify(M,null,2)),M.status==="pending"&&M.consent&&M.requester?(console.log("[ChatPage]  Setting consent request from API (we are responder)"),p("pending"),y({consent:M.consent,requester:M.requester})):M.status==="waiting"?(console.log("[ChatPage]  We are waiting for consent"),p("waiting"),y(null)):(console.log("[ChatPage] Other status:",M.status||"null"),p(M.status||null),y(null))}else console.error("[ChatPage]  Consent API failed with status:",F.status)}catch(F){console.error("[ChatPage]  Failed to fetch consent status:",F)}};console.log("[ChatPage] useEffect triggered for consent fetch, chatUser:",t?.id),R()},[t?.id]),i.useEffect(()=>{const R=M=>{const{message:V}=M.detail;(V.senderId===t.id&&V.receiverId===s?.id||V.senderId===s?.id&&V.receiverId===t.id)&&d.setQueryData(["/api/conversations",t.id,"messages"],(ee=[])=>ee.some(Ae=>Ae.id===V.id)?ee:[...ee,V]),d.invalidateQueries({queryKey:["/api/conversations"]})},F=M=>{const{message:V}=M.detail;(V.senderId===t.id&&V.receiverId===s?.id||V.senderId===s?.id&&V.receiverId===t.id)&&d.setQueryData(["/api/conversations",t.id,"messages"],(ee=[])=>ee.some(Ae=>Ae.id===V.id)?ee:[...ee,V]),d.invalidateQueries({queryKey:["/api/conversations"]})};return window.addEventListener("newMessage",R),window.addEventListener("messageConfirmed",F),()=>{window.removeEventListener("newMessage",R),window.removeEventListener("messageConfirmed",F)}},[t.id,s?.id,d]),i.useEffect(()=>{const R=H=>{const{consent:ee,requester:ne}=H.detail;console.log("[ChatPage]  Received consent request event"),console.log("[ChatPage] Requester:",ne?.firstName,ne?.id),console.log("[ChatPage] Chat User:",t?.firstName,t?.id),t&&ne&&ne.id===t.id?(console.log("[ChatPage]  Setting consent request for current chat - MATCH!"),y({consent:ee,requester:ne}),p("pending")):console.log("[ChatPage]  Consent request NOT for current chat")},F=H=>{const{receiverId:ee}=H.detail;console.log("[ChatPage] Received consent pending event:",{receiverId:ee,chatUserId:t?.id}),t&&ee===t.id&&(console.log("[ChatPage] Setting consent status to waiting (we sent request)"),p("waiting"),y(null))},M=H=>{const{responderId:ee}=H.detail;t&&ee===t.id&&(console.log("[ChatPage] Consent accepted!"),p("accepted"),y(null),ie({title:"Request accepted!",description:`${t.firstName} accepted your chat request.`}))},V=H=>{const{responderId:ee}=H.detail;t&&ee===t.id&&(console.log("[ChatPage] Consent rejected"),p("rejected"),y(null))};return window.addEventListener("consentRequest",R),window.addEventListener("consentPending",F),window.addEventListener("consentAccepted",M),window.addEventListener("consentRejected",V),()=>{window.removeEventListener("consentRequest",R),window.removeEventListener("consentPending",F),window.removeEventListener("consentAccepted",M),window.removeEventListener("consentRejected",V)}},[t?.id,t?.firstName,ie]);const C=()=>{!m.trim()||!o||(r(t.id,m.trim()),u(""),f&&(a(t.id,!1),h(!1)))},W=R=>{u(R),o&&(!f&&R.trim()&&(a(t.id,!0),h(!0)),U.current&&clearTimeout(U.current),U.current=setTimeout(()=>{f&&(a(t.id,!1),h(!1))},2e3))},_=me({mutationFn:async R=>{const F=new FormData;F.append("messageImage",R);const M=await fetch("/api/upload/message",{method:"POST",body:F,credentials:"include"});if(!M.ok)throw new Error("Upload failed");return M.json()},onSuccess:R=>{r(t.id,void 0,R.imageUrl)},onError:()=>{ie({title:"Upload failed",description:"Failed to upload image",variant:"destructive"})}}),O=R=>{const F=R.target.files?.[0];if(F){if(!F.type.startsWith("image/")){ie({title:"Invalid file type",description:"Only image files are allowed",variant:"destructive"});return}if(F.size>5*1024*1024){ie({title:"File too large",description:"Image must be smaller than 5MB",variant:"destructive"});return}_.mutate(F)}R.target&&(R.target.value="")},q=R=>{u(F=>F+R),g(!1)},z=me({mutationFn:async()=>{const R=await fetch("/api/consent/accept",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({consentId:x?.consent?.id,requesterId:x?.requester?.id}),credentials:"include"});if(!R.ok)throw new Error("Failed to accept consent");return R.json()},onSuccess:()=>{console.log("[ChatPage] Consent accepted successfully"),p("accepted"),y(null),ie({title:"Request accepted!",description:`You can now chat with ${t.firstName}.`})},onError:R=>{console.error("[ChatPage] Failed to accept consent:",R),ie({title:"Failed to accept",description:"Could not accept the chat request. Please try again.",variant:"destructive"})}}),B=me({mutationFn:async()=>{const R=await fetch("/api/consent/reject",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({consentId:x?.consent?.id,requesterId:x?.requester?.id}),credentials:"include"});if(!R.ok)throw new Error("Failed to reject consent");return R.json()},onSuccess:()=>{console.log("[ChatPage] Consent rejected successfully"),p("rejected"),y(null),ie({title:"Request declined",description:`You declined the chat request from ${t.firstName}.`})},onError:R=>{console.error("[ChatPage] Failed to reject consent:",R),ie({title:"Failed to decline",description:"Could not decline the chat request. Please try again.",variant:"destructive"})}}),Q=R=>{R.key==="Enter"&&!R.shiftKey&&(R.preventDefault(),C())},te=R=>new Date(R).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),se=R=>{const F=new Date(R),M=new Date,V=new Date(M);return V.setDate(V.getDate()-1),F.toDateString()===M.toDateString()?"Today":F.toDateString()===V.toDateString()?"Yesterday":F.toLocaleDateString("en-US",{month:"short",day:"numeric",year:F.getFullYear()!==M.getFullYear()?"numeric":void 0})},k=N.reduce((R,F)=>{const M=se(F.timestamp);return R[M]||(R[M]=[]),R[M].push(F),R},{});return e.jsxs("div",{className:"flex flex-col h-full bg-background",children:[e.jsx(Ne,{className:"flex-1 px-3 py-4 sm:px-4 sm:py-5 lg:px-8",ref:A,children:e.jsxs("div",{className:"w-full max-w-full lg:max-w-6xl mx-auto space-y-2 pb-8",children:[Object.entries(k).map(([R,F])=>e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center justify-center my-8",children:e.jsx("div",{className:"bg-card/90 backdrop-blur-md border border-border/50 shadow-md text-muted-foreground px-5 py-2 rounded-full text-xs font-semibold uppercase tracking-wide",children:R})}),e.jsx("div",{className:"space-y-4",children:F.map((M,V)=>{const H=M.senderId===s?.id,ee=!H&&(V===F.length-1||F[V+1]?.senderId!==M.senderId);return e.jsxs("div",{className:T("flex items-end gap-2 sm:gap-2.5 max-w-[85%] sm:max-w-[80%] md:max-w-[70%] lg:max-w-[60%] animate-in fade-in-0 slide-in-from-bottom-3 duration-300",H?"ml-auto flex-row-reverse":"mr-auto"),children:[!H&&e.jsx("div",{className:"flex-shrink-0 mb-1",children:ee?e.jsxs(fe,{className:"h-8 w-8 sm:h-9 sm:w-9 border-2 border-background shadow-md ring-1 ring-primary/10",children:[e.jsx(pe,{src:t.profilePhoto||""}),e.jsxs(xe,{className:"text-xs font-semibold bg-gradient-to-br from-primary/20 to-primary/30",children:[t.firstName[0],t.lastName[0]]})]}):e.jsx("div",{className:"h-8 w-8 sm:h-9 sm:w-9"})}),e.jsxs("div",{className:T("flex flex-col gap-1.5 min-w-0",H?"items-end":"items-start"),children:[e.jsx("div",{className:T("group relative rounded-2xl px-4 py-3 break-words shadow-md transition-all duration-200 hover:shadow-lg",H?"bg-gradient-to-br from-primary to-primary/90 text-primary-foreground rounded-br-md":"bg-card text-card-foreground border border-border/60 rounded-bl-md backdrop-blur-sm"),children:M.imageUrl?e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"relative overflow-hidden rounded-xl group/image cursor-pointer",onClick:()=>{S(M.imageUrl),j(!0)},children:e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:M.imageUrl,alt:"Shared image",loading:"lazy",className:"w-full max-w-[240px] sm:max-w-[280px] md:max-w-[320px] h-auto max-h-[200px] sm:max-h-[240px] md:max-h-[280px] object-cover rounded-lg transition-all duration-300 group-hover/image:brightness-90"}),e.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover/image:bg-black/10 transition-all duration-300 rounded-lg flex items-center justify-center",children:e.jsx("div",{className:"opacity-0 group-hover/image:opacity-100 transition-opacity duration-300 bg-white/20 backdrop-blur-sm rounded-full p-3",children:e.jsx(Cu,{className:"h-6 w-6 text-white"})})})]})}),M.content&&e.jsx("p",{className:"text-sm leading-relaxed mt-2",children:M.content})]}):e.jsx("p",{className:"text-sm sm:text-[15px] leading-relaxed whitespace-pre-wrap",children:M.content})}),e.jsx("span",{className:T("text-xs text-muted-foreground/70 px-1 font-medium",H?"text-right":"text-left"),children:te(M.timestamp)})]})]},M.id)})})]},R)),n[t.id]&&e.jsxs("div",{className:"flex items-end gap-2 sm:gap-2.5 max-w-[75%] sm:max-w-[70%] md:max-w-[60%] lg:max-w-[50%] animate-in fade-in-0 slide-in-from-bottom-3 duration-300",children:[e.jsxs(fe,{className:"h-8 w-8 sm:h-9 sm:w-9 flex-shrink-0 mb-1 border-2 border-background shadow-md ring-1 ring-primary/10",children:[e.jsx(pe,{src:t.profilePhoto||""}),e.jsxs(xe,{className:"text-xs font-semibold bg-gradient-to-br from-primary/20 to-primary/30",children:[t.firstName[0],t.lastName[0]]})]}),e.jsx("div",{className:"bg-card border border-border/60 rounded-2xl rounded-bl-md px-6 py-3.5 shadow-md backdrop-blur-sm",children:e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-2 h-2 bg-primary/60 rounded-full animate-bounce [animation-duration:1s]"}),e.jsx("div",{className:"w-2 h-2 bg-primary/60 rounded-full animate-bounce [animation-duration:1s]",style:{animationDelay:"0.2s"}}),e.jsx("div",{className:"w-2 h-2 bg-primary/60 rounded-full animate-bounce [animation-duration:1s]",style:{animationDelay:"0.4s"}})]})})]}),e.jsx("div",{ref:I})]})}),v==="pending"&&x&&e.jsx("div",{className:"border-t border-border/40 bg-card/60 dark:bg-card/40 backdrop-blur-lg p-4 sm:p-5 md:p-6 shadow-lg flex-shrink-0 animate-in slide-in-from-bottom-5 duration-500",children:e.jsx("div",{className:"w-full max-w-full lg:max-w-6xl mx-auto",children:e.jsxs("div",{className:"flex flex-col xs:flex-row items-start xs:items-center gap-3 sm:gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 flex-1 w-full xs:w-auto",children:[e.jsx("div",{className:"flex-shrink-0 w-11 h-11 sm:w-12 sm:h-12 md:w-13 md:h-13 rounded-xl bg-primary/10 dark:bg-primary/20 flex items-center justify-center border border-primary/20 dark:border-primary/30",children:e.jsx("span",{className:"text-xl sm:text-2xl",children:""})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h4",{className:"font-semibold text-sm sm:text-base md:text-lg text-foreground leading-snug",children:[x.requester?.firstName," wants to chat"]}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground mt-0.5 sm:mt-1 font-normal",children:"Do you want to accept this request?"})]})]}),e.jsxs("div",{className:"flex gap-2 sm:gap-3 w-full xs:w-auto flex-shrink-0",children:[e.jsxs(L,{onClick:()=>B.mutate(),disabled:B.isPending||z.isPending,variant:"outline",size:"sm",className:"flex-1 xs:flex-none xs:min-w-[100px] sm:min-w-[110px] rounded-lg text-xs sm:text-sm font-medium h-9 sm:h-10 px-4 sm:px-5 hover:bg-destructive/10 hover:text-destructive hover:border-destructive transition-all duration-200",children:[B.isPending&&e.jsx(De,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4 mr-1.5 sm:mr-2 animate-spin"}),"Decline"]}),e.jsxs(L,{onClick:()=>z.mutate(),disabled:z.isPending||B.isPending,size:"sm",className:"flex-1 xs:flex-none xs:min-w-[100px] sm:min-w-[110px] rounded-lg text-xs sm:text-sm font-medium h-9 sm:h-10 px-4 sm:px-5 bg-primary hover:bg-primary/90 text-primary-foreground shadow-md hover:shadow-lg transition-all duration-200",children:[z.isPending&&e.jsx(De,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4 mr-1.5 sm:mr-2 animate-spin"}),"Accept"]})]})]})})}),v==="waiting"&&e.jsx("div",{className:"border-t border-border/40 bg-card/60 dark:bg-card/40 backdrop-blur-lg p-4 sm:p-5 md:p-6 shadow-lg flex-shrink-0 animate-in slide-in-from-bottom-5 duration-500",children:e.jsx("div",{className:"w-full max-w-full lg:max-w-6xl mx-auto",children:e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("div",{className:"flex-shrink-0 w-11 h-11 sm:w-12 sm:h-12 md:w-13 md:h-13 rounded-xl bg-amber-500/10 dark:bg-amber-500/20 flex items-center justify-center border border-amber-500/20 dark:border-amber-500/30",children:e.jsx(De,{className:"h-5 w-5 sm:h-6 sm:w-6 animate-spin text-amber-600 dark:text-amber-500"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("p",{className:"text-sm sm:text-base md:text-lg text-foreground font-semibold leading-snug",children:["Waiting for ",t.firstName," to accept..."]}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground mt-0.5 sm:mt-1 font-normal",children:"You can send messages once they respond"})]})]})})}),e.jsx("div",{className:"border-t border-border/30 bg-background p-3 sm:p-4 md:p-5 flex-shrink-0",children:e.jsxs("div",{className:"w-full max-w-full lg:max-w-6xl mx-auto",children:[e.jsxs("div",{className:"relative group",children:[e.jsxs("div",{className:"relative flex items-center bg-muted/40 dark:bg-muted/20 rounded-xl transition-all duration-200",children:[e.jsx("textarea",{value:m,onChange:R=>W(R.target.value),onKeyDown:Q,placeholder:v==="waiting"?"Waiting for chat permission...":v==="pending"?"Please respond to the chat request above...":v==="rejected"?"Chat request was declined":"Type a message",className:"flex-1 min-h-[40px] max-h-32 resize-none py-2.5 px-4 sm:px-5 bg-transparent border-0 border-b-2 border-gray-300 dark:border-gray-600 focus:border-blue-500 focus:outline-none focus:ring-0 rounded-none text-sm sm:text-base text-foreground placeholder:text-muted-foreground/60",disabled:!o||v==="waiting"||v==="pending"||v==="rejected"}),e.jsxs("div",{className:"flex items-center gap-1 sm:gap-1.5 pr-2 sm:pr-2.5 flex-shrink-0",children:[e.jsx(L,{variant:"ghost",size:"icon",className:"h-8 w-8 sm:h-9 sm:w-9 rounded-lg hover:bg-muted/60 dark:hover:bg-muted/40 transition-colors",onClick:()=>g(!b),disabled:!o||v==="waiting"||v==="pending"||v==="rejected",title:"Add emoji",children:e.jsx(No,{className:"h-[18px] w-[18px] sm:h-5 sm:w-5 text-muted-foreground"})}),e.jsx(L,{variant:"ghost",size:"icon",className:"h-8 w-8 sm:h-9 sm:w-9 rounded-lg hover:bg-muted/60 dark:hover:bg-muted/40 transition-colors",onClick:()=>D.current?.click(),disabled:!o||_.isPending,title:"Attach image",children:_.isPending?e.jsx(De,{className:"h-[18px] w-[18px] sm:h-5 sm:w-5 animate-spin text-muted-foreground"}):e.jsx(jo,{className:"h-[18px] w-[18px] sm:h-5 sm:w-5 text-muted-foreground"})}),e.jsx(L,{onClick:C,disabled:!m.trim()||!o||v==="waiting"||v==="pending"||v==="rejected",variant:"ghost",size:"icon",className:"h-8 w-8 sm:h-9 sm:w-9 rounded-lg hover:bg-primary/10 transition-colors disabled:opacity-40",title:"Send message",children:e.jsx(gt,{className:"h-[18px] w-[18px] sm:h-5 sm:w-5 text-muted-foreground hover:text-primary transition-colors"})})]})]}),e.jsx("div",{className:"absolute -bottom-px left-0 right-0 h-0.5 bg-primary scale-x-0 group-focus-within:scale-x-100 transition-transform duration-300 origin-left"})]}),b&&e.jsx("div",{className:"mt-2",children:e.jsx(Ni,{onEmojiSelect:q,onClose:()=>g(!1)})}),e.jsx("input",{ref:D,type:"file",onChange:O,accept:"image/*",className:"hidden"}),!o&&e.jsxs("div",{className:"flex items-center justify-center gap-2 mt-3 text-xs text-muted-foreground/70 font-medium",children:[e.jsx(De,{className:"h-3.5 w-3.5 animate-spin"}),e.jsx("span",{children:"Connecting to chat..."})]})]})}),e.jsx(wx,{imageUrl:E,isOpen:P,onClose:()=>j(!1)})]})}function Sx(){const{userId:t}=Vr(),[,s]=de(),{user:r}=be(),[a,n]=i.useState(null),[o,l]=i.useState(!0);return i.useEffect(()=>{(async()=>{if(t)try{const d=await fetch(`/api/users/${t}`);if(d.ok){const m=await d.json();n(m)}else console.error("Failed to fetch chat user")}catch(d){console.error("Error fetching chat user:",d)}finally{l(!1)}})()},[t]),r?o?e.jsx("div",{className:"flex items-center justify-center h-screen bg-gradient-to-b from-background to-muted/20",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx(De,{className:"h-10 w-10 animate-spin mx-auto text-primary"}),e.jsx("p",{className:"text-muted-foreground font-medium",children:"Loading chat..."})]})}):a?e.jsxs("div",{className:"fixed inset-0 flex flex-col bg-gradient-to-b from-background via-background to-muted/30 pb-16",children:[e.jsx("div",{className:"border-b bg-card/95 backdrop-blur-md shadow-md flex-shrink-0",children:e.jsxs("div",{className:"w-full max-w-full px-3 py-3 sm:px-4 sm:py-3.5 lg:max-w-6xl lg:mx-auto flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 flex-1 min-w-0",children:[e.jsx(L,{variant:"ghost",size:"icon",onClick:()=>window.history.back(),className:"flex-shrink-0 h-9 w-9 sm:h-10 sm:w-10 rounded-full hover:bg-primary/10 transition-colors",children:e.jsx(Le,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 flex-1 min-w-0 cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>s(`/profile/${a.id}`),children:[e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsxs(fe,{className:"h-10 w-10 sm:h-11 sm:w-11 border-2 border-background shadow-md",children:[e.jsx(pe,{src:a.profilePhoto||""}),e.jsxs(xe,{className:"text-sm font-semibold bg-gradient-to-br from-primary/20 to-primary/30",children:[a.firstName[0],a.lastName[0]]})]}),a.isOnline&&e.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-3.5 h-3.5 bg-green-500 border-2 border-card rounded-full ring-2 ring-background animate-pulse"})]}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("h3",{className:"font-semibold text-sm sm:text-base truncate leading-tight",children:[a.firstName," ",a.lastName]}),e.jsx("p",{className:"text-xs text-muted-foreground truncate mt-0.5",children:a.isOnline?e.jsx("span",{className:"text-green-600 dark:text-green-500 font-medium",children:"Online"}):e.jsxs("span",{children:[a.age,"  ",a.location||"Location not set"]})})]})]})]}),e.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0 ml-2",children:[e.jsx(L,{variant:"ghost",size:"icon",className:"hidden sm:flex h-9 w-9 sm:h-10 sm:w-10 rounded-full hover:bg-primary/10 transition-colors",children:e.jsx(Eu,{className:"h-5 w-5 text-muted-foreground"})}),e.jsx(L,{variant:"ghost",size:"icon",className:"hidden sm:flex h-9 w-9 sm:h-10 sm:w-10 rounded-full hover:bg-primary/10 transition-colors",children:e.jsx(Iu,{className:"h-5 w-5 text-muted-foreground"})}),e.jsx(L,{variant:"ghost",size:"icon",className:"h-9 w-9 sm:h-10 sm:w-10 rounded-full hover:bg-primary/10 transition-colors",children:e.jsx(ju,{className:"h-5 w-5 text-muted-foreground"})})]})]})}),e.jsx("div",{className:"flex-1 overflow-hidden min-h-0",children:e.jsx(Nx,{chatUser:a})})]}):e.jsx("div",{className:"flex items-center justify-center h-screen bg-gradient-to-b from-background to-muted/20",children:e.jsxs("div",{className:"text-center space-y-4 px-4",children:[e.jsx("div",{className:"w-16 h-16 mx-auto bg-destructive/10 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-2xl",children:""})}),e.jsx("h3",{className:"text-lg font-semibold",children:"User not found"}),e.jsx("p",{className:"text-muted-foreground text-sm max-w-xs mx-auto",children:"This user could not be loaded. They may have been removed or the link is incorrect."}),e.jsxs(L,{onClick:()=>s("/discover"),className:"mt-4 rounded-full shadow-md hover:shadow-lg transition-all",children:[e.jsx(Le,{className:"h-4 w-4 mr-2"}),"Back to Discover"]})]})}):null}var Cx=Object.defineProperty,kx=Object.defineProperties,Px=Object.getOwnPropertyDescriptors,Ts=Object.getOwnPropertySymbols,ec=Object.prototype.hasOwnProperty,tc=Object.prototype.propertyIsEnumerable,dn=(t,s,r)=>s in t?Cx(t,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[s]=r,Ex=(t,s)=>{for(var r in s||(s={}))ec.call(s,r)&&dn(t,r,s[r]);if(Ts)for(var r of Ts(s))tc.call(s,r)&&dn(t,r,s[r]);return t},Rx=(t,s)=>kx(t,Px(s)),Tx=(t,s)=>{var r={};for(var a in t)ec.call(t,a)&&s.indexOf(a)<0&&(r[a]=t[a]);if(t!=null&&Ts)for(var a of Ts(t))s.indexOf(a)<0&&tc.call(t,a)&&(r[a]=t[a]);return r};function Mx(t){let s=setTimeout(t,0),r=setTimeout(t,10),a=setTimeout(t,50);return[s,r,a]}function Ax(t){let s=i.useRef();return i.useEffect(()=>{s.current=t}),s.current}var Ix=18,sc=40,Dx=`${sc}px`,Ox=["[data-lastpass-icon-root]","com-1password-button","[data-dashlanecreated]",'[style$="2147483647 !important;"]'].join(",");function Fx({containerRef:t,inputRef:s,pushPasswordManagerStrategy:r,isFocused:a}){let[n,o]=i.useState(!1),[l,c]=i.useState(!1),[d,m]=i.useState(!1),u=i.useMemo(()=>r==="none"?!1:(r==="increase-width"||r==="experimental-no-flickering")&&n&&l,[n,l,r]),f=i.useCallback(()=>{let h=t.current,b=s.current;if(!h||!b||d||r==="none")return;let g=h,v=g.getBoundingClientRect().left+g.offsetWidth,p=g.getBoundingClientRect().top+g.offsetHeight/2,x=v-Ix,y=p;document.querySelectorAll(Ox).length===0&&document.elementFromPoint(x,y)===h||(o(!0),m(!0))},[t,s,d,r]);return i.useEffect(()=>{let h=t.current;if(!h||r==="none")return;function b(){let v=window.innerWidth-h.getBoundingClientRect().right;c(v>=sc)}b();let g=setInterval(b,1e3);return()=>{clearInterval(g)}},[t,r]),i.useEffect(()=>{let h=a||document.activeElement===s.current;if(r==="none"||!h)return;let b=setTimeout(f,0),g=setTimeout(f,2e3),v=setTimeout(f,5e3),p=setTimeout(()=>{m(!0)},6e3);return()=>{clearTimeout(b),clearTimeout(g),clearTimeout(v),clearTimeout(p)}},[s,a,r,f]),{hasPWMBadge:n,willPushPWMBadge:u,PWM_BADGE_SPACE_WIDTH:Dx}}var rc=i.createContext({}),ac=i.forwardRef((t,s)=>{var r=t,{value:a,onChange:n,maxLength:o,textAlign:l="left",pattern:c,placeholder:d,inputMode:m="numeric",onComplete:u,pushPasswordManagerStrategy:f="increase-width",pasteTransformer:h,containerClassName:b,noScriptCSSFallback:g=Lx,render:v,children:p}=r,x=Tx(r,["value","onChange","maxLength","textAlign","pattern","placeholder","inputMode","onComplete","pushPasswordManagerStrategy","pasteTransformer","containerClassName","noScriptCSSFallback","render","children"]),y,P,j,E,S;let[I,U]=i.useState(typeof x.defaultValue=="string"?x.defaultValue:""),D=a??I,A=Ax(D),N=i.useCallback(K=>{n?.(K),U(K)},[n]),C=i.useMemo(()=>c?typeof c=="string"?new RegExp(c):c:null,[c]),W=i.useRef(null),_=i.useRef(null),O=i.useRef({value:D,onChange:N,isIOS:typeof window<"u"&&((P=(y=window?.CSS)==null?void 0:y.supports)==null?void 0:P.call(y,"-webkit-touch-callout","none"))}),q=i.useRef({prev:[(j=W.current)==null?void 0:j.selectionStart,(E=W.current)==null?void 0:E.selectionEnd,(S=W.current)==null?void 0:S.selectionDirection]});i.useImperativeHandle(s,()=>W.current,[]),i.useEffect(()=>{let K=W.current,X=_.current;if(!K||!X)return;O.current.value!==K.value&&O.current.onChange(K.value),q.current.prev=[K.selectionStart,K.selectionEnd,K.selectionDirection];function ye(){if(document.activeElement!==K){k(null),F(null);return}let le=K.selectionStart,Ce=K.selectionEnd,ms=K.selectionDirection,Ie=K.maxLength,ut=K.value,He=q.current.prev,Xe=-1,Ze=-1,mt;if(ut.length!==0&&le!==null&&Ce!==null){let dc=le===Ce,uc=le===ut.length&&ut.length<Ie;if(dc&&!uc){let ht=le;if(ht===0)Xe=0,Ze=1,mt="forward";else if(ht===Ie)Xe=ht-1,Ze=ht,mt="backward";else if(Ie>1&&ut.length>1){let Qs=0;if(He[0]!==null&&He[1]!==null){mt=ht<He[1]?"backward":"forward";let mc=He[0]===He[1]&&He[0]<Ie;mt==="backward"&&!mc&&(Qs=-1)}Xe=Qs+ht,Ze=Qs+ht+1}}Xe!==-1&&Ze!==-1&&Xe!==Ze&&W.current.setSelectionRange(Xe,Ze,mt)}let wa=Xe!==-1?Xe:le,Na=Ze!==-1?Ze:Ce,cc=mt??ms;k(wa),F(Na),q.current.prev=[wa,Na,cc]}if(document.addEventListener("selectionchange",ye,{capture:!0}),ye(),document.activeElement===K&&te(!0),!document.getElementById("input-otp-style")){let le=document.createElement("style");if(le.id="input-otp-style",document.head.appendChild(le),le.sheet){let Ce="background: transparent !important; color: transparent !important; border-color: transparent !important; opacity: 0 !important; box-shadow: none !important; -webkit-box-shadow: none !important; -webkit-text-fill-color: transparent !important;";Qt(le.sheet,"[data-input-otp]::selection { background: transparent !important; color: transparent !important; }"),Qt(le.sheet,`[data-input-otp]:autofill { ${Ce} }`),Qt(le.sheet,`[data-input-otp]:-webkit-autofill { ${Ce} }`),Qt(le.sheet,"@supports (-webkit-touch-callout: none) { [data-input-otp] { letter-spacing: -.6em !important; font-weight: 100 !important; font-stretch: ultra-condensed; font-optical-sizing: none !important; left: -1px !important; right: 1px !important; } }"),Qt(le.sheet,"[data-input-otp] + * { pointer-events: all !important; }")}}let Pe=()=>{X&&X.style.setProperty("--root-height",`${K.clientHeight}px`)};Pe();let Ee=new ResizeObserver(Pe);return Ee.observe(K),()=>{document.removeEventListener("selectionchange",ye,{capture:!0}),Ee.disconnect()}},[]);let[z,B]=i.useState(!1),[Q,te]=i.useState(!1),[se,k]=i.useState(null),[R,F]=i.useState(null);i.useEffect(()=>{Mx(()=>{var K,X,ye,Pe;(K=W.current)==null||K.dispatchEvent(new Event("input"));let Ee=(X=W.current)==null?void 0:X.selectionStart,le=(ye=W.current)==null?void 0:ye.selectionEnd,Ce=(Pe=W.current)==null?void 0:Pe.selectionDirection;Ee!==null&&le!==null&&(k(Ee),F(le),q.current.prev=[Ee,le,Ce])})},[D,Q]),i.useEffect(()=>{A!==void 0&&D!==A&&A.length<o&&D.length===o&&u?.(D)},[o,u,A,D]);let M=Fx({containerRef:_,inputRef:W,pushPasswordManagerStrategy:f,isFocused:Q}),V=i.useCallback(K=>{let X=K.currentTarget.value.slice(0,o);if(X.length>0&&C&&!C.test(X)){K.preventDefault();return}typeof A=="string"&&X.length<A.length&&document.dispatchEvent(new Event("selectionchange")),N(X)},[o,N,A,C]),H=i.useCallback(()=>{var K;if(W.current){let X=Math.min(W.current.value.length,o-1),ye=W.current.value.length;(K=W.current)==null||K.setSelectionRange(X,ye),k(X),F(ye)}te(!0)},[o]),ee=i.useCallback(K=>{var X,ye;let Pe=W.current;if(!h&&(!O.current.isIOS||!K.clipboardData||!Pe))return;let Ee=K.clipboardData.getData("text/plain"),le=h?h(Ee):Ee;K.preventDefault();let Ce=(X=W.current)==null?void 0:X.selectionStart,ms=(ye=W.current)==null?void 0:ye.selectionEnd,Ie=(Ce!==ms?D.slice(0,Ce)+le+D.slice(ms):D.slice(0,Ce)+le+D.slice(Ce)).slice(0,o);if(Ie.length>0&&C&&!C.test(Ie))return;Pe.value=Ie,N(Ie);let ut=Math.min(Ie.length,o-1),He=Ie.length;Pe.setSelectionRange(ut,He),k(ut),F(He)},[o,N,C,D]),ne=i.useMemo(()=>({position:"relative",cursor:x.disabled?"default":"text",userSelect:"none",WebkitUserSelect:"none",pointerEvents:"none"}),[x.disabled]),Ae=i.useMemo(()=>({position:"absolute",inset:0,width:M.willPushPWMBadge?`calc(100% + ${M.PWM_BADGE_SPACE_WIDTH})`:"100%",clipPath:M.willPushPWMBadge?`inset(0 ${M.PWM_BADGE_SPACE_WIDTH} 0 0)`:void 0,height:"100%",display:"flex",textAlign:l,opacity:"1",color:"transparent",pointerEvents:"all",background:"transparent",caretColor:"transparent",border:"0 solid transparent",outline:"0 solid transparent",boxShadow:"none",lineHeight:"1",letterSpacing:"-.5em",fontSize:"var(--root-height)",fontFamily:"monospace",fontVariantNumeric:"tabular-nums"}),[M.PWM_BADGE_SPACE_WIDTH,M.willPushPWMBadge,l]),ic=i.useMemo(()=>i.createElement("input",Rx(Ex({autoComplete:x.autoComplete||"one-time-code"},x),{"data-input-otp":!0,"data-input-otp-placeholder-shown":D.length===0||void 0,"data-input-otp-mss":se,"data-input-otp-mse":R,inputMode:m,pattern:C?.source,"aria-placeholder":d,style:Ae,maxLength:o,value:D,ref:W,onPaste:K=>{var X;ee(K),(X=x.onPaste)==null||X.call(x,K)},onChange:V,onMouseOver:K=>{var X;B(!0),(X=x.onMouseOver)==null||X.call(x,K)},onMouseLeave:K=>{var X;B(!1),(X=x.onMouseLeave)==null||X.call(x,K)},onFocus:K=>{var X;H(),(X=x.onFocus)==null||X.call(x,K)},onBlur:K=>{var X;te(!1),(X=x.onBlur)==null||X.call(x,K)}})),[V,H,ee,m,Ae,o,R,se,x,C?.source,D]),Gs=i.useMemo(()=>({slots:Array.from({length:o}).map((K,X)=>{var ye;let Pe=Q&&se!==null&&R!==null&&(se===R&&X===se||X>=se&&X<R),Ee=D[X]!==void 0?D[X]:null,le=D[0]!==void 0?null:(ye=d?.[X])!=null?ye:null;return{char:Ee,placeholderChar:le,isActive:Pe,hasFakeCaret:Pe&&Ee===null}}),isFocused:Q,isHovering:!x.disabled&&z}),[Q,z,o,R,se,x.disabled,D]),lc=i.useMemo(()=>v?v(Gs):i.createElement(rc.Provider,{value:Gs},p),[p,Gs,v]);return i.createElement(i.Fragment,null,g!==null&&i.createElement("noscript",null,i.createElement("style",null,g)),i.createElement("div",{ref:_,"data-input-otp-container":!0,style:ne,className:b},lc,i.createElement("div",{style:{position:"absolute",inset:0,pointerEvents:"none"}},ic)))});ac.displayName="Input";function Qt(t,s){try{t.insertRule(s)}catch{console.error("input-otp could not insert CSS rule:",s)}}var Lx=`
[data-input-otp] {
  --nojs-bg: white !important;
  --nojs-fg: black !important;

  background-color: var(--nojs-bg) !important;
  color: var(--nojs-fg) !important;
  caret-color: var(--nojs-fg) !important;
  letter-spacing: .25em !important;
  text-align: center !important;
  border: 1px solid var(--nojs-fg) !important;
  border-radius: 4px !important;
  width: 100% !important;
}
@media (prefers-color-scheme: dark) {
  [data-input-otp] {
    --nojs-bg: black !important;
    --nojs-fg: white !important;
  }
}`;const nc=i.forwardRef(({className:t,containerClassName:s,...r},a)=>e.jsx(ac,{ref:a,containerClassName:T("flex items-center gap-2 has-[:disabled]:opacity-50",s),className:T("disabled:cursor-not-allowed",t),...r}));nc.displayName="InputOTP";const oc=i.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:T("flex items-center",t),...s}));oc.displayName="InputOTPGroup";const pt=i.forwardRef(({index:t,className:s,...r},a)=>{const n=i.useContext(rc),{char:o,hasFakeCaret:l,isActive:c}=n.slots[t];return e.jsxs("div",{ref:a,className:T("relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md",c&&"z-10 ring-2 ring-ring ring-offset-background",s),...r,children:[o,l&&e.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"h-4 w-px animate-caret-blink bg-foreground duration-1000"})})]})});pt.displayName="InputOTPSlot";const _x=i.forwardRef(({...t},s)=>e.jsx("div",{ref:s,role:"separator",...t,children:e.jsx(bu,{})}));_x.displayName="InputOTPSeparator";function qx(){const[t,s]=de(),{toast:r}=ct(),{user:a}=be(),[n,o]=i.useState(""),[l,c]=i.useState(""),[d,m]=i.useState(0);i.useEffect(()=>{a?.emailVerified&&s("/discover")},[a,s]),i.useEffect(()=>{const v=new URLSearchParams(window.location.search).get("email");v?c(v):a?.email&&c(a.email)},[a]),i.useEffect(()=>{if(d>0){const g=setTimeout(()=>m(d-1),1e3);return()=>clearTimeout(g)}},[d]);const u=me({mutationFn:async g=>{const v=await fetch("/api/verify-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:g,email:l})});if(!v.ok){const p=await v.json();throw new Error(p.message||"Verification failed")}return v.json()},onSuccess:g=>{rs.setQueryData(["/api/user"],g.user),r({title:" Email Verified Successfully!",description:"Your email has been verified and you are now logged in!"}),setTimeout(()=>{s("/discover")},1e3)},onError:g=>{r({title:"Verification Failed",description:g.message,variant:"destructive"})}}),f=me({mutationFn:async()=>{const g=await fetch("/api/resend-verification",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:l})});if(!g.ok){const v=await g.json();throw new Error(v.message||"Failed to resend code")}return g.json()},onSuccess:()=>{m(60),r({title:"Code Sent!",description:"A new verification code has been sent to your email."})},onError:g=>{r({title:"Failed to Resend",description:g.message,variant:"destructive"})}}),h=g=>{g.preventDefault(),n.length===6?u.mutate(n):r({title:"Invalid Code",description:"Please enter a 6-digit verification code",variant:"destructive"})},b=()=>{d===0&&f.mutate()};return e.jsxs("div",{className:"min-h-screen flex flex-col lg:flex-row bg-background",children:[e.jsx("div",{className:"flex-1 flex items-center justify-center p-4 sm:p-6 md:p-8 lg:p-12",children:e.jsxs("div",{className:"w-full max-w-md space-y-6 sm:space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500 via-purple-500 to-pink-500 rounded-2xl blur-xl opacity-50 animate-pulse"}),e.jsx("div",{className:"relative w-16 h-16 sm:w-20 sm:h-20 bg-gradient-to-br from-blue-500 via-purple-500 to-pink-500 rounded-2xl flex items-center justify-center shadow-lg",children:e.jsx(we,{className:"h-8 w-8 sm:h-10 sm:w-10 text-white"})})]})}),e.jsx("h1",{className:"text-3xl sm:text-4xl lg:text-5xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Verify Your Email"}),e.jsx("p",{className:"text-sm sm:text-base text-muted-foreground max-w-sm mx-auto",children:"We've sent a 6-digit verification code to"}),e.jsx("p",{className:"text-sm sm:text-base font-semibold text-foreground",children:l})]}),e.jsx(ae,{className:"border-0 shadow-2xl rounded-2xl overflow-hidden bg-gradient-to-br from-card to-card/80 animate-in fade-in slide-in-from-bottom-4 duration-500 delay-150",children:e.jsx(he,{className:"p-6 sm:p-8",children:e.jsxs("form",{onSubmit:h,className:"space-y-6",children:[!a&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"email",className:"text-sm font-semibold",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(we,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground"}),e.jsx(re,{id:"email",type:"email",placeholder:"Enter your email",value:l,onChange:g=>c(g.target.value),required:!0,className:"pl-10 h-12 rounded-xl border-2 transition-all focus:border-primary focus:ring-2 focus:ring-primary/20"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-muted-foreground mb-4",children:[e.jsx(Ue,{className:"h-4 w-4"}),e.jsx("span",{children:"Enter your 6-digit code"})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx(nc,{maxLength:6,value:n,onChange:g=>o(g),disabled:u.isPending,children:e.jsxs(oc,{children:[e.jsx(pt,{index:0,className:"h-12 w-12 sm:h-14 sm:w-14 text-lg sm:text-xl border-2 rounded-lg"}),e.jsx(pt,{index:1,className:"h-12 w-12 sm:h-14 sm:w-14 text-lg sm:text-xl border-2 rounded-lg"}),e.jsx(pt,{index:2,className:"h-12 w-12 sm:h-14 sm:w-14 text-lg sm:text-xl border-2 rounded-lg"}),e.jsx(pt,{index:3,className:"h-12 w-12 sm:h-14 sm:w-14 text-lg sm:text-xl border-2 rounded-lg"}),e.jsx(pt,{index:4,className:"h-12 w-12 sm:h-14 sm:w-14 text-lg sm:text-xl border-2 rounded-lg"}),e.jsx(pt,{index:5,className:"h-12 w-12 sm:h-14 sm:w-14 text-lg sm:text-xl border-2 rounded-lg"})]})})}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-muted-foreground",children:[e.jsx(wr,{className:"h-3 w-3"}),e.jsx("span",{children:"Code expires in 10 minutes"})]})]}),e.jsx(L,{type:"submit",className:"w-full h-12 sm:h-14 text-base font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-[1.02]",disabled:u.isPending||n.length!==6,children:u.isPending?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Verifying..."]}):"Verify Email"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-border"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-card px-2 text-muted-foreground",children:"Didn't receive the code?"})})]}),e.jsx(L,{type:"button",variant:"outline",onClick:b,disabled:d>0||f.isPending,className:"w-full h-12 rounded-xl border-2 hover:bg-secondary/50 transition-all duration-300 hover:scale-[1.02]",children:f.isPending?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current"}),"Sending..."]}):d>0?`Resend Code (${d}s)`:"Resend Verification Code"})]})]})})}),e.jsx("div",{className:"bg-amber-500/10 border border-amber-500/20 rounded-xl p-4 animate-in fade-in slide-in-from-bottom-4 duration-500 delay-300",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-amber-500 to-orange-500 rounded-lg flex items-center justify-center",children:e.jsx(Nr,{className:"h-5 w-5 text-white"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-semibold text-amber-900 dark:text-amber-100 mb-1",children:"Security Notice"}),e.jsx("p",{className:"text-xs text-amber-800 dark:text-amber-200",children:"Never share this code with anyone. We will never ask for your verification code via phone, email, or any other method outside this page."})]})]})})]})}),e.jsxs("div",{className:"hidden lg:flex flex-1 bg-gradient-to-br from-primary/10 via-primary/5 to-background items-center justify-center p-8 xl:p-12 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-grid-white/10 [mask-image:radial-gradient(white,transparent_85%)]"}),e.jsxs("div",{className:"relative max-w-lg space-y-8 z-10",children:[e.jsxs("div",{className:"space-y-4 animate-in fade-in slide-in-from-right-4 duration-700",children:[e.jsx("h2",{className:"text-3xl xl:text-4xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Secure Your Account"}),e.jsx("p",{className:"text-lg text-muted-foreground",children:"Email verification helps us keep your account safe and ensures you can recover access if needed."})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex gap-4 p-4 rounded-xl bg-card/50 backdrop-blur-sm border border-border/50 hover:border-primary/50 transition-all duration-300 animate-in fade-in slide-in-from-right-4 duration-700 delay-150",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx(Ue,{className:"h-6 w-6 text-white"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-1",children:"Enhanced Security"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Protect your account from unauthorized access with verified email authentication."})]})]}),e.jsxs("div",{className:"flex gap-4 p-4 rounded-xl bg-card/50 backdrop-blur-sm border border-border/50 hover:border-primary/50 transition-all duration-300 animate-in fade-in slide-in-from-right-4 duration-700 delay-300",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx(we,{className:"h-6 w-6 text-white"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-1",children:"Stay Connected"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive important notifications and updates about your account activity."})]})]}),e.jsxs("div",{className:"flex gap-4 p-4 rounded-xl bg-card/50 backdrop-blur-sm border border-border/50 hover:border-primary/50 transition-all duration-300 animate-in fade-in slide-in-from-right-4 duration-700 delay-500",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-pink-500 to-pink-600 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx(wr,{className:"h-6 w-6 text-white"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-1",children:"Quick Verification"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Simple 6-digit code verification takes only seconds to complete."})]})]})]})]})]})]})}function ft({path:t,component:s}){const{user:r,isLoading:a}=be();return a?e.jsx(ke,{path:t,children:e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(De,{className:"h-8 w-8 animate-spin text-border"})})}):r?e.jsx(ke,{path:t,children:e.jsx(s,{})}):e.jsx(ke,{path:t,children:e.jsx(ad,{to:"/auth"})})}function $x(){const{user:t}=be(),[,s]=de(),[r,a]=i.useState(!1),[n,o]=i.useState(!1),{toast:l}=ct();if(!t||t.emailVerified||window.location.pathname==="/verify-email"||r)return null;const c=async()=>{o(!0);try{const d=await fetch("/api/auto-send-verification",{method:"POST",headers:{"Content-Type":"application/json"}}),m=await d.json();d.ok?m.alreadySent?l({title:"Code already sent",description:"Check your email for the previously sent code."}):l({title:"Verification code sent",description:"Please check your email for the verification code."}):(l({title:"Failed to send code",description:m.message||"Please try again later.",variant:"destructive"}),console.error("Email sending failed:",m))}catch(d){console.error("Failed to send verification code:",d),l({title:"Network error",description:"Please check your connection and try again.",variant:"destructive"})}finally{o(!1),s("/verify-email")}};return e.jsx("div",{className:"bg-gradient-to-r from-red-600 to-red-700 text-white shadow-lg",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-3 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3 cursor-pointer flex-1 group",onClick:c,children:[e.jsx(jr,{className:"h-5 w-5 flex-shrink-0 animate-pulse"}),e.jsx("p",{className:"text-sm sm:text-base font-medium group-hover:underline",children:n?"Sending verification code...":"Please verify your email address to complete your profile and unlock all features."})]}),e.jsx("button",{onClick:d=>{d.stopPropagation(),a(!0)},className:"flex-shrink-0 p-1 rounded-full hover:bg-red-800 transition-colors","aria-label":"Dismiss",children:e.jsx(ze,{className:"h-5 w-5"})})]})})})}function zx({open:t,onComplete:s}){const[,r]=de(),[a,n]=i.useState(""),[o,l]=i.useState(""),[c,d]=i.useState(""),[m,u]=i.useState(!1),f=async h=>{if(h.preventDefault(),d(""),!a){d("Please enter your birthdate");return}if(!o){d("Please select your gender");return}const b=new Date(a),g=new Date;let v=g.getFullYear()-b.getFullYear();const p=g.getMonth()-b.getMonth();if((p<0||p===0&&g.getDate()<b.getDate())&&v--,v<18){d("You must be at least 18 years old to use SpreadLov");return}u(!0);try{const x=await fetch("/api/user/complete-profile",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({birthdate:a,gender:o})});if(!x.ok){const y=await x.json();throw new Error(y.message||"Failed to complete profile")}s(),r("/discover")}catch(x){d(x instanceof Error?x.message:"Failed to complete profile")}finally{u(!1)}};return e.jsx(cs,{open:t,onOpenChange:()=>{},children:e.jsxs($t,{className:"sm:max-w-[425px] max-w-[95vw] p-0 gap-0 overflow-hidden",children:[e.jsxs(zt,{className:"p-6 pb-4 bg-gradient-to-r from-pink-500/10 via-purple-500/10 to-blue-500/10 border-b",children:[e.jsx("div",{className:"flex items-center justify-center mb-3",children:e.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-pink-500 to-purple-600 flex items-center justify-center",children:e.jsx(ge,{className:"h-8 w-8 text-white"})})}),e.jsx(Ut,{className:"text-2xl sm:text-3xl font-bold text-center",children:"Complete Your Profile"}),e.jsx(Us,{className:"text-center text-sm sm:text-base",children:"To get started on SpreadLov, we need a couple more details about you"})]}),e.jsxs("form",{onSubmit:f,className:"p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs(Z,{htmlFor:"birthdate",className:"text-sm sm:text-base font-semibold flex items-center gap-2",children:[e.jsx(yt,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Birthdate"]}),e.jsx(re,{id:"birthdate",type:"date",value:a,onChange:h=>n(h.target.value),max:new Date(new Date().setFullYear(new Date().getFullYear()-18)).toISOString().split("T")[0],required:!0,className:"h-11 sm:h-12 text-base"}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"You must be at least 18 years old"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(Z,{className:"text-sm sm:text-base font-semibold flex items-center gap-2",children:[e.jsx(ge,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),"Gender"]}),e.jsxs(ba,{value:o,onValueChange:l,required:!0,children:[e.jsxs("div",{className:"flex items-center space-x-3 rounded-lg border bg-background/50 p-3 sm:p-4 hover:bg-accent/50 transition-all cursor-pointer hover:border-primary/50",children:[e.jsx(rt,{value:"male",id:"male",className:"h-4 w-4 sm:h-5 sm:w-5"}),e.jsx(Z,{htmlFor:"male",className:"flex-1 cursor-pointer font-medium text-sm sm:text-base",children:"Male"})]}),e.jsxs("div",{className:"flex items-center space-x-3 rounded-lg border bg-background/50 p-3 sm:p-4 hover:bg-accent/50 transition-all cursor-pointer hover:border-primary/50",children:[e.jsx(rt,{value:"female",id:"female",className:"h-4 w-4 sm:h-5 sm:w-5"}),e.jsx(Z,{htmlFor:"female",className:"flex-1 cursor-pointer font-medium text-sm sm:text-base",children:"Female"})]}),e.jsxs("div",{className:"flex items-center space-x-3 rounded-lg border bg-background/50 p-3 sm:p-4 hover:bg-accent/50 transition-all cursor-pointer hover:border-primary/50",children:[e.jsx(rt,{value:"other",id:"other",className:"h-4 w-4 sm:h-5 sm:w-5"}),e.jsx(Z,{htmlFor:"other",className:"flex-1 cursor-pointer font-medium text-sm sm:text-base",children:"Other"})]})]})]}),c&&e.jsx("div",{className:"p-3 sm:p-4 bg-destructive/10 border border-destructive/20 rounded-lg",children:e.jsx("p",{className:"text-sm sm:text-base text-destructive font-medium",children:c})}),e.jsx(L,{type:"submit",className:"w-full h-11 sm:h-12 text-base sm:text-lg font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all",disabled:m,children:m?"Saving...":"Continue to SpreadLov"})]})]})})}function Ux(){const{user:t}=be(),[s]=de(),r=()=>{rs.invalidateQueries({queryKey:["/api/user"]})};return e.jsxs("div",{className:"relative",children:[e.jsx($x,{}),t&&t.needsProfileCompletion&&e.jsx(zx,{open:!0,onComplete:r}),e.jsx("main",{children:e.jsxs(rd,{children:[e.jsx(ke,{path:"/verify-email",component:qx}),e.jsx(ft,{path:"/discover",component:fp}),e.jsx(ft,{path:"/messages",component:lx}),e.jsx(ft,{path:"/notifications",component:fx}),e.jsx(ft,{path:"/profile/:userId",component:jx}),e.jsx(ft,{path:"/profile",component:yx}),e.jsx(ft,{path:"/chat/:userId",component:Sx}),e.jsx(ft,{path:"/",component:Oh}),e.jsx(ke,{path:"/auth",component:Wh}),e.jsx(ke,{path:"/forgot-password",component:Vh}),e.jsx(ke,{path:"/delete-account",component:Bh}),e.jsx(ke,{path:"/terms",component:Hh}),e.jsx(ke,{path:"/about",component:Kh}),e.jsx(ke,{path:"/privacy-policy",component:Yh}),e.jsx(ke,{path:"/safety-standards",component:Gh}),e.jsx(ke,{path:"/subscribe",component:Qh}),e.jsx(ke,{component:oh})]})}),t&&s!=="/verify-email"&&e.jsx(ah,{})]})}function Wx(){return e.jsx(Ed,{client:rs,children:e.jsx(ih,{children:e.jsx(wh,{children:e.jsxs(Zm,{children:[e.jsx(gm,{}),e.jsx(Om,{}),e.jsx(Ux,{})]})})})})}Lc.createRoot(document.getElementById("root")).render(e.jsx(Wx,{}));
